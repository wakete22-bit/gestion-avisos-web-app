import{a as hn}from"./chunk-BBKUQSPP.js";import{a as yt}from"./chunk-HA4JQPJK.js";import{a as Mn}from"./chunk-UG6LXTTM.js";import{a as Q}from"./chunk-RWPMHNGU.js";import{a as kt}from"./chunk-5X33JDRI.js";import{a as Et}from"./chunk-JOFRD2OP.js";import{a as vn}from"./chunk-S7Q5O5P3.js";import"./chunk-4YIX43F7.js";import{a as xt,b as Ot,c as ht}from"./chunk-SQENFB4J.js";import{B as _n,C as rt,D as st,E as L,Ea as Mt,Ha as ft,J as lt,Na as Y,Oa as Cn,Pa as Pt,Qa as K,Sa as en,T as gt,U as dt,Va as On,Y as pt,a as T,aa as mt,b as Jn,ba as G,c as nt,d as tt,e as et,ea as _t,f as dn,fa as bt,i as pn,ia as ut,k as ot,ma as W,oa as Ct,q as it,qa as vt,w as at,xa as bn,y as mn,z as ct,za as un}from"./chunk-CPCGS7XX.js";import"./chunk-ZYOLHR5D.js";import{a as wt}from"./chunk-COJJC4NP.js";import{c as Dn,d as jn,e as Un,f as Rn,g as Bn,h as gn,i as Ln,j as qn,l as Hn,m as Gn,n as Wn,o as Yn,p as Kn,r as Qn,s as H,w as U}from"./chunk-S56F5NGH.js";import"./chunk-37L2DCME.js";import{a as Zn,b as Xn}from"./chunk-CSU5APV4.js";import{$ as V,$a as $,A,Da as g,Ea as O,F as N,Fa as E,Ga as q,Ha as Fn,I as F,M as f,N as P,Qa as Nn,Ra as xn,Sa as cn,Ua as rn,Xa as Tn,Y as s,Z as z,_a as Vn,ab as D,b as Sn,c as B,da as x,db as sn,f as X,g as J,gb as j,ia as _,j as nn,ja as Pn,ka as I,kb as ln,la as In,ma as i,na as a,oa as u,pa as on,qa as an,s as tn,sa as k,sb as $n,t as zn,ta as C,ua as m,v as An}from"./chunk-ICGOMMV6.js";import"./chunk-3SUPCH3T.js";import"./chunk-QUJFQN2Y.js";import"./chunk-OGR5ZLHR.js";import"./chunk-CUT3BV6K.js";import"./chunk-73IMGLZG.js";import"./chunk-G2E2NLL6.js";import"./chunk-ILJSYHS4.js";import"./chunk-OAP23YNX.js";import"./chunk-YYM7CL2V.js";import"./chunk-5LR2YXX6.js";import"./chunk-WDU4QEMV.js";import"./chunk-CKP3SGE2.js";import"./chunk-ULLEADC5.js";import"./chunk-2ELISCRH.js";import"./chunk-BV4CTHEE.js";import"./chunk-JILLMCFB.js";import"./chunk-WWN5RJW3.js";import"./chunk-H3LYBNOM.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-NBD2MYJO.js";import"./chunk-3SBX7V6R.js";import"./chunk-SQKDQBOS.js";import"./chunk-SWRJZAEI.js";import"./chunk-JCSW2JUV.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-36KMLI7A.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as En,b as kn,k as w}from"./chunk-CRC5ZNR6.js";function Ut(c,l){if(c&1&&(i(0,"div",15)(1,"span",16),g(2,"Descripci\xF3n:"),a(),i(3,"span",17),g(4),a()()),c&2){let o=m();s(4),O(o.aviso.descripcion_problema)}}function Rt(c,l){if(c&1&&(i(0,"li"),g(1),a()),c&2){let o=l.$implicit;s(),O(o)}}function Bt(c,l){if(c&1&&(i(0,"div",28)(1,"h5"),g(2,"\u26A0\uFE0F Elementos que ser\xE1n afectados:"),a(),i(3,"ul",29),x(4,Rt,2,1,"li",30),a(),i(5,"p",10)(6,"strong"),g(7,"IMPORTANTE:"),a(),g(8," Estos elementos tambi\xE9n se ver\xE1n afectados por la eliminaci\xF3n. "),a()()),c&2){let o=m();s(4),_("ngForOf",o.dependencias)}}var zt=(()=>{let l=class l{constructor(n){this.modalController=n,T({warningOutline:On,closeOutline:L,trashOutline:en})}ngOnInit(){T({closeOutline:L,trashOutline:en,warningOutline:On,alertCircleOutline:dn})}confirmarEliminacion(){return w(this,null,function*(){yield this.modalController.dismiss({confirmado:!0},"confirm")})}cancelarEliminacion(){return w(this,null,function*(){yield this.modalController.dismiss({confirmado:!1},"cancel")})}cerrarModal(){return w(this,null,function*(){yield this.modalController.dismiss({confirmado:!1},"cancel")})}getEstadoClass(n){switch(n){case"Pendiente":return"pendiente";case"En curso":return"en-curso";case"Pendiente de presupuesto":return"pendiente-presupuesto";case"Listo para facturar":return"listo-para-facturar";case"Completado":return"completado";case"Cancelado":return"cancelado";default:return""}}};l.\u0275fac=function(t){return new(t||l)(z(H))},l.\u0275cmp=V({type:l,selectors:[["app-confirmar-eliminacion-aviso-modal"]],inputs:{aviso:"aviso",dependencias:"dependencias"},decls:78,vars:15,consts:[[1,"header-content"],[1,"warning-icon"],["name","warning-outline"],[1,"close-button",3,"click"],["name","close-outline"],[1,"modal-body"],[1,"modal-content"],[1,"warning-section"],[1,"warning-circle"],["name","trash-outline"],[1,"warning-text"],[1,"aviso-details"],[1,"aviso-card"],[1,"aviso-header"],[1,"aviso-info"],[1,"info-row"],[1,"label"],[1,"value"],["class","info-row",4,"ngIf"],[1,"value","estado-value"],[1,"value","urgencia-value"],[1,"consequences-section"],[1,"consequences-card"],[1,"consequences-list"],["class","dependencies-warning",4,"ngIf"],[1,"button-group"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"dependencies-warning"],[1,"dependencies-list"],[4,"ngFor","ngForOf"]],template:function(t,e){t&1&&(i(0,"ion-header")(1,"ion-toolbar")(2,"div",0)(3,"div",1),u(4,"ion-icon",2),a(),i(5,"h2"),g(6,"Confirmar eliminaci\xF3n"),a(),i(7,"button",3),C("click",function(){return e.cerrarModal()}),u(8,"ion-icon",4),a()()()(),i(9,"ion-content",5)(10,"div",6)(11,"div",7)(12,"div",8),u(13,"ion-icon",9),a(),i(14,"h3"),g(15,"\xBFEst\xE1s seguro de que quieres eliminar este aviso?"),a(),i(16,"p",10),g(17,"Esta acci\xF3n no se puede deshacer y eliminar\xE1 permanentemente el aviso y todas sus fotos asociadas."),a()(),i(18,"div",11)(19,"div",12)(20,"div",13)(21,"h4"),g(22,"Detalles del aviso"),a()(),i(23,"div",14)(24,"div",15)(25,"span",16),g(26,"N\xFAmero:"),a(),i(27,"span",17),g(28),a()(),i(29,"div",15)(30,"span",16),g(31,"Cliente:"),a(),i(32,"span",17),g(33),a()(),x(34,Ut,5,1,"div",18),i(35,"div",15)(36,"span",16),g(37,"Estado:"),a(),i(38,"span",19),g(39),a()(),i(40,"div",15)(41,"span",16),g(42,"Direcci\xF3n:"),a(),i(43,"span",17),g(44),a()(),i(45,"div",15)(46,"span",16),g(47,"Urgencia:"),a(),i(48,"span",20),g(49),a()(),i(50,"div",15)(51,"span",16),g(52,"Fecha creaci\xF3n:"),a(),i(53,"span",17),g(54),cn(55,"date"),a()()()()(),i(56,"div",21)(57,"div",22)(58,"h4"),g(59,"Consecuencias de la eliminaci\xF3n:"),a(),i(60,"ul",23)(61,"li"),g(62,"El aviso se eliminar\xE1 permanentemente de la base de datos"),a(),i(63,"li"),g(64,"Todas las fotos asociadas al aviso ser\xE1n eliminadas"),a(),i(65,"li"),g(66,"No se podr\xE1 recuperar la informaci\xF3n del aviso"),a(),i(67,"li"),g(68,"Se perder\xE1 el historial completo del servicio"),a()(),x(69,Bt,9,1,"div",24),a()()()(),i(70,"ion-footer")(71,"ion-toolbar")(72,"div",25)(73,"button",26),C("click",function(){return e.cancelarEliminacion()}),g(74," Cancelar "),a(),i(75,"button",27),C("click",function(){return e.confirmarEliminacion()}),u(76,"ion-icon",9),g(77," Eliminar permanentemente "),a()()()()),t&2&&(s(28),O(e.aviso.numero_secuencial||"N/A"),s(5),O(e.aviso.nombre_cliente_aviso),s(),_("ngIf",e.aviso.descripcion_problema),s(4),In(e.getEstadoClass(e.aviso.estado)),s(),E(" ",e.aviso.estado," "),s(5),O(e.aviso.direccion_cliente_aviso||"No especificada"),s(4),I("alta",e.aviso.es_urgente||e.aviso.urgencia==="Alta"),s(),E(" ",e.aviso.es_urgente||e.aviso.urgencia==="Alta"?"Alta":"Normal"," "),s(5),O(rn(55,12,e.aviso.fecha_creacion,"dd/MM/yyyy")),s(15),_("ngIf",e.dependencias&&e.dependencias.length>0))},dependencies:[U,j,$,D,sn,qn,Qn,gn,Ln],styles:['@charset "UTF-8";ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #FEF2F2;--border-color: #FECACA;--color: #DC2626}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#fee2e2;border-radius:50%}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#dc2626}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#dc2626;flex:1}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#dc2626;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background:#fee2e2;transform:scale(1.1)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}ion-content[_ngcontent-%COMP%]{--background: #FAFAFA;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0}ion-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex;flex-direction:column;min-height:0}ion-content[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{flex:1;overflow:auto;position:relative;min-height:0;height:100%;padding:24px}.warning-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:24px;background:#fef2f2;border-radius:16px;border:1px solid #FECACA}.warning-section[_ngcontent-%COMP%]   .warning-circle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:80px;height:80px;background:#fee2e2;border-radius:50%;margin:0 auto 20px}.warning-section[_ngcontent-%COMP%]   .warning-circle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px;color:#dc2626}.warning-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:24px;font-weight:600;color:#dc2626}.warning-section[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#991b1b;line-height:1.5}.aviso-details[_ngcontent-%COMP%]{margin-bottom:32px}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #E5E7EB;overflow:hidden;box-shadow:0 1px 3px #0000001a}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-header[_ngcontent-%COMP%]{background:#f9fafb;padding:16px 20px;border-bottom:1px solid #E5E7EB}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#374151}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]{padding:20px}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #F3F4F6}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#6b7280}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#111827;text-align:right;max-width:60%}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.estado-value.pendiente[_ngcontent-%COMP%]{color:#dc2626;font-weight:700}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.estado-value.en-curso[_ngcontent-%COMP%]{color:#d97706;font-weight:700}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.estado-value.pendiente-presupuesto[_ngcontent-%COMP%]{color:#3b82f6;font-weight:700}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.estado-value.listo-para-facturar[_ngcontent-%COMP%]{color:#059669;font-weight:700}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.estado-value.completado[_ngcontent-%COMP%]{color:#10b981;font-weight:700}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.estado-value.cancelado[_ngcontent-%COMP%]{color:#6b7280;font-weight:700}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.urgencia-value.alta[_ngcontent-%COMP%]{color:#dc2626;font-weight:700}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #E5E7EB;padding:20px;box-shadow:0 1px 3px #0000001a}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600;color:#374151;display:flex;align-items:center;gap:8px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f";font-size:18px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   .consequences-list[_ngcontent-%COMP%]{margin:0;padding:0 0 0 20px;list-style:none}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   .consequences-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;margin-bottom:12px;font-size:14px;color:#6b7280;line-height:1.5}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   .consequences-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2022";color:#dc2626;font-weight:700;position:absolute;left:-20px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   .consequences-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #FFFFFF;--border-color: #E5E7EB}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px;justify-content:flex-end}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:8px;font-size:14px;font-weight:500;display:flex;align-items:center;gap:8px;cursor:pointer;transition:all .2s ease;border:none;min-height:44px;width:50%}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151;border:1px solid #D1D5DB}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e5e7eb;border-color:#9ca3af}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#dc2626;color:#fff;border:1px solid #DC2626}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#b91c1c;border-color:#b91c1c}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:active:not(:disabled){background-color:#991b1b}@media (max-width: 768px){ion-content[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:16px}.warning-section[_ngcontent-%COMP%]{padding:20px;margin-bottom:24px}.warning-section[_ngcontent-%COMP%]   .warning-circle[_ngcontent-%COMP%]{width:60px;height:60px;margin-bottom:16px}.warning-section[_ngcontent-%COMP%]   .warning-circle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:30px}.warning-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;margin-bottom:12px}.warning-section[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{font-size:14px}.aviso-details[_ngcontent-%COMP%]{margin-bottom:24px}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]{padding:16px}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{padding:10px 0}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:13px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]{padding:16px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:15px;margin-bottom:12px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   .consequences-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:13px;margin-bottom:10px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{gap:12px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:13px;min-height:40px}}@media (max-width: 480px){ion-content[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:12px}.warning-section[_ngcontent-%COMP%]{padding:16px;margin-bottom:20px}.warning-section[_ngcontent-%COMP%]   .warning-circle[_ngcontent-%COMP%]{width:50px;height:50px;margin-bottom:12px}.warning-section[_ngcontent-%COMP%]   .warning-circle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.warning-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.warning-section[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{font-size:13px}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]{padding:12px}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{padding:8px 0}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:12px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]{padding:12px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   .consequences-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;margin-bottom:8px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{flex-direction:row;gap:8px;padding:0 15px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:50%;justify-content:center;padding:5px 20px}}']});let c=l;return c})();var fn=(()=>{let l=class l{constructor(n,t){this.http=n,this.mapboxService=t,this.GOOGLE_MAPS_API_KEY="YOUR_GOOGLE_MAPS_API_KEY",this.GOOGLE_MAPS_API_URL="https://maps.googleapis.com/maps/api/directions/json"}calcularRuta(n,t){if(!n||t.length===0)return J({distancia:"Ubicaci\xF3n requerida",tiempo:"Ubicaci\xF3n requerida",paradas:t.length,tieneUbicacion:!!n,distanciaKm:0,tiempoMinutos:0});let e=this.extraerCoordenadasDeAvisos(n,t);return e.length>=2?new Sn(r=>{this.mapboxService.createRoute(e).then(d=>{let p={distancia:this.formatearDistancia(d.totalDistance),tiempo:this.formatearTiempo(d.totalDuration),paradas:t.length,tieneUbicacion:!0,distanciaKm:d.totalDistance/1e3,tiempoMinutos:d.totalDuration/60};r.next(p),r.complete()}).catch(d=>{console.error("Error calculando ruta con Mapbox:",d),r.next(this.estimacionMejorada(n,t)),r.complete()})}):J(this.estimacionMejorada(n,t))}procesarRespuestaGoogleMaps(n,t){if(n.status!=="OK"||!n.routes||n.routes.length===0)return this.estimacionRuta(t);let e=n.routes[0],r=e.legs.reduce((p,b)=>p+b.distance.value,0),d=e.legs.reduce((p,b)=>p+b.duration.value,0);return{distancia:this.formatearDistancia(r),tiempo:this.formatearTiempo(d),paradas:t,tieneUbicacion:!0,distanciaKm:r/1e3,tiempoMinutos:d/60}}formatearDistancia(n){if(n<1e3)return`${n} m`;{let t=n/1e3;return t<10?`${t.toFixed(1)} km`:`${Math.round(t)} km`}}formatearTiempo(n){let t=n/60;if(t<60)return`${Math.round(t)} min`;{let e=Math.floor(t/60),r=Math.round(t%60);return r>0?`${e}h ${r}min`:`${e}h`}}estimacionRuta(n){let t,e;return n===1?(t=15,e=25):n<=3?(t=25,e=45):n<=5?(t=40,e=75):(t=60,e=105),{distancia:`~${t} km`,tiempo:this.formatearTiempo(e*60),paradas:n,tieneUbicacion:!0,distanciaKm:t,tiempoMinutos:e}}extraerCoordenadasDeAvisos(n,t){let e=[{latitude:n.latitude,longitude:n.longitude,address:"Ubicaci\xF3n actual"}];for(let r of t){let d=r.direccion_cliente_aviso;if(d){let p=this.obtenerCoordenadasPorDireccion(d);p&&e.push({latitude:p.lat,longitude:p.lng,address:d})}}return e}obtenerCoordenadasPorDireccion(n){let t=n.toLowerCase(),e={madrid:{lat:40.4168,lng:-3.7038},valencia:{lat:39.4699,lng:-.3763},barcelona:{lat:41.3851,lng:2.1734},sevilla:{lat:37.3891,lng:-5.9845},bilbao:{lat:43.2627,lng:-2.9253},zaragoza:{lat:41.6488,lng:-.8891},m\u00E1laga:{lat:36.7202,lng:-4.4203},murcia:{lat:37.9922,lng:-1.1307},palma:{lat:39.5696,lng:2.6502},"las palmas":{lat:28.1248,lng:-15.43},alicante:{lat:38.3452,lng:-.481},c\u00F3rdoba:{lat:37.8882,lng:-4.7794},valladolid:{lat:41.6523,lng:-4.7245},vigo:{lat:42.2406,lng:-8.7207},gij\u00F3n:{lat:43.5357,lng:-5.6615},granada:{lat:37.1773,lng:-3.5986},salamanca:{lat:40.9701,lng:-5.6635},burgos:{lat:42.3409,lng:-3.6997},albacete:{lat:38.9977,lng:-1.8541},le\u00F3n:{lat:42.5994,lng:-5.5667},c\u00E1diz:{lat:36.5298,lng:-6.2934},huelva:{lat:37.2578,lng:-6.9512},santander:{lat:43.4623,lng:-3.8099},castell\u00F3n:{lat:39.9864,lng:-.0513},tarragona:{lat:41.1189,lng:1.2445},pamplona:{lat:42.8178,lng:-1.6442},almer\u00EDa:{lat:36.8381,lng:-2.4597},lugo:{lat:43.0099,lng:-7.556},ourense:{lat:42.3356,lng:-7.8639},pontevedra:{lat:42.431,lng:-8.6444},palencia:{lat:42.0095,lng:-4.529},zamora:{lat:41.5035,lng:-5.7448},segovia:{lat:40.9429,lng:-4.1088},soria:{lat:41.7665,lng:-2.479},\u00E1vila:{lat:40.6566,lng:-4.6812},guadalajara:{lat:40.6292,lng:-3.1614},cuenca:{lat:40.0718,lng:-2.134},toledo:{lat:39.8628,lng:-4.0273},"ciudad real":{lat:38.9861,lng:-3.9272},ja\u00E9n:{lat:37.7796,lng:-3.7849},c\u00E1ceres:{lat:39.4753,lng:-6.3724},badajoz:{lat:38.8794,lng:-6.9707},m\u00E9rida:{lat:38.916,lng:-6.3376},teruel:{lat:40.3454,lng:-1.1065},huesca:{lat:42.1364,lng:-.4087},lleida:{lat:41.6148,lng:.6267},gerona:{lat:41.9794,lng:2.8214},logro\u00F1o:{lat:42.4627,lng:-2.4449}};for(let[d,p]of Object.entries(e))if(t.includes(d))return p;let r=this.extraerCodigoPostal(n);return r?this.obtenerCoordenadasPorCodigoPostal(r):null}extraerCodigoPostal(n){let t=n.match(/\b\d{5}\b/);return t?t[0]:null}obtenerCoordenadasPorCodigoPostal(n){let t=n.substring(0,2);return{"01":{lat:42.8467,lng:-2.6716},"02":{lat:38.9977,lng:-1.8541},"03":{lat:38.3452,lng:-.481},"04":{lat:36.8381,lng:-2.4597},"05":{lat:40.9701,lng:-5.6635},"06":{lat:38.8794,lng:-6.9707},"07":{lat:39.5696,lng:2.6502},"08":{lat:41.3851,lng:2.1734},"09":{lat:42.3409,lng:-3.6997},10:{lat:39.4753,lng:-6.3724},11:{lat:36.5298,lng:-6.2934},12:{lat:39.9864,lng:-.0513},13:{lat:38.9861,lng:-3.9272},14:{lat:37.8882,lng:-4.7794},15:{lat:43.3623,lng:-8.4115},16:{lat:40.0718,lng:-2.134},17:{lat:41.9794,lng:2.8214},18:{lat:37.1773,lng:-3.5986},19:{lat:40.6292,lng:-3.1614},20:{lat:43.2627,lng:-2.9253},21:{lat:37.2578,lng:-6.9512},22:{lat:42.1364,lng:-.4087},23:{lat:37.7796,lng:-3.7849},24:{lat:42.5994,lng:-5.5667},25:{lat:41.6148,lng:.6267},26:{lat:42.4627,lng:-2.4449},27:{lat:43.0099,lng:-7.556},28:{lat:40.4168,lng:-3.7038},29:{lat:36.7202,lng:-4.4203},30:{lat:37.9922,lng:-1.1307},31:{lat:42.8178,lng:-1.6442},32:{lat:42.3356,lng:-7.8639},33:{lat:43.3614,lng:-5.8593},34:{lat:42.0095,lng:-4.529},35:{lat:28.4698,lng:-16.2549},36:{lat:42.431,lng:-8.6444},37:{lat:40.9701,lng:-5.6635},38:{lat:28.1248,lng:-15.43},39:{lat:43.4623,lng:-3.8099},40:{lat:40.9429,lng:-4.1088},41:{lat:37.3891,lng:-5.9845},42:{lat:41.7665,lng:-2.479},43:{lat:41.1189,lng:1.2445},44:{lat:40.3454,lng:-1.1065},45:{lat:39.8628,lng:-4.0273},46:{lat:39.4699,lng:-.3763},47:{lat:41.6523,lng:-4.7245},48:{lat:43.2627,lng:-2.9253},49:{lat:41.5035,lng:-5.7448},50:{lat:41.6488,lng:-.8891}}[t]||null}estimacionMejorada(n,t){let e=this.extraerCoordenadasDeAvisos(n,t);if(e.length>=2){let r=this.calcularDistanciaTotal(e),d=this.estimacionTiempoPorDistancia(r);return{distancia:this.formatearDistancia(r*1e3),tiempo:this.formatearTiempo(d*60),paradas:t.length,tieneUbicacion:!0,distanciaKm:r,tiempoMinutos:d}}return this.estimacionRuta(t.length)}calcularDistanciaTotal(n){if(n.length<2)return 0;let t=0;for(let e=0;e<n.length-1;e++)t+=this.calcularDistanciaHaversine(n[e],n[e+1]);return Math.round(t*100)/100}calcularDistanciaHaversine(n,t){let r=this.toRad(t.latitude-n.latitude),d=this.toRad(t.longitude-n.longitude),p=this.toRad(n.latitude),b=this.toRad(t.latitude),v=Math.sin(r/2)*Math.sin(r/2)+Math.sin(d/2)*Math.sin(d/2)*Math.cos(p)*Math.cos(b);return 6371*(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)))}toRad(n){return n*(Math.PI/180)}estimacionTiempoPorDistancia(n){let t=n>50?80:40;return Math.round(n/t*60)}obtenerUbicacionActual(){return new Promise(n=>{if(!navigator.geolocation){console.error("Geolocalizaci\xF3n no soportada"),n(null);return}navigator.geolocation.getCurrentPosition(t=>{n({latitude:t.coords.latitude,longitude:t.coords.longitude})},t=>{console.error("Error obteniendo ubicaci\xF3n:",t),n(null)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})}};l.\u0275fac=function(t){return new(t||l)(F(ln),F(Q))},l.\u0275prov=N({token:l,factory:l.\u0275fac,providedIn:"root"});let c=l;return c})();function qt(c,l){c&1&&(i(0,"div",16)(1,"div",17),u(2,"ion-spinner",18),i(3,"h3"),g(4,"Calculando ruta..."),a(),i(5,"p"),g(6,"Obteniendo la mejor ruta para tus destinos"),a()()())}function Ht(c,l){if(c&1&&(i(0,"div",35)(1,"div",36),g(2),a(),i(3,"div",37)(4,"div",38),g(5),a(),i(6,"div",39),g(7),a()()()),c&2){let o=l.$implicit,n=l.index;s(2),O(n+1),s(3),O(o.nombre_cliente_aviso||"Cliente"),s(2),O(o.direccion_cliente_aviso)}}function Gt(c,l){if(c&1&&(i(0,"div",32)(1,"h4"),g(2,"Destinos seleccionados:"),a(),i(3,"div",33),x(4,Ht,8,3,"div",34),a()()),c&2){let o=m(2);s(4),_("ngForOf",o.avisosSeleccionados)}}function Wt(c,l){if(c&1&&(i(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23),u(5,"ion-icon",24),a(),i(6,"div",25)(7,"span",26),g(8,"Destinos"),a(),i(9,"span",27),g(10),a()()(),i(11,"div",22)(12,"div",23),u(13,"ion-icon",28),a(),i(14,"div",25)(15,"span",26),g(16,"Distancia"),a(),i(17,"span",27),g(18),a()()()(),i(19,"div",29)(20,"div",23),u(21,"ion-icon",30),a(),i(22,"div",25)(23,"span",26),g(24,"Tiempo estimado"),a(),i(25,"span",27),g(26),a()()()(),x(27,Gt,5,1,"div",31),a()),c&2){let o=m();s(10),q("",o.rutaInfo.paradas," parada",o.rutaInfo.paradas>1?"s":"",""),s(8),O(o.rutaInfo.distancia),s(8),O(o.rutaInfo.tiempo),s(),_("ngIf",o.avisosSeleccionados.length>0)}}var Ft=(()=>{let l=class l{constructor(n,t){this.modalController=n,this.routeCalculationService=t,this.avisosSeleccionados=[],this.calculandoRuta=!0,this.rutaInfo={distancia:"Calculando...",tiempo:"Calculando...",paradas:0,tieneUbicacion:!1,distanciaKm:0,tiempoMinutos:0},T({closeOutline:L,locationOutline:G,navigateOutline:W,speedometerOutline:Y,timeOutline:K,logoGoogle:bt,logoApple:_t,playOutline:un})}ngOnInit(){this.calcularInformacionRuta()}calcularInformacionRuta(){return w(this,null,function*(){try{this.calculandoRuta=!0;let n=yield this.routeCalculationService.obtenerUbicacionActual();this.routeCalculationService.calcularRuta(n,this.avisosSeleccionados).subscribe({next:t=>{this.rutaInfo=t,this.calculandoRuta=!1},error:t=>{console.error("Error calculando informaci\xF3n de ruta:",t),this.rutaInfo={distancia:"Error al calcular",tiempo:"Error al calcular",paradas:this.avisosSeleccionados.length,tieneUbicacion:!!n,distanciaKm:0,tiempoMinutos:0},this.calculandoRuta=!1}})}catch(n){console.error("Error calculando informaci\xF3n de ruta:",n),this.rutaInfo={distancia:"Error al calcular",tiempo:"Error al calcular",paradas:this.avisosSeleccionados.length,tieneUbicacion:!1,distanciaKm:0,tiempoMinutos:0},this.calculandoRuta=!1}})}abrirGoogleMaps(){return w(this,null,function*(){try{console.log("\u{1F5FA}\uFE0F Abriendo Google Maps con",this.avisosSeleccionados.length,"avisos");let n=navigator.userAgent,t=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n),e=/iPad|iPhone|iPod/.test(n),r=/Android/.test(n);console.log("Google Maps Debug:",{userAgent:n,isMobile:t,isIOS:e,isAndroid:r,avisosCount:this.avisosSeleccionados.length}),console.log("Obteniendo ubicaci\xF3n actual...");let d=yield this.obtenerUbicacionActual();if(!d){if(console.log("\u274C No se pudo obtener la ubicaci\xF3n actual"),console.error("No se pudo obtener la ubicaci\xF3n actual"),!confirm(`\u{1F512} No se pudo obtener tu ubicaci\xF3n actual.

Esto puede ser porque:
\u2022 El permiso de ubicaci\xF3n est\xE1 denegado
\u2022 El GPS est\xE1 desactivado
\u2022 No hay se\xF1al GPS

\xBFQuieres continuar sin incluir tu ubicaci\xF3n como punto de partida?

Nota: La ruta ser\xE1 solo entre los destinos seleccionados.`)){console.log("\u274C Usuario cancel\xF3 la operaci\xF3n");return}console.log("\u{1F4CD} Continuando sin ubicaci\xF3n actual")}console.log(d?`\u2705 Ubicaci\xF3n obtenida: ${d.latitude}, ${d.longitude}`:"\u{1F4CD} Sin ubicaci\xF3n actual, usando solo destinos");let p=this.construirUrlGoogleMaps(d),b=this.construirUrlGoogleMapsWeb(d);if(console.log("Google Maps URLs:",{nativeUrl:p,webUrl:b,urlLength:p.length}),t){console.log("\u{1F4F1} Dispositivo m\xF3vil detectado");let v=!1;r||e?(console.log(`\u{1F680} Intentando abrir app nativa (${r?"Android":"iOS"})`),console.log(`URL nativa: ${p}`),console.log("\u{1F680} Intentando abrir Google Maps nativo..."),this.abrirAppNativa(p,b,"Google Maps")):(console.log("\u{1F310} Otro m\xF3vil detectado, usando navegador"),window.open(b,"_blank"))}else console.log("\u{1F5A5}\uFE0F Desktop detectado, abriendo en navegador"),window.open(b,"_blank");yield this.modalController.dismiss({opcion:"google"})}catch(n){let t=n instanceof Error?n.message:String(n);console.error("\u274C Error general:",t),console.error("Error al abrir Google Maps:",n)}})}abrirAppNativa(n,t,e){console.log("\u{1F4CD} Intentando abrir app nativa..."),console.log(`URL completa: ${n}`);try{console.log("\u{1F504} M\xE9todo 1: window.location..."),window.location.href=n,setTimeout(()=>{console.log("\u23F0 M\xE9todo 1 timeout, probando m\xE9todo 2..."),this.intentarMetodoAlternativo(n,t,e)},2e3)}catch(r){console.log(`\u274C Error en m\xE9todo 1: ${r}`),this.intentarMetodoAlternativo(n,t,e)}}intentarMetodoAlternativo(n,t,e){console.log("\u{1F504} M\xE9todo 2: Enlace directo...");try{let r=document.createElement("a");r.href=n,r.target="_blank",r.style.display="none",document.body.appendChild(r),r.click(),console.log("\u{1F4CD} Enlace clickeado"),setTimeout(()=>{console.log("\u23F0 M\xE9todo 2 timeout, probando m\xE9todo 3..."),document.body.removeChild(r),this.intentarMetodoIframe(n,t,e)},2e3)}catch(r){console.log(`\u274C Error en m\xE9todo 2: ${r}`),this.intentarMetodoIframe(n,t,e)}}intentarMetodoIframe(n,t,e){console.log("\u{1F504} M\xE9todo 3: Iframe...");try{let r=document.createElement("iframe");r.style.display="none",r.style.width="1px",r.style.height="1px",r.src=n,document.body.appendChild(r),console.log("\u{1F4CD} Iframe creado"),setTimeout(()=>{console.log("\u23F0 Todos los m\xE9todos fallaron, abriendo en navegador"),document.body.removeChild(r),window.open(t,"_blank")},2e3)}catch(r){console.log(`\u274C Error en m\xE9todo 3: ${r}`),console.log("\u{1F310} Abriendo en navegador como \xFAltimo recurso"),window.open(t,"_blank")}}abrirAppleMaps(){return w(this,null,function*(){try{console.log("\u{1F34E} Abriendo Apple Maps con",this.avisosSeleccionados.length,"avisos");let n=navigator.userAgent,t=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n),e=/iPad|iPhone|iPod/.test(n);console.log("Apple Maps Debug:",{userAgent:n,isMobile:t,isIOS:e,avisosCount:this.avisosSeleccionados.length}),console.log("Obteniendo ubicaci\xF3n actual...");let r=yield this.obtenerUbicacionActual();if(!r){if(console.log("\u274C No se pudo obtener la ubicaci\xF3n actual"),console.error("No se pudo obtener la ubicaci\xF3n actual"),!confirm(`\u{1F512} No se pudo obtener tu ubicaci\xF3n actual.

Esto puede ser porque:
\u2022 El permiso de ubicaci\xF3n est\xE1 denegado
\u2022 El GPS est\xE1 desactivado
\u2022 No hay se\xF1al GPS

\xBFQuieres continuar sin incluir tu ubicaci\xF3n como punto de partida?

Nota: La ruta ser\xE1 solo entre los destinos seleccionados.`)){console.log("\u274C Usuario cancel\xF3 la operaci\xF3n");return}console.log("\u{1F4CD} Continuando sin ubicaci\xF3n actual")}console.log(r?`\u2705 Ubicaci\xF3n obtenida: ${r.latitude}, ${r.longitude}`:"\u{1F4CD} Sin ubicaci\xF3n actual, usando solo destinos");let d=this.construirUrlAppleMaps(r),p=this.construirUrlAppleMapsWeb(r);console.log({nativeUrl:d,webUrl:p,urlLength:d.length}),t&&e?(console.log("\u{1F34E} iOS detectado, intentando abrir app nativa"),console.log(`URL nativa: ${d}`),console.log("\u{1F680} Intentando abrir Apple Maps nativo..."),this.abrirAppNativa(d,p,"Apple Maps")):(console.log(t?"\u{1F916} Android detectado, usando navegador":"\u{1F5A5}\uFE0F Desktop detectado, usando navegador"),window.open(p,"_blank")),yield this.modalController.dismiss({opcion:"apple"})}catch(n){let t=n instanceof Error?n.message:String(n);console.log(`\u274C Error general: ${t}`),console.error("Error al abrir Apple Maps:",n)}})}iniciarNavegacionApp(){return w(this,null,function*(){console.log("\u{1F680} Iniciando navegaci\xF3n en la app con",this.avisosSeleccionados.length,"avisos"),console.log("App Navegaci\xF3n",{avisosCount:this.avisosSeleccionados.length,avisos:this.avisosSeleccionados.map(n=>({id:n.id,direccion:n.direccion_cliente_aviso}))}),yield this.modalController.dismiss({opcion:"app"})})}cerrar(){return w(this,null,function*(){yield this.modalController.dismiss()})}obtenerUbicacionActual(){return w(this,null,function*(){return new Promise(n=>{if(!navigator.geolocation){console.error("Geolocalizaci\xF3n no soportada"),console.log("Ubicaci\xF3n","\u274C Geolocalizaci\xF3n no soportada en este navegador"),n(null);return}console.log("Ubicaci\xF3n","\u{1F30D} Solicitando permiso de ubicaci\xF3n..."),navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(t=>{if(console.log("Ubicaci\xF3n",`Estado de permiso: ${t.state}`),t.state==="denied"){console.log("Ubicaci\xF3n","\u274C Permiso de ubicaci\xF3n denegado. Ve a configuraci\xF3n del navegador para habilitarlo."),this.mostrarInstruccionesUbicacion(),n(null);return}t.state==="prompt"&&console.log("Ubicaci\xF3n","\u{1F4CD} Aparecer\xE1 una ventana del navegador pidiendo permiso de ubicaci\xF3n"),this.solicitarUbicacion(n)}).catch(()=>{console.log("Ubicaci\xF3n","\u{1F4CD} Solicitando ubicaci\xF3n directamente..."),this.solicitarUbicacion(n)}):(console.log("Ubicaci\xF3n","\u{1F4CD} Solicitando ubicaci\xF3n directamente..."),this.solicitarUbicacion(n))})})}solicitarUbicacion(n){console.log("Ubicaci\xF3n","\u{1F30D} Solicitando ubicaci\xF3n GPS..."),navigator.geolocation.getCurrentPosition(t=>{console.log("Ubicaci\xF3n",`\u2705 Ubicaci\xF3n obtenida: ${t.coords.latitude}, ${t.coords.longitude}`),n({latitude:t.coords.latitude,longitude:t.coords.longitude})},t=>{let e="",r=!1;switch(t.code){case t.PERMISSION_DENIED:e="Permiso de ubicaci\xF3n denegado por el usuario",r=!0;break;case t.POSITION_UNAVAILABLE:e="Ubicaci\xF3n no disponible (GPS desactivado o sin se\xF1al)";break;case t.TIMEOUT:e="Timeout al obtener ubicaci\xF3n (tard\xF3 m\xE1s de 15 segundos)";break;default:e=`Error desconocido: ${t.message}`;break}console.log("Ubicaci\xF3n",`\u274C Error: ${e}`),console.error("Error al obtener ubicaci\xF3n:",t),r&&this.mostrarInstruccionesUbicacion(),n(null)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})}verificarAppInstalada(n,t){return w(this,null,function*(){return new Promise(e=>{console.log(t,`\u{1F50D} Verificando si ${t} est\xE1 instalado...`);let r=n.includes("?")?n.split("?")[0]:n,d=document.createElement("a");d.href=r,d.target="_blank",d.style.display="none",document.body.appendChild(d);let p=!1,b=!1,v=setTimeout(()=>{p||(p=!0,console.log(t,`\u274C ${t} no est\xE1 instalado (timeout)`),document.body.removeChild(d),e(!1))},500),M=()=>{document.hidden&&!p&&(p=!0,b=!0,console.log(t,`\u2705 ${t} est\xE1 instalado (p\xE1gina oculta)`),clearTimeout(v),document.body.removeChild(d),document.removeEventListener("visibilitychange",M),window.removeEventListener("blur",h),e(!0))};document.addEventListener("visibilitychange",M);let h=()=>{p||(p=!0,b=!0,console.log(t,`\u2705 ${t} est\xE1 instalado (p\xE1gina perdi\xF3 foco)`),clearTimeout(v),document.body.removeChild(d),document.removeEventListener("visibilitychange",M),window.removeEventListener("blur",h),e(!0))};window.addEventListener("blur",h);try{d.click(),console.log(t,`\u{1F4CD} Enlace de prueba clickeado: ${r}`)}catch(y){p||(p=!0,console.log(t,`\u274C Error al hacer clic: ${y}`),clearTimeout(v),document.body.removeChild(d),e(!1))}})})}intentarAbrirAppAlternativo(n,t,e){console.log(e,"\u{1F504} M\xE9todo alternativo: Intentando con iframe...");try{let r=document.createElement("iframe");r.style.display="none",r.style.width="1px",r.style.height="1px",r.src=n,document.body.appendChild(r),console.log(e,"\u{1F4CD} Iframe creado, esperando respuesta..."),setTimeout(()=>{console.log(e,"\u23F0 M\xE9todo alternativo timeout: Abriendo en navegador"),document.body.removeChild(r),window.open(t,"_blank")},2e3);let d=()=>{document.hidden&&(console.log(e,"\u2705 App nativa abierta con m\xE9todo alternativo"),document.body.removeChild(r),document.removeEventListener("visibilitychange",d))};document.addEventListener("visibilitychange",d)}catch(r){let d=r instanceof Error?r.message:String(r);console.log(e,`\u274C Error en m\xE9todo alternativo: ${d}`),window.open(t,"_blank")}}mostrarInstruccionesUbicacion(){let n=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=/iPad|iPhone|iPod/.test(navigator.userAgent),e=/Android/.test(navigator.userAgent),r="";n?t?r=`
          \u{1F4F1} Para habilitar la ubicaci\xF3n en iOS:
          1. Ve a Configuraci\xF3n > Privacidad y Seguridad > Servicios de Ubicaci\xF3n
          2. Activa "Servicios de Ubicaci\xF3n"
          3. Busca tu navegador (Safari/Chrome) en la lista
          4. Selecciona "Permitir" o "Mientras uso la app"
          5. Recarga esta p\xE1gina e intenta de nuevo
        `:e?r=`
          \u{1F4F1} Para habilitar la ubicaci\xF3n en Android:
          1. Ve a Configuraci\xF3n > Ubicaci\xF3n
          2. Activa "Ubicaci\xF3n"
          3. En tu navegador, toca el \xEDcono de ubicaci\xF3n en la barra de direcciones
          4. Selecciona "Permitir" o "Permitir siempre"
          5. Recarga esta p\xE1gina e intenta de nuevo
        `:r=`
          \u{1F4F1} Para habilitar la ubicaci\xF3n en m\xF3vil:
          1. Ve a la configuraci\xF3n de tu navegador
          2. Busca "Ubicaci\xF3n" o "Permisos"
          3. Permite el acceso a la ubicaci\xF3n para este sitio
          4. Recarga la p\xE1gina e intenta de nuevo
        `:r=`
        \u{1F5A5}\uFE0F Para habilitar la ubicaci\xF3n en desktop:
        1. Busca el \xEDcono de ubicaci\xF3n en la barra de direcciones (\u{1F512} o \u{1F4CD})
        2. Haz clic en \xE9l y selecciona "Permitir"
        3. O ve a Configuraci\xF3n del navegador > Privacidad > Ubicaci\xF3n
        4. Permite el acceso para este sitio
        5. Recarga la p\xE1gina e intenta de nuevo
      `,console.log("Ubicaci\xF3n",r),alert(`\u{1F512} Permiso de Ubicaci\xF3n Requerido

${r}

Despu\xE9s de habilitar la ubicaci\xF3n, recarga la p\xE1gina e intenta de nuevo.`)}construirUrlGoogleMaps(n){let t=n?`${n.latitude},${n.longitude}`:null,e=this.avisosSeleccionados.map(h=>h.direccion_cliente_aviso?encodeURIComponent(h.direccion_cliente_aviso):null).filter(h=>h!==null),r=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),d=/iPad|iPhone|iPod/.test(navigator.userAgent),p=/Android/.test(navigator.userAgent);if(r){if(p){if(e.length===1)return`comgooglemaps://?daddr=${e[0]}&directionsmode=driving`;{let h=e[e.length-1],y=e.slice(0,-1).join("|"),S="https://www.google.com/maps/dir/?api=1";return t&&(S+=`&origin=${t}`),S+=`&destination=${h}`,y&&(S+=`&waypoints=${y}`),S+="&travelmode=driving&dir_action=navigate",S}}else if(d){if(e.length===1)return`comgooglemaps://?daddr=${e[0]}&directionsmode=driving`;{let h=e[e.length-1],y=e.slice(0,-1).join("|"),S="https://www.google.com/maps/dir/?api=1";return t&&(S+=`&origin=${t}`),S+=`&destination=${h}`,y&&(S+=`&waypoints=${y}`),S+="&travelmode=driving&dir_action=navigate",S}}}if(e.length===1){let h="https://www.google.com/maps/dir/?api=1";return t&&(h+=`&origin=${t}`),h+=`&destination=${e[0]}&travelmode=driving&dir_action=navigate`,h}let b=e[e.length-1],v=e.slice(0,-1).join("|"),M="https://www.google.com/maps/dir/?api=1";return t&&(M+=`&origin=${t}`),M+=`&destination=${b}`,v&&(M+=`&waypoints=${v}`),M+="&travelmode=driving&dir_action=navigate",console.log("URL de Google Maps construida:",M),M}construirUrlAppleMaps(n){let t=n?`${n.latitude},${n.longitude}`:null,e=this.avisosSeleccionados.map(M=>M.direccion_cliente_aviso?encodeURIComponent(M.direccion_cliente_aviso):null).filter(M=>M!==null),r=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),d=/iPad|iPhone|iPod/.test(navigator.userAgent);if(r&&d){if(e.length===1)return`maps://?daddr=${e[0]}&dirflg=d`;{let M=e[e.length-1],h=e.slice(0,-1),y="https://maps.apple.com/?";if(t&&(y+=`saddr=${t}&`),y+=`daddr=${M}`,h.length>0){let S=h.map(Z=>`via=${Z}`).join("&");y+=`&${S}`}return y+="&dirflg=d",y}}if(e.length===1){let M="https://maps.apple.com/?";return t&&(M+=`saddr=${t}&`),M+=`daddr=${e[0]}&dirflg=d`,M}let p=e[e.length-1],b=e.slice(0,-1),v="https://maps.apple.com/?";if(t&&(v+=`saddr=${t}&`),v+=`daddr=${p}`,b.length>0){let M=b.map(h=>`via=${h}`).join("&");v+=`&${M}`}return v+="&dirflg=d",console.log("URL de Apple Maps construida:",v),v}construirUrlGoogleMapsWeb(n){let t=n?`${n.latitude},${n.longitude}`:null,e=this.avisosSeleccionados.map(b=>b.direccion_cliente_aviso?encodeURIComponent(b.direccion_cliente_aviso):null).filter(b=>b!==null);if(e.length===1){let b="https://www.google.com/maps/dir/?api=1";return t&&(b+=`&origin=${t}`),b+=`&destination=${e[0]}&travelmode=driving&dir_action=navigate`,b}let r=e[e.length-1],d=e.slice(0,-1).join("|"),p="https://www.google.com/maps/dir/?api=1";return t&&(p+=`&origin=${t}`),p+=`&destination=${r}`,d&&(p+=`&waypoints=${d}`),p+="&travelmode=driving&dir_action=navigate",p}construirUrlAppleMapsWeb(n){let t=n?`${n.latitude},${n.longitude}`:null,e=this.avisosSeleccionados.map(b=>b.direccion_cliente_aviso?encodeURIComponent(b.direccion_cliente_aviso):null).filter(b=>b!==null);if(e.length===1){let b="https://maps.apple.com/?";return t&&(b+=`saddr=${t}&`),b+=`daddr=${e[0]}&dirflg=d`,b}let r=e[e.length-1],d=e.slice(0,-1),p="https://maps.apple.com/?";if(t&&(p+=`saddr=${t}&`),p+=`daddr=${r}`,d.length>0){let b=d.map(v=>`via=${v}`).join("&");p+=`&${b}`}return p+="&dirflg=d",p}};l.\u0275fac=function(t){return new(t||l)(z(H),z(fn))},l.\u0275cmp=V({type:l,selectors:[["app-modal-opciones-navegacion"]],inputs:{avisosSeleccionados:"avisosSeleccionados"},decls:34,vars:2,consts:[[1,"modal-container"],[1,"modal-header"],[1,"btn-cerrar",3,"click"],["name","close-outline"],[1,"modal-body"],["class","loading-container",4,"ngIf"],["class","ruta-info",4,"ngIf"],[1,"opciones-navegacion"],[1,"opcion-btn","google-maps",3,"click"],[1,"opcion-icon"],["name","logo-google"],[1,"opcion-content"],[1,"opcion-btn","apple-maps",3,"click"],["name","logo-apple"],[1,"opcion-btn","app-navegacion",3,"click"],["name","play-outline"],[1,"loading-container"],[1,"loading-content"],["name","crescent","color","primary"],[1,"ruta-info"],[1,"ruta-details"],[1,"detail-row",2,"width","100%","display","flex","gap","10px","align-items","center"],[1,"detail-item",2,"width","100%"],[1,"detail-icon"],["name","location-outline"],[1,"detail-content"],[1,"detail-label"],[1,"detail-value"],["name","speedometer-outline"],[1,"detail-item"],["name","time-outline"],["class","destinos-list",4,"ngIf"],[1,"destinos-list"],[1,"destinos-container"],["class","destino-item",4,"ngFor","ngForOf"],[1,"destino-item"],[1,"destino-number"],[1,"destino-info"],[1,"destino-nombre"],[1,"destino-direccion"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),g(3,"Opciones de Navegaci\xF3n"),a(),i(4,"button",2),C("click",function(){return e.cerrar()}),u(5,"ion-icon",3),a()(),i(6,"div",4),x(7,qt,7,0,"div",5)(8,Wt,28,5,"div",6),i(9,"div",7)(10,"button",8),C("click",function(){return e.abrirGoogleMaps()}),i(11,"div",9),u(12,"ion-icon",10),a(),i(13,"div",11)(14,"h3"),g(15,"Google Maps"),a(),i(16,"p"),g(17,"Abrir ruta en Google Maps"),a()()(),i(18,"button",12),C("click",function(){return e.abrirAppleMaps()}),i(19,"div",9),u(20,"ion-icon",13),a(),i(21,"div",11)(22,"h3"),g(23,"Apple Maps"),a(),i(24,"p"),g(25,"Abrir ruta en Apple Maps"),a()()(),i(26,"button",14),C("click",function(){return e.iniciarNavegacionApp()}),i(27,"div",9),u(28,"ion-icon",15),a(),i(29,"div",11)(30,"h3"),g(31,"Navegaci\xF3n en la App"),a(),i(32,"p"),g(33,"Iniciar modo conducci\xF3n en la aplicaci\xF3n"),a()()()()()()),t&2&&(s(7),_("ngIf",e.calculandoRuta),s(),_("ngIf",!e.calculandoRuta&&(e.rutaInfo.tieneUbicacion||e.rutaInfo.distancia!=="Calculando...")))},dependencies:[j,$,D,U,Yn],styles:['.modal-container[_ngcontent-%COMP%]{padding:28px;background:#fff;border-radius:20px;margin:0 auto;box-shadow:0 20px 40px #00000026;position:relative;overflow:hidden}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:28px;padding-bottom:20px;border-bottom:2px solid #F1F5F9;position:relative}.modal-header[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-2px;left:0;width:60px;height:2px;background:linear-gradient(135deg,#10b981,#059669);border-radius:1px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:700;color:#111827;background:linear-gradient(135deg,#111827,#374151);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#f8fafc;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;border:1px solid #E2E8F0}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#6b7280}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1;transform:scale(1.05)}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#374151}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-body[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]{margin:0 0 28px;color:#64748b;font-size:15px;line-height:1.6;text-align:center;padding:16px 20px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:12px;border:1px solid #E2E8F0}.modal-body[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#10b981;font-weight:700;font-size:16px}.modal-body[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]{display:block;margin-top:8px;font-size:13px;color:#64748b;font-style:italic}.modal-body[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:4px;color:#ef4444}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{margin-bottom:28px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:16px;border:2px solid #E2E8F0;overflow:hidden;display:flex;align-items:center;justify-content:center;min-height:200px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:48px;height:48px;margin-bottom:20px;--color: #10B981}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:600;color:#374151}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#6b7280;line-height:1.4}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]{margin-bottom:28px;background:linear-gradient(135deg,#f0fdf4,#ecfdf5);border-radius:16px;border:2px solid #D1FAE5;overflow:hidden}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:15px;background:#059669;color:#fff}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]{padding:20px;display:grid;grid-template-columns:1fr;gap:16px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:#fff;border-radius:12px;border:1px solid #E5E7EB;transition:all .2s ease}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]:hover{border-color:#10b981;box-shadow:0 4px 12px #10b9811a}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#ecfdf5,#d1fae5);display:flex;align-items:center;justify-content:center;flex-shrink:0}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#10b981}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]{flex:1}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{display:block;font-size:13px;color:#6b7280;font-weight:500;margin-bottom:4px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{display:block;font-size:16px;color:#111827;font-weight:700}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]{padding:0 20px 20px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:700;color:#374151}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#fff;border-radius:10px;border:1px solid #E5E7EB}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-number[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,#10b981,#059669);color:#fff;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;flex-shrink:0}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-info[_ngcontent-%COMP%]{flex:1}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-info[_ngcontent-%COMP%]   .destino-nombre[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#111827;margin-bottom:2px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-info[_ngcontent-%COMP%]   .destino-direccion[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;line-height:1.4}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px;padding:20px;border:2px solid #F1F5F9;border-radius:16px;background:#fff;cursor:pointer;transition:all .3s ease;text-align:left;width:100%;position:relative;overflow:hidden}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);transition:left .5s ease}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]:hover{border-color:#cbd5e1;box-shadow:0 8px 25px #0000001a;transform:translateY(-2px)}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]:hover:before{left:100%}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 4px 15px #0000001a}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:14px;display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative;z-index:1}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-content[_ngcontent-%COMP%]{flex:1;position:relative;z-index:1}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 6px;font-size:17px;font-weight:700;color:#111827}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#64748b;line-height:1.5}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.google-maps[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f0fe,#d2e3fc);box-shadow:0 4px 12px #4285f433}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.google-maps[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#4285f4}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.google-maps[_ngcontent-%COMP%]:hover{border-color:#4285f4;background:linear-gradient(135deg,#f8faff,#f0f4ff);box-shadow:0 12px 30px #4285f426}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.apple-maps[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0f9ff,#e0f2fe);box-shadow:0 4px 12px #007aff33}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.apple-maps[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#007aff}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.apple-maps[_ngcontent-%COMP%]:hover{border-color:#007aff;background:linear-gradient(135deg,#f8faff,#f0f4ff);box-shadow:0 12px 30px #007aff26}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.app-navegacion[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ecfdf5,#d1fae5);box-shadow:0 4px 12px #10b98133}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.app-navegacion[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#10b981}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.app-navegacion[_ngcontent-%COMP%]:hover{border-color:#10b981;background:linear-gradient(135deg,#f0fdf4,#ecfdf5);box-shadow:0 12px 30px #10b98126}@media (max-width: 480px){.modal-container[_ngcontent-%COMP%]{padding:15px;border-radius:16px;box-shadow:none}.modal-header[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]{width:32px;height:32px}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.modal-body[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]{padding:14px 16px;font-size:14px;margin-bottom:24px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{margin-bottom:24px;min-height:150px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{padding:30px 16px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;margin-bottom:6px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]{margin-bottom:24px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-header[_ngcontent-%COMP%]{padding:15px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px!important}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]{padding:16px;gap:12px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{padding:12px;gap:12px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{width:36px;height:36px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:12px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:15px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]{padding:0 16px 16px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:15px;margin-bottom:12px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]{gap:10px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]{padding:10px 12px;gap:10px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-number[_ngcontent-%COMP%]{width:24px;height:24px;font-size:12px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-info[_ngcontent-%COMP%]   .destino-nombre[_ngcontent-%COMP%]{font-size:13px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-info[_ngcontent-%COMP%]   .destino-direccion[_ngcontent-%COMP%]{font-size:12px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]{gap:14px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]{padding:16px;gap:14px;border-radius:14px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;margin-bottom:4px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}']});let c=l;return c})();function Yt(c,l){if(c&1&&(i(0,"div",10)(1,"div",11)(2,"span",12),g(3),a(),i(4,"span",13),g(5),a()(),i(6,"div",14),g(7),a()()),c&2){let o,n,t,e=m(2);s(3),O(e.getManeuverIcon((o=e.getCurrentStep())==null?null:o.maneuver)),s(2),O((n=e.getCurrentStep())==null?null:n.instruction),s(2),O(e.formatDistance(((t=e.getCurrentStep())==null?null:t.distance)||0))}}function Kt(c,l){if(c&1){let o=k();i(0,"ion-button",15),C("click",function(){f(o);let t=m(2);return P(t.startNavigation())}),u(1,"ion-icon",16),a()}}function Qt(c,l){if(c&1){let o=k();i(0,"ion-button",17),C("click",function(){f(o);let t=m(2);return P(t.stopNavigation())}),u(1,"ion-icon",18),a()}}function Zt(c,l){if(c&1){let o=k();i(0,"ion-button",19),C("click",function(){f(o);let t=m(2);return P(t.nextStep())}),u(1,"ion-icon",20),a()}}function Xt(c,l){if(c&1&&(i(0,"div",23)(1,"span",12),g(2),a(),i(3,"span",13),g(4),a(),i(5,"span",24),g(6),a()()),c&2){let o=l.$implicit,n=m(3);s(2),O(n.getManeuverIcon(o.maneuver)),s(2),O(o.instruction),s(2),O(n.formatDistance(o.distance))}}function Jt(c,l){if(c&1&&(i(0,"div",21),x(1,Xt,7,3,"div",22),a()),c&2){let o=m(2);s(),_("ngForOf",o.getUpcomingSteps())}}function ne(c,l){if(c&1&&(i(0,"div",2)(1,"div",3),x(2,Yt,8,3,"div",4),i(3,"div",5),x(4,Kt,2,0,"ion-button",6)(5,Qt,2,0,"ion-button",7)(6,Zt,2,0,"ion-button",8),a()(),x(7,Jt,2,1,"div",9),a()),c&2){let o=m();s(2),_("ngIf",o.getCurrentStep()),s(2),_("ngIf",!o.isNavigating),s(),_("ngIf",o.isNavigating),s(),_("ngIf",o.isNavigating),s(),_("ngIf",o.getUpcomingSteps().length>0)}}function te(c,l){if(c&1&&(i(0,"div",53)(1,"div",54)(2,"ion-text",55),g(3),a(),i(4,"ion-text",56),g(5),a()(),i(6,"div",57),u(7,"ion-icon",58),i(8,"ion-text",13),g(9),a()(),i(10,"div",59)(11,"ion-text",24),g(12),a(),i(13,"ion-text",60),g(14),a()()()),c&2){let o,n,t,e,r,d=m(2);s(3),q("Paso ",((d.navigationRoute==null?null:d.navigationRoute.currentStepIndex)||0)+1," de ",(d.navigationRoute==null?null:d.navigationRoute.steps.length)||0,""),s(),I("navigating",d.isNavigating),s(),E(" ",d.isNavigating?"Navegando...":"Listo para navegar"," "),s(2),Pn("color",d.getManeuverColor((o=d.getCurrentStep())==null?null:o.maneuver)),_("name",d.getManeuverIcon((n=d.getCurrentStep())==null?null:n.maneuver)),s(2),E(" ",(t=d.getCurrentStep())==null?null:t.instruction," "),s(3),E(" ",d.formatDistance(((e=d.getCurrentStep())==null?null:e.distance)||0)," "),s(2),E(" ",d.formatTime(((r=d.getCurrentStep())==null?null:r.duration)||0)," ")}}function ee(c,l){if(c&1){let o=k();i(0,"ion-button",61),C("click",function(){f(o);let t=m(2);return P(t.startNavigation())}),u(1,"ion-icon",62),g(2," Iniciar Navegaci\xF3n "),a()}}function oe(c,l){if(c&1){let o=k();i(0,"div",63)(1,"ion-button",64),C("click",function(){f(o);let t=m(2);return P(t.stopNavigation())}),u(2,"ion-icon",65),g(3," Detener "),a(),i(4,"ion-button",66),C("click",function(){f(o);let t=m(2);return P(t.nextStep())}),u(5,"ion-icon",67),g(6," Siguiente "),a()()}}function ie(c,l){if(c&1&&u(0,"ion-icon",75),c&2){let o=m().$implicit,n=m(3);Pn("color",n.getManeuverColor(o.maneuver)),_("name",n.getManeuverIcon(o.maneuver))}}function ae(c,l){if(c&1&&(i(0,"div",23)(1,"div",55),g(2),a(),i(3,"div",71)(4,"ion-text",72),g(5),a(),i(6,"ion-text",73),g(7),a()(),x(8,ie,1,3,"ion-icon",74),a()),c&2){let o=l.$implicit,n=l.index,t=m(3);I("current",n===t.navigationRoute.currentStepIndex)("completed",n<t.navigationRoute.currentStepIndex),s(2),O(n+1),s(3),O(o.instruction),s(2),O(t.formatDistance(o.distance)),s(),_("ngIf",n===t.navigationRoute.currentStepIndex)}}function ce(c,l){if(c&1&&(i(0,"div",68)(1,"ion-text",69),g(2,"Instrucciones de navegaci\xF3n:"),a(),x(3,ae,9,8,"div",70),a()),c&2){let o=m(2);s(3),_("ngForOf",o.navigationRoute.steps)}}function re(c,l){if(c&1&&(i(0,"ion-card",25)(1,"ion-card-header")(2,"ion-card-title",26),u(3,"ion-icon",27),g(4," Navegaci\xF3n Profesional "),i(5,"span",28),g(6),a()()(),i(7,"ion-card-content")(8,"div",29)(9,"div",30)(10,"ion-text",31),g(11,"Progreso de la ruta"),a(),i(12,"ion-text",32),g(13),a()(),u(14,"ion-progress-bar",33),i(15,"div",34)(16,"ion-text",35),g(17),a(),i(18,"ion-text",36),g(19),a()()(),i(20,"div",37)(21,"div",38)(22,"div",39),u(23,"ion-icon",40),i(24,"div",41)(25,"ion-text",42),g(26,"Distancia total"),a(),i(27,"ion-text",43),g(28),a()()(),i(29,"div",39),u(30,"ion-icon",44),i(31,"div",41)(32,"ion-text",42),g(33,"Tiempo total"),a(),i(34,"ion-text",43),g(35),a()()(),i(36,"div",45),u(37,"ion-icon",46),i(38,"div",41)(39,"ion-text",42),g(40,"Distancia restante"),a(),i(41,"ion-text",43),g(42),a()()(),i(43,"div",45),u(44,"ion-icon",47),i(45,"div",41)(46,"ion-text",42),g(47,"Tiempo restante"),a(),i(48,"ion-text",43),g(49),a()()()()(),x(50,te,15,11,"div",48),i(51,"div",49),x(52,ee,3,0,"ion-button",50)(53,oe,7,0,"div",51),a(),x(54,ce,4,1,"div",52),a()()),c&2){let o=m();s(5),I("navigating",o.isNavigating),s(),E(" ",o.isNavigating?"\u{1F7E2} Navegando":"\u23F8\uFE0F Pausado"," "),s(7),E("",o.getNavigationProgress().toFixed(0),"%"),s(),_("value",o.getNavigationProgress()/100),s(3),E("",o.formatDistance(o.getRemainingDistance())," restantes"),s(2),E("",o.formatTime(o.getRemainingTime())," restantes"),s(9),O(o.formatDistance((o.navigationRoute==null?null:o.navigationRoute.totalDistance)||0)),s(7),O(o.formatTime((o.navigationRoute==null?null:o.navigationRoute.totalDuration)||0)),s(7),O(o.formatDistance(o.getRemainingDistance())),s(7),O(o.formatTime(o.getRemainingTime())),s(),_("ngIf",o.getCurrentStep()),s(2),_("ngIf",!o.isNavigating),s(),_("ngIf",o.isNavigating),s(),_("ngIf",o.navigationRoute)}}var Nt=(()=>{let l=class l{constructor(n){this.mapboxService=n,this.waypoints=[],this.navigationRoute=null,this.isNavigating=!1,this.isMobile=!1,this.destroy$=new B,T({play:bn,stop:Cn,arrowForward:pn,navigateOutline:W,speedometerOutline:Y,timeOutline:K,locationOutline:G,hourglassOutline:pt,playOutline:un,stopOutline:Pt,chevronForwardOutline:_n,closeOutline:L,pauseOutline:vt,chevronBackOutline:mn,arrowUpOutline:ot})}ngOnInit(){this.isMobile=window.innerWidth<=768,window.addEventListener("resize",()=>{this.isMobile=window.innerWidth<=768}),this.mapboxService.getCurrentNavigation().pipe(A(this.destroy$)).subscribe(n=>{this.navigationRoute=n,this.isNavigating=(n==null?void 0:n.isNavigating)||!1,console.log("\u{1F9ED} Panel de navegaci\xF3n actualizado:",{tieneRuta:!!n,navegando:this.isNavigating,pasoActual:(n==null?void 0:n.currentStepIndex)||0,totalPasos:(n==null?void 0:n.steps.length)||0,esMovil:this.isMobile})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}startNavigation(){if(this.waypoints.length<2){console.warn("Se necesitan al menos 2 waypoints para la navegaci\xF3n");return}this.mapboxService.startNavigation(this.waypoints)}stopNavigation(){this.mapboxService.stopNavigation()}nextStep(){this.mapboxService.nextStep()}getCurrentStep(){return this.mapboxService.getCurrentStep()}getNavigationProgress(){return this.mapboxService.getNavigationProgress()}getRemainingDistance(){return this.mapboxService.getRemainingDistance()}getRemainingTime(){return this.mapboxService.getRemainingTime()}formatDistance(n){return this.mapboxService.formatDistance(n)}formatTime(n){return this.mapboxService.formatTime(n)}getManeuverIcon(n){return this.mapboxService.getManeuverIcon(n)}getManeuverColor(n){if(!n)return"#4F46E5";switch(n.type){case"depart":return"#10B981";case"arrive":return"#DC2626";case"turn":return"#F59E0B";default:return"#4F46E5"}}getUpcomingSteps(){var t;if(!((t=this.navigationRoute)!=null&&t.steps))return[];let n=this.navigationRoute.currentStepIndex||0;return this.navigationRoute.steps.slice(n+1,n+4)}};l.\u0275fac=function(t){return new(t||l)(z(Q))},l.\u0275cmp=V({type:l,selectors:[["app-mapbox-navigation-panel"]],inputs:{waypoints:"waypoints"},decls:2,vars:2,consts:[["class","mobile-navigation",4,"ngIf"],["class","mapbox-navigation-panel",4,"ngIf"],[1,"mobile-navigation"],[1,"mobile-header"],["class","current-instruction",4,"ngIf"],[1,"mobile-controls"],["color","success","size","small",3,"click",4,"ngIf"],["color","danger","size","small",3,"click",4,"ngIf"],["color","warning","size","small",3,"click",4,"ngIf"],["class","upcoming-steps",4,"ngIf"],[1,"current-instruction"],[1,"instruction-row"],[1,"maneuver-icon"],[1,"instruction-text"],[1,"instruction-distance"],["color","success","size","small",3,"click"],["name","play"],["color","danger","size","small",3,"click"],["name","stop"],["color","warning","size","small",3,"click"],["name","arrow-forward"],[1,"upcoming-steps"],["class","step-item",4,"ngFor","ngForOf"],[1,"step-item"],[1,"step-distance"],[1,"mapbox-navigation-panel"],[1,"navigation-title"],["name","navigate-outline"],[1,"route-status"],[1,"navigation-progress"],[1,"progress-header"],[1,"progress-label"],[1,"progress-percentage"],["color","primary",1,"progress-bar",3,"value"],[1,"progress-details"],[1,"progress-distance"],[1,"progress-time"],[1,"route-info"],[1,"route-stats"],[1,"stat","primary"],["name","speedometer-outline",1,"stat-icon"],[1,"stat-content"],[1,"stat-label"],[1,"stat-value"],["name","time-outline",1,"stat-icon"],[1,"stat","secondary"],["name","location-outline",1,"stat-icon"],["name","hourglass-outline",1,"stat-icon"],["class","current-step",4,"ngIf"],[1,"navigation-controls"],["color","primary","fill","solid","class","nav-btn-start",3,"click",4,"ngIf"],["class","nav-controls-active",4,"ngIf"],["class","steps-list",4,"ngIf"],[1,"current-step"],[1,"step-header"],[1,"step-number"],[1,"step-status"],[1,"step-instruction"],[1,"maneuver-icon",3,"name"],[1,"step-details"],[1,"step-duration"],["color","primary","fill","solid",1,"nav-btn-start",3,"click"],["name","play-outline","slot","start"],[1,"nav-controls-active"],["color","danger","fill","outline",1,"nav-btn-stop",3,"click"],["name","stop-outline","slot","start"],["color","warning","fill","outline",1,"nav-btn-next",3,"click"],["name","chevron-forward-outline","slot","start"],[1,"steps-list"],[1,"steps-title"],["class","step-item",3,"current","completed",4,"ngFor","ngForOf"],[1,"step-content"],[1,"step-instruction-text"],[1,"step-distance-text"],["class","current-step-icon",3,"name","color",4,"ngIf"],[1,"current-step-icon",3,"name"]],template:function(t,e){t&1&&x(0,ne,8,5,"div",0)(1,re,55,15,"ion-card",1),t&2&&(_("ngIf",e.isMobile&&e.navigationRoute),s(),_("ngIf",!e.isMobile&&e.navigationRoute))},dependencies:[j,$,D,jn,Un,Rn,Bn,Dn,U,Kn,Hn],styles:[".mapbox-navigation-panel[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;width:420px;max-height:85vh;z-index:1000;box-shadow:0 8px 32px #0003;border-radius:16px;overflow:hidden;background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1)}@media (max-width: 768px){.mapbox-navigation-panel[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;width:100%;max-height:50vh;border-radius:0;font-size:14px;background:linear-gradient(135deg,#1a1a2e,#16213e);box-shadow:0 4px 6px #0000004d}}.navigation-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:1.2rem;font-weight:700;color:#fff}.navigation-title[_ngcontent-%COMP%]   .route-status[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;padding:4px 12px;background:#ffffff1a;border-radius:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.navigation-title[_ngcontent-%COMP%]   .route-status.navigating[_ngcontent-%COMP%]{background:#10b98133;color:#10b981;animation:_ngcontent-%COMP%_pulse 2s infinite}.navigation-progress[_ngcontent-%COMP%]{margin-bottom:20px;background:#ffffff0d;border-radius:12px;padding:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.navigation-progress[_ngcontent-%COMP%]   .progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.navigation-progress[_ngcontent-%COMP%]   .progress-header[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#ffffffe6}.navigation-progress[_ngcontent-%COMP%]   .progress-header[_ngcontent-%COMP%]   .progress-percentage[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#10b981}.navigation-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{margin-bottom:12px;--background: rgba(255, 255, 255, .1);--progress-background: linear-gradient(90deg, #10B981 0%, #059669 100%);height:8px;border-radius:4px}.navigation-progress[_ngcontent-%COMP%]   .progress-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.navigation-progress[_ngcontent-%COMP%]   .progress-details[_ngcontent-%COMP%]   .progress-distance[_ngcontent-%COMP%], .navigation-progress[_ngcontent-%COMP%]   .progress-details[_ngcontent-%COMP%]   .progress-time[_ngcontent-%COMP%]{font-size:.85rem;color:#ffffffb3;font-weight:500}.route-info[_ngcontent-%COMP%]{margin-bottom:20px}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#ffffff14;border-radius:12px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);transition:all .3s ease}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]:hover{background:#ffffff1f;transform:translateY(-2px)}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat.primary[_ngcontent-%COMP%]{background:#10b9811a;border-color:#10b98133}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat.secondary[_ngcontent-%COMP%]{background:#3b82f61a;border-color:#3b82f633}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#fffc;flex-shrink:0}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{flex:1;min-width:0}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{display:block;font-size:.8rem;color:#ffffffb3;margin-bottom:4px;font-weight:500}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{display:block;font-size:1.1rem;font-weight:700;color:#fff;line-height:1.2}.current-step[_ngcontent-%COMP%]{background:#ffffff26;border-radius:8px;padding:16px;margin-bottom:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.current-step[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.current-step[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#ffffffe6}.current-step[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-status[_ngcontent-%COMP%]{font-size:.8rem;color:#ffffffb3}.current-step[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-status.navigating[_ngcontent-%COMP%]{color:#10b981;font-weight:600;animation:_ngcontent-%COMP%_pulse 2s infinite}.current-step[_ngcontent-%COMP%]   .step-instruction[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px}.current-step[_ngcontent-%COMP%]   .step-instruction[_ngcontent-%COMP%]   .maneuver-icon[_ngcontent-%COMP%]{font-size:1.5rem}.current-step[_ngcontent-%COMP%]   .step-instruction[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#fff}.current-step[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.current-step[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]   .step-distance[_ngcontent-%COMP%], .current-step[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]   .step-duration[_ngcontent-%COMP%]{font-size:.9rem;color:#fffc}.navigation-controls[_ngcontent-%COMP%]{margin-bottom:16px}.navigation-controls[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .2);--color: white;--border-radius: 8px;--box-shadow: 0 2px 8px rgba(0, 0, 0, .2);transition:all .2s ease}.navigation-controls[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{--background: rgba(255, 255, 255, .3);transform:translateY(-1px)}.navigation-controls[_ngcontent-%COMP%]   .nav-btn-start[_ngcontent-%COMP%]{width:100%}.navigation-controls[_ngcontent-%COMP%]   .nav-controls-active[_ngcontent-%COMP%]{display:flex;gap:8px}.navigation-controls[_ngcontent-%COMP%]   .nav-controls-active[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;font-size:.9rem}.steps-list[_ngcontent-%COMP%]   .steps-title[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:600;color:#fff;margin-bottom:12px}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px 0;border-bottom:1px solid rgba(255,255,255,.1)}.steps-list[_ngcontent-%COMP%]   .step-item.current[_ngcontent-%COMP%]{background:#fff3;border-radius:6px;padding:8px 12px;margin:0 -12px;animation:_ngcontent-%COMP%_pulse 2s infinite}.steps-list[_ngcontent-%COMP%]   .step-item.completed[_ngcontent-%COMP%]{opacity:.6}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;background:#ffffff4d;color:#fff;display:flex;align-items:center;justify-content:center;font-size:.8rem;font-weight:600;flex-shrink:0}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]{flex:1}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-instruction-text[_ngcontent-%COMP%]{display:block;font-size:.9rem;color:#fff;margin-bottom:2px}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-distance-text[_ngcontent-%COMP%]{font-size:.8rem;color:#ffffffb3}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .current-step-icon[_ngcontent-%COMP%]{font-size:1.2rem}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.7}to{opacity:1}}.mobile-navigation[_ngcontent-%COMP%]{background:#1a1a2e;color:#fff;padding:0;margin:0;border-radius:0;box-shadow:0 4px 6px #0000004d}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#1a1a2e;border-bottom:1px solid rgba(255,255,255,.1)}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]{flex:1}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:4px}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-row[_ngcontent-%COMP%]   .maneuver-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#4f46e5}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-row[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#fff;flex:1}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-distance[_ngcontent-%COMP%]{font-size:.9rem;color:#fffc;margin-left:27px}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .mobile-controls[_ngcontent-%COMP%]{display:flex;gap:8px}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .mobile-controls[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--border-radius: 20px;width:40px;height:40px}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;background:#1a1a2e}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid rgba(255,255,255,.05)}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .maneuver-icon[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff9;width:20px;text-align:center}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{flex:1;font-size:.9rem;color:#fffc;line-height:1.3}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-distance[_ngcontent-%COMP%]{font-size:.8rem;color:#fff9;white-space:nowrap}@media (max-width: 768px){.route-stats[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:8px}.current-step[_ngcontent-%COMP%]{padding:12px}.current-step[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.current-step[_ngcontent-%COMP%]   .step-instruction[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.navigation-controls[_ngcontent-%COMP%]   .nav-controls-active[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.navigation-controls[_ngcontent-%COMP%]   .nav-controls-active[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%;font-size:.85rem;--padding-start: 12px;--padding-end: 12px}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]{padding:8px 0}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-instruction-text[_ngcontent-%COMP%]{font-size:.85rem;line-height:1.3}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-distance-text[_ngcontent-%COMP%]{font-size:.75rem}}@media (max-width: 480px){.mapbox-navigation-panel[_ngcontent-%COMP%]{top:5px;left:5px;right:5px;max-height:65vh;border-radius:8px;font-size:13px}.route-stats[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:6px}.route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{padding:8px}.route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem}.route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1rem}.current-step[_ngcontent-%COMP%]{padding:10px;margin-bottom:12px}.current-step[_ngcontent-%COMP%]   .step-instruction[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.4}.current-step[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.current-step[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]   .step-distance[_ngcontent-%COMP%], .current-step[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]   .step-duration[_ngcontent-%COMP%]{font-size:.8rem}.steps-list[_ngcontent-%COMP%]   .steps-title[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:8px}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]{padding:6px 0}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{width:20px;height:20px;font-size:.7rem}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-instruction-text[_ngcontent-%COMP%]{font-size:.8rem}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-distance-text[_ngcontent-%COMP%]{font-size:.7rem}}"]});let c=l;return c})();var se={passiveEvents:["touchstart","touchmove","wheel","mousewheel","DOMMouseScroll"],mapboxConfig:{antialias:!1,maxTileCacheSize:50,renderWorldCopies:!1,preserveDrawingBuffer:!1,cooperativeGestures:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0}},yn={maxConcurrentRequests:2,requestDelay:500,maxRetries:3,timeout:1e4};function Tt(){if(typeof window>"u")return;let c=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(l,o,n){return se.passiveEvents.includes(l)&&(typeof n=="boolean"?n={capture:n,passive:!0}:typeof n=="object"?n=kn(En({},n),{passive:!0}):n={passive:!0}),c.call(this,l,o,n)}}var Vt=(()=>{let l=class l{constructor(n){this.http=n,this.baseUrl="https://api.maptiler.com/geocoding"}geocode(n){let t=`${this.baseUrl}/${encodeURIComponent(n)}.json?key=${Zn.maptilerApiKey}`;return this.http.get(t).pipe(nn(e=>e&&e.features&&e.features.length>0?e.features[0].geometry.coordinates:null),tn(e=>(console.error("Error en geocodificaci\xF3n:",e),J(null))))}};l.\u0275fac=function(t){return new(t||l)(F(ln))},l.\u0275prov=N({token:l,factory:l.\u0275fac,providedIn:"root"});let c=l;return c})();var $t=(()=>{let l=class l{optimizeImage(n,t=1920,e=1080,r=.8){return w(this,null,function*(){return new Promise((d,p)=>{let b=document.createElement("canvas"),v=b.getContext("2d"),M=new Image;M.onload=()=>{let{width:h,height:y}=this.calculateDimensions(M.width,M.height,t,e);b.width=h,b.height=y,v==null||v.drawImage(M,0,0,h,y),b.toBlob(S=>{if(S){let Z=new File([S],n.name,{type:n.type,lastModified:Date.now()});d(Z)}else p(new Error("Error al optimizar imagen"))},n.type,r)},M.onerror=()=>p(new Error("Error al cargar imagen")),M.src=URL.createObjectURL(n)})})}calculateDimensions(n,t,e,r){if(n<=e&&t<=r)return{width:n,height:t};let d=Math.min(e/n,r/t);return{width:Math.round(n*d),height:Math.round(t*d)}}optimizeMultipleImages(n){return w(this,null,function*(){let t=[];for(let e of n)try{let r=yield this.optimizeImage(e);t.push(r)}catch(r){console.warn("Error optimizando imagen:",r),t.push(e)}return t})}needsOptimization(n,t=2){return n.size>t*1024*1024}};l.\u0275fac=function(t){return new(t||l)},l.\u0275prov=N({token:l,factory:l.\u0275fac,providedIn:"root"});let c=l;return c})();var Dt=(()=>{let l=class l{constructor(n,t,e){this.avisosService=n,this.clientesService=t,this.inventarioService=e,this.destroy$=new B,this.isPrefetching=!1,this.prefetchQueue=[]}prefetchCriticalData(){return w(this,null,function*(){if(this.isPrefetching){console.log("\u26A0\uFE0F Prefetch ya en progreso, saltando...");return}this.isPrefetching=!0;try{console.log("\u{1F680} Iniciando prefetch de datos cr\xEDticos..."),yield this.prefetchSequentially([()=>this.avisosService.getAvisosActivos(1,20).subscribe(),()=>this.clientesService.getClientes(1,10,void 0,"nombre_completo","asc",!0).subscribe(),()=>this.inventarioService.getInventario(1,10,void 0,"nombre","asc",!0).subscribe()]),console.log("\u2705 Prefetch de datos cr\xEDticos completado")}catch(n){console.warn("\u26A0\uFE0F Error en prefetch:",n)}finally{this.isPrefetching=!1}})}prefetchSequentially(n){return w(this,null,function*(){for(let t of n)yield new Promise(e=>{setTimeout(()=>{t(),e()},100)})})}prefetchBasedOnNavigation(n){this.prefetchQueue.push(()=>{switch(n){case"/avisos":this.prefetchAvisosData();break;case"/clientes":this.prefetchClientesData();break;case"/inventario":this.prefetchInventarioData();break}}),setTimeout(()=>{let t=this.prefetchQueue.shift();t&&t()},500)}prefetchAvisosData(){this.avisosService.getAvisosActivos(2,20).subscribe()}prefetchClientesData(){this.clientesService.getClientes(2,10).subscribe()}prefetchInventarioData(){this.inventarioService.getInventario(2,10).subscribe()}cleanupUnusedPrefetch(){this.prefetchQueue=[],console.log("\u{1F9F9} Limpieza de prefetch completada")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.cleanupUnusedPrefetch()}};l.\u0275fac=function(t){return new(t||l)(F(vn),F(Mn),F(Et))},l.\u0275prov=N({token:l,factory:l.\u0275fac,providedIn:"root"});let c=l;return c})();var jt=(()=>{let l=class l{constructor(n){this.supabaseClientService=n}testSupabaseConnection(){console.log("\u{1F50D} Probando conexi\xF3n a Supabase...");let n=this.supabaseClientService.getClient();return X(n.from("avisos").select("id").limit(1)).pipe(nn(({data:t,error:e})=>e?(console.error("\u274C Error en conexi\xF3n Supabase:",e),{success:!1,message:`Error de conexi\xF3n: ${e.message}`,data:e}):(console.log("\u2705 Conexi\xF3n a Supabase exitosa"),{success:!0,message:"Conexi\xF3n exitosa",data:t})),tn(t=>(console.error("\u274C Error cr\xEDtico en conexi\xF3n:",t),X(Promise.resolve({success:!1,message:`Error cr\xEDtico: ${t.message}`,data:t})))))}testAvisosQuery(){console.log("\u{1F50D} Probando consulta de avisos...");let n=this.supabaseClientService.getClient();return X(n.from("avisos").select(`
          id,
          nombre_cliente_aviso,
          estado
        `).limit(5)).pipe(nn(({data:t,error:e,count:r})=>e?(console.error("\u274C Error en consulta de avisos:",e),{success:!1,message:`Error en consulta: ${e.message}`,data:e}):(console.log("\u2705 Consulta de avisos exitosa:",t==null?void 0:t.length,"registros"),{success:!0,message:`Consulta exitosa: ${(t==null?void 0:t.length)||0} avisos encontrados`,data:{avisos:t,total:r}})),tn(t=>(console.error("\u274C Error cr\xEDtico en consulta:",t),X(Promise.resolve({success:!1,message:`Error cr\xEDtico: ${t.message}`,data:t})))))}};l.\u0275fac=function(t){return new(t||l)(F(Xn))},l.\u0275prov=N({token:l,factory:l.\u0275fac,providedIn:"root"});let c=l;return c})();var be=(c,l,o,n,t,e,r,d,p)=>({pendiente:c,"en-curso":l,"pendiente-presupuesto":o,"listo-para-facturar":n,completado:t,cancelado:e,"no-visitado":r,"visitado-pendiente":d,seleccionado:p}),ue=(c,l,o,n,t,e,r)=>({yellow:c,red:l,green:o,"no-visitado":n,"visitado-pendiente":t,"pendiente-presupuesto":e,"listo-para-facturar":r}),Ce=(c,l,o,n,t,e,r,d,p,b)=>({pendiente:c,"en-curso":l,"pendiente-presupuesto":o,"listo-para-facturar":n,completado:t,cancelado:e,"no-visitado":r,"visitado-pendiente":d,seleccionado:p,clickeable:b});function ve(c,l){c&1&&(i(0,"div",8)(1,"div",9),u(2,"ion-icon",10),i(3,"p"),g(4,"Cargando avisos..."),a()()())}function Me(c,l){if(c&1){let o=k();i(0,"div",11)(1,"div",12),u(2,"ion-icon",13),i(3,"p"),g(4),a(),i(5,"button",14),C("click",function(){f(o);let t=m();return P(t.refrescarAvisos())}),u(6,"ion-icon",15),g(7," Reintentar "),a()()()}if(c&2){let o=m();s(4),O(o.error)}}function fe(c,l){c&1&&(i(0,"span",44),g(1," | Ruta activa - Usa los botones para navegaci\xF3n real "),a())}function Pe(c,l){if(c&1&&(i(0,"span",42),g(1),x(2,fe,2,0,"span",43),a()),c&2){let o=m(2);s(),E(" | Seleccionados: ",o.getNumeroAvisosSeleccionados()," "),s(),_("ngIf",o.getNumeroAvisosSeleccionados()>1)}}function xe(c,l){if(c&1){let o=k();i(0,"div",45)(1,"button",46),C("click",function(){f(o);let t=m(2);return P(t.abrirModalOpcionesNavegacion())}),u(2,"ion-icon",47),i(3,"span"),g(4),a()()()}if(c&2){let o=m(2);s(4),E("Navegar (",o.getNumeroAvisosSeleccionados(),")")}}function Oe(c,l){if(c&1){let o=k();i(0,"button",48),C("click",function(){f(o);let t=m(2);return P(t.limpiarSeleccion())}),u(1,"ion-icon",49),g(2),a()}if(c&2){let o=m(2);s(2),E(" Limpiar (",o.getNumeroAvisosSeleccionados(),") ")}}function he(c,l){if(c&1){let o=k();i(0,"button",50),C("click",function(){f(o);let t=m(2);return P(t.abrirModalOpcionesNavegacion())}),u(1,"ion-icon",47),g(2),a()}if(c&2){let o=m(2);s(2),E(" Navegar (",o.getNumeroAvisosSeleccionados(),") ")}}function we(c,l){c&1&&(i(0,"div",58),g(1,"Seleccionar"),a())}function ye(c,l){if(c&1){let o=k();i(0,"div",82)(1,"input",83),C("change",function(t){f(o);let e=m().$implicit,r=m(4);return P(r.toggleSeleccionAviso(e,t))})("click",function(t){return f(o),P(t.stopPropagation())}),a()()}if(c&2){let o=m().$implicit,n=m(4);s(),_("checked",n.estaSeleccionado(o))}}function Ee(c,l){c&1&&u(0,"ion-icon",84)}function ke(c,l){c&1&&u(0,"ion-icon",85)}function Se(c,l){if(c&1){let o=k();i(0,"div",62),x(1,ye,2,1,"div",63),i(2,"div",64),g(3),a(),i(4,"div",65)(5,"span",66),g(6),a()(),i(7,"div",67),g(8),a(),i(9,"div",68)(10,"div",69),g(11),a()(),i(12,"div",70),g(13),cn(14,"date"),a(),i(15,"div",71),x(16,Ee,1,0,"ion-icon",72)(17,ke,1,0,"ion-icon",73),a(),i(18,"div",74)(19,"button",75),C("click",function(){let t=f(o).$implicit,e=m(4);return P(e.verDetalleAviso(t))}),u(20,"ion-icon",76),a(),i(21,"button",77),C("click",function(t){let e=f(o).$implicit,r=m(4);return P(r.abrirEnMapasNativos(e,t))}),u(22,"ion-icon",47),a(),i(23,"button",78),C("click",function(){let t=f(o).$implicit,e=m(4);return P(e.editarAviso(t))}),u(24,"ion-icon",79),a(),i(25,"button",80),C("click",function(){let t=f(o).$implicit,e=m(4);return P(e.eliminarAviso(t))}),u(26,"ion-icon",81),a()()()}if(c&2){let o=l.$implicit,n=l.index,t=m(4);_("ngClass",xn(14,be,[o.estado==="Pendiente",o.estado==="En curso",o.estado==="Pendiente de presupuesto",o.estado==="Listo para facturar",o.estado==="Completado",o.estado==="Cancelado",o.estado==="No visitado",o.estado==="Visitado pendiente",t.estaSeleccionado(o)])),s(),_("ngIf",t.modoSeleccion),s(2),O(o.numero_secuencial||(t.paginaActual-1)*t.porPagina+n+1),s(2),_("ngClass",Nn(24,ue,o.estado==="En curso",o.estado==="Pendiente",o.estado==="Completado",o.estado==="No visitado",o.estado==="Visitado pendiente",o.estado==="Pendiente de presupuesto",o.estado==="Listo para facturar")),s(),E(" ",o.estado," "),s(2),O(o.nombre_cliente_aviso),s(2),_("title",o.descripcion_problema),s(),E(" ",o.descripcion_problema," "),s(2),O(rn(14,11,o.fecha_creacion,"dd/MM/yyyy")),s(3),_("ngIf",o.urgencia==="Alta"||o.es_urgente),s(),_("ngIf",o.urgencia!=="Alta"&&!o.es_urgente)}}function ze(c,l){if(c&1&&(i(0,"div",54)(1,"div",55)(2,"div",17)(3,"div",56),x(4,we,2,0,"div",57),i(5,"div",58),g(6,"N\xFAmero"),a(),i(7,"div",59),g(8,"Estado"),a(),i(9,"div",58),g(10,"Cliente"),a(),i(11,"div",58),g(12,"Detalle"),a(),i(13,"div",59),g(14,"Fecha"),a(),i(15,"div",59),g(16,"Urgente"),a(),i(17,"div",58),g(18,"Acciones"),a()()(),i(19,"div",60),x(20,Se,27,32,"div",61),a()()()),c&2){let o=m(3);s(),I("modo-seleccion",o.modoSeleccion),s(3),_("ngIf",o.modoSeleccion),s(16),_("ngForOf",o.avisos)}}function Ae(c,l){if(c&1){let o=k();i(0,"div",86)(1,"div",87),u(2,"ion-icon",13),i(3,"h3"),g(4,"No hay avisos"),a(),i(5,"p"),g(6,"A\xFAn no se han creado avisos. Crea el primero para comenzar."),a(),i(7,"button",88),C("click",function(){f(o);let t=m(3);return P(t.abrirModalCrearAviso())}),u(8,"ion-icon",33),g(9," Crear aviso "),a()()()}}function Ie(c,l){if(c&1){let o=k();on(0),i(1,"button",99),C("click",function(){let t=f(o).$implicit,e=m(4);return P(e.cambiarPagina(t))}),g(2),a(),an()}if(c&2){let o=l.$implicit,n=m(4);s(),I("active",o===n.paginaActual),s(),E(" ",o," ")}}function Fe(c,l){if(c&1){let o=k();i(0,"div",89)(1,"span",90),g(2),a(),i(3,"div",91)(4,"button",92),C("click",function(){f(o);let t=m(3);return P(t.primeraPagina())}),u(5,"ion-icon",93)(6,"ion-icon",93),a(),i(7,"button",94),C("click",function(){f(o);let t=m(3);return P(t.paginaAnterior())}),u(8,"ion-icon",93),a(),x(9,Ie,3,3,"ng-container",95),i(10,"button",96),C("click",function(){f(o);let t=m(3);return P(t.paginaSiguiente())}),u(11,"ion-icon",97),a(),i(12,"button",98),C("click",function(){f(o);let t=m(3);return P(t.ultimaPagina())}),u(13,"ion-icon",97)(14,"ion-icon",97),a()()()}if(c&2){let o=m(3);s(2),Fn(" Mostrando datos ",(o.paginaActual-1)*o.porPagina+1," a ",o.Math.min(o.paginaActual*o.porPagina,o.totalAvisos)," de ",o.totalAvisos," avisos "),s(2),_("disabled",!o.puedeAnterior()),s(3),_("disabled",!o.puedeAnterior()),s(2),_("ngForOf",o.obtenerRangoPaginas()),s(),_("disabled",!o.puedeSiguiente()),s(2),_("disabled",!o.puedeSiguiente())}}function Ne(c,l){if(c&1&&(on(0),x(1,ze,21,4,"div",51)(2,Ae,10,0,"div",52)(3,Fe,15,8,"div",53),an()),c&2){let o=m(2);s(),_("ngIf",o.avisos.length>0),s(),_("ngIf",o.avisos.length===0&&!o.loading&&!o.error),s(),_("ngIf",o.avisos.length>0&&o.totalAvisos>0)}}function Te(c,l){if(c&1){let o=k();i(0,"div",86)(1,"div",87),u(2,"ion-icon",13),i(3,"h3"),g(4,"No hay avisos"),a(),i(5,"p"),g(6,"A\xFAn no se han creado avisos. Crea el primero para comenzar."),a(),i(7,"button",88),C("click",function(){f(o);let t=m(3);return P(t.abrirModalCrearAviso())}),u(8,"ion-icon",33),g(9," Crear aviso "),a()()()}}function Ve(c,l){c&1&&(i(0,"div",58),g(1,"Seleccionar"),a())}function $e(c,l){if(c&1){let o=k();i(0,"div",82)(1,"input",83),C("change",function(t){f(o);let e=m().$implicit,r=m(4);return P(r.toggleSeleccionAviso(e,t))})("click",function(t){return f(o),P(t.stopPropagation())}),a()()}if(c&2){let o=m().$implicit,n=m(4);s(),_("checked",n.estaSeleccionado(o))}}function De(c,l){if(c&1){let o=k();i(0,"div",114),C("click",function(t){let e=f(o).$implicit,r=m(4);return P(r.manejarClicFilaMapa(e,t))}),x(1,$e,2,1,"div",63),i(2,"div",64),g(3),a(),i(4,"div",67),g(5),a(),i(6,"div",68)(7,"div",69),g(8),a()(),i(9,"div",74)(10,"button",115),C("click",function(t){let e=f(o).$implicit,r=m(4);return P(r.centrarAvisoEnMapa(e,t))}),u(11,"ion-icon",116),a(),i(12,"button",77),C("click",function(t){let e=f(o).$implicit,r=m(4);return t.stopPropagation(),P(r.abrirEnMapasNativos(e,t))}),u(13,"ion-icon",47),a(),i(14,"button",75),C("click",function(t){let e=f(o).$implicit,r=m(4);return t.stopPropagation(),P(r.verDetalleAviso(e))}),u(15,"ion-icon",76),a(),i(16,"button",80),C("click",function(t){let e=f(o).$implicit,r=m(4);return t.stopPropagation(),P(r.eliminarAviso(e))}),u(17,"ion-icon",81),a()()()}if(c&2){let o=l.$implicit,n=l.index,t=m(4);_("ngClass",xn(7,Ce,[o.estado==="Pendiente",o.estado==="En curso",o.estado==="Pendiente de presupuesto",o.estado==="Listo para facturar",o.estado==="Completado",o.estado==="Cancelado",o.estado==="No visitado",o.estado==="Visitado pendiente",t.estaSeleccionado(o),!t.modoSeleccion]))("title",t.modoSeleccion?"Haz clic para seleccionar/deseleccionar":"Haz clic para seleccionar y activar modo selecci\xF3n"),s(),_("ngIf",t.modoSeleccion),s(2),O(o.numero_secuencial||(t.paginaActual-1)*t.porPagina+n+1),s(2),O(o.nombre_cliente_aviso),s(2),_("title",o.descripcion_problema),s(),E(" ",o.descripcion_problema," ")}}function je(c,l){if(c&1&&(i(0,"div",125)(1,"div",126)(2,"span",127),g(3),a(),i(4,"span",128),g(5),a()(),i(6,"div",129),g(7),a()()),c&2){let o,n,t,e=m(5);s(3),O(e.getManeuverIcon((o=e.getCurrentStep())==null?null:o.maneuver)),s(2),O((n=e.getCurrentStep())==null?null:n.instruction),s(2),O(e.formatDistance(((t=e.getCurrentStep())==null?null:t.distance)||0))}}function Ue(c,l){if(c&1){let o=k();i(0,"ion-button",130),C("click",function(){f(o);let t=m(5);return P(t.startNavigation())}),u(1,"ion-icon",131),a()}}function Re(c,l){if(c&1){let o=k();i(0,"ion-button",132),C("click",function(){f(o);let t=m(5);return P(t.stopNavigation())}),u(1,"ion-icon",133),a()}}function Be(c,l){if(c&1){let o=k();i(0,"ion-button",134),C("click",function(){f(o);let t=m(5);return P(t.nextStep())}),u(1,"ion-icon",135),a()}}function Le(c,l){if(c&1&&(i(0,"div",138)(1,"span",127),g(2),a(),i(3,"span",128),g(4),a(),i(5,"span",139),g(6),a()()),c&2){let o=l.$implicit,n=m(6);s(2),O(n.getManeuverIcon(o.maneuver)),s(2),O(o.instruction),s(2),O(n.formatDistance(o.distance))}}function qe(c,l){if(c&1&&(i(0,"div",136),x(1,Le,7,3,"div",137),a()),c&2){let o=m(5);s(),_("ngForOf",o.getUpcomingSteps())}}function He(c,l){if(c&1&&(i(0,"div",117)(1,"div",118),x(2,je,8,3,"div",119),i(3,"div",120),x(4,Ue,2,0,"ion-button",121)(5,Re,2,0,"ion-button",122)(6,Be,2,0,"ion-button",123),a()(),x(7,qe,2,1,"div",124),a()),c&2){let o=m(4);s(2),_("ngIf",o.getCurrentStep()),s(2),_("ngIf",!o.isNavigating),s(),_("ngIf",o.isNavigating),s(),_("ngIf",o.isNavigating),s(),_("ngIf",o.getUpcomingSteps().length>0)}}function Ge(c,l){if(c&1&&(i(0,"div",140),u(1,"app-mapbox-navigation-panel",141),a()),c&2){let o=m(4);s(),_("waypoints",o.navigationWaypoints)}}function We(c,l){if(c&1){let o=k();i(0,"div",101)(1,"div",102)(2,"div",103)(3,"div",55)(4,"div",17)(5,"div",56),x(6,Ve,2,0,"div",57),i(7,"div",58),g(8,"N\xFAmero"),a(),i(9,"div",58),g(10,"Cliente"),a(),i(11,"div",58),g(12,"Detalle"),a(),i(13,"div",58),g(14,"Acciones"),a()()(),i(15,"div",60),x(16,De,18,18,"div",104),a()()()(),i(17,"div",105)(18,"button",106),C("click",function(){f(o);let t=m(3);return P(t.toggleFullscreen())}),u(19,"ion-icon",107),a(),i(20,"button",108),C("click",function(){f(o);let t=m(3);return P(t.toggleView())}),u(21,"ion-icon",109),i(22,"span",110),g(23,"Volver a lista"),a()(),x(24,He,8,5,"div",111)(25,Ge,2,1,"div",112),u(26,"div",113),a()()}if(c&2){let o=m(3);s(3),I("modo-seleccion",o.modoSeleccion),s(3),_("ngIf",o.modoSeleccion),s(10),_("ngForOf",o.avisos),s(8),_("ngIf",o.showNavigationPanel&&o.isMobile),s(),_("ngIf",o.showNavigationPanel&&!o.isMobile)}}function Ye(c,l){if(c&1&&(on(0),x(1,Te,10,0,"div",52)(2,We,27,6,"div",100),an()),c&2){let o=m(2);s(),_("ngIf",o.avisos.length===0&&!o.loading&&!o.error),s(),_("ngIf",o.avisos.length>0)}}function Ke(c,l){c&1&&u(0,"ion-spinner",155)}function Qe(c,l){if(c&1){let o=k();i(0,"div",156)(1,"button",157),C("click",function(){f(o);let t=m(3);return P(t.abrirModalOpcionesNavegacion())}),u(2,"ion-icon",47),i(3,"span"),g(4,"Navegar ruta"),a()()()}}function Ze(c,l){if(c&1&&(i(0,"div",142)(1,"div",143),u(2,"ion-icon",47),i(3,"span"),g(4,"Ruta de navegaci\xF3n"),a(),x(5,Ke,1,0,"ion-spinner",144),a(),i(6,"div",145)(7,"div",146)(8,"div",147),u(9,"ion-icon",148),a(),i(10,"div",149)(11,"span",150),g(12,"Destinos"),a(),i(13,"span",151),g(14),a()()(),i(15,"div",146)(16,"div",147),u(17,"ion-icon",152),a(),i(18,"div",149)(19,"span",150),g(20,"Distancia"),a(),i(21,"span",151),g(22),a()()(),i(23,"div",146)(24,"div",147),u(25,"ion-icon",153),a(),i(26,"div",149)(27,"span",150),g(28,"Tiempo"),a(),i(29,"span",151),g(30),a()()()(),x(31,Qe,5,0,"div",154),a()),c&2){let o=m(2);s(5),_("ngIf",o.calculandoUbicacion||(o.rutaCalculada==null?null:o.rutaCalculada.distancia)==="Calculando..."),s(9),q("",o.getNumeroAvisosSeleccionados()," parada",o.getNumeroAvisosSeleccionados()>1?"s":"",""),s(8),O((o.rutaCalculada==null?null:o.rutaCalculada.distancia)||"Selecciona avisos"),s(8),O((o.rutaCalculada==null?null:o.rutaCalculada.tiempo)||"Selecciona avisos"),s(),_("ngIf",o.getNumeroAvisosSeleccionados()>1)}}function Xe(c,l){if(c&1){let o=k();i(0,"section",16)(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",20),g(5),a(),i(6,"div",21),g(7),x(8,Pe,3,2,"span",22),a()(),i(9,"div",23)(10,"div",24),u(11,"input",25)(12,"ion-icon",26),a()(),i(13,"div",27)(14,"button",28),C("click",function(){f(o);let t=m();return P(t.toggleModoSeleccion())}),u(15,"ion-icon",29),a(),i(16,"button",30),C("click",function(){f(o);let t=m();return P(t.toggleView())}),u(17,"ion-icon",31),a(),i(18,"button",32),C("click",function(){f(o);let t=m();return P(t.abrirModalCrearAviso())}),u(19,"ion-icon",33),a()()(),x(20,xe,5,1,"div",34),i(21,"div",35),u(22,"input",36),i(23,"select")(24,"option"),g(25,"Ordenar por: Recientes"),a()(),i(26,"div",37)(27,"button",28),C("click",function(){f(o);let t=m();return P(t.toggleModoSeleccion())}),u(28,"ion-icon",29),g(29),a(),x(30,Oe,3,1,"button",38)(31,he,3,1,"button",39),i(32,"button",30),C("click",function(){f(o);let t=m();return P(t.toggleView())}),u(33,"ion-icon",31),g(34),a(),i(35,"button",32),C("click",function(){f(o);let t=m();return P(t.abrirModalCrearAviso())}),u(36,"ion-icon",33),g(37," A\xF1adir aviso "),a()()()(),x(38,Ne,4,3,"ng-container",40)(39,Ye,3,2,"ng-container",40)(40,Ze,32,6,"div",41),a()}if(c&2){let o=m();s(5),O(o.isMapView?"Mapa de avisos":"Lista de avisos"),s(2),E(" Avisos: ",o.totalAvisos," "),s(),_("ngIf",o.getNumeroAvisosSeleccionados()>0),s(6),I("active",o.modoSeleccion),s(3),_("name",o.isMapView?"list-outline":"map-outline"),s(3),_("ngIf",o.getNumeroAvisosSeleccionados()>0),s(7),I("active",o.modoSeleccion),s(2),E(" ",o.modoSeleccion?"Salir selecci\xF3n":"Seleccionar avisos"," "),s(),_("ngIf",o.getNumeroAvisosSeleccionados()>0),s(),_("ngIf",o.getNumeroAvisosSeleccionados()>0),s(2),_("name",o.isMapView?"list-outline":"map-outline"),s(),E(" ",o.isMapView?"Lista de avisos":"Mapa de avisos"," "),s(4),_("ngIf",!o.isMapView),s(),_("ngIf",o.isMapView),s(),_("ngIf",o.getNumeroAvisosSeleccionados()>0)}}function Je(c,l){if(c&1&&(i(0,"div",158)(1,"div",159),g(2," \u{1F9ED} PANEL DE NAVEGACI\xD3N ACTIVO "),a(),u(3,"app-mapbox-navigation-panel",141),a()),c&2){let o=m();s(3),_("waypoints",o.navigationWaypoints)}}function no(c,l){c&1&&(i(0,"div",160)(1,"div",161),g(2," \u{1F5FA}\uFE0F MAPA DE NAVEGACI\xD3N "),a(),u(3,"div",162),a())}function to(c,l){if(c&1&&(i(0,"div",163),g(1),u(2,"br"),g(3),u(4,"br"),g(5),a()),c&2){let o=m();s(),E(" DEBUG: Panel activo = ",o.showNavigationPanel,""),s(2),E(" Waypoints = ",o.navigationWaypoints.length,""),s(2),E(" Vista mapa = ",o.isMapView,`
`)}}var ti=(()=>{let l=class l{constructor(n,t,e,r,d,p,b,v,M,h,y,S,Z){this.modalController=n,this.cdr=t,this.geocodingService=e,this.avisosService=r,this.clientesService=d,this.cacheService=p,this.imageOptimizationService=b,this.prefetchService=v,this.router=M,this.navigationService=h,this.debugService=y,this.mapboxService=S,this.routeCalculationService=Z,this.displayedColumns=["numero","estado","nombre","detalle","fecha","urgente","direccion","acciones"],this.isMapView=!1,this.map=null,this.avisoMarkers=new Map,this.selectedAviso=null,this.avisos=[],this.loading=!0,this.error=null,this.totalAvisos=0,this.paginaActual=1,this.porPagina=20,this.busqueda="",this.ordenarPor="fecha_creacion",this.orden="desc",this.estadoFiltro="",this.avisosSeleccionados=new Set,this.modoSeleccion=!1,this.showNavigationPanel=!1,this.navigationWaypoints=[],this.isMobile=!1,this.isNavigating=!1,this.showFullscreenMap=!1,this.rutaCalculada=null,this.calculandoUbicacion=!1,this.destroy$=new B,this.busquedaSubject=new B,this.dataLoaded=!1,this.Math=Math,T({refreshOutline:Mt,alertCircleOutline:dn,searchOutline:ft,checkmarkCircleOutline:at,addCircle:nt,navigateOutline:W,closeCircleOutline:st,alertCircle:et,close:rt,eyeOutline:dt,createOutline:lt,trashOutline:en,chevronBackOutline:mn,chevronForwardOutline:_n,mapOutline:ut,expandOutline:gt,listOutline:mt,play:bn,stop:Cn,arrowForward:pn,locationOutline:G,speedometerOutline:Y,timeOutline:K,chevronDownCircleOutline:ct,calendarOutline:it,optionsOutline:Ct,add:Jn,addCircleOutline:tt}),Tt(),this.configurarBusqueda()}ngAfterViewInit(){this.isMobile=window.innerWidth<=768,window.addEventListener("resize",()=>{this.isMobile=window.innerWidth<=768}),this.mapboxService.getCurrentNavigation().pipe(A(this.destroy$)).subscribe(n=>{n&&(this.isNavigating=n.isNavigating,console.log("\u{1F9ED} Estado de navegaci\xF3n actualizado:",{navegando:this.isNavigating,pasoActual:n.currentStepIndex+1,totalPasos:n.steps.length}))}),this.probarConexionSupabase(),this.cargarAvisosSimple(),this.suscribirseAAvisos(),this.navigationService.getCurrentRoute().pipe(A(this.destroy$)).subscribe(n=>{n.includes("/avisos")&&!this.dataLoaded&&(console.log("\u{1F9ED} Ruta de avisos detectada, preparando carga..."),setTimeout(()=>{!this.dataLoaded&&!this.destroy$.closed&&this.cargarAvisosSimple()},200))}),this.prefetchService.prefetchCriticalData(),document.addEventListener("fullscreenchange",this.handleFullscreenChange.bind(this)),document.addEventListener("webkitfullscreenchange",this.handleFullscreenChange.bind(this)),document.addEventListener("mozfullscreenchange",this.handleFullscreenChange.bind(this)),document.addEventListener("MSFullscreenChange",this.handleFullscreenChange.bind(this)),window.addEventListener("resize",this.handleResize.bind(this))}probarConexionSupabase(){console.log("\u{1F50D} Iniciando pruebas de conexi\xF3n..."),this.avisosService.debugConnection().pipe(A(this.destroy$)).subscribe({next:n=>{n.success?(console.log("\u2705 Conexi\xF3n b\xE1sica exitosa"),this.cargarAvisos()):console.error("\u274C Error en conexi\xF3n b\xE1sica:",n.error)},error:n=>{console.error("\u274C Error al probar conexi\xF3n:",n)}})}cargarAvisos(){if(this.dataLoaded&&this.avisos.length>0){console.log("\u{1F4CA} Avisos ya cargados, saltando carga...");return}this.loading=!0,this.error=null,console.log("\u{1F504} Cargando avisos..."),this.avisosService.getAvisosActivos(this.paginaActual,this.porPagina,this.busqueda,this.ordenarPor,this.orden,this.estadoFiltro).pipe(A(this.destroy$)).subscribe({next:n=>{console.log("\u2705 Avisos cargados exitosamente:",n.avisos.length,"avisos"),this.avisos=n.avisos,this.totalAvisos=n.total,this.loading=!1,this.dataLoaded=!0,this.isMapView&&this.map&&this.plotAvisosOnMap(),this.cdr.detectChanges()},error:n=>{console.error("\u274C Error al cargar avisos:",n),console.error("\u274C Detalles del error:",{message:n.message,code:n.code,details:n.details,hint:n.hint}),this.error="Error al cargar los avisos. Por favor, int\xE9ntalo de nuevo.",this.loading=!1,this.cdr.detectChanges()}})}cargarAvisosSimple(){console.log("\u{1F50D} Cargando avisos de forma simplificada..."),this.loading=!0,this.error=null,this.avisosService.debugConnection().pipe(A(this.destroy$)).subscribe({next:n=>{n.success?(console.log("\u2705 Conexi\xF3n exitosa, intentando cargar avisos completos..."),this.cargarAvisos()):(console.error("\u274C Conexi\xF3n fall\xF3:",n.error),this.error="Error de conexi\xF3n a la base de datos",this.loading=!1,this.cdr.detectChanges())},error:n=>{console.error("\u274C Error en conexi\xF3n:",n),this.error="Error de conexi\xF3n: "+(n.message||"Desconocido"),this.loading=!1,this.cdr.detectChanges()}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.mapboxService.destroyMap(),this.avisoMarkers.clear(),this.map=null,document.removeEventListener("fullscreenchange",this.handleFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.handleFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.handleFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.handleFullscreenChange.bind(this)),window.removeEventListener("resize",this.handleResize.bind(this)),this.cacheService.clearCache("avisos"),this.busquedaSubject.complete(),console.log("\u{1F9F9} Componente AvisosComponent destruido y recursos limpiados")}suscribirseAAvisos(){this.avisosService.avisos$.pipe(A(this.destroy$)).subscribe(n=>{this.avisos=n})}refrescarAvisos(){this.cargarAvisos()}handleRefresh(n){return w(this,null,function*(){try{console.log("\u{1F504} Iniciando refresh manual..."),console.log("\u{1F4F1} Usuario desliz\xF3 hacia abajo para actualizar");let t=this.loading;this.loading=!1,this.cacheService.clearCache("avisos"),console.log("\u{1F5D1}\uFE0F Cach\xE9 limpiado"),yield this.recargarAvisosSinCache(),console.log("\u{1F4CA} Avisos recargados"),this.isMapView&&this.map&&(this.plotAvisosOnMap(),console.log("\u{1F5FA}\uFE0F Marcadores del mapa actualizados")),this.loading=t,console.log("\u2705 Refresh completado exitosamente"),console.log("\u{1F4C8} Total de avisos actualizados:",this.totalAvisos),n.target.complete()}catch(t){console.error("\u274C Error durante el refresh:",t),this.error="Error al actualizar los avisos. Por favor, int\xE9ntalo de nuevo.",this.loading=!1,n.target.complete()}})}recargarAvisosSinCache(){return w(this,null,function*(){return new Promise((n,t)=>{this.loading=!0,this.error=null,this.dataLoaded=!1,this.cacheService.clearCache("avisos"),this.avisosService.getAvisosActivos(this.paginaActual,this.porPagina,this.busqueda,this.ordenarPor,this.orden,this.estadoFiltro).pipe(A(this.destroy$)).subscribe({next:e=>{this.avisos=e.avisos,this.totalAvisos=e.total,this.loading=!1,this.dataLoaded=!0,this.isMapView&&this.map&&this.plotAvisosOnMap(),n()},error:e=>{console.error("Error al cargar avisos:",e),this.error="Error al cargar los avisos. Por favor, int\xE9ntalo de nuevo.",this.loading=!1,t(e)}})})})}cambiarPagina(n){n>=1&&n<=this.obtenerTotalPaginas()&&(this.paginaActual=n,this.cargarAvisos())}obtenerTotalPaginas(){return Math.ceil(this.totalAvisos/this.porPagina)}obtenerRangoPaginas(){let n=this.obtenerTotalPaginas(),t=this.paginaActual,e=2,r=Math.max(1,t-e),d=Math.min(n,t+e);d-r<4&&(r===1?d=Math.min(n,r+4):r=Math.max(1,d-4));let p=[];for(let b=r;b<=d;b++)p.push(b);return p}puedeAnterior(){return this.paginaActual>1}puedeSiguiente(){return this.paginaActual<this.obtenerTotalPaginas()}paginaAnterior(){this.puedeAnterior()&&this.cambiarPagina(this.paginaActual-1)}paginaSiguiente(){this.puedeSiguiente()&&this.cambiarPagina(this.paginaActual+1)}primeraPagina(){this.cambiarPagina(1)}ultimaPagina(){this.cambiarPagina(this.obtenerTotalPaginas())}handleResize(){let n=document.querySelector(".btn-close-expanded");if(n&&window.innerWidth<=992){let t=this.getHeaderHeight();n.style.top=`${t+10}px`}}plotAvisosOnMap(){if(!this.map){console.log("Mapa no disponible para pintar marcadores");return}console.log("Pintando marcadores en el mapa..."),this.avisoMarkers.forEach(M=>M.remove()),this.avisoMarkers.clear();let n=this.getAvisosParaMapa();if(!n||n.length===0){console.log("No hay avisos para mostrar en el mapa");return}let t=new Map,e=0,r=n.length,d=yn.maxConcurrentRequests,p=0,b=[],v=()=>{if(p>=d||b.length===0)return;let{aviso:M,fullAddress:h}=b.shift();p++,this.geocodingService.geocode(h).subscribe({next:y=>{y&&this.map&&(t.set(h,y),this.addMarkerToMap(M,y),console.log(`Marcador a\xF1adido para aviso ${M.id}`)),e++,p--,v()},error:y=>{console.error(`Error al geocodificar direcci\xF3n para aviso ${M.id}:`,y),e++,p--,v()}})};n.forEach((M,h)=>{if(!M.direccion_cliente_aviso){console.log(`Aviso ${M.id} no tiene direcci\xF3n`),e++;return}let y=`${M.direccion_cliente_aviso}, Espa\xF1a`;if(t.has(y)){let S=t.get(y);this.addMarkerToMap(M,S),e++;return}setTimeout(()=>{b.push({aviso:M,fullAddress:y}),v()},h*yn.requestDelay)}),this.avisosSeleccionados.size>1?setTimeout(()=>{this.crearLineasDeRuta()},n.length*200+1e3):this.showNavigationPanel=!1}addMarkerToMap(n,t){if(!this.map)return;let e=this.estaSeleccionado(n),r=e?"#10B981":"#4F46E5",d=e?"large":"medium",p=this.mapboxService.addMarker({latitude:t[1],longitude:t[0],address:n.direccion_cliente_aviso},{label:`${n.nombre_cliente_aviso} - ${n.descripcion_problema}`,color:r,size:d});p.getElement().addEventListener("click",()=>{this.centrarAvisoEnMapa(n)}),this.avisoMarkers.set(n.id,p)}manejarClicFilaMapa(n,t){t&&t.target&&t.target.tagName==="INPUT"||(t&&(t.preventDefault(),t.stopPropagation()),this.modoSeleccion?this.toggleSeleccionAviso(n,t):(this.modoSeleccion=!0,this.toggleSeleccionAviso(n,t)))}centrarAvisoEnMapa(n,t){t&&(t.preventDefault(),t.stopPropagation()),this.selectedAviso=n.id;let e=this.avisoMarkers.get(n.id);if(e&&this.map){let r=e.getLngLat();this.map.flyTo({center:[r.lng,r.lat],zoom:15,duration:1e3}),setTimeout(()=>{e.togglePopup()},500)}}abrirEnMapasNativos(n,t){if(t&&(t.preventDefault(),t.stopPropagation()),!n.direccion_cliente_aviso){console.warn("El aviso no tiene direcci\xF3n");return}let e=this.avisoMarkers.get(n.id),r;if(e){let d=e.getLngLat();r={latitude:d.lat,longitude:d.lng,address:n.direccion_cliente_aviso}}else r={latitude:0,longitude:0,address:n.direccion_cliente_aviso};this.mapboxService.openGoogleMaps(r,{label:n.nombre_cliente_aviso})}abrirEnGoogleMaps(n,t){this.abrirEnMapasNativos(n,t)}abrirEnAppleMaps(n,t){if(t&&(t.preventDefault(),t.stopPropagation()),!n.direccion_cliente_aviso){console.warn("El aviso no tiene direcci\xF3n");return}let e=this.avisoMarkers.get(n.id),r;if(e){let d=e.getLngLat();r={latitude:d.lat,longitude:d.lng,address:n.direccion_cliente_aviso}}else r={latitude:0,longitude:0,address:n.direccion_cliente_aviso};this.mapboxService.openAppleMaps(r,{label:n.nombre_cliente_aviso})}initMap(){this.isMapView&&!this.map&&setTimeout(()=>{document.getElementById("map")&&!this.map?(console.log("Inicializando mapa con Mapbox..."),this.map=this.mapboxService.initializeMap("map",{center:[-3.70379,40.416775],zoom:12}),console.log("Mapa Mapbox cargado correctamente"),this.plotAvisosOnMap()):this.isMapView&&!this.map&&(console.log("Contenedor del mapa no disponible, reintentando..."),setTimeout(()=>{this.initMap()},200))},100)}toggleView(){this.isMapView=!this.isMapView,this.isMapView?setTimeout(()=>{this.initMap()},100):this.map&&(this.mapboxService.destroyMap(),this.avisoMarkers.clear(),this.map=null),this.cdr.detectChanges()}abrirModalCrearAviso(n){return w(this,null,function*(){let t=yield this.modalController.create({component:hn,cssClass:"modal-crear-aviso",componentProps:n?{clienteData:n}:{}});yield t.present();let{data:e,role:r}=yield t.onWillDismiss();if(r==="crear-cliente"){let d=yield this.modalController.create({component:yt,cssClass:"modal-crear-cliente",showBackdrop:!0,backdropDismiss:!0});yield d.present();let{data:p,role:b}=yield d.onWillDismiss();b==="confirm"&&p?(this.loading=!0,this.error=null,this.clientesService.crearCliente(p).subscribe({next:v=>{console.log("\u2705 Cliente creado exitosamente:",v),this.loading=!1,this.abrirModalCrearAviso(v)},error:v=>{console.error("\u274C Error al crear cliente:",v),this.loading=!1,this.error="Error al crear el cliente: "+(v.message||"Error desconocido"),this.abrirModalCrearAviso(n)}})):this.abrirModalCrearAviso(n)}else if(e){console.log("Datos del formulario:",e),this.loading=!0,this.error=null;let d={cliente_id:e.cliente||(n==null?void 0:n.id)||"cliente-temp-id",nombre_cliente_aviso:e.nombreContacto||(n==null?void 0:n.nombreContacto)||"Cliente",direccion_cliente_aviso:e.direccionLocal||(n==null?void 0:n.direccionLocal)||"",telefono_cliente_aviso:e.telefono||(n==null?void 0:n.telefono)||"",nombre_contacto:e.nombreContacto||(n==null?void 0:n.nombreContacto)||"",tipo:e.tipo||"correctivo",descripcion_problema:e.descripcion||"",es_urgente:e.esUrgente||!1,urgencia:e.esUrgente?"Alta":"Normal"};this.avisosService.crearAviso(d).pipe(A(this.destroy$)).subscribe({next:p=>{console.log("Aviso creado exitosamente:",p),e.imagenes&&e.imagenes.length>0?new Promise(v=>{let M=0,h=e.imagenes.length;e.imagenes.forEach(y=>{this.avisosService.subirFoto(p.id,y).pipe(A(this.destroy$)).subscribe({next:S=>{console.log("Foto subida:",S),M++,M===h&&v()},error:S=>{console.error("Error al subir foto:",S),M++,M===h&&v()}})})}).then(()=>{this.loading=!1,this.recargarAvisosSinCache()}):(this.loading=!1,this.recargarAvisosSinCache())},error:p=>{console.error("Error al crear aviso:",p),this.error="Error al crear el aviso. Por favor, int\xE9ntalo de nuevo.",this.loading=!1}})}})}toggleFullscreen(){return w(this,null,function*(){let n=document.querySelector(".map-display-container");if(!n){console.warn("Contenedor del mapa no encontrado");return}try{!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?yield document.exitFullscreen():document.webkitExitFullscreen?yield document.webkitExitFullscreen():document.mozCancelFullScreen?yield document.mozCancelFullScreen():document.msExitFullscreen&&(yield document.msExitFullscreen()):n.requestFullscreen?yield n.requestFullscreen():n.webkitRequestFullscreen?yield n.webkitRequestFullscreen():n.mozRequestFullScreen?yield n.mozRequestFullScreen():n.msRequestFullscreen?yield n.msRequestFullscreen():(console.warn("Pantalla completa no soportada en este navegador"),this.expandMap())}catch(t){console.error("Error al cambiar pantalla completa:",t),this.expandMap()}})}expandMap(){let n=document.querySelector(".map-display-container"),t=document.querySelector(".map-list-container");if(n&&t){t.style.display="none",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.zIndex="9999";let e=document.createElement("button");if(e.innerHTML='<ion-icon name="close"></ion-icon>',e.className="btn-close-expanded",e.onclick=()=>this.closeExpandedMap(),window.innerWidth<=992){let r=this.getHeaderHeight();e.style.top=`${r+10}px`,e.style.right="16px"}n.appendChild(e),this.map&&setTimeout(()=>this.map.resize(),100)}}getHeaderHeight(){let n=document.querySelector("ion-header")||document.querySelector(".header")||document.querySelector("[data-header]")||document.querySelector("header")||document.querySelector(".topbar")||document.querySelector(".main-layout-header");return n?n.getBoundingClientRect().height:window.innerWidth<=480?60:window.innerWidth<=768?70:80}closeExpandedMap(){let n=document.querySelector(".map-display-container"),t=document.querySelector(".map-list-container");if(n&&t){t.style.display="flex",n.style.position="",n.style.top="",n.style.left="",n.style.width="",n.style.height="",n.style.zIndex="";let e=n.querySelector(".btn-close-expanded");e&&e.remove(),this.map&&setTimeout(()=>this.map.resize(),100)}}handleFullscreenChange(){!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)||this.closeExpandedMap()}configurarBusqueda(){this.busquedaSubject.pipe(A(this.destroy$),zn(500),An()).subscribe(n=>{this.busqueda=n,this.paginaActual=1,this.cargarAvisos()})}toggleModoSeleccion(){this.modoSeleccion=!this.modoSeleccion,this.modoSeleccion||this.avisosSeleccionados.clear(),this.actualizarMapaConSeleccion()}toggleSeleccionAviso(n,t){t&&t.target&&t.target.tagName!=="INPUT"&&(t.preventDefault(),t.stopPropagation());let e=n.id;this.avisosSeleccionados.has(e)?this.avisosSeleccionados.delete(e):this.avisosSeleccionados.add(e),this.actualizarMapaConSeleccion()}estaSeleccionado(n){return this.avisosSeleccionados.has(n.id)}getNumeroAvisosSeleccionados(){return this.avisosSeleccionados.size}limpiarSeleccion(){this.avisosSeleccionados.clear(),this.actualizarMapaConSeleccion(),this.ocultarPanelNavegacion()}mostrarPanelNavegacion(){this.showNavigationPanel=!0}ocultarPanelNavegacion(){this.showNavigationPanel=!1,this.mapboxService.stopNavigation()}toggleNavigationPanel(){this.showNavigationPanel=!this.showNavigationPanel,console.log("Panel de navegaci\xF3n:",this.showNavigationPanel?"Mostrado":"Oculto"),console.log("Waypoints:",this.navigationWaypoints)}getAvisosParaMapa(){return this.avisosSeleccionados.size===0?this.avisos:this.avisos.filter(n=>this.avisosSeleccionados.has(n.id))}actualizarMapaConSeleccion(){this.isMapView&&this.map&&this.plotAvisosOnMap(),this.avisosSeleccionados.size>0?this.calcularRutaSeleccionada():this.rutaCalculada=null,this.cdr.detectChanges()}calcularRutaSeleccionada(){return w(this,null,function*(){if(this.avisosSeleccionados.size===0){this.rutaCalculada=null;return}let n=this.avisos.filter(t=>this.avisosSeleccionados.has(t.id));this.rutaCalculada={distancia:"Cargando...",tiempo:"Calculando...",paradas:n.length,tieneUbicacion:!1},this.calculandoUbicacion=!0,this.cdr.detectChanges();try{let t=yield this.routeCalculationService.obtenerUbicacionActual();this.calculandoUbicacion=!1,this.rutaCalculada={distancia:"Calculando ruta...",tiempo:"Calculando ruta...",paradas:n.length,tieneUbicacion:!!t},this.cdr.detectChanges(),this.routeCalculationService.calcularRuta(t,n).subscribe({next:e=>{this.rutaCalculada=e,this.cdr.detectChanges()},error:e=>{console.error("Error calculando ruta:",e),this.rutaCalculada={distancia:"Error al calcular",tiempo:"Error al calcular",paradas:n.length,tieneUbicacion:!!t},this.cdr.detectChanges()}})}catch(t){console.error("Error obteniendo ubicaci\xF3n:",t),this.calculandoUbicacion=!1,this.rutaCalculada={distancia:"Permitir ubicaci\xF3n",tiempo:"Permitir ubicaci\xF3n",paradas:n.length,tieneUbicacion:!1},this.cdr.detectChanges()}})}crearLineasDeRuta(){if(!this.map||this.avisosSeleccionados.size<2)return;console.log("\u{1F6E3}\uFE0F Creando ruta real con Mapbox para",this.avisosSeleccionados.size,"avisos seleccionados");let n=[];if(this.avisosSeleccionados.forEach(t=>{let e=this.avisoMarkers.get(t);if(e){let r=e.getLngLat(),d=this.avisos.find(p=>p.id===t);n.push({latitude:r.lat,longitude:r.lng,address:d==null?void 0:d.direccion_cliente_aviso})}}),n.length<2){console.log("\u26A0\uFE0F No hay suficientes coordenadas para crear la ruta");return}this.navigationWaypoints=n,this.mapboxService.createRoute(n).then(t=>{console.log("\u2705 Ruta real creada con Mapbox:",{distancia:this.mapboxService.formatDistance(t.totalDistance),duracion:this.mapboxService.formatTime(t.totalDuration),pasos:t.steps.length})}).catch(t=>{console.error("\u274C Error al crear ruta con Mapbox:",t),this.error="Error al crear la ruta. Verifica tu conexi\xF3n a internet."})}onBuscar(n){this.busquedaSubject.next(n)}verDetalleAviso(n){n.id&&this.router.navigate(["/ver-aviso",n.id])}editarAviso(n){return w(this,null,function*(){if(!(n!=null&&n.id)){console.error("No se puede editar el aviso: ID no v\xE1lido");return}try{console.log("Abriendo modal de edici\xF3n para aviso:",n.id);let t=yield this.modalController.create({component:hn,cssClass:"modal-crear-aviso",componentProps:{modoEdicion:!0,avisoExistente:n}});yield t.present();let{data:e,role:r}=yield t.onWillDismiss();if(r==="confirm"&&e)try{console.log("Datos del formulario de edici\xF3n:",e);let d={tipo:e.tipo,nombre_cliente_aviso:e.nombreContacto,direccion_cliente_aviso:e.direccionLocal,telefono_cliente_aviso:e.telefono,nombre_contacto:e.nombreContacto,descripcion_problema:e.descripcion,es_urgente:e.esUrgente,urgencia:e.esUrgente?"Alta":"Normal"},p=e.id||n.id;this.loading=!0,this.avisosService.actualizarAviso(p,d).pipe(A(this.destroy$)).subscribe({next:b=>{console.log("Aviso actualizado exitosamente:",b),this.loading=!1,console.log("\u2705 Aviso actualizado exitosamente"),this.recargarAvisosSinCache()},error:b=>{console.error("Error al actualizar aviso:",b),this.loading=!1,this.error=b.message||"Error al actualizar el aviso. Por favor, int\xE9ntalo de nuevo."}})}catch(d){console.error("Error al procesar la edici\xF3n:",d),this.error="Error al procesar la edici\xF3n. Por favor, int\xE9ntalo de nuevo."}}catch(t){console.error("Error al abrir el modal de edici\xF3n:",t),this.error="Error al abrir el modal de edici\xF3n. Por favor, int\xE9ntalo de nuevo."}})}eliminarAviso(n){return w(this,null,function*(){this.loading=!0,this.error=null,this.avisosService.verificarDependenciasAviso(n.id).pipe(A(this.destroy$)).subscribe({next:t=>w(this,null,function*(){if(this.loading=!1,!t.puedeEliminar){let p=t.dependencias.join(", ");this.error=`No se puede eliminar el aviso porque tiene los siguientes elementos asociados: ${p}. Debes eliminar primero estos elementos o contactar al administrador.`;return}let e=yield this.modalController.create({component:zt,cssClass:"modal-confirmar-eliminacion",showBackdrop:!0,backdropDismiss:!0,componentProps:{aviso:n,dependencias:t.dependencias}});yield e.present();let{data:r,role:d}=yield e.onWillDismiss();d==="confirm"&&(r!=null&&r.confirmado)&&(this.loading=!0,this.error=null,this.avisosService.eliminarAviso(n.id).pipe(A(this.destroy$)).subscribe({next:()=>{console.log("Aviso eliminado exitosamente"),this.loading=!1,this.recargarAvisosSinCache()},error:p=>{console.error("Error al eliminar aviso:",p),p.code==="23503"?p.message.includes("presupuestos")?this.error="No se puede eliminar el aviso porque tiene presupuestos asociados. Elimina primero los presupuestos.":p.message.includes("facturas")?this.error="No se puede eliminar el aviso porque tiene facturas asociadas. Elimina primero las facturas.":p.message.includes("albaranes")?this.error="No se puede eliminar el aviso porque tiene albaranes asociados. Elimina primero los albaranes.":this.error="No se puede eliminar el aviso porque tiene datos relacionados. Contacta al administrador.":this.error="Error al eliminar el aviso. Por favor, int\xE9ntalo de nuevo.",this.loading=!1}}))}),error:t=>{console.error("Error al verificar dependencias:",t),this.error="Error al verificar las dependencias del aviso. Por favor, int\xE9ntalo de nuevo.",this.loading=!1}})})}getCurrentStep(){return this.mapboxService.getCurrentStep()}getUpcomingSteps(){let n=this.mapboxService.getCurrentNavigationValue();if(!(n!=null&&n.steps))return[];let t=n.currentStepIndex||0;return n.steps.slice(t+1,t+4)}getManeuverIcon(n){return this.mapboxService.getManeuverIcon(n)}formatDistance(n){return this.mapboxService.formatDistance(n)}startNavigation(){if(this.navigationWaypoints.length<2){console.warn("Se necesitan al menos 2 waypoints para la navegaci\xF3n");return}console.log("\u{1F680} Iniciando navegaci\xF3n desde componente avisos..."),this.mapboxService.startNavigation(this.navigationWaypoints)}stopNavigation(){console.log("\u{1F6D1} Deteniendo navegaci\xF3n desde componente avisos..."),this.mapboxService.stopNavigation()}nextStep(){console.log("\u27A1\uFE0F Siguiente paso desde componente avisos..."),this.mapboxService.nextStep()}abrirModalOpcionesNavegacion(){return w(this,null,function*(){if(this.avisosSeleccionados.size<1){console.warn("Se necesita al menos 1 aviso seleccionado para la navegaci\xF3n");return}let n=this.avisos.filter(r=>this.avisosSeleccionados.has(r.id));console.log("\u{1F680} Abriendo modal de navegaci\xF3n profesional para",n.length,"avisos");let t=yield this.modalController.create({component:Ft,cssClass:"modal-opciones-navegacion",componentProps:{avisosSeleccionados:n}});yield t.present();let{data:e}=yield t.onWillDismiss();if(e!=null&&e.opcion)switch(console.log("\u{1F3AF} Opci\xF3n de navegaci\xF3n seleccionada:",e.opcion),e.opcion){case"google":this.abrirRutaEnGoogleMaps();break;case"apple":this.abrirRutaEnAppleMaps();break;case"app":this.abrirModalMapaNavegacion();break}})}abrirModalMapaNavegacion(){return w(this,null,function*(){if(this.avisosSeleccionados.size<1){console.warn("Se necesita al menos 1 aviso seleccionado");return}console.log("\u{1F5FA}\uFE0F Abriendo modal de mapa de navegaci\xF3n...");try{let n=yield this.obtenerUbicacionActual();if(!n){console.error("\u274C No se pudo obtener la ubicaci\xF3n actual del usuario"),this.error="No se pudo obtener tu ubicaci\xF3n actual. Verifica que tengas habilitado el GPS.";return}console.log("\u{1F4CD} Ubicaci\xF3n actual obtenida:",n);let t=[{latitude:n.latitude,longitude:n.longitude,address:"Tu ubicaci\xF3n actual"}];for(let d of this.avisosSeleccionados){let p=this.avisos.find(b=>b.id===d);if(p&&p.direccion_cliente_aviso){let b=this.avisoMarkers.get(d);if(b){let v=b.getLngLat();t.push({latitude:v.lat,longitude:v.lng,address:p.direccion_cliente_aviso})}else try{let v=yield this.geocodingService.geocode(`${p.direccion_cliente_aviso}, Espa\xF1a`).toPromise();if(v&&v.length===2)t.push({latitude:v[1],longitude:v[0],address:p.direccion_cliente_aviso}),console.log(`\u2705 Direcci\xF3n geocodificada para aviso ${d}:`,v);else{console.warn(`\u26A0\uFE0F No se pudo geocodificar la direcci\xF3n del aviso ${d}: ${p.direccion_cliente_aviso}`);continue}}catch(v){console.error(`\u274C Error al geocodificar aviso ${d}:`,v);continue}}}if(console.log("\u{1F3AF} Waypoints para navegaci\xF3n:",t.length,"puntos"),t.length<2){console.error("\u274C No se encontraron destinos v\xE1lidos para la navegaci\xF3n"),this.error="No se pudieron geocodificar las direcciones de los avisos seleccionados. Verifica que las direcciones sean v\xE1lidas.";return}let{ModalMapaNavegacionComponent:e}=yield import("./chunk-DN5QRR47.js");yield(yield this.modalController.create({component:e,cssClass:"modal-mapa-navegacion-fullscreen",componentProps:{waypoints:t}})).present(),console.log("\u2705 Modal de mapa presentado")}catch(n){console.error("\u274C Error al abrir modal de mapa:",n),this.error="Error al preparar la navegaci\xF3n. Verifica tu conexi\xF3n a internet y el GPS."}})}cerrarModalMapaNavegacion(){console.log("\u274C Cerrando modal de mapa de navegaci\xF3n..."),this.showFullscreenMap=!1,this.mapboxService.stopNavigation()}iniciarNavegacionProfesional(){return w(this,null,function*(){if(this.avisosSeleccionados.size<1){console.warn("Se necesita al menos 1 aviso seleccionado");return}console.log("\u{1F680} Iniciando navegaci\xF3n profesional...");try{let n=yield this.obtenerUbicacionActual();if(!n){console.error("\u274C No se pudo obtener la ubicaci\xF3n actual del usuario"),this.error="No se pudo obtener tu ubicaci\xF3n actual. Verifica que tengas habilitado el GPS.";return}console.log("\u{1F4CD} Ubicaci\xF3n actual obtenida:",n);let t=[{latitude:n.latitude,longitude:n.longitude,address:"Tu ubicaci\xF3n actual"}];for(let r of this.avisosSeleccionados){let d=this.avisos.find(p=>p.id===r);if(d&&d.direccion_cliente_aviso){let p=this.avisoMarkers.get(r);if(p){let b=p.getLngLat();t.push({latitude:b.lat,longitude:b.lng,address:d.direccion_cliente_aviso})}else try{let b=yield this.geocodingService.geocode(`${d.direccion_cliente_aviso}, Espa\xF1a`).toPromise();if(b&&b.length===2)t.push({latitude:b[1],longitude:b[0],address:d.direccion_cliente_aviso}),console.log(`\u2705 Direcci\xF3n geocodificada para aviso ${r}:`,b);else{console.warn(`\u26A0\uFE0F No se pudo geocodificar la direcci\xF3n del aviso ${r}: ${d.direccion_cliente_aviso}`);continue}}catch(b){console.error(`\u274C Error al geocodificar aviso ${r}:`,b);continue}}}if(console.log("\u{1F3AF} Waypoints para navegaci\xF3n:",t.length,"puntos"),console.log("\u{1F4CD} Punto de partida:",t[0]),console.log("\u{1F3AF} Destinos:",t.slice(1)),t.length<2){console.error("\u274C No se encontraron destinos v\xE1lidos para la navegaci\xF3n"),this.error="No se pudieron geocodificar las direcciones de los avisos seleccionados. Verifica que las direcciones sean v\xE1lidas.";return}let e=yield this.mapboxService.createRoute(t);console.log("\u2705 Ruta profesional creada:",e),this.showNavigationPanel=!0,this.navigationWaypoints=t,console.log("\u{1F3AF} Panel de navegaci\xF3n activado:",this.showNavigationPanel),console.log("\u{1F3AF} Waypoints para panel:",this.navigationWaypoints),this.cdr.detectChanges(),this.isMapView||(console.log("\u{1F5FA}\uFE0F Inicializando mapa para navegaci\xF3n..."),setTimeout(()=>{document.getElementById("map")?(this.map=this.mapboxService.initializeMap("map",{center:[n.longitude,n.latitude],zoom:15}),setTimeout(()=>{this.plotAvisosOnMap()},500)):console.error("\u274C Contenedor del mapa no encontrado despu\xE9s del delay")},100)),this.mapboxService.startNavigation(t).subscribe(r=>{r&&console.log("\u{1F9ED} Navegaci\xF3n profesional activa:",{pasoActual:r.currentStepIndex+1,totalPasos:r.steps.length,navegando:r.isNavigating,progreso:`${r.progress.toFixed(1)}%`})})}catch(n){console.error("\u274C Error al iniciar navegaci\xF3n profesional:",n),this.error="Error al crear la ruta de navegaci\xF3n. Verifica tu conexi\xF3n a internet y el GPS."}})}obtenerUbicacionActual(){return w(this,null,function*(){return new Promise(n=>{if(!navigator.geolocation){console.error("\u274C Geolocalizaci\xF3n no soportada"),n(null);return}console.log("\u{1F4CD} Obteniendo ubicaci\xF3n actual del usuario...");let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e4};navigator.geolocation.getCurrentPosition(e=>{let r={latitude:e.coords.latitude,longitude:e.coords.longitude};console.log("\u2705 Ubicaci\xF3n actual obtenida:",r),n(r)},e=>{console.error("\u274C Error al obtener ubicaci\xF3n:",e),n(null)},t)})})}abrirRutaEnGoogleMaps(){if(this.avisosSeleccionados.size<1){console.warn("Se necesita al menos 1 aviso seleccionado");return}let n=this.avisos.filter(t=>this.avisosSeleccionados.has(t.id));console.log("Abriendo ruta en Google Maps para",n.length,"avisos")}abrirRutaEnAppleMaps(){if(this.avisosSeleccionados.size<1){console.warn("Se necesita al menos 1 aviso seleccionado");return}let n=this.avisos.filter(t=>this.avisosSeleccionados.has(t.id));console.log("Abriendo ruta en Apple Maps para",n.length,"avisos")}};l.\u0275fac=function(t){return new(t||l)(z(H),z(Tn),z(Vt),z(vn),z(Mn),z(wt),z($t),z(Dt),z($n),z(kt),z(jt),z(Q),z(fn))},l.\u0275cmp=V({type:l,selectors:[["app-avisos"]],decls:9,vars:6,consts:[["slot","fixed",3,"ionRefresh"],["pullingIcon","chevron-down-circle-outline","pullingText","Desliza hacia abajo para actualizar","refreshingSpinner","circles","refreshingText","Actualizando avisos..."],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","dashboard-table",4,"ngIf"],["class","global-navigation-panel",4,"ngIf"],["class","navigation-map-container",4,"ngIf"],["style","position: fixed; top: 10px; left: 10px; background: red; color: white; padding: 10px; z-index: 10000; border-radius: 5px;",4,"ngIf"],[1,"loading-state"],[1,"loading-spinner"],["name","refresh-outline",1,"spinning"],[1,"error-state"],[1,"error-message"],["name","alert-circle-outline"],[1,"btn-retry",3,"click"],["name","refresh-outline"],[1,"dashboard-table"],[1,"table-header"],[1,"table-header-container"],[1,"table-header-left","desktop-only"],[1,"table-title"],[1,"table-meta"],["class","seleccionados-info",4,"ngIf"],[1,"mobile-search-nav"],[1,"mobile-search"],["type","text","placeholder","Buscar aviso..."],["name","search-outline"],[1,"mobile-buttons"],["title","Modo selecci\xF3n",1,"btn-seleccion",3,"click"],["name","checkmark-circle-outline"],[1,"btn-map",3,"click"],[3,"name"],[1,"btn-add",3,"click"],["name","add-circle"],["class","mobile-navigation-button",4,"ngIf"],[1,"table-search","desktop-only"],["type","text","placeholder","Buscar..."],[1,"header-actions"],["class","btn-limpiar","title","Limpiar selecci\xF3n",3,"click",4,"ngIf"],["class","btn-navegacion-desktop","title","Opciones de navegaci\xF3n",3,"click",4,"ngIf"],[4,"ngIf"],["class","route-info-panel",4,"ngIf"],[1,"seleccionados-info"],["class","ruta-info",4,"ngIf"],[1,"ruta-info"],[1,"mobile-navigation-button"],[1,"btn-navegacion-mobile",3,"click"],["name","navigate-outline"],["title","Limpiar selecci\xF3n",1,"btn-limpiar",3,"click"],["name","close-circle-outline"],["title","Opciones de navegaci\xF3n",1,"btn-navegacion-desktop",3,"click"],["class","compact-avisos-table",4,"ngIf"],["class","no-data-container",4,"ngIf"],["class","table-pagination",4,"ngIf"],[1,"compact-avisos-table"],[1,"avisos-table"],[1,"header-row"],["class","header-cell",4,"ngIf"],[1,"header-cell"],[1,"header-cell","desktop-only"],[1,"table-body"],["class","aviso-row","style","justify-content: start;",3,"ngClass",4,"ngFor","ngForOf"],[1,"aviso-row",2,"justify-content","start",3,"ngClass"],["class","aviso-cell seleccion-cell",4,"ngIf"],[1,"aviso-cell","numero-aviso"],[1,"aviso-cell","estado-aviso","desktop-only",2,"justify-content","start"],[1,"badge",3,"ngClass"],[1,"aviso-cell","nombre-cliente"],[1,"aviso-cell","detalle-servicio"],[1,"detalle-texto",3,"title"],[1,"aviso-cell","fecha-aviso","desktop-only"],[1,"aviso-cell","urgente-aviso","desktop-only"],["name","alert-circle","class","urgente-icon","title","Aviso urgente",4,"ngIf"],["name","close","class","no-urgente-icon","title","No urgente",4,"ngIf"],[1,"aviso-cell","acciones"],["title","Ver detalles",1,"btn-ver",3,"click"],["name","eye-outline"],["title","Abrir en mapas nativos",1,"btn-navegar",3,"click"],["title","Editar aviso",1,"btn-editar",3,"click"],["name","create-outline"],["title","Eliminar aviso",1,"btn-eliminar",3,"click"],["name","trash-outline"],[1,"aviso-cell","seleccion-cell"],["type","checkbox",1,"checkbox-seleccion",3,"change","click","checked"],["name","alert-circle","title","Aviso urgente",1,"urgente-icon"],["name","close","title","No urgente",1,"no-urgente-icon"],[1,"no-data-container"],[1,"no-data-message"],[1,"btn-create",3,"click"],[1,"table-pagination"],[1,"pagination-info"],[1,"pagination"],["title","Primera p\xE1gina",1,"pagination-btn",3,"click","disabled"],["name","chevron-back-outline"],["title","P\xE1gina anterior",1,"pagination-btn",3,"click","disabled"],[4,"ngFor","ngForOf"],["title","P\xE1gina siguiente",1,"pagination-btn",3,"click","disabled"],["name","chevron-forward-outline"],["title","\xDAltima p\xE1gina",1,"pagination-btn",3,"click","disabled"],[1,"pagination-btn",3,"click"],["class","map-view-container",4,"ngIf"],[1,"map-view-container"],[1,"map-list-container"],[1,"map-avisos-table"],["class","aviso-row",3,"ngClass","title","click",4,"ngFor","ngForOf"],[1,"map-display-container"],["title","Pantalla completa",1,"btn-fullscreen",3,"click"],["name","expand-outline"],["title","Volver a lista",1,"btn-back-to-list",3,"click"],["name","list-outline"],[1,"desktop-only"],["class","mobile-navigation",4,"ngIf"],["class","desktop-navigation",4,"ngIf"],["id","map"],[1,"aviso-row",3,"click","ngClass","title"],["title","Ir al punto en el mapa",1,"btn-mapa",3,"click"],["name","map-outline"],[1,"mobile-navigation"],[1,"mobile-header"],["class","current-instruction",4,"ngIf"],[1,"mobile-controls"],["color","success","size","small",3,"click",4,"ngIf"],["color","danger","size","small",3,"click",4,"ngIf"],["color","warning","size","small",3,"click",4,"ngIf"],["class","upcoming-steps",4,"ngIf"],[1,"current-instruction"],[1,"instruction-row"],[1,"maneuver-icon"],[1,"instruction-text"],[1,"instruction-distance"],["color","success","size","small",3,"click"],["name","play"],["color","danger","size","small",3,"click"],["name","stop"],["color","warning","size","small",3,"click"],["name","arrow-forward"],[1,"upcoming-steps"],["class","step-item",4,"ngFor","ngForOf"],[1,"step-item"],[1,"step-distance"],[1,"desktop-navigation"],[1,"navigation-panel",3,"waypoints"],[1,"route-info-panel"],[1,"route-info-header"],["name","crescent","color","primary",4,"ngIf"],[1,"route-stats"],[1,"route-stat"],[1,"stat-icon"],["name","location-outline"],[1,"stat-content"],[1,"stat-label"],[1,"stat-value"],["name","speedometer-outline"],["name","time-outline"],["class","route-actions",4,"ngIf"],["name","crescent","color","primary"],[1,"route-actions"],[1,"btn-navegar-ruta",3,"click"],[1,"global-navigation-panel"],[2,"padding","10px","background","#4F46E5","color","white","text-align","center","font-weight","bold"],[1,"navigation-map-container"],[2,"padding","5px","background","#10B981","color","white","text-align","center","font-size","12px","font-weight","bold"],["id","map",1,"navigation-map"],[2,"position","fixed","top","10px","left","10px","background","red","color","white","padding","10px","z-index","10000","border-radius","5px"]],template:function(t,e){t&1&&(i(0,"ion-content")(1,"ion-refresher",0),C("ionRefresh",function(d){return e.handleRefresh(d)}),u(2,"ion-refresher-content",1),a(),x(3,ve,5,0,"div",2)(4,Me,8,1,"div",3)(5,Xe,41,17,"section",4),a(),x(6,Je,4,1,"div",5)(7,no,4,0,"div",6)(8,to,6,3,"div",7)),t&2&&(s(3),_("ngIf",e.loading),s(),_("ngIf",e.error&&!e.loading),s(),_("ngIf",!e.loading&&!e.error),s(),_("ngIf",e.showNavigationPanel),s(),_("ngIf",e.showNavigationPanel&&!e.isMapView),s(),_("ngIf",e.showNavigationPanel))},dependencies:[Wn,j,Vn,$,D,sn,gn,U,Gn,Ot,ht,xt,Nt],styles:[`@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: #FFF}.global-navigation-panel[_ngcontent-%COMP%]{position:fixed!important;top:20px!important;right:20px!important;z-index:9999!important;width:420px!important;max-height:85vh!important;background:#fff!important;border-radius:12px!important;box-shadow:0 8px 32px #0000004d!important;border:2px solid #4F46E5!important}@media (max-width: 768px){.global-navigation-panel[_ngcontent-%COMP%]{position:fixed!important;top:0!important;left:0!important;right:0!important;width:100%!important;max-height:50vh!important;border-radius:0!important;border:none!important;border-bottom:2px solid #4F46E5!important}}.navigation-map-container[_ngcontent-%COMP%]{position:fixed!important;bottom:20px!important;right:20px!important;width:300px!important;height:200px!important;z-index:9998!important;border-radius:12px!important;overflow:hidden!important;box-shadow:0 8px 32px #0000004d!important;border:2px solid #4F46E5!important;background:#fff!important}.navigation-map-container[_ngcontent-%COMP%]   .navigation-map[_ngcontent-%COMP%]{width:100%!important;height:100%!important}@media (max-width: 768px){.navigation-map-container[_ngcontent-%COMP%]{position:fixed!important;bottom:0!important;left:0!important;right:0!important;width:100%!important;height:150px!important;border-radius:0!important;border:none!important;border-top:2px solid #4F46E5!important}}.modal-mapa-navegacion-fullscreen[_ngcontent-%COMP%]{--width: 100vw;--height: 100vh;--max-width: 100vw;--max-height: 100vh;--border-radius: 0;--backdrop-opacity: .8}@media (max-width: 768px){app-mapbox-navigation-panel[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:1000;width:100%}}.mobile-navigation[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;background:#1a1a2e;color:#fff;padding:0;margin:0;border-radius:0;box-shadow:0 4px 6px #0000004d;z-index:1000}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#1a1a2e;border-bottom:1px solid rgba(255,255,255,.1)}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]{flex:1}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:4px}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-row[_ngcontent-%COMP%]   .maneuver-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#4f46e5}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-row[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#fff;flex:1}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-distance[_ngcontent-%COMP%]{font-size:.9rem;color:#fffc;margin-left:27px}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .mobile-controls[_ngcontent-%COMP%]{display:flex;gap:8px}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .mobile-controls[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--border-radius: 20px;width:40px;height:40px}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;background:#1a1a2e}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid rgba(255,255,255,.05)}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .maneuver-icon[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff9;width:20px;text-align:center}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{flex:1;font-size:.9rem;color:#fffc;line-height:1.3}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-distance[_ngcontent-%COMP%]{font-size:.8rem;color:#fff9;white-space:nowrap}ion-refresher[_ngcontent-%COMP%]{--color: #4F46E5;--background: rgba(255, 255, 255, .95);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}ion-refresher[_ngcontent-%COMP%]   ion-refresher-content[_ngcontent-%COMP%]{--color: #4F46E5;--text-color: #64748b;--pulling-icon-color: #4F46E5;--refreshing-spinner-color: #4F46E5}@media (max-width: 768px){ion-refresher[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .98)}ion-refresher[_ngcontent-%COMP%]   ion-refresher-content[_ngcontent-%COMP%]{--pulling-text-font-size: 14px;--refreshing-text-font-size: 14px}}@media (max-width: 480px){ion-refresher[_ngcontent-%COMP%]   ion-refresher-content[_ngcontent-%COMP%]{--pulling-text-font-size: 12px;--refreshing-text-font-size: 12px}}ion-content.refresher-active[_ngcontent-%COMP%]{--overflow: hidden}.dashboard-table[_ngcontent-%COMP%]{background:#fff;padding:25px}.table-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px;flex-wrap:wrap;gap:16px}.table-title[_ngcontent-%COMP%]{font-size:18px;color:#26262a;font-weight:500}.table-meta[_ngcontent-%COMP%]{color:#4f46e5;font-size:14px}.table-search[_ngcontent-%COMP%]{display:flex;gap:20px}.table-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:8px;padding:7px 14px;font-size:1rem;border:none;background:#f9fbff;color:#26262a}.table-search[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:8px;padding:7px 14px;font-size:1rem;background:#f9fbff;border:none;color:#26262a}.mobile-search-nav[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:12px}.mobile-search[_ngcontent-%COMP%]{position:relative;width:100%}.mobile-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:9px 40px 9px 10px;border-radius:12px;border:1px solid #e2e8f0;font-size:16px;background:#fff;box-shadow:0 1px 3px #0000001a}.mobile-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.mobile-search[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;right:16px;top:50%;transform:translateY(-50%);font-size:20px;color:#64748b}.mobile-navigation-button[_ngcontent-%COMP%]{display:none;width:100%;padding:0 15px}.mobile-navigation-button[_ngcontent-%COMP%]   .btn-navegacion-mobile[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;background:#059669;color:#fff;border:none;border-radius:10px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.mobile-navigation-button[_ngcontent-%COMP%]   .btn-navegacion-mobile[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.mobile-navigation-button[_ngcontent-%COMP%]   .btn-navegacion-mobile[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #10b9814d}.mobile-navigation-button[_ngcontent-%COMP%]   .btn-navegacion-mobile[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 1px 4px #10b98133}.mobile-route-info[_ngcontent-%COMP%]{display:none;margin:8px 16px;padding:12px 16px;background:linear-gradient(135deg,#ecfdf5,#d1fae5);border:1px solid #10B981;border-radius:12px}.mobile-route-info[_ngcontent-%COMP%]   .route-info-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.mobile-route-info[_ngcontent-%COMP%]   .route-info-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#10b981}.mobile-route-info[_ngcontent-%COMP%]   .route-info-content[_ngcontent-%COMP%]   .route-text[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#059669}.mobile-route-info[_ngcontent-%COMP%]   .route-info-content[_ngcontent-%COMP%]   .route-hint[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;margin-left:auto}.mobile-actions[_ngcontent-%COMP%]{display:none;justify-content:space-between;align-items:center;margin-bottom:16px;gap:12px}.mobile-actions[_ngcontent-%COMP%]   .mobile-filter[_ngcontent-%COMP%]{flex:1;padding:8px 40px 8px 16px;border-radius:12px;border:1px solid #E2E8F0;background:#f8fafc;font-size:14px;color:#475569;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23475569' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;background-size:16px;height:40px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:8px;border:none}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.custom-mat-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 8px;margin-bottom:12px}.custom-mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#64748b;font-size:14px;font-weight:400;text-align:left;padding:8px 16px;background:transparent}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#fff}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0 16px;color:#26262a;font-size:14px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:8px;border-bottom-left-radius:8px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:8px;border-bottom-right-radius:8px}.mobile-cards[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:12px;margin-bottom:16px}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #e2e8f0;overflow:hidden}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #f1f5f9}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-number[_ngcontent-%COMP%]{font-weight:500;color:#64748b}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px;color:#334155;font-size:14px}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-row.detail[_ngcontent-%COMP%]{color:#64748b;margin:8px 0}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#64748b}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .urgente-icon[_ngcontent-%COMP%]{color:#d92d20;margin-left:auto}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0f172a;font-weight:500}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{padding:12px 16px;border-top:1px solid #f1f5f9}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:8px;padding:8px;border:none;border-radius:10px;background:#f8fafc;color:#4f46e5;font-weight:500;font-size:14px;transition:all .2s ease}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500;display:inline-flex;align-items:center;gap:4px}.badge.yellow[_ngcontent-%COMP%]{background:var(--estado-en-curso-bg);color:var(--estado-en-curso-color)}.badge.red[_ngcontent-%COMP%]{background:var(--estado-pendiente-bg);color:var(--estado-pendiente-color)}.badge.green[_ngcontent-%COMP%]{background:var(--estado-completado-bg);color:var(--estado-completado-color)}.badge.no-visitado[_ngcontent-%COMP%]{background:var(--estado-no-visitado-bg);color:var(--estado-no-visitado-color)}.badge.visitado-pendiente[_ngcontent-%COMP%]{background:var(--estado-visitado-pendiente-bg);color:var(--estado-visitado-pendiente-color)}.badge.pendiente-presupuesto[_ngcontent-%COMP%]{background:var(--estado-pendiente-presupuesto-bg);color:var(--estado-pendiente-presupuesto-color)}.badge.listo-para-facturar[_ngcontent-%COMP%]{background:var(--estado-listo-para-facturar-bg);color:var(--estado-listo-para-facturar-color)}.view-icon[_ngcontent-%COMP%]{color:#64748b;font-size:20px;cursor:pointer}.table-header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;flex-shrink:0}.table-pagination[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;padding:16px 0;border-top:1px solid #e2e8f0}.table-pagination[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{color:#64748b;font-size:14px}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]{min-width:36px;height:36px;border:1px solid #d1d5db;background:#fff;color:#374151;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;font-size:14px;font-weight:500}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f3f4f6;border-color:#9ca3af}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.95)}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn.active[_ngcontent-%COMP%]{background:#4f46e5;color:#fff;border-color:#4f46e5}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn.active[_ngcontent-%COMP%]:hover{background:#4338ca}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background:#f9fafb;color:#9ca3af}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.table-pagination[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]{min-width:32px;height:32px;font-size:12px}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:#fafbff;position:fixed;top:0;left:0;right:0;bottom:0;z-index:1000}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:40px;background:#fff;border-radius:16px;box-shadow:0 2px 8px #e0e7ef33;border:1px solid #E2E8F0}.loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#4f46e5;margin-bottom:16px}.loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:16px;margin:0}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:#fafbff;position:fixed;top:0;left:0;right:0;bottom:0;z-index:1000}.error-message[_ngcontent-%COMP%]{text-align:center;padding:40px;background:#fff;border-radius:16px;box-shadow:0 2px 8px #e0e7ef33;border:1px solid #E2E8F0;max-width:400px}.error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#d92d20;margin-bottom:16px}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:14px;margin:0 0 24px;line-height:1.5}.btn-retry[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;background:#4f46e5;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.btn-retry[_ngcontent-%COMP%]:hover{background:#4338ca}.btn-retry[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.btn-map[_ngcontent-%COMP%], .btn-add[_ngcontent-%COMP%], .btn-seleccion[_ngcontent-%COMP%], .btn-limpiar[_ngcontent-%COMP%], .btn-ruta-google[_ngcontent-%COMP%], .btn-ruta-apple[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border-radius:10px;font-size:14px;font-weight:500;transition:all .2s ease;white-space:nowrap;cursor:pointer;border:none;min-height:42px}.btn-map[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .btn-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .btn-seleccion[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .btn-limpiar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .btn-ruta-google[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .btn-ruta-apple[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.btn-map[_ngcontent-%COMP%]:active, .btn-add[_ngcontent-%COMP%]:active, .btn-seleccion[_ngcontent-%COMP%]:active, .btn-limpiar[_ngcontent-%COMP%]:active, .btn-ruta-google[_ngcontent-%COMP%]:active, .btn-ruta-apple[_ngcontent-%COMP%]:active{transform:scale(.98)}.btn-map[_ngcontent-%COMP%]{background-color:#f8fafc;color:#475569;border:1px solid #E2E8F0}.btn-map[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;border-color:#cbd5e1}.btn-add[_ngcontent-%COMP%]{background-color:#4f46e5;color:#fff;box-shadow:0 1px 2px #4f46e51a}.btn-add[_ngcontent-%COMP%]:hover{background-color:#4338ca;box-shadow:0 2px 4px #4f46e533}.btn-seleccion[_ngcontent-%COMP%]{background-color:#f8fafc;color:#475569;border:1px solid #E2E8F0}.btn-seleccion[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;border-color:#cbd5e1}.btn-seleccion.active[_ngcontent-%COMP%]{background-color:#10b981;color:#fff;border-color:#10b981}.btn-seleccion.active[_ngcontent-%COMP%]:hover{background-color:#059669}.btn-limpiar[_ngcontent-%COMP%]{background-color:#fef2f2;color:#dc2626;border:1px solid #FECACA}.btn-limpiar[_ngcontent-%COMP%]:hover{background-color:#fee2e2;border-color:#fca5a5}.btn-ruta-google[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff;border:1px solid #4285F4}.btn-ruta-google[_ngcontent-%COMP%]:hover{background-color:#3367d6;border-color:#3367d6}.btn-ruta-apple[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:1px solid #007AFF}.btn-ruta-apple[_ngcontent-%COMP%]:hover{background-color:#0056cc;border-color:#0056cc}.btn-navegacion-desktop[_ngcontent-%COMP%]{background:#059669;color:#fff;border:1px solid #059669;padding:12px 16px;border-radius:10px;font-size:14px;font-weight:600;box-shadow:0 2px 4px #10b98133}.btn-navegacion-desktop[_ngcontent-%COMP%]:hover{background:#047857;border-color:#047857;box-shadow:0 4px 8px #10b9814d;transform:translateY(-1px)}.btn-navegacion-desktop[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 4px #10b98133}.mobile-buttons[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.mobile-buttons[_ngcontent-%COMP%]{display:flex!important;justify-content:center;gap:12px;padding-left:10px}.mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;border:none;display:flex;align-items:center;justify-content:center;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.95)}.mobile-buttons[_ngcontent-%COMP%]   .btn-seleccion[_ngcontent-%COMP%]{background:#f8fafc;color:#475569;border:1px solid #E2E8F0}.mobile-buttons[_ngcontent-%COMP%]   .btn-seleccion.active[_ngcontent-%COMP%]{background:#10b981;color:#fff;border-color:#10b981;box-shadow:0 4px 8px #10b9814d}.mobile-buttons[_ngcontent-%COMP%]   .btn-seleccion[_ngcontent-%COMP%]:hover:not(.active){background:#f1f5f9;border-color:#cbd5e1}.mobile-buttons[_ngcontent-%COMP%]   .btn-map[_ngcontent-%COMP%]{background:#f8fafc;color:#475569;border:1px solid #E2E8F0}.mobile-buttons[_ngcontent-%COMP%]   .btn-map[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1}.mobile-buttons[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#6366f1);color:#fff;box-shadow:0 4px 8px #4f46e54d}.mobile-buttons[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4338ca,#4f46e5);box-shadow:0 6px 12px #4f46e566}}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]{display:flex;gap:12px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:48px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:12px;border:none;transition:all .2s ease}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-map[_ngcontent-%COMP%], .mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]{color:#475569;border:1px solid #E2E8F0;padding:10px;background:#fff}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-map[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#6366f1);color:#fff;box-shadow:0 4px 6px -1px #4f46e51a,0 2px 4px -1px #4f46e50f}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]:hover, .mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]:active{background:linear-gradient(135deg,#4338ca,#4f46e5);box-shadow:0 4px 6px -1px #4f46e533}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.95)}.mobile-actions[_ngcontent-%COMP%]   .mobile-filter[_ngcontent-%COMP%]{flex:1;padding:8px 40px 8px 16px;border-radius:12px;border:1px solid #E2E8F0;background:#f8fafc;font-size:14px;color:#475569;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23475569' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;background-size:16px;height:40px}.mobile-actions[_ngcontent-%COMP%]   .mobile-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:#cbd5e1;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0px 2rem;color:#fff}.header-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;color:#26262a}.header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.mobile-actions.mobile-only[_ngcontent-%COMP%]{display:none;align-items:center;gap:12px;margin-bottom:0}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:8px;border:none;transition:all .2s ease}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-map[_ngcontent-%COMP%]{background:#f8fafc;color:#475569;border:1px solid #E2E8F0}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-map[_ngcontent-%COMP%]:hover, .mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-map[_ngcontent-%COMP%]:active{background:#f1f5f9;border-color:#cbd5e1}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#6366f1);color:#fff;box-shadow:0 4px 6px -1px #4f46e51a,0 2px 4px -1px #4f46e50f}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]:hover, .mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]:active{background:linear-gradient(135deg,#4338ca,#4f46e5);box-shadow:0 4px 6px -1px #4f46e533}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 768px){.dashboard-table[_ngcontent-%COMP%]{height:100%;margin:0;padding:0;border-radius:0;box-shadow:none}.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-search-nav[_ngcontent-%COMP%]{display:flex}.mobile-navigation-button[_ngcontent-%COMP%]{display:block}.mobile-route-info[_ngcontent-%COMP%]{display:flex;margin:8px 16px;padding:12px 16px;background:linear-gradient(135deg,#ecfdf5,#d1fae5);border:1px solid #10B981;border-radius:12px}.table-header[_ngcontent-%COMP%]{margin-bottom:12px;align-items:center;gap:12px;display:flex;flex-direction:row-reverse}.table-header-left[_ngcontent-%COMP%]{flex:1}.table-header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 16px}.table-pagination[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{width:100%;text-align:center;margin-bottom:8px}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{width:100%;justify-content:center}.map-legend[_ngcontent-%COMP%]{border-radius:0!important}.compact-avisos-table[_ngcontent-%COMP%]{border-radius:0;border-left:none;border-right:none;max-height:none}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:11px;padding:8px 4px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:8px 4px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-size:13px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-size:12px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{font-size:11px;line-height:1.3}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.dashboard-table[_ngcontent-%COMP%]{height:100%;padding:0}.mobile-actions[_ngcontent-%COMP%]{gap:12px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]{display:flex;width:30%;justify-content:stretch}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:40px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.mobile-buttons[_ngcontent-%COMP%]{gap:6px;flex-wrap:nowrap}.mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:36px;height:36px}.mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.mobile-buttons[_ngcontent-%COMP%]   .btn-ruta-google-mobile[_ngcontent-%COMP%], .mobile-buttons[_ngcontent-%COMP%]   .btn-ruta-apple-mobile[_ngcontent-%COMP%], .mobile-buttons[_ngcontent-%COMP%]   .btn-navigation-panel[_ngcontent-%COMP%]{min-width:36px;height:36px}.mobile-buttons[_ngcontent-%COMP%]   .btn-ruta-google-mobile[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .mobile-buttons[_ngcontent-%COMP%]   .btn-ruta-apple-mobile[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .mobile-buttons[_ngcontent-%COMP%]   .btn-navigation-panel[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.mobile-buttons[_ngcontent-%COMP%]   .btn-navigation-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;border-radius:8px;box-shadow:0 2px 8px #10b9814d}.mobile-buttons[_ngcontent-%COMP%]   .btn-navigation-panel[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #10b98166}.mobile-buttons[_ngcontent-%COMP%]   .btn-debug-nav[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;border:none;border-radius:8px;box-shadow:0 2px 8px #f59e0b4d}.mobile-buttons[_ngcontent-%COMP%]   .btn-debug-nav[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #f59e0b66}}.map-display-container[_ngcontent-%COMP%]{height:40vh;margin-bottom:0}.map-avisos-list[_ngcontent-%COMP%]{max-height:none;overflow-y:visible}.aviso-map-card[_ngcontent-%COMP%]{padding:20px 14px;font-size:16px;border-radius:14px;margin-bottom:8px}.aviso-map-card[_ngcontent-%COMP%]   .aviso-map-card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.aviso-map-card[_ngcontent-%COMP%]   .aviso-map-card-body[_ngcontent-%COMP%]{font-size:15px}.btn-filter[_ngcontent-%COMP%], .btn-map[_ngcontent-%COMP%], .btn-add[_ngcontent-%COMP%]{min-height:44px;font-size:16px;padding:10px 16px}.compact-avisos-table[_ngcontent-%COMP%]{border-radius:0!important;border-left:none!important;border-right:none!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{grid-template-columns:50px 1fr minmax(0,1.5fr) 70px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:10px;padding:6px 2px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:6px 2px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-size:12px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-size:11px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{font-size:10px;line-height:1.2}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:22px;height:22px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.map-view-container[_ngcontent-%COMP%]{display:flex;gap:24px;margin-top:16px;overflow:hidden;position:relative}.map-list-container[_ngcontent-%COMP%]{width:500px;flex-shrink:0;display:flex;flex-direction:column;gap:16px}.map-list-container[_ngcontent-%COMP%]   .map-list-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#111827;margin:0 0 4px}.map-list-container[_ngcontent-%COMP%]   .map-list-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#4f46e5;margin:0}.map-list-container[_ngcontent-%COMP%]   .map-list-filters[_ngcontent-%COMP%]{display:flex;gap:12px}.map-list-container[_ngcontent-%COMP%]   .map-list-filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border-radius:8px;border:1px solid #D1D5DB;color:#6b7280;background-color:#fff;font-size:14px}.map-list-container[_ngcontent-%COMP%]   .map-list-filters[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]{padding:8px;border-radius:8px;border:1px solid #D1D5DB;background-color:#fff;display:flex;align-items:center;justify-content:center}.map-list-container[_ngcontent-%COMP%]   .map-list-filters[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#4b5563}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto;border-radius:8px;border:1px solid #E5E7EB;background:#fff}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:80px 1fr minmax(0,1.5fr) 80px;font-size:12px}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table.modo-seleccion[_ngcontent-%COMP%]{grid-template-columns:40px 70px 1fr minmax(0,1.2fr) 70px}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:contents}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{padding:12px 8px;background:#f9fafb;border-bottom:1px solid #E5E7EB;font-weight:500;color:#374151;font-size:12px;text-transform:uppercase;letter-spacing:.5px;display:flex;align-items:center}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]:first-child{justify-content:start;padding-left:12px}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]{display:contents}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]{display:contents;cursor:pointer;transition:all .2s ease;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#f9fafb}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]:active{transform:scale(.98)}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.clickeable[_ngcontent-%COMP%]{cursor:pointer}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.clickeable[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#eff6ff;border-left:3px solid #3B82F6}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.no-visitado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #EF4444!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.no-visitado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef2f2!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.no-visitado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fee2e2!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.visitado-pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #F59E0B!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.visitado-pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fffbeb!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.visitado-pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef3c7!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente-presupuesto[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #3B82F6!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente-presupuesto[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#eff6ff!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente-presupuesto[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#dbeafe!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.listo-para-facturar[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #059669!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.listo-para-facturar[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.listo-para-facturar[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.en-curso[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #F59E0B!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.en-curso[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fffbeb!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.en-curso[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef3c7!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #EF4444!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef2f2!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fee2e2!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.completado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #10B981!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.completado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.completado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.cancelado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #6B7280!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.cancelado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#f9fafb!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.cancelado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#f3f4f6!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #10B981!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.en-curso[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente-presupuesto[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.listo-para-facturar[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.completado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.no-visitado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.visitado-pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.cancelado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.en-curso[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente-presupuesto[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.listo-para-facturar[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.completado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.no-visitado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.visitado-pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.cancelado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:12px 8px;border-bottom:1px solid #F3F4F6;display:flex;align-items:center}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-weight:600;color:#111827;font-size:13px;justify-content:start;padding-left:12px;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:13px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#6b7280;font-size:12px;line-height:1.4}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]{justify-content:center;gap:4px}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;background:transparent;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#6b7280}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-mapa[_ngcontent-%COMP%]:hover{background-color:#4f46e5}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-mapa[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-mapa[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#4338ca}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:hover{background-color:#10b981}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#059669}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-navegar[_ngcontent-%COMP%]:hover{background-color:#3b82f6}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-navegar[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-navegar[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#2563eb}.route-info-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px;background:linear-gradient(135deg,#f0fdf4,#ecfdf5);border-radius:12px;border:2px solid #D1FAE5;box-shadow:0 4px 12px #10b9811a;margin-top:16px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:600;color:#059669;font-size:14px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:16px;height:16px;--color: #10B981;margin-left:auto}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:8px;padding:8px;background:#ffffffb3;border-radius:8px;border:1px solid rgba(16,185,129,.2)}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;background:#10b981;border-radius:50%}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;color:#fff}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:10px;color:#6b7280;font-weight:500;text-transform:uppercase;letter-spacing:.5px;line-height:1}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:12px;color:#059669;font-weight:600;line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]{margin-top:4px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 8px #10b9814d}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #10b98166}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #10b9814d}.map-display-container[_ngcontent-%COMP%]{flex-grow:1;border-radius:12px;overflow:hidden;background-color:#f3f4f6;position:relative;transition:box-shadow .3s ease}.map-display-container[_ngcontent-%COMP%]   .btn-fullscreen[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;z-index:10;background:#fff;border:none;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0000001a;cursor:pointer;transition:background .2s;font-size:22px;color:#4f46e5}.map-display-container[_ngcontent-%COMP%]   .btn-fullscreen[_ngcontent-%COMP%]:hover{background:#f3f4f6}.map-display-container[_ngcontent-%COMP%]   .btn-fullscreen[_ngcontent-%COMP%]:active{transform:scale(.95)}.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]{position:absolute;top:16px;left:16px;z-index:10;background:#fff;border:none;border-radius:8px;padding:8px 12px;display:flex;align-items:center;justify-content:center;gap:6px;box-shadow:0 2px 8px #0000001a;cursor:pointer;transition:all .2s;font-size:14px;font-weight:500;color:#4f46e5}.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]:hover{background:#f3f4f6;transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 992px){.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]{padding:8px;border-radius:50%;width:44px;height:44px}.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;z-index:10000;background:#fff;border:none;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #00000026;cursor:pointer;transition:all .2s;font-size:22px;color:#ef4444}.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]:hover{background:#fee2e2;transform:scale(1.05)}.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]:active{transform:scale(.95)}.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}@media (max-width: 992px){.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]{width:48px;height:48px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid rgba(239,68,68,.2);box-shadow:0 4px 12px #0003}.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]:hover{background:#fee2e2f2;transform:scale(1.1)}}.map-display-container[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{height:100%;width:100%}@media (max-width: 992px){.map-view-container[_ngcontent-%COMP%]{flex-direction:column;overflow:visible;gap:0px!important}.map-list-container[_ngcontent-%COMP%]{width:100%;gap:0px!important}.map-avisos-table[_ngcontent-%COMP%]{max-height:35vh;overflow-y:auto;-webkit-overflow-scrolling:touch;border-radius:0!important}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{grid-template-columns:70px 1fr minmax(0,1.5fr) 80px}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-size:12px;padding-left:8px}.map-display-container[_ngcontent-%COMP%]{height:50vh;margin-bottom:0!important;border-radius:0!important}}.map-display-container[_ngcontent-%COMP%]{height:50vh;margin-bottom:20px}.map-legend[_ngcontent-%COMP%]{flex-wrap:wrap;gap:12px}.map-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{font-size:11px}@media (min-width: 769px){.map-view-container[_ngcontent-%COMP%]{height:calc(100vh - 200px)}.map-display-container[_ngcontent-%COMP%]{height:100%!important;margin-bottom:0!important}}.avisos-table[_ngcontent-%COMP%]{font-size:12px;grid-template-columns:80px 1.2fr minmax(0,1fr) 100px}.avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:11px;padding:8px 4px}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]{touch-action:manipulation;-webkit-tap-highlight-color:transparent}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:8px 4px}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-size:13px}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:11px;line-height:1.3;display:block}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.mobile-only[_ngcontent-%COMP%]{display:flex!important}}@media (max-width: 768px){.map-view-container[_ngcontent-%COMP%]   .map-display-container[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:0}.mobile-buttons[_ngcontent-%COMP%]   .btn-navigation-panel[_ngcontent-%COMP%], .mobile-buttons[_ngcontent-%COMP%]   .btn-debug-nav[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background:#4f46e5e6;color:#fff;border:none;box-shadow:0 2px 8px #0003;transition:all .2s ease}.mobile-buttons[_ngcontent-%COMP%]   .btn-navigation-panel[_ngcontent-%COMP%]:active, .mobile-buttons[_ngcontent-%COMP%]   .btn-debug-nav[_ngcontent-%COMP%]:active{transform:scale(.95);background:#4f46e5}.route-info-panel[_ngcontent-%COMP%]{position:fixed;bottom:10px;left:10px;right:10px;background:#f0fdf4f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;padding:12px;box-shadow:0 4px 12px #10b98133;z-index:500;border:2px solid rgba(209,250,229,.8);gap:0px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]{font-size:13px;margin-bottom:8px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]{padding:6px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:20px;height:20px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:9px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:11px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]{margin-top:8px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.mobile-buttons[_ngcontent-%COMP%]{gap:8px}.mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:42px;height:auto;padding:0!important;font-size:.8rem}.route-info-panel[_ngcontent-%COMP%]{bottom:5px;left:5px;right:5px;padding:10px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]{font-size:12px;margin-bottom:6px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]{padding:5px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:18px;height:18px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:10px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:8px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:10px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]{padding:10px;font-size:15px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}}.no-data-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px;background:#fff;border-radius:16px;border:1px solid #E2E8F0}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]{text-align:center;padding:40px;max-width:400px}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;color:#acacac;margin-bottom:16px}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#26262a;font-size:20px;margin:0 0 8px}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:14px;margin:0 0 24px;line-height:1.5}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;background:#4f46e5;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff;margin:0}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background:#4338ca;transform:translateY(-1px)}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:active{transform:translateY(0)}.compact-avisos-table[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto;border-radius:8px;border:1px solid #E5E7EB;background:#fff;margin-bottom:16px;max-width:100%;overflow-x:auto}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:60px 1fr minmax(0,1.5fr) 80px;font-size:12px;min-width:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:contents}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{padding:12px 8px;background:#f9fafb;border-bottom:1px solid #E5E7EB;font-weight:500;color:#374151;font-size:12px;text-transform:uppercase;letter-spacing:.5px;display:flex;align-items:center;min-width:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]{display:contents}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]{display:contents;cursor:pointer;transition:all .2s ease;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#f9fafb}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]:active{transform:scale(.98)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.no-visitado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #EF4444!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.no-visitado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef2f2!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.no-visitado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fee2e2!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.visitado-pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #F59E0B!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.visitado-pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fffbeb!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.visitado-pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef3c7!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente-presupuesto[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #3B82F6!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente-presupuesto[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#eff6ff!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente-presupuesto[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#dbeafe!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.listo-para-facturar[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #059669!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.listo-para-facturar[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.listo-para-facturar[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.en-curso[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #F59E0B!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.en-curso[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fffbeb!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.en-curso[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef3c7!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #EF4444!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef2f2!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fee2e2!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.completado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #10B981!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.completado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.completado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #10B981!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.en-curso[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente-presupuesto[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.listo-para-facturar[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.completado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.no-visitado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.visitado-pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.cancelado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.en-curso[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente-presupuesto[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.listo-para-facturar[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.completado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.no-visitado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.visitado-pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.cancelado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:12px 8px;border-bottom:1px solid #F3F4F6;display:flex;align-items:center;min-width:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-weight:600;color:#111827;font-size:14px;justify-content:start;flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]{justify-content:start;font-size:11px;flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:2px 6px;border-radius:8px;font-size:10px;font-weight:500;white-space:nowrap;max-width:120px;overflow:hidden;text-overflow:ellipsis}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.yellow[_ngcontent-%COMP%]{background:var(--estado-en-curso-bg);color:var(--estado-en-curso-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.red[_ngcontent-%COMP%]{background:var(--estado-pendiente-bg);color:var(--estado-pendiente-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.green[_ngcontent-%COMP%]{background:var(--estado-completado-bg);color:var(--estado-completado-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.no-visitado[_ngcontent-%COMP%]{background:var(--estado-no-visitado-bg);color:var(--estado-no-visitado-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.visitado-pendiente[_ngcontent-%COMP%]{background:var(--estado-visitado-pendiente-bg);color:var(--estado-visitado-pendiente-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.pendiente-presupuesto[_ngcontent-%COMP%]{background:var(--estado-pendiente-presupuesto-bg);color:var(--estado-pendiente-presupuesto-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.listo-para-facturar[_ngcontent-%COMP%]{background:var(--estado-listo-para-facturar-bg);color:var(--estado-listo-para-facturar-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:13px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:0;flex:1}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]{min-width:0;flex:1}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#6b7280;font-size:12px;line-height:1.4;max-width:100%}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.fecha-aviso[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;justify-content:start;flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.urgente-aviso[_ngcontent-%COMP%]{justify-content:start;flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.urgente-aviso[_ngcontent-%COMP%]   .urgente-icon[_ngcontent-%COMP%]{color:#d92d20;font-size:18px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.urgente-aviso[_ngcontent-%COMP%]   .no-urgente-icon[_ngcontent-%COMP%]{color:#64748b;font-size:18px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]{justify-content:start;gap:4px;flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;background:transparent;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#6b7280}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:hover{background-color:#10b981}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#059669}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-navegar[_ngcontent-%COMP%]:hover{background-color:#3b82f6}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-navegar[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-navegar[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#2563eb}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-editar[_ngcontent-%COMP%]:hover{background-color:#f59e0b}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-editar[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-editar[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#d97706}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-eliminar[_ngcontent-%COMP%]:hover{background-color:#ef4444}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-eliminar[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-eliminar[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#dc2626}@media (min-width: 769px){.compact-avisos-table[_ngcontent-%COMP%]{max-width:100%;overflow-x:auto;border-radius:0;border-left:none;border-right:none}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{grid-template-columns:80px 140px minmax(150px,1fr) minmax(200px,2fr) 120px 100px 120px;font-size:13px;min-width:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:12px;padding:12px 8px;min-width:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:12px 8px;min-width:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-size:14px;flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]{flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-size:13px;min-width:0;flex:1}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]{min-width:0;flex:1}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{font-size:12px;max-width:100%}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.fecha-aviso[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.urgente-aviso[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]{flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 768px){.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:11px;padding:8px 4px}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:8px 4px}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-size:13px}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-size:12px}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{font-size:11px;line-height:1.3}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}}.modal-confirmar-eliminacion[_ngcontent-%COMP%]{--width: 90%;--max-width: 600px;--height: auto;--max-height: 90vh;--border-radius: 16px;--backdrop-opacity: .5}.modal-opciones-navegacion[_ngcontent-%COMP%]{--width: 90%!important;--max-width: 400px!important;--height: auto;--max-height: 70vh!important;--border-radius: 20px!important;--backdrop-opacity: .7!important;--box-shadow: 0 20px 40px rgba(0, 0, 0, .3)!important}.seleccionados-info[_ngcontent-%COMP%]{color:#10b981;font-weight:500}.ruta-info[_ngcontent-%COMP%]{color:#059669;font-weight:600;background:#10b9811a;padding:2px 6px;border-radius:4px;font-size:12px}.checkbox-seleccion[_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#10B981;cursor:pointer;border:2px solid #D1D5DB;border-radius:4px;background-color:#fff;transition:all .2s ease}.checkbox-seleccion[_ngcontent-%COMP%]:checked{background-color:#10b981;border-color:#10b981;color:#fff}.checkbox-seleccion[_ngcontent-%COMP%]:hover{border-color:#10b981}.checkbox-seleccion[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #10b9811a}.seleccion-cell[_ngcontent-%COMP%]{justify-content:center;flex-shrink:0;min-width:40px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{grid-template-columns:60px 1fr minmax(0,1.5fr) 80px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table.modo-seleccion[_ngcontent-%COMP%]{grid-template-columns:40px 50px 1fr minmax(0,1.2fr) 70px}@media (min-width: 769px){.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{grid-template-columns:80px 140px minmax(150px,1fr) minmax(200px,2fr) 120px 100px 120px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table.modo-seleccion[_ngcontent-%COMP%]{grid-template-columns:40px 70px 120px minmax(120px,1fr) minmax(150px,1.5fr) 100px 80px 100px}}.route-info-popup[_ngcontent-%COMP%]{padding:16px;min-width:250px}.route-info-popup[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#111827;font-size:16px;font-weight:600}.route-info-popup[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:#374151;font-size:14px}.route-info-popup[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#111827}.route-info-popup[_ngcontent-%COMP%]   p.route-note[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-style:italic;margin-top:8px}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]{margin-top:16px;display:flex;gap:8px;flex-wrap:wrap}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-route-action[_ngcontent-%COMP%]{flex:1;min-width:100px;padding:8px 12px;border:none;border-radius:6px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-route-action.google[_ngcontent-%COMP%]{background:#4285f4;color:#fff}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-route-action.google[_ngcontent-%COMP%]:hover{background:#3367d6}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-route-action.apple[_ngcontent-%COMP%]{background:#007aff;color:#fff}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-route-action.apple[_ngcontent-%COMP%]:hover{background:#0056cc}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-route-action[_ngcontent-%COMP%]:active{transform:scale(.95)}.leaflet-container[_ngcontent-%COMP%]{height:100%;width:100%;font-family:inherit}.leaflet-popup-content-wrapper[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 4px 12px #00000026;border:1px solid #E5E7EB}.leaflet-popup-close-button[_ngcontent-%COMP%]{color:#6b7280;font-size:18px}.leaflet-popup-close-button[_ngcontent-%COMP%]:hover{color:#374151}.custom-marker[_ngcontent-%COMP%]{background:transparent!important;border:none!important}.custom-marker[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-weight:700;text-shadow:0 1px 2px rgba(0,0,0,.5)}.leaflet-routing-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000026;border:1px solid #E5E7EB}.leaflet-routing-alt[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto}.leaflet-routing-geocoders[_ngcontent-%COMP%]{margin:8px}.leaflet-routing-geocoder[_ngcontent-%COMP%]{margin-bottom:8px}.leaflet-routing-geocoder[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #D1D5DB;border-radius:6px;font-size:14px}.leaflet-routing-geocoder-results[_ngcontent-%COMP%]{background:#fff;border:1px solid #D1D5DB;border-radius:6px;box-shadow:0 2px 4px #0000001a;max-height:150px;overflow-y:auto}.leaflet-routing-geocoder-result[_ngcontent-%COMP%]{padding:8px 12px;cursor:pointer;border-bottom:1px solid #F3F4F6}.leaflet-routing-geocoder-result[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.leaflet-routing-geocoder-result[_ngcontent-%COMP%]:last-child{border-bottom:none}`]});let c=l;return c})();export{ti as AvisosComponent};
