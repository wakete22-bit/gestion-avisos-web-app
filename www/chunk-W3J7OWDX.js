import{a as _n}from"./chunk-U65XUY3A.js";import{a as ve}from"./chunk-J5I2ZET5.js";import"./chunk-P7IZHCWH.js";import{a as ye}from"./chunk-HZ3IN4UZ.js";import"./chunk-IBLFXVNU.js";import{a as pn}from"./chunk-QTJDJKS7.js";import"./chunk-TI3GP5EW.js";import"./chunk-767NPB27.js";import{A as ge,Ca as J,D as pe,Ea as gn,F as ln,G as sn,Ga as K,J as H,L as _e,O as me,P as ue,R as dn,U as be,X as Ce,Y as fe,Z as Oe,a as k,b as oe,ba as hn,c as ae,d as ie,da as vn,f as re,fa as yn,h as Pn,j as ce,ja as X,k as le,la as wn,n as cn,na as Y,o as xn,ra as Me,t as B,ta as Pe,u as se,ua as N,wa as xe,x as de,xa as he,z as G}from"./chunk-HUDMD2ZT.js";import"./chunk-ZFU5VQO3.js";import"./chunk-JTEH53SE.js";import{i as Q,n as D,o as ee}from"./chunk-WDKCICZV.js";import"./chunk-MCEOU6HW.js";import{$ as j,$a as F,A as y,Aa as en,Ac as ne,Ba as tn,Da as r,Ea as m,F as jn,Fa as w,Ga as E,I as An,Ia as bn,Ja as Cn,Ka as fn,M as b,N as C,Oa as On,R as Fn,Sa as x,Ta as Mn,Ua as A,Va as v,W as I,Wc as te,Y as l,Z as h,_a as on,ab as V,c as Z,cb as Rn,da as f,db as Dn,dc as Nn,eb as an,f as q,fb as rn,fc as R,gb as T,gc as $n,hc as qn,i as In,ia as d,ja as Vn,k as U,ka as Tn,lc as Un,ma as n,mc as Ln,na as e,nc as Gn,oa as p,pb as Bn,pc as Wn,qc as Qn,rc as Yn,sa as P,sb as Hn,sc as Jn,t as L,ta as u,tc as Kn,ua as _,xa as un,yc as Xn,za as nn,zc as Zn}from"./chunk-GZDKEEK6.js";import"./chunk-3SUPCH3T.js";import"./chunk-QUJFQN2Y.js";import"./chunk-OGR5ZLHR.js";import"./chunk-CUT3BV6K.js";import"./chunk-73IMGLZG.js";import"./chunk-G2E2NLL6.js";import"./chunk-ILJSYHS4.js";import"./chunk-OAP23YNX.js";import"./chunk-YYM7CL2V.js";import"./chunk-5LR2YXX6.js";import"./chunk-WDU4QEMV.js";import"./chunk-CKP3SGE2.js";import"./chunk-ULLEADC5.js";import"./chunk-2ELISCRH.js";import"./chunk-BV4CTHEE.js";import"./chunk-JILLMCFB.js";import"./chunk-WWN5RJW3.js";import"./chunk-H3LYBNOM.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-NBD2MYJO.js";import"./chunk-3SBX7V6R.js";import"./chunk-SQKDQBOS.js";import"./chunk-SWRJZAEI.js";import"./chunk-JCSW2JUV.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-36KMLI7A.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as zn,b as Sn,k as S}from"./chunk-CRC5ZNR6.js";var we=[{valor:"Finalizado",label:"Finalizado",descripcion:"Trabajo completado, listo para facturar"},{valor:"Presupuesto pendiente",label:"Presupuesto pendiente",descripcion:"Se requiere presupuesto adicional"},{valor:"Otra visita",label:"Otra visita",descripcion:"Se necesita realizar otra visita"}];var Ee=(()=>{let s=class s{constructor(t){this.supabaseClientService=t,this.supabase=this.supabaseClientService.getClient()}crearAlbaran(t){return q(this.supabase.from("albaranes").insert([t]).select().single()).pipe(U(({data:o,error:i})=>{if(i)throw i;return o}),L(o=>{throw console.error("Error al crear albar\xE1n:",o),o}))}getAlbaran(t){return q(this.supabase.from("albaranes").select(`
          *,
          aviso:avisos(*)
        `).eq("id",t).single()).pipe(U(({data:o,error:i})=>{if(i)throw i;return o}),L(o=>{throw console.error("Error al obtener albar\xE1n:",o),o}))}getAlbaranesAviso(t){return q(this.supabase.from("albaranes").select("*").eq("aviso_id",t).order("fecha_trabajo",{ascending:!1})).pipe(U(({data:o,error:i})=>{if(i)throw i;return o}),L(o=>{throw console.error("Error al obtener albaranes del aviso:",o),o}))}actualizarAlbaran(t,o){return q(this.supabase.from("albaranes").update(Sn(zn({},o),{fecha_actualizacion:new Date})).eq("id",t).select().single()).pipe(U(({data:i,error:g})=>{if(g)throw g;return i}),L(i=>{throw console.error("Error al actualizar albar\xE1n:",i),i}))}eliminarAlbaran(t){return q(this.supabase.from("albaranes").delete().eq("id",t)).pipe(U(({error:o})=>{if(o)throw o}),L(o=>{throw console.error("Error al eliminar albar\xE1n:",o),o}))}getEstadisticasAlbaranes(t){return q(this.supabase.from("albaranes").select("estado_cierre").eq("aviso_id",t)).pipe(U(({data:o,error:i})=>{if(i)throw i;let g=o;return{total:g.length,finalizados:g.filter(M=>M.estado_cierre==="Finalizado").length,presupuestoPendiente:g.filter(M=>M.estado_cierre==="Presupuesto pendiente").length,otraVisita:g.filter(M=>M.estado_cierre==="Otra visita").length}}),L(o=>{throw console.error("Error al obtener estad\xEDsticas de albaranes:",o),o}))}};s.\u0275fac=function(o){return new(o||s)(An(te))},s.\u0275prov=jn({token:s,factory:s.\u0275fac,providedIn:"root"});let c=s;return c})();var Fe=["signaturePad"];function Ve(c,s){if(c&1){let a=P();n(0,"div",62),u("click",function(){let o=b(a).$implicit,i=_(2);return C(i.agregarRepuesto(o))}),n(1,"div",63)(2,"div",64)(3,"span",65),r(4),e(),n(5,"span",66),r(6),x(7,"currency"),e()(),n(8,"span",67),r(9),e(),n(10,"div",68)(11,"span",69),r(12),e(),n(13,"span",70),r(14),e()()(),p(15,"ion-icon",71),e()}if(c&2){let a=s.$implicit;l(4),m(a.codigo),l(2),m(v(7,6,a.precio_neto,"EUR","symbol","1.2-2")),l(3),m(a.nombre),l(3),E("Stock: ",a.cantidad_disponible," ",a.unidad,""),l(2),m(a.descripcion)}}function Te(c,s){if(c&1){let a=P();n(0,"div",53)(1,"div",54)(2,"h4"),r(3,"Seleccionar Repuestos"),e(),n(4,"button",55),u("click",function(){b(a);let o=_();return C(o.cerrarSelectorRepuestos())}),p(5,"ion-icon",56),e()(),n(6,"div",57)(7,"ion-input",58),fn("ngModelChange",function(o){b(a);let i=_();return Cn(i.busquedaRepuesto,o)||(i.busquedaRepuesto=o),C(o)}),u("ionInput",function(o){b(a);let i=_();return C(i.filtrarProductos(o))}),e(),p(8,"ion-icon",59),e(),n(9,"div",60),f(10,Ve,16,11,"div",61),e()()}if(c&2){let a=_();l(7),bn("ngModel",a.busquedaRepuesto),l(3),d("ngForOf",a.productosFiltrados)}}function Re(c,s){if(c&1&&(n(0,"div",75)(1,"strong"),r(2),x(3,"currency"),e()()),c&2){let a=_(2);l(2),w("Precio Total: ",v(3,1,a.calcularPrecioTotalRepuestos(),"EUR","symbol","1.2-2"),"")}}function De(c,s){if(c&1){let a=P();n(0,"div",76)(1,"div",77)(2,"span",78),r(3),e(),n(4,"div",79)(5,"label"),r(6,"Cantidad:"),e(),n(7,"input",80),u("change",function(o){let i=b(a).$implicit,g=_(2);return C(g.actualizarCantidadRepuesto(i,o.target.value))}),e(),n(8,"span",81),r(9),e()(),n(10,"div",82)(11,"span",83),r(12),x(13,"number"),e(),n(14,"span",84),r(15),x(16,"currency"),e()()(),n(17,"button",85),u("click",function(){let o=b(a).$implicit,i=_(2);return C(i.eliminarRepuesto(o))}),p(18,"ion-icon",86),e()()}if(c&2){let a=s.$implicit;l(3),m(a.nombre),l(4),d("value",a.cantidad)("min",1),l(2),m(a.unidad),l(3),E("\u20AC",A(13,7,a.precio_pvp,"1.2-2"),"/",a.unidad,""),l(3),m(v(16,10,a.precio_pvp*a.cantidad,"EUR","symbol","1.2-2"))}}function Be(c,s){if(c&1&&(n(0,"div",72)(1,"h4"),r(2,"Repuestos Seleccionados:"),e(),f(3,Re,4,6,"div",73)(4,De,19,15,"div",74),e()),c&2){let a=_();l(3),d("ngIf",a.repuestosSeleccionados.length>0),l(),d("ngForOf",a.repuestosSeleccionados)}}function He(c,s){c&1&&(n(0,"div",87),p(1,"ion-icon",27),n(2,"p"),r(3,"No hay repuestos seleccionados"),e(),n(4,"small"),r(5,"Selecciona repuestos del inventario o agrega manualmente"),e()())}function Ne(c,s){if(c&1&&(n(0,"option",88),r(1),e()),c&2){let a=s.$implicit;d("value",a.valor),l(),E(" ",a.label," - ",a.descripcion," ")}}function $e(c,s){c&1&&(n(0,"div")(1,"h3"),r(2,"Presupuesto Necesario"),e(),n(3,"div",11)(4,"label"),r(5,"Presupuesto (\u20AC) "),n(6,"span",12),r(7,"*"),e()(),p(8,"input",89),e()())}function qe(c,s){if(c&1){let a=P();n(0,"div",90),p(1,"ion-icon",91),n(2,"span"),r(3,"\xC1rea de firma digital"),e(),n(4,"small"),r(5,"Haz clic para comenzar a firmar"),e(),n(6,"button",92),u("click",function(){b(a);let o=_();return C(o.iniciarFirma())}),p(7,"ion-icon",91),r(8," Comenzar Firma "),e()()}}function Ue(c,s){if(c&1){let a=P();n(0,"div",93),p(1,"canvas",94,0),n(3,"div",95)(4,"button",96),u("click",function(){b(a);let o=_();return C(o.limpiarFirma())}),p(5,"ion-icon",86),r(6," Limpiar "),e(),n(7,"button",97),u("click",function(){b(a);let o=_();return C(o.guardarFirma())}),p(8,"ion-icon",98),r(9," Guardar Firma "),e()()()}}function Le(c,s){if(c&1){let a=P();n(0,"div",99),p(1,"img",100),n(2,"div",101)(3,"button",102),u("click",function(){b(a);let o=_();return C(o.editarFirma())}),p(4,"ion-icon",91),r(5," Editar "),e(),n(6,"button",85),u("click",function(){b(a);let o=_();return C(o.eliminarFirma())}),p(7,"ion-icon",86),r(8," Eliminar "),e()()()}if(c&2){let a=_();l(),d("src",a.firmaDataUrl,I)}}function Ge(c,s){if(c&1){let a=P();n(0,"div",62),u("click",function(){let o=b(a).$implicit,i=_(2);return C(i.agregarRepuesto(o))}),n(1,"div",63)(2,"div",64)(3,"span",65),r(4),e(),n(5,"span",66),r(6),x(7,"currency"),e()(),n(8,"span",67),r(9),e(),n(10,"div",68)(11,"span",69),r(12),e(),n(13,"span",70),r(14),e()()(),p(15,"ion-icon",71),e()}if(c&2){let a=s.$implicit;l(4),m(a.codigo),l(2),m(v(7,6,a.precio_neto,"EUR","symbol","1.2-2")),l(3),m(a.nombre),l(3),E("Stock: ",a.cantidad_disponible," ",a.unidad,""),l(2),m(a.descripcion)}}function We(c,s){if(c&1){let a=P();n(0,"div",53)(1,"div",54)(2,"h4"),r(3,"Seleccionar Repuestos"),e(),n(4,"button",55),u("click",function(){b(a);let o=_();return C(o.cerrarSelectorRepuestos())}),p(5,"ion-icon",56),e()(),n(6,"div",57)(7,"ion-input",58),fn("ngModelChange",function(o){b(a);let i=_();return Cn(i.busquedaRepuesto,o)||(i.busquedaRepuesto=o),C(o)}),u("ionInput",function(o){b(a);let i=_();return C(i.filtrarProductos(o))}),e(),p(8,"ion-icon",59),e(),n(9,"div",60),f(10,Ge,16,11,"div",61),e()()}if(c&2){let a=_();l(7),bn("ngModel",a.busquedaRepuesto),l(3),d("ngForOf",a.productosFiltrados)}}function Qe(c,s){if(c&1&&(n(0,"div",75)(1,"strong"),r(2),x(3,"currency"),e()()),c&2){let a=_(2);l(2),w("Precio Total: ",v(3,1,a.calcularPrecioTotalRepuestos(),"EUR","symbol","1.2-2"),"")}}function Ye(c,s){if(c&1){let a=P();n(0,"div",76)(1,"div",77)(2,"span",78),r(3),e(),n(4,"div",79)(5,"label"),r(6,"Cantidad:"),e(),n(7,"input",80),u("change",function(o){let i=b(a).$implicit,g=_(2);return C(g.actualizarCantidadRepuesto(i,o.target.value))}),e(),n(8,"span",81),r(9),e()(),n(10,"div",82)(11,"span",83),r(12),x(13,"number"),e(),n(14,"span",84),r(15),x(16,"currency"),e()()(),n(17,"button",85),u("click",function(){let o=b(a).$implicit,i=_(2);return C(i.eliminarRepuesto(o))}),p(18,"ion-icon",86),e()()}if(c&2){let a=s.$implicit;l(3),m(a.nombre),l(4),d("value",a.cantidad)("min",1),l(2),m(a.unidad),l(3),E("\u20AC",A(13,7,a.precio_pvp,"1.2-2"),"/",a.unidad,""),l(3),m(v(16,10,a.precio_pvp*a.cantidad,"EUR","symbol","1.2-2"))}}function Je(c,s){if(c&1&&(n(0,"div",72)(1,"h4"),r(2,"Repuestos Seleccionados:"),e(),f(3,Qe,4,6,"div",73)(4,Ye,19,15,"div",74),e()),c&2){let a=_();l(3),d("ngIf",a.repuestosSeleccionados.length>0),l(),d("ngForOf",a.repuestosSeleccionados)}}function Ke(c,s){c&1&&(n(0,"div",87),p(1,"ion-icon",27),n(2,"p"),r(3,"No hay repuestos seleccionados"),e(),n(4,"small"),r(5,"Selecciona repuestos del inventario o agrega manualmente"),e()())}function Xe(c,s){if(c&1&&(n(0,"div",103),p(1,"ion-icon",104),n(2,"span"),r(3),e()()),c&2){let a=_();l(3),m(a.error)}}function Ze(c,s){c&1&&p(0,"ion-icon",105)}function nt(c,s){c&1&&p(0,"ion-icon",106)}var ze=(()=>{let s=class s{constructor(t,o,i,g,O){this.fb=t,this.modalController=o,this.inventarioService=i,this.albaranesService=g,this.avisosService=O,this.loading=!1,this.error=null,this.productosInventario=[],this.productosFiltrados=[],this.busquedaRepuesto="",this.mostrarSelectorRepuestos=!1,this.repuestosSeleccionados=[],this.firmaCapturada=!1,this.firmaDataUrl="",this.mostrarCanvas=!1,this.fechaActualFormateada="",this.estadosCierre=we,console.log("HacerAlbaranComponent constructor called"),k({close:G,timeOutline:J,cubeOutline:sn,addCircleOutline:ie,searchOutline:he,trashOutline:gn,checkmarkCircleOutline:B,checkmarkOutline:se,createOutline:ln,warningOutline:K,saveOutline:xe,refreshOutline:N,closeOutline:ge,calendarOutline:cn,personOutline:Y,pencilOutline:X,documentTextOutline:H}),this.albaranForm=this.fb.group({fecha_trabajo:["",R.required],fecha_cierre:["",R.required],hora_entrada:["",R.required],hora_salida:["",R.required],descripcion_trabajo_realizado:["",R.required],repuestos_utilizados:[[]],estado_cierre:["",R.required],presupuesto_necesario:[0,[R.min(0)]],dni_cliente:[""],nombre_firma:[""],firma_cliente:[""],observaciones:[""]})}ngOnInit(){return S(this,null,function*(){console.log("\u{1F3AF} HacerAlbaranComponent ngOnInit - Aviso:",this.aviso),console.log("\u{1F3AF} Formulario inicializado:",this.albaranForm),this.establecerFechaActual(),this.establecerFechaTrabajo();try{yield this.cargarProductosInventario(),this.inicializarFormulario()}catch(t){console.error("Error al inicializar componente:",t)}})}ngAfterViewInit(){setTimeout(()=>{var t,o;(t=this.albaranForm.get("fecha_cierre"))!=null&&t.value||this.establecerFechaActual(),(o=this.albaranForm.get("fecha_trabajo"))!=null&&o.value||this.establecerFechaTrabajo()},100)}inicializarFormulario(){let t=this.generarHoraActual();this.albaranForm.patchValue({hora_entrada:t,hora_salida:t,repuestos_utilizados:[]}),this.repuestosSeleccionados=[],console.log("\u{1F50D} Formulario inicializado con valores por defecto")}cargarProductosInventario(){return new Promise((t,o)=>{this.inventarioService.getInventario(1,1e3,"","nombre","asc",!1).subscribe({next:i=>{this.productosInventario=i.inventario,this.productosFiltrados=[...this.productosInventario],console.log(" Inventario cargado:",this.productosInventario.length,"productos"),t()},error:i=>{console.error("Error al cargar productos del inventario:",i),o(i)}})})}filtrarProductos(t){var i;let o=((i=t==null?void 0:t.target)==null?void 0:i.value)||t||"";this.busquedaRepuesto=o,o.trim()?this.productosFiltrados=this.productosInventario.filter(g=>{var O;return g.nombre.toLowerCase().includes(o.toLowerCase())||g.codigo.toLowerCase().includes(o.toLowerCase())||(((O=g.descripcion)==null?void 0:O.toLowerCase())||"").includes(o.toLowerCase())}):this.productosFiltrados=[...this.productosInventario]}abrirSelectorRepuestos(){this.mostrarSelectorRepuestos=!0,this.productosFiltrados=[...this.productosInventario],this.busquedaRepuesto=""}cerrarSelectorRepuestos(){this.mostrarSelectorRepuestos=!1}agregarRepuesto(t){console.log("\u{1F50D} agregarRepuesto - Producto recibido:",t);let o=this.repuestosSeleccionados.find(i=>i.nombre===t.nombre);if(o)o.cantidad+=1,console.log("\u{1F50D} agregarRepuesto - Repuesto existente, cantidad aumentada a:",o.cantidad);else{let i={nombre:t.nombre,cantidad:1,precio_neto:t.precio_neto||0,precio_pvp:t.pvp||t.precio_neto||0,unidad:t.unidad||"unidad",codigo:t.codigo||""};console.log("\u{1F50D} agregarRepuesto - Nuevo repuesto creado:",i),this.repuestosSeleccionados.push(i)}this.albaranForm.patchValue({repuestos_utilizados:this.repuestosSeleccionados}),console.log("\u{1F50D} agregarRepuesto - Repuestos seleccionados actualizados:",this.repuestosSeleccionados),this.cerrarSelectorRepuestos()}eliminarRepuesto(t){this.repuestosSeleccionados=this.repuestosSeleccionados.filter(o=>o!==t),this.albaranForm.patchValue({repuestos_utilizados:this.repuestosSeleccionados})}actualizarCantidadRepuesto(t,o){o>0&&(t.cantidad=o,this.albaranForm.patchValue({repuestos_utilizados:this.repuestosSeleccionados}))}agregarRepuestoManual(){let t=prompt("Introduce el nombre del repuesto:");if(t&&t.trim()){let o=prompt("Introduce la cantidad utilizada:"),i=parseInt(o||"1");if(i>0){let g=prompt("Introduce el precio por unidad (\u20AC):"),O=parseFloat(g||"0"),M=prompt("Introduce la unidad (unidad, kg, m, etc.):")||"unidad",$={nombre:t.trim(),cantidad:i,precio_neto:O,precio_pvp:O,unidad:M,codigo:""};console.log("\u{1F50D} agregarRepuestoManual - Repuesto manual creado:",$),this.repuestosSeleccionados.push($),this.albaranForm.patchValue({repuestos_utilizados:this.repuestosSeleccionados})}}}generarHoraActual(){let t=new Date;return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}establecerHoraActual(){let t=this.generarHoraActual();this.albaranForm.patchValue({hora_salida:t})}formatearFechaParaInput(t){let o=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),g=String(t.getDate()).padStart(2,"0");return`${o}-${i}-${g}`}establecerFechaActual(){let t=new Date,o=this.formatearFechaParaInput(t);this.albaranForm.patchValue({fecha_cierre:o}),this.fechaActualFormateada=o,console.log("\u{1F4C5} Fecha de cierre establecida:",o)}establecerFechaTrabajo(){let t=new Date,o=this.formatearFechaParaInput(t);this.albaranForm.patchValue({fecha_trabajo:o}),console.log("\u{1F4C5} Fecha de trabajo establecida:",o)}guardarAlbaran(){if(this.albaranForm.valid){this.loading=!0,this.error=null;let t={aviso_id:this.aviso.id,fecha_trabajo:this.albaranForm.value.fecha_trabajo,fecha_cierre:this.albaranForm.value.fecha_cierre,hora_entrada:this.albaranForm.value.hora_entrada,hora_salida:this.albaranForm.value.hora_salida,descripcion_trabajo_realizado:this.albaranForm.value.descripcion_trabajo_realizado,repuestos_utilizados:this.albaranForm.value.repuestos_utilizados,estado_cierre:this.albaranForm.value.estado_cierre,presupuesto_necesario:this.albaranForm.value.presupuesto_necesario,dni_cliente:this.albaranForm.value.dni_cliente,nombre_firma:this.albaranForm.value.nombre_firma,firma_cliente:this.albaranForm.value.firma_cliente,observaciones:this.albaranForm.value.observaciones};console.log("Datos del albar\xE1n:",t),this.albaranesService.crearAlbaran(t).subscribe({next:o=>{console.log("Albar\xE1n guardado exitosamente:",o),this.avisosService.actualizarEstadoAutomatico(this.aviso.id).subscribe({next:i=>{this.loading=!1,console.log("Estado del aviso actualizado autom\xE1ticamente:",i),this.modalController.dismiss({success:!0,albaran:o,aviso:i,mensaje:"Albar\xE1n guardado exitosamente"},"confirm")},error:i=>{console.error("Error al actualizar estado del aviso:",i),this.loading=!1,this.modalController.dismiss({success:!0,albaran:o,mensaje:"Albar\xE1n guardado exitosamente"},"confirm")}})},error:o=>{this.loading=!1,this.error="Error al guardar el albar\xE1n: "+(o.message||"Error desconocido"),console.error("Error al guardar albar\xE1n:",o)}})}else this.error="Por favor, complete todos los campos requeridos",this.marcarCamposComoTocados()}marcarCamposComoTocados(){Object.keys(this.albaranForm.controls).forEach(t=>{let o=this.albaranForm.get(t);o==null||o.markAsTouched()})}cancelar(){this.modalController.dismiss()}requierePresupuesto(){var t;return((t=this.albaranForm.get("estado_cierre"))==null?void 0:t.value)==="Presupuesto pendiente"}requiereOtraVisita(){var t;return((t=this.albaranForm.get("estado_cierre"))==null?void 0:t.value)==="Otra visita"}calcularPrecioTotalRepuestos(){return this.repuestosSeleccionados.reduce((t,o)=>t+o.precio_pvp*o.cantidad,0)}debugAlbaran(){console.log("Albar\xE1n en progreso:",this.albaranForm.value),console.log("Repuestos seleccionados:",this.repuestosSeleccionados),console.log("Precio total repuestos:",this.calcularPrecioTotalRepuestos())}iniciarFirma(){this.mostrarCanvas=!0,this.firmaCapturada=!1,this.firmaDataUrl="",setTimeout(()=>{this.inicializarSignaturePad()},100)}inicializarSignaturePad(){var o;if(!((o=this.signaturePadElement)!=null&&o.nativeElement)){console.warn("Canvas no encontrado");return}let t=this.signaturePadElement.nativeElement;import("./chunk-PGY3UNFJ.js").then(({default:i})=>{this.signaturePad=new i(t,{backgroundColor:"white",penColor:"black",minWidth:1,maxWidth:2.5,throttle:16,velocityFilterWeight:.7,dotSize:1}),this.ajustarCanvas(),window.addEventListener("resize",()=>this.ajustarCanvas())})}ajustarCanvas(){var M;if(!((M=this.signaturePadElement)!=null&&M.nativeElement)||!this.signaturePad)return;let t=this.signaturePadElement.nativeElement,o=t.parentElement;if(!o)return;let i=o.getBoundingClientRect(),g=Math.max(i.width-40,300),O=200;t.width=g,t.height=O,this.signaturePad.resizeCanvas()}limpiarFirma(){this.signaturePad&&this.signaturePad.clear()}guardarFirma(){this.signaturePad&&!this.signaturePad.isEmpty()?(this.firmaDataUrl=this.signaturePad.toDataURL(),this.firmaCapturada=!0,this.mostrarCanvas=!1,this.albaranForm.patchValue({firma_cliente:this.firmaDataUrl}),console.log("Firma guardada exitosamente")):console.warn("No hay firma para guardar")}editarFirma(){this.mostrarCanvas=!0,this.firmaCapturada=!1,setTimeout(()=>{this.signaturePad?this.signaturePad.clear():this.inicializarSignaturePad()},100)}eliminarFirma(){this.firmaCapturada=!1,this.firmaDataUrl="",this.mostrarCanvas=!1,this.signaturePad&&this.signaturePad.clear(),this.albaranForm.patchValue({firma_cliente:""}),console.log("Firma eliminada")}};s.\u0275fac=function(o){return new(o||s)(h(Xn),h(Q),h(ye),h(Ee),h(pn))},s.\u0275cmp=j({type:s,selectors:[["app-hacer-albaran"]],viewQuery:function(o,i){if(o&1&&nn(Fe,5),o&2){let g;en(g=tn())&&(i.signaturePadElement=g.first)}},inputs:{aviso:"aviso"},decls:132,vars:17,consts:[["signaturePad",""],[1,"modal-container"],[1,"modal-header"],[1,"header-content"],[1,"close-button",3,"click"],["name","close-outline"],[1,"subtitle"],[1,"modal-body",3,"ngSubmit","formGroup"],[1,"modal-content"],[1,"modal-grid"],[1,"form-section"],[1,"form-group"],[1,"required"],["type","date","formControlName","fecha_trabajo",1,"form-control",3,"click"],[1,"help-text"],["type","date","formControlName","fecha_cierre",1,"form-control",3,"click"],[1,"form-row"],[1,"form-group","half"],["type","time","formControlName","hora_entrada","step","900",1,"form-control"],[1,"input-with-button"],["type","time","formControlName","hora_salida","step","900",1,"form-control",3,"click"],["type","button",1,"add-button",3,"click"],["name","time-outline"],["formControlName","descripcion_trabajo_realizado","placeholder","Describe detalladamente el trabajo realizado...","rows","3",1,"form-control"],[1,"repuestos-section","mobile-only"],[1,"repuestos-actions"],["type","button",1,"btn-select-inventory",3,"click"],["name","cube-outline"],["type","button",1,"btn-add-manual",3,"click"],["name","add-circle-outline"],["class","inventory-selector",4,"ngIf"],["class","repuestos-list",4,"ngIf"],["class","repuestos-empty",4,"ngIf"],["formControlName","estado_cierre",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formControlName","observaciones","placeholder","Observaciones adicionales...","rows","2",1,"form-control"],["type","text","formControlName","dni_cliente","placeholder","DNI del cliente",1,"form-control"],["type","text","formControlName","nombre_firma","placeholder","Nombre de la persona que firma",1,"form-control"],[1,"signature-area"],["class","signature-placeholder",4,"ngIf"],["class","signature-canvas-container",4,"ngIf"],["class","signature-preview",4,"ngIf"],[1,"images-section"],[1,"repuestos-container","desktop-only"],[1,"modal-footer"],["class","error-message",4,"ngIf"],[1,"button-group"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["name","save-outline",4,"ngIf"],["name","refresh-outline","class","spinning",4,"ngIf"],[1,"inventory-selector"],[1,"selector-header"],["type","button",1,"btn-close",3,"click"],["name","close"],[1,"search-container"],["type","text","placeholder","Buscar repuestos...",1,"search-input",3,"ngModelChange","ionInput","ngModel"],["name","search-outline"],[1,"products-list"],["class","product-item",3,"click",4,"ngFor","ngForOf"],[1,"product-item",3,"click"],[1,"product-info"],[1,"product-header"],[1,"product-code"],[1,"product-price"],[1,"product-name"],[1,"product-details"],[1,"product-stock"],[1,"product-description"],["name","add-circle-outline",1,"add-icon"],[1,"repuestos-list"],["class","precio-total",4,"ngIf"],["class","repuesto-item",4,"ngFor","ngForOf"],[1,"precio-total"],[1,"repuesto-item"],[1,"repuesto-info"],[1,"repuesto-nombre"],[1,"repuesto-cantidad"],["type","number",1,"cantidad-input",3,"change","value","min"],[1,"unidad"],[1,"repuesto-precio-info"],[1,"precio-unitario"],[1,"precio-total-item"],["type","button",1,"btn-remove",3,"click"],["name","trash-outline"],[1,"repuestos-empty"],[3,"value"],["type","number","formControlName","presupuesto_necesario","placeholder","0.00","step","0.01",1,"form-control"],[1,"signature-placeholder"],["name","create-outline"],["type","button",1,"btn-start-signature",3,"click"],[1,"signature-canvas-container"],[1,"signature-canvas"],[1,"signature-controls"],["type","button",1,"btn-clear",3,"click"],["type","button",1,"btn-save",3,"click"],["name","checkmark-outline"],[1,"signature-preview"],["alt","Firma del cliente",1,"firma-image",3,"src"],[1,"signature-actions"],["type","button",1,"btn-edit",3,"click"],[1,"error-message"],["name","warning-outline"],["name","save-outline"],["name","refresh-outline",1,"spinning"]],template:function(o,i){o&1&&(n(0,"div",1)(1,"header",2)(2,"div",3)(3,"h2"),r(4,"Crear Albar\xE1n"),e(),n(5,"button",4),u("click",function(){return i.cancelar()}),p(6,"ion-icon",5),e()(),n(7,"p",6),r(8,"Crear albar\xE1n para el trabajo realizado"),e()(),n(9,"form",7),u("ngSubmit",function(){return i.guardarAlbaran()}),n(10,"div",8)(11,"div",9)(12,"div",10)(13,"h3"),r(14,"Fecha y Horarios"),e(),n(15,"div",11)(16,"label"),r(17,"Fecha del Trabajo "),n(18,"span",12),r(19,"*"),e()(),n(20,"input",13),u("click",function(){return i.establecerFechaTrabajo()}),e(),n(21,"small",14),r(22,"Fecha en que se realiz\xF3 el trabajo"),e()(),n(23,"div",11)(24,"label"),r(25,"Fecha de Cierre "),n(26,"span",12),r(27,"*"),e()(),n(28,"input",15),u("click",function(){return i.establecerFechaActual()}),e(),n(29,"small",14),r(30,"Fecha de cierre del albar\xE1n (autom\xE1tica)"),e()(),n(31,"div",16)(32,"div",17)(33,"label"),r(34,"Hora Entrada "),n(35,"span",12),r(36,"*"),e()(),p(37,"input",18),n(38,"small",14),r(39,"Men\xFA interactivo 15 en 15 min"),e()(),n(40,"div",17)(41,"label"),r(42,"Hora Salida "),n(43,"span",12),r(44,"*"),e()(),n(45,"div",19)(46,"input",20),u("click",function(){return i.establecerHoraActual()}),e(),n(47,"button",21),u("click",function(){return i.establecerHoraActual()}),p(48,"ion-icon",22),r(49," Ahora "),e()()()(),n(50,"h3"),r(51,"Descripci\xF3n del Trabajo Realizado"),e(),n(52,"div",11)(53,"label"),r(54,"Descripci\xF3n "),n(55,"span",12),r(56,"*"),e()(),n(57,"textarea",23),r(58,"            "),e()(),n(59,"div",24)(60,"h3"),r(61,"Repuestos Utilizados"),e(),n(62,"div",25)(63,"button",26),u("click",function(){return i.abrirSelectorRepuestos()}),p(64,"ion-icon",27),r(65," Seleccionar del Inventario "),e(),n(66,"button",28),u("click",function(){return i.agregarRepuestoManual()}),p(67,"ion-icon",29),r(68," Agregar Manualmente "),e()(),f(69,Te,11,2,"div",30)(70,Be,5,2,"div",31)(71,He,6,0,"div",32),e(),n(72,"h3"),r(73,"Estado de Cierre"),e(),n(74,"div",11)(75,"label"),r(76,"Estado "),n(77,"span",12),r(78,"*"),e()(),n(79,"select",33)(80,"option",34),r(81,"Selecciona el estado"),e(),f(82,Ne,2,3,"option",35),e()(),f(83,$e,9,0,"div",36),n(84,"h3"),r(85,"Observaciones Adicionales"),e(),n(86,"div",11)(87,"label"),r(88,"Observaciones"),e(),n(89,"textarea",37),r(90,"            "),e()(),n(91,"h3"),r(92,"Identificaci\xF3n y Firma"),e(),n(93,"div",16)(94,"div",17)(95,"label"),r(96,"DNI Cliente"),e(),p(97,"input",38),e(),n(98,"div",17)(99,"label"),r(100,"Nombre Firma"),e(),p(101,"input",39),e()(),n(102,"div",11)(103,"label"),r(104,"Firma Digital"),e(),n(105,"div",40),f(106,qe,9,0,"div",41)(107,Ue,10,0,"div",42)(108,Le,9,1,"div",43),e()()()(),n(109,"div",44)(110,"div",45)(111,"h3"),r(112,"Repuestos Utilizados"),e(),n(113,"div",25)(114,"button",26),u("click",function(){return i.abrirSelectorRepuestos()}),p(115,"ion-icon",27),r(116," Seleccionar del Inventario "),e(),n(117,"button",28),u("click",function(){return i.agregarRepuestoManual()}),p(118,"ion-icon",29),r(119," Agregar Manualmente "),e()(),f(120,We,11,2,"div",30)(121,Je,5,2,"div",31)(122,Ke,6,0,"div",32),e()()()(),n(123,"footer",46),f(124,Xe,4,1,"div",47),n(125,"div",48)(126,"button",49),u("click",function(){return i.cancelar()}),r(127," Cancelar "),e(),n(128,"button",50),u("click",function(){return i.guardarAlbaran()}),f(129,Ze,1,0,"ion-icon",51)(130,nt,1,0,"ion-icon",52),r(131),e()()()()),o&2&&(l(9),d("formGroup",i.albaranForm),l(60),d("ngIf",i.mostrarSelectorRepuestos),l(),d("ngIf",i.repuestosSeleccionados.length>0),l(),d("ngIf",i.repuestosSeleccionados.length===0&&!i.mostrarSelectorRepuestos),l(11),d("ngForOf",i.estadosCierre),l(),d("ngIf",i.requierePresupuesto()),l(23),d("ngIf",!i.firmaCapturada&&!i.mostrarCanvas),l(),d("ngIf",i.mostrarCanvas&&!i.firmaCapturada),l(),d("ngIf",i.firmaCapturada),l(12),d("ngIf",i.mostrarSelectorRepuestos),l(),d("ngIf",i.repuestosSeleccionados.length>0),l(),d("ngIf",i.repuestosSeleccionados.length===0&&!i.mostrarSelectorRepuestos),l(2),d("ngIf",i.error),l(4),d("disabled",!i.albaranForm.valid||i.loading),l(),d("ngIf",!i.loading),l(),d("ngIf",i.loading),l(),w(" ",i.loading?"Guardando...":"Guardar Albar\xE1n"," "))},dependencies:[T,F,V,an,rn,ne,Ln,Jn,Kn,Nn,Gn,Yn,$n,qn,Wn,Qn,Zn,Un,D,ee],styles:[`@charset "UTF-8";.modal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:90vh;background:#fff;position:relative}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{height:calc(100vh - var(--ion-safe-area-top, 0px) - var(--ion-safe-area-bottom, 0px));max-height:calc(100vh - var(--ion-safe-area-top, 0px) - var(--ion-safe-area-bottom, 0px))}}.modal-header[_ngcontent-%COMP%]{padding:16px 24px;border-bottom:1px solid #e5e7eb;flex-shrink:0}@media (max-width: 768px){.modal-header[_ngcontent-%COMP%]{padding-top:calc(16px + var(--ion-safe-area-top, 16px))}}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#111827}.modal-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:8px 0 0;color:#6b7280;font-size:14px}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#6b7280;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{color:#111827}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.modal-body[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex;flex-direction:column;min-height:0}.modal-content[_ngcontent-%COMP%]{flex:1;overflow:auto;position:relative;min-height:0}.modal-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:0;height:100%;overflow:hidden}@media (max-width: 768px){.modal-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:auto auto;height:auto;overflow:visible}}.form-section[_ngcontent-%COMP%]{padding:24px;border-right:1px solid #e5e7eb;overflow-y:auto;height:100%;max-height:100%}@media (max-width: 768px){.form-section[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid #e5e7eb;height:auto;max-height:none;overflow:visible;padding-bottom:30px}}.form-section[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#d1d5db #f3f4f6}.form-section[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.form-section[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f3f4f6;border-radius:3px}.form-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:3px}.form-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#9ca3af}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:16px;color:#374151;font-weight:600}.images-section[_ngcontent-%COMP%]{padding:24px;background-color:#f9fafb;overflow-y:auto;height:100%;max-height:100%}@media (max-width: 768px){.images-section[_ngcontent-%COMP%]{height:auto;max-height:none;overflow:visible;min-height:300px;padding-bottom:80px;display:none}}.images-section[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#d1d5db #f3f4f6}.images-section[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.images-section[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f3f4f6;border-radius:3px}.images-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:3px}.images-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#9ca3af}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc2626}.form-group.half[_ngcontent-%COMP%]{flex:1}.form-control[_ngcontent-%COMP%]{position:relative;width:100%;padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;color:#111827;background-color:#fafafb;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 2px #2563eb1a;background-color:#fff}.form-control[_ngcontent-%COMP%]:disabled{background-color:#f9fafb;color:#6b7280;cursor:not-allowed}.form-control[_ngcontent-%COMP%]::placeholder{color:#9ca3af}select.form-control[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;background-size:16px;padding-right:40px}select.form-control[_ngcontent-%COMP%]   option[value=""][_ngcontent-%COMP%]{color:#9ca3af}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:20px}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0;flex:1}.input-with-button[_ngcontent-%COMP%]{position:relative;display:flex;gap:8px}.input-with-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.input-with-button[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:6px 10px;background:none;border:1px solid #d2d2d2;color:#4f46e5;font-size:14px;cursor:pointer;white-space:nowrap;position:absolute;right:8px;top:6px;border-radius:8px;font-weight:500;transition:all .2s ease}.input-with-button[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]:hover{color:#1d4ed8;background:#f3f4f6}.input-with-button[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.help-text[_ngcontent-%COMP%]{display:block;font-size:11px;color:#6b7280;margin-top:4px;font-style:italic;line-height:1.4}.repuestos-section[_ngcontent-%COMP%], .repuestos-container[_ngcontent-%COMP%]{position:sticky;top:20px}.repuestos-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .repuestos-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{border-bottom:2px solid #10B981;padding-bottom:8px}@media (max-width: 1199px){.repuestos-section[_ngcontent-%COMP%]{position:static;top:auto}}.repuestos-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:24px}.repuestos-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;width:100%}.repuestos-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.repuestos-actions[_ngcontent-%COMP%]   .btn-select-inventory[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.repuestos-actions[_ngcontent-%COMP%]   .btn-select-inventory[_ngcontent-%COMP%]:hover{background:#1d4ed8}.repuestos-actions[_ngcontent-%COMP%]   .btn-add-manual[_ngcontent-%COMP%]{background:#10b981;color:#fff}.repuestos-actions[_ngcontent-%COMP%]   .btn-add-manual[_ngcontent-%COMP%]:hover{background:#059669}.repuestos-empty[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#9ca3af}.repuestos-empty[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.5}.repuestos-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;font-weight:500;color:#6b7280}.repuestos-empty[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:13px;color:#9ca3af;line-height:1.4}.inventory-selector[_ngcontent-%COMP%]{background:#fff;border:1px solid #E2E8F0;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 1px 3px #0000001a;max-height:400px;overflow:hidden;display:flex;flex-direction:column}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:16px;font-weight:600}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;font-size:20px;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative;margin-bottom:16px}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{--background: #FAFAFB;--border-radius: 6px;--border-width: 1px;--border-color: transparent;--padding-start: 40px 12px 12px;--padding-end: 12px;--padding-top: 10px;--padding-bottom: 10px;--color: #111827;--placeholder-color: #9CA3AF;font-size:14px;transition:border-color .2s}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus-within{--border-color: #2563eb;--background: #fff;box-shadow:0 0 0 2px #2563eb1a}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:18px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]{flex:1;max-height:250px;overflow-y:auto;border:1px solid #E5E7EB;border-radius:6px;background:#f9fafb}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px;border-bottom:1px solid #E5E7EB;cursor:pointer;transition:all .2s}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:hover{background:#f3f4f6}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{flex:1}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-code[_ngcontent-%COMP%]{font-size:11px;color:#6b7280;background:#e5e7eb;padding:2px 6px;border-radius:4px;font-weight:500}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-weight:600;color:#059669;font-size:13px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;font-size:13px;margin-bottom:4px;display:block}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-stock[_ngcontent-%COMP%]{font-size:11px;color:#6b7280}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{color:#3b82f6;font-size:18px;margin-left:8px}.repuestos-list[_ngcontent-%COMP%]{margin-top:20px}.repuestos-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#1f2937;font-size:16px;font-weight:600}.repuestos-list[_ngcontent-%COMP%]   .precio-total[_ngcontent-%COMP%]{background:#f0fdf4;border:1px solid #BBF7D0;border-radius:6px;padding:12px 16px;margin-bottom:16px;text-align:center}.repuestos-list[_ngcontent-%COMP%]   .precio-total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#059669;font-size:16px}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#f0f9ff;border:1px solid #BAE6FD;border-radius:6px;margin-bottom:8px;width:100%;overflow:hidden}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:16px;min-width:0;overflow:hidden}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-nombre[_ngcontent-%COMP%]{font-weight:500;color:#0369a1;font-size:14px;min-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-cantidad[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-shrink:0}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-cantidad[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-weight:500}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-cantidad[_ngcontent-%COMP%]   .cantidad-input[_ngcontent-%COMP%]{width:60px;padding:4px 8px;border:1px solid #D1D5DB;border-radius:4px;font-size:12px;text-align:center;background-color:#fafafb;color:#111827}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-cantidad[_ngcontent-%COMP%]   .unidad[_ngcontent-%COMP%]{font-size:11px;color:#6b7280;font-weight:500}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-precio-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:4px;min-width:100px;flex-shrink:0}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-precio-info[_ngcontent-%COMP%]   .precio-unitario[_ngcontent-%COMP%]{font-size:11px;color:#6b7280;font-weight:500}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-precio-info[_ngcontent-%COMP%]   .precio-total-item[_ngcontent-%COMP%]{font-weight:600;color:#059669;font-size:13px}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626;border:none;padding:6px;border-radius:6px;cursor:pointer;transition:all .2s}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]:hover{background:#fecaca}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.estados-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}@media (min-width: 1200px){.estados-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:20px}}.estado-option[_ngcontent-%COMP%]{border:2px solid #E5E7EB;border-radius:8px;padding:20px;cursor:pointer;transition:all .2s ease;position:relative;background:#fff}.estado-option[_ngcontent-%COMP%]:hover{border-color:#2563eb;transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.estado-option.selected[_ngcontent-%COMP%]{border-color:#2563eb;background:#eff6ff}.estado-option.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#2563eb}.estado-option[_ngcontent-%COMP%]   .estado-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;font-weight:600;color:#111827}.estado-option[_ngcontent-%COMP%]   .estado-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#6b7280;line-height:1.4}.estado-option[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;font-size:20px;color:#9ca3af}.signature-area[_ngcontent-%COMP%]{border:2px dashed #D1D5DB;border-radius:8px;padding:20px;text-align:center;background:#f9fafb;transition:all .2s ease;min-height:200px;display:flex;align-items:center;justify-content:center;position:relative}.signature-area[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#eff6ff}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;gap:16px}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-canvas[_ngcontent-%COMP%]{border:1px solid #E5E7EB;border-radius:6px;background:#fff;cursor:crosshair;touch-action:none}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]:hover{background:#fecaca}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#10b981;color:#fff}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background:#059669}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;gap:16px}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .firma-image[_ngcontent-%COMP%]{max-width:100%;max-height:120px;border:1px solid #E5E7EB;border-radius:6px;background:#fff}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]:hover{background:#bfdbfe}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]:hover{background:#fecaca}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;color:#6b7280;margin-top:15px}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#9ca3af}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   .btn-start-signature[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 20px;background:#2563eb;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;margin-top:8px}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   .btn-start-signature[_ngcontent-%COMP%]:hover{background:#1d4ed8}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   .btn-start-signature[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e5e7eb;background:#fff;flex-shrink:0;z-index:10;position:sticky;bottom:0;left:0;right:0}@media (max-width: 768px){.modal-footer[_ngcontent-%COMP%]{padding-bottom:calc(16px + var(--ion-safe-area-bottom, 16px))}}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-size:14px;font-weight:500;display:flex;align-items:center;gap:8px;cursor:pointer;transition:all .2s}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{background:none;border:1px solid #d1d5db;color:#374151}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f8fafc;border-color:#9ca3af}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#2563eb;border:1px solid #2563eb;color:#fff}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1d4ed8;border-color:#1d4ed8}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#fef2f2;border:1px solid #FECACA;border-radius:6px;color:#dc2626;margin-bottom:20px;font-size:14px}.error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#dc2626;flex-shrink:0}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}ion-button[type=submit][disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}ion-button[type=submit][_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%]{margin-right:8px}.mobile-only[_ngcontent-%COMP%]{display:block}.desktop-only[_ngcontent-%COMP%]{display:none}@media (min-width: 1200px){.mobile-only[_ngcontent-%COMP%]{display:none}.desktop-only[_ngcontent-%COMP%]{display:block}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{height:100vh;max-height:none}.modal-body[_ngcontent-%COMP%]{overflow-y:auto}.modal-content[_ngcontent-%COMP%]{height:auto;overflow:auto}.modal-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:auto auto;height:auto;overflow:visible}.form-section[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid #e5e7eb;height:auto;max-height:none;overflow:visible;padding-bottom:30px}.images-section[_ngcontent-%COMP%]{height:auto;max-height:none;overflow:visible;min-height:300px;padding-bottom:80px;display:none}.form-control[_ngcontent-%COMP%]{font-size:16px;padding:12px}textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font-size:14px!important;padding:12px}.input-with-button[_ngcontent-%COMP%]{flex-direction:column}.input-with-button[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{position:static;margin-top:8px;width:100%;justify-content:center}.estados-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.estado-option[_ngcontent-%COMP%]{padding:16px}.estado-option[_ngcontent-%COMP%]   .estado-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:15px}.estado-option[_ngcontent-%COMP%]   .estado-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.estado-option[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;top:12px;right:12px}.repuestos-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.repuestos-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.repuestos-list[_ngcontent-%COMP%]{width:100%;overflow:hidden}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-nombre[_ngcontent-%COMP%]{min-width:unset;width:100%;font-size:13px}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-cantidad[_ngcontent-%COMP%]{align-self:stretch;justify-content:space-between}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-precio-info[_ngcontent-%COMP%]{align-self:stretch;align-items:flex-start;min-width:unset}.signature-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px 10px;min-height:200px;border:2px dashed #D1D5DB;border-radius:8px;background:#f9fafb;transition:all .2s ease}.signature-area[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#eff6ff}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;color:#6b7280;text-align:center}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#9ca3af}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   .btn-start-signature[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 20px;background:#2563eb;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;margin-top:8px}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   .btn-start-signature[_ngcontent-%COMP%]:hover{background:#1d4ed8}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   .btn-start-signature[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;gap:16px}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-canvas[_ngcontent-%COMP%]{border:1px solid #E5E7EB;border-radius:6px;background:#fff;cursor:crosshair;touch-action:none;width:100%;max-width:400px;height:200px}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]:hover{background:#fecaca}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#10b981;color:#fff}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background:#059669}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;gap:16px}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .firma-image[_ngcontent-%COMP%]{max-width:100%;max-height:120px;border:1px solid #E5E7EB;border-radius:6px;background:#fff}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]:hover{background:#bfdbfe}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]:hover{background:#fecaca}}@media all and (display-mode: standalone){.modal-container[_ngcontent-%COMP%]{height:calc(100vh - var(--ion-safe-area-top, 0px) - var(--ion-safe-area-bottom, 0px));max-height:calc(100vh - var(--ion-safe-area-top, 0px) - var(--ion-safe-area-bottom, 0px))}.modal-header[_ngcontent-%COMP%]{padding-top:calc(16px + var(--ion-safe-area-top, 0px))}.modal-footer[_ngcontent-%COMP%]{padding-bottom:calc(16px + var(--ion-safe-area-bottom, 0px))}}@supports (-webkit-touch-callout: none){@media all and (display-mode: standalone){.modal-container[_ngcontent-%COMP%]{height:calc(100vh - var(--ion-safe-area-top, 0px) - var(--ion-safe-area-bottom, 0px));max-height:calc(100vh - var(--ion-safe-area-top, 0px) - var(--ion-safe-area-bottom, 0px))}.modal-header[_ngcontent-%COMP%]{padding-top:calc(16px + var(--ion-safe-area-top, 0px))}.modal-footer[_ngcontent-%COMP%]{padding-bottom:calc(16px + var(--ion-safe-area-bottom, 0px))}}}@supports not (-webkit-touch-callout: none){.modal-container[_ngcontent-%COMP%]{height:calc(100vh - var(--ion-safe-area-bottom, 16px));max-height:calc(100vh - var(--ion-safe-area-bottom, 16px))}.modal-footer[_ngcontent-%COMP%]{padding-bottom:calc(16px + var(--ion-safe-area-bottom, 16px))}}@supports not (padding-top: env(safe-area-inset-top)){@media all and (display-mode: standalone){ion-modal.hacer-albaran-modal[_ngcontent-%COMP%]::part(content){padding-top:36px;padding-bottom:36px}ion-modal.hacer-albaran-modal[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-top: 36px;--padding-bottom: 36px}}}`]});let c=s;return c})();function tt(c,s){c&1&&(n(0,"div",4),p(1,"ion-icon",5),n(2,"span",6),r(3,"Cargando estado del flujo..."),e(),n(4,"span",7),r(5,"Cargando..."),e()())}function ot(c,s){if(c&1){let a=P();n(0,"div",8),p(1,"ion-icon",9),n(2,"span",10),r(3),e(),n(4,"button",11),u("click",function(){b(a);let o=_();return C(o.recargar())}),p(5,"ion-icon",12),n(6,"span",6),r(7,"Reintentar"),e(),n(8,"span",7),r(9,"Reintentar"),e()()()}if(c&2){let a=_();l(3),m(a.error)}}function at(c,s){if(c&1){let a=P();n(0,"button",26),u("click",function(){let o=b(a).$implicit,i=_(3);return C(i.ejecutarAccion(o))}),p(1,"ion-icon",17),n(2,"span",27),r(3),e()()}if(c&2){let a=s.$implicit,t=_(3);d("disabled",t.loading)("title",t.getAccionTexto(a)),l(),d("name",t.getAccionIcon(a)),l(2),m(t.getAccionTexto(a))}}function it(c,s){if(c&1&&(n(0,"div",22)(1,"h4",23),r(2,"Acciones disponibles:"),e(),n(3,"div",24),f(4,at,4,4,"button",25),e()()),c&2){let a=_(2);l(4),d("ngForOf",a.accionesDisponibles)}}function rt(c,s){c&1&&(n(0,"div",30),p(1,"ion-icon",31),n(2,"span",32),r(3,"No hay acciones pendientes"),e()())}function ct(c,s){if(c&1&&(n(0,"div",28),f(1,rt,4,0,"div",29),e()),c&2){let a=_(2);l(),d("ngIf",a.accionesDisponibles.length===0&&!a.estadoFlujo.puedeCrearPresupuesto)}}function lt(c,s){if(c&1){let a=P();n(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16),p(4,"ion-icon",17),n(5,"span",18),r(6),e()(),n(7,"button",19),u("click",function(){b(a);let o=_();return C(o.recargar())}),p(8,"ion-icon",12),e()()(),f(9,it,5,1,"div",20)(10,ct,2,1,"div",21),e()}if(c&2){let a=_();l(3),d("ngClass",a.getEstadoClass()),l(),d("name",a.getEstadoIcon()),l(2),m(a.estadoFlujo.estadoActual),l(3),d("ngIf",a.accionesDisponibles.length>0),l(),d("ngIf",a.estadoFlujo.estadoActual==="No visitado"||a.estadoFlujo.estadoActual==="Visitado pendiente")}}var Se=(()=>{let s=class s{constructor(t){this.flujoService=t,this.accionEjecutada=new Fn,this.estadoFlujo=null,this.accionesDisponibles=[],this.loading=!1,this.error=null,this.destroy$=new Z,k({documentTextOutline:H,checkmarkCircleOutline:B,timeOutline:J,receiptOutline:Pe,createOutline:ln,eyeOutline:dn,arrowForwardOutline:ce,warningOutline:K,refreshOutline:N})}ngOnInit(){this.avisoId&&this.cargarEstadoFlujo()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarEstadoFlujo(){this.loading=!0,this.error=null,this.flujoService.obtenerEstadoFlujo(this.avisoId).pipe(y(this.destroy$)).subscribe({next:t=>{this.estadoFlujo=t,this.cargarAccionesDisponibles(),this.loading=!1},error:t=>{console.error("Error al cargar estado del flujo:",t),this.error="Error al cargar el estado del flujo",this.loading=!1}})}cargarAccionesDisponibles(){this.flujoService.obtenerAccionesDisponibles(this.avisoId).pipe(y(this.destroy$)).subscribe({next:t=>{this.accionesDisponibles=t},error:t=>{console.error("Error al cargar acciones:",t)}})}ejecutarAccion(t){var i,g,O,M,$,W;this.loading=!0,this.error=null;let o;switch(t){case"crear_presupuesto":o=this.flujoService.ejecutarFlujoCompleto(this.avisoId,!0);break;case"aprobar_presupuesto":let z=(O=(g=(i=this.estadoFlujo)==null?void 0:i.resumen)==null?void 0:g.presupuesto)==null?void 0:O.id;z&&(o=this.flujoService.aprobarPresupuesto(z));break;case"facturar_presupuesto":let kn=(W=($=(M=this.estadoFlujo)==null?void 0:M.resumen)==null?void 0:$.presupuesto)==null?void 0:W.id;kn&&(o=this.flujoService.facturarPresupuesto(kn));break;case"facturar_trabajos":o=this.flujoService.facturarTrabajos(this.avisoId);break;case"completar_aviso":this.completarAviso();break;default:this.loading=!1;return}o&&o.pipe(y(this.destroy$)).subscribe({next:z=>{console.log("Acci\xF3n ejecutada:",z),this.accionEjecutada.emit(z),this.cargarEstadoFlujo(),this.loading=!1},error:z=>{console.error("Error al ejecutar acci\xF3n:",z),this.error=`Error al ejecutar ${t}: ${z.message}`,this.loading=!1}})}iniciarFlujoDirecto(){this.loading=!0,this.flujoService.ejecutarFlujoCompleto(this.avisoId,!1).pipe(y(this.destroy$)).subscribe({next:t=>{console.log("Flujo directo iniciado:",t),this.accionEjecutada.emit(t),this.cargarEstadoFlujo(),this.loading=!1},error:t=>{console.error("Error al iniciar flujo directo:",t),this.error=`Error al iniciar flujo directo: ${t.message}`,this.loading=!1}})}completarAviso(){if(!this.avisoId){console.error("No hay aviso seleccionado para completar");return}console.log("\u{1F504} Completando aviso:",this.avisoId),this.loading=!0,this.flujoService.completarAviso(this.avisoId).subscribe({next:t=>{console.log("\u2705 Aviso completado exitosamente:",t),this.loading=!1,this.mostrarMensaje("Aviso completado exitosamente","success"),this.cargarEstadoFlujo()},error:t=>{console.error("\u274C Error al completar aviso:",t),this.loading=!1,this.mostrarMensaje(t.message||"Error al completar el aviso. Verifica que haya trabajos realizados y facturas generadas.","error")}})}mostrarMensaje(t,o="info"){console.log(`[${o.toUpperCase()}] ${t}`)}getEstadoIcon(){if(!this.estadoFlujo)return"time-outline";switch(this.estadoFlujo.estadoActual){case"No visitado":return"time-outline";case"Visitado pendiente":return"eye-outline";case"Pendiente de presupuesto":return"document-text-outline";case"En curso":return"create-outline";case"Completado":return"checkmark-circle-outline";default:return"time-outline"}}getEstadoClass(){if(!this.estadoFlujo)return"pendiente";switch(this.estadoFlujo.estadoActual){case"Pendiente":return"pendiente";case"Pendiente de presupuesto":return"presupuesto";case"En curso":return"en-curso";case"Listo para facturar":return"listo-facturar";case"Completado":return"completado";case"Cancelado":return"cancelado";default:return"pendiente"}}getAccionTexto(t){switch(t){case"crear_presupuesto":return"Crear Presupuesto";case"aprobar_presupuesto":return"Aprobar Presupuesto";case"facturar_presupuesto":return"Generar Factura desde Presupuesto";case"facturar_trabajos":return"Facturar Trabajos Realizados";case"completar_aviso":return"Completar Aviso";default:return t}}getAccionIcon(t){switch(t){case"crear_presupuesto":return"document-text-outline";case"aprobar_presupuesto":return"checkmark-circle-outline";case"facturar_presupuesto":case"facturar_trabajos":return"receipt-outline";case"completar_aviso":return"checkmark-circle-outline";default:return"arrow-forward-outline"}}recargar(){this.cargarEstadoFlujo()}};s.\u0275fac=function(o){return new(o||s)(h(_n))},s.\u0275cmp=j({type:s,selectors:[["app-flujo-estado"]],inputs:{avisoId:"avisoId"},outputs:{accionEjecutada:"accionEjecutada"},decls:4,vars:3,consts:[[1,"flujo-estado-container"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","flujo-content",4,"ngIf"],[1,"loading-state"],["name","refresh-outline",1,"spinning"],[1,"desktop-only"],[1,"mobile-only"],[1,"error-state"],["name","warning-outline"],[1,"error-text"],[1,"btn-retry",3,"click"],["name","refresh-outline"],[1,"flujo-content"],[1,"estado-actual"],[1,"estado-header"],[1,"estado-badge",3,"ngClass"],[3,"name"],[1,"estado-text"],["title","Actualizar estado",1,"btn-refresh",3,"click"],["class","acciones-disponibles",4,"ngIf"],["class","flujo-inicial",4,"ngIf"],[1,"acciones-disponibles"],[1,"section-title"],[1,"acciones-grid"],["class","btn-accion",3,"disabled","title","click",4,"ngFor","ngForOf"],[1,"btn-accion",3,"click","disabled","title"],[1,"accion-text"],[1,"flujo-inicial"],["class","sin-acciones",4,"ngIf"],[1,"sin-acciones"],["name","checkmark-circle-outline",1,"complete-icon"],[1,"complete-text"]],template:function(o,i){o&1&&(n(0,"div",0),f(1,tt,6,0,"div",1)(2,ot,10,1,"div",2)(3,lt,11,5,"div",3),e()),o&2&&(l(),d("ngIf",i.loading),l(),d("ngIf",i.error&&!i.loading),l(),d("ngIf",i.estadoFlujo&&!i.loading&&!i.error))},dependencies:[T,on,F,V,D],styles:[".flujo-estado-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #E2E8F0;overflow:hidden;box-shadow:0 1px 3px #0000001a}.desktop-only[_ngcontent-%COMP%]{display:inline}.mobile-only[_ngcontent-%COMP%]{display:none}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:24px;text-align:center;color:#64748b;font-size:14px}.loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#4f46e5}.loading-state.error-state[_ngcontent-%COMP%], .error-state.error-state[_ngcontent-%COMP%]{color:#dc2626}.loading-state.error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state.error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#dc2626}.error-text[_ngcontent-%COMP%]{word-break:break-word;line-height:1.4}.btn-retry[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#f1f5f9;border:1px solid #CBD5E1;border-radius:8px;font-size:12px;color:#475569;cursor:pointer;transition:all .2s ease}.btn-retry[_ngcontent-%COMP%]:hover{background:#e2e8f0;border-color:#94a3b8}.btn-retry[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.flujo-content[_ngcontent-%COMP%]{padding:20px}.estado-actual[_ngcontent-%COMP%]{margin-bottom:24px}.estado-actual[_ngcontent-%COMP%]   .estado-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:500}.estado-actual[_ngcontent-%COMP%]   .estado-badge.pendiente[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.estado-actual[_ngcontent-%COMP%]   .estado-badge.pendiente[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#d97706}.estado-actual[_ngcontent-%COMP%]   .estado-badge.presupuesto[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.estado-actual[_ngcontent-%COMP%]   .estado-badge.presupuesto[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#3b82f6}.estado-actual[_ngcontent-%COMP%]   .estado-badge.en-curso[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.estado-actual[_ngcontent-%COMP%]   .estado-badge.en-curso[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#22c55e}.estado-actual[_ngcontent-%COMP%]   .estado-badge.completado[_ngcontent-%COMP%]{background:#ecfdf5;color:#14532d}.estado-actual[_ngcontent-%COMP%]   .estado-badge.completado[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#10b981}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.estado-actual[_ngcontent-%COMP%]   .estado-text[_ngcontent-%COMP%]{font-weight:500}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:#f8fafc;border:1px solid #E2E8F0;border-radius:8px;cursor:pointer;transition:all .2s ease}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#64748b}.resumen-info[_ngcontent-%COMP%]{background:#f8fafc;border-radius:8px;padding:16px}.resumen-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:13px;color:#64748b;font-weight:500}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:13px;color:#1e293b;font-weight:600}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.si[_ngcontent-%COMP%]{color:#059669}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.no[_ngcontent-%COMP%]{color:#dc2626}.acciones-disponibles[_ngcontent-%COMP%]{margin-bottom:24px}.acciones-disponibles[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px;color:#1e293b;font-weight:600}.acciones-disponibles[_ngcontent-%COMP%]   .acciones-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 16px;background:#4f46e5;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;text-align:left}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]:hover:not(:disabled){background:#4338ca;transform:translateY(-1px);box-shadow:0 4px 8px #4f46e54d}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]   .accion-text[_ngcontent-%COMP%]{flex:1}.flujo-inicial[_ngcontent-%COMP%]{margin-bottom:24px}.flujo-inicial[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;color:#1e293b;font-weight:600}.flujo-inicial[_ngcontent-%COMP%]   .flujo-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px;background:#f8fafc;border:1px solid #E2E8F0;border-radius:12px;transition:all .2s ease}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]:hover{background:#f0f9ff;border-color:#4f46e5;transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px;color:#4f46e5;flex-shrink:0;background:#eef2ff;padding:12px;border-radius:50%}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;flex:1}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1e293b}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-description[_ngcontent-%COMP%]{font-size:14px;color:#64748b;line-height:1.4}.sin-acciones[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:20px;color:#64748b;font-size:14px;text-align:center}.sin-acciones[_ngcontent-%COMP%]   .complete-icon[_ngcontent-%COMP%]{font-size:20px;color:#10b981}.sin-acciones[_ngcontent-%COMP%]   .complete-text[_ngcontent-%COMP%]{font-weight:500}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:inline}.flujo-content[_ngcontent-%COMP%]{padding:16px}.estado-actual[_ngcontent-%COMP%]{margin-bottom:20px}.estado-actual[_ngcontent-%COMP%]   .estado-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin-bottom:12px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{width:28px;height:28px}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.resumen-info[_ngcontent-%COMP%]{padding:12px}.resumen-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:12px}.acciones-disponibles[_ngcontent-%COMP%]{margin-bottom:20px}.acciones-disponibles[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:15px;margin-bottom:10px}.acciones-disponibles[_ngcontent-%COMP%]   .acciones-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]{padding:10px 12px;font-size:13px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.flujo-inicial[_ngcontent-%COMP%]{margin-bottom:20px}.flujo-inicial[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:15px;margin-bottom:10px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-info[_ngcontent-%COMP%]{gap:12px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]{padding:16px;gap:12px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;padding:10px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{font-size:14px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-description[_ngcontent-%COMP%]{font-size:12px}.sin-acciones[_ngcontent-%COMP%]{padding:16px}.sin-acciones[_ngcontent-%COMP%]   .complete-icon[_ngcontent-%COMP%]{font-size:18px}.sin-acciones[_ngcontent-%COMP%]   .complete-text[_ngcontent-%COMP%]{font-size:13px}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{padding:20px;font-size:13px}.loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.btn-retry[_ngcontent-%COMP%]{padding:6px 12px;font-size:11px}.btn-retry[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 480px){.flujo-content[_ngcontent-%COMP%]{padding:12px}.estado-actual[_ngcontent-%COMP%]{margin-bottom:16px}.estado-actual[_ngcontent-%COMP%]   .estado-header[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:space-between;gap:8px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]{justify-content:center;padding:4px 10px;font-size:12px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{align-self:center;width:24px;height:24px}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.resumen-info[_ngcontent-%COMP%]{padding:10px}.resumen-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{gap:6px}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:11px}.acciones-disponibles[_ngcontent-%COMP%]{margin-bottom:16px}.acciones-disponibles[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.acciones-disponibles[_ngcontent-%COMP%]   .acciones-grid[_ngcontent-%COMP%]{gap:6px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]{padding:8px 10px;font-size:12px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.flujo-inicial[_ngcontent-%COMP%]{margin-bottom:16px}.flujo-inicial[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-info[_ngcontent-%COMP%]{gap:8px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]{padding:12px;gap:8px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;padding:8px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{font-size:13px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-description[_ngcontent-%COMP%]{font-size:11px}.sin-acciones[_ngcontent-%COMP%]{padding:12px;gap:8px}.sin-acciones[_ngcontent-%COMP%]   .complete-icon[_ngcontent-%COMP%]{font-size:16px}.sin-acciones[_ngcontent-%COMP%]   .complete-text[_ngcontent-%COMP%]{font-size:12px}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{padding:16px;font-size:12px;gap:8px}.loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.btn-retry[_ngcontent-%COMP%]{padding:4px 8px;font-size:10px}.btn-retry[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:10px}}"]});let c=s;return c})();function st(c,s){if(c&1&&(n(0,"tr")(1,"td"),r(2),e(),n(3,"td"),r(4),e(),n(5,"td"),r(6),e(),n(7,"td"),r(8),e(),n(9,"td"),r(10),x(11,"currency"),e(),n(12,"td"),r(13),x(14,"currency"),e()()),c&2){let a=s.$implicit,t=_(2);l(2),m(t.getMaterialAsRepuesto(a).codigo),l(2),m(t.getMaterialAsRepuesto(a).nombre),l(2),m(t.getMaterialAsRepuesto(a).cantidad),l(2),m(t.getMaterialAsRepuesto(a).unidad),l(2),m(v(11,6,t.getMaterialAsRepuesto(a).precio_pvp,"EUR","symbol","1.2-2")),l(3),m(v(14,11,t.getMaterialAsRepuesto(a).precio_pvp*t.getMaterialAsRepuesto(a).cantidad,"EUR","symbol","1.2-2"))}}function dt(c,s){if(c&1&&(n(0,"div",28)(1,"table",29)(2,"thead")(3,"tr")(4,"th"),r(5,"C\xF3digo"),e(),n(6,"th"),r(7,"Material"),e(),n(8,"th"),r(9,"Cantidad"),e(),n(10,"th"),r(11,"Unidad"),e(),n(12,"th"),r(13,"Precio Unit."),e(),n(14,"th"),r(15,"Total"),e()()(),n(16,"tbody"),f(17,st,15,16,"tr",30),e(),n(18,"tfoot")(19,"tr",31)(20,"td",32)(21,"strong"),r(22,"Total Materiales:"),e()(),n(23,"td")(24,"strong"),r(25),x(26,"currency"),e()()()()()()),c&2){let a=_();l(17),d("ngForOf",a.albaran.repuestos_utilizados),l(8),m(v(26,2,a.calcularTotalMateriales(),"EUR","symbol","1.2-2"))}}function gt(c,s){if(c&1&&(n(0,"li"),r(1),e()),c&2){let a=s.$implicit;l(),m(a)}}function pt(c,s){if(c&1&&(n(0,"div",33)(1,"ul",34),f(2,gt,2,1,"li",30),e()()),c&2){let a=_();l(2),d("ngForOf",a.albaran.repuestos_utilizados)}}function _t(c,s){c&1&&(n(0,"div",35)(1,"p"),r(2,"No se utilizaron materiales en este trabajo"),e()())}function mt(c,s){if(c&1&&(n(0,"div",15)(1,"h3"),r(2,"Presupuesto Adicional"),e(),n(3,"div",36)(4,"div",37)(5,"span",38),r(6,"Monto:"),e(),n(7,"span",39),r(8),x(9,"currency"),e()()()()),c&2){let a=_();l(8),m(v(9,1,a.albaran.presupuesto_necesario,"EUR","symbol","1.2-2"))}}function ut(c,s){if(c&1&&(n(0,"div",17)(1,"label"),r(2,"DNI:"),e(),n(3,"span"),r(4),e()()),c&2){let a=_(2);l(4),m(a.albaran.dni_cliente)}}function bt(c,s){if(c&1&&(n(0,"div",17)(1,"label"),r(2,"Firmado por:"),e(),n(3,"span"),r(4),e()()),c&2){let a=_(2);l(4),m(a.albaran.nombre_firma)}}function Ct(c,s){if(c&1&&(n(0,"div",15)(1,"h3"),r(2,"Informaci\xF3n del Cliente"),e(),n(3,"div",16),f(4,ut,5,1,"div",24)(5,bt,5,1,"div",24),e()()),c&2){let a=_();l(4),d("ngIf",a.albaran.dni_cliente),l(),d("ngIf",a.albaran.nombre_firma)}}function ft(c,s){if(c&1&&(n(0,"div",43),p(1,"img",44),n(2,"p",45),r(3,"Firma digital del cliente"),e()()),c&2){let a=_(2);l(),d("src",a.albaran.firma_url,I)}}function Ot(c,s){if(c&1&&(n(0,"div",46)(1,"p"),r(2,"El cliente ha firmado este albar\xE1n"),e(),n(3,"div",47),p(4,"ion-icon",48),n(5,"span"),r(6),e()()()),c&2){let a=_(2);l(6),m(a.albaran.nombre_firma)}}function Mt(c,s){if(c&1&&(n(0,"div",15)(1,"h3"),r(2,"Firma del Cliente"),e(),n(3,"div",40),f(4,ft,4,1,"div",41)(5,Ot,7,1,"div",42),e()()),c&2){let a=_();l(4),d("ngIf",a.albaran.firma_url),l(),d("ngIf",!a.albaran.firma_url&&a.albaran.nombre_firma)}}function Pt(c,s){if(c&1&&(n(0,"div",15)(1,"h3"),r(2,"Observaciones"),e(),n(3,"div",49)(4,"p"),r(5),e()()()),c&2){let a=_();l(5),m(a.albaran.observaciones)}}function xt(c,s){if(c&1&&(n(0,"div",17)(1,"label"),r(2,"Fecha de creaci\xF3n:"),e(),n(3,"span"),r(4),e()()),c&2){let a=_();l(4),m(a.formatearFecha(a.albaran.fecha_creacion))}}var Ie=(()=>{let s=class s{constructor(t){this.modalController=t,k({close:G,documentTextOutline:H,personOutline:Y,timeOutline:J,calendarOutline:cn,cubeOutline:sn,checkmarkCircleOutline:B,warningOutline:K,refreshOutline:N,downloadOutline:_e,printOutline:Me})}ngOnInit(){console.log("Modal de albar\xE1n cargado:",this.albaran)}cerrarModal(){this.modalController.dismiss()}descargarPDF(){console.log("Descargando albar\xE1n como PDF..."),alert("Funcionalidad de descarga de PDF en desarrollo")}imprimirAlbaran(){console.log("Imprimiendo albar\xE1n..."),window.print()}tieneFirma(){return!!(this.albaran.firma_url||this.albaran.nombre_firma)}getEstadoClass(t){return"badge-"+t.toLowerCase().replace(/ /g,"-")}repuestosCompletos(){return this.albaran.repuestos_utilizados.length>0&&typeof this.albaran.repuestos_utilizados[0]=="object"}calcularTotalMateriales(){return this.repuestosCompletos()?this.albaran.repuestos_utilizados.reduce((t,o)=>t+o.precio_pvp*o.cantidad,0):0}formatearFecha(t){return t?new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"No especificada"}formatearHora(t){return t||"No especificada"}getEstadoColor(t){switch(t){case"Finalizado":return"#10B981";case"Presupuesto pendiente":return"#F59E0B";case"Otra visita":return"#EF4444";default:return"#6B7280"}}getMaterialAsRepuesto(t){return t}};s.\u0275fac=function(o){return new(o||s)(h(Q))},s.\u0275cmp=j({type:s,selectors:[["app-ver-albaran-modal"]],inputs:{albaran:"albaran",aviso:"aviso"},decls:97,vars:21,consts:[[1,"modal-header"],[1,"header-content"],["name","document-text-outline"],[1,"header-actions"],["title","Descargar PDF",1,"btn-secondary",3,"click"],["name","download-outline"],[1,"desktop-only"],["title","Imprimir",1,"btn-secondary",3,"click"],["name","print-outline"],["title","Cerrar",1,"btn-close",3,"click"],["name","close"],[1,"modal-content"],[1,"estado-section"],[1,"estado-badge"],["name","checkmark-circle-outline"],[1,"info-section"],[1,"info-grid"],[1,"info-item"],[1,"descripcion-content"],[1,"materiales-content"],["class","materiales-tabla",4,"ngIf"],["class","materiales-lista",4,"ngIf"],["class","no-materiales",4,"ngIf"],["class","info-section",4,"ngIf"],["class","info-item",4,"ngIf"],[1,"modal-footer"],[1,"btn-primary",3,"click"],[1,"btn-secondary",3,"click"],[1,"materiales-tabla"],[1,"materiales-table"],[4,"ngFor","ngForOf"],[1,"total-row"],["colspan","5"],[1,"materiales-lista"],[1,"repuestos-list"],[1,"no-materiales"],[1,"presupuesto-content"],[1,"presupuesto-amount"],[1,"amount-label"],[1,"amount-value"],[1,"firma-content"],["class","firma-imagen",4,"ngIf"],["class","firma-texto",4,"ngIf"],[1,"firma-imagen"],["alt","Firma del cliente",1,"firma-img",3,"src"],[1,"firma-caption"],[1,"firma-texto"],[1,"firma-nombre"],["name","person-outline"],[1,"observaciones-content"]],template:function(o,i){o&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),p(3,"ion-icon",2),r(4),e(),n(5,"div",3)(6,"button",4),u("click",function(){return i.descargarPDF()}),p(7,"ion-icon",5),n(8,"span",6),r(9,"PDF"),e()(),n(10,"button",7),u("click",function(){return i.imprimirAlbaran()}),p(11,"ion-icon",8),n(12,"span",6),r(13,"Imprimir"),e()(),n(14,"button",9),u("click",function(){return i.cerrarModal()}),p(15,"ion-icon",10),e()()()(),n(16,"div",11)(17,"div",12)(18,"div",13),p(19,"ion-icon",14),r(20),e()(),n(21,"div",15)(22,"h3"),r(23,"Informaci\xF3n del Aviso"),e(),n(24,"div",16)(25,"div",17)(26,"label"),r(27,"Cliente:"),e(),n(28,"span"),r(29),e()(),n(30,"div",17)(31,"label"),r(32,"Direcci\xF3n:"),e(),n(33,"span"),r(34),e()(),n(35,"div",17)(36,"label"),r(37,"Fecha de creaci\xF3n:"),e(),n(38,"span"),r(39),e()()()(),n(40,"div",15)(41,"h3"),r(42,"Fechas y Horarios"),e(),n(43,"div",16)(44,"div",17)(45,"label"),r(46,"Fecha de cierre:"),e(),n(47,"span"),r(48),e()(),n(49,"div",17)(50,"label"),r(51,"Hora de entrada:"),e(),n(52,"span"),r(53),e()(),n(54,"div",17)(55,"label"),r(56,"Hora de salida:"),e(),n(57,"span"),r(58),e()()()(),n(59,"div",15)(60,"h3"),r(61,"Descripci\xF3n del Trabajo Realizado"),e(),n(62,"div",18)(63,"p"),r(64),e()()(),n(65,"div",15)(66,"h3"),r(67,"Materiales Utilizados"),e(),n(68,"div",19),f(69,dt,27,7,"div",20)(70,pt,3,1,"div",21)(71,_t,3,0,"div",22),e()(),f(72,mt,10,6,"div",23)(73,Ct,6,2,"div",23)(74,Mt,6,2,"div",23)(75,Pt,6,1,"div",23),n(76,"div",15)(77,"h3"),r(78,"Informaci\xF3n Adicional"),e(),n(79,"div",16)(80,"div",17)(81,"label"),r(82,"ID del trabajo:"),e(),n(83,"span"),r(84),e()(),n(85,"div",17)(86,"label"),r(87,"ID del aviso:"),e(),n(88,"span"),r(89),e()(),f(90,xt,5,1,"div",24),e()()(),n(91,"div",25)(92,"button",26),u("click",function(){return i.imprimirAlbaran()}),p(93,"ion-icon",8),r(94," Imprimir Albar\xE1n "),e(),n(95,"button",27),u("click",function(){return i.cerrarModal()}),r(96," Cerrar "),e()()),o&2&&(l(4),w(" Albar\xE1n #",i.albaran.id==null?null:i.albaran.id.substring(0,8)," "),l(14),Vn("background-color",i.getEstadoColor(i.albaran.estado_cierre)),l(2),w(" ",i.albaran.estado_cierre," "),l(9),m((i.aviso==null?null:i.aviso.nombre_cliente_aviso)||"No especificado"),l(5),m((i.aviso==null?null:i.aviso.direccion_cliente_aviso)||"No especificada"),l(5),m(i.formatearFecha(i.aviso==null?null:i.aviso.fecha_creacion)),l(9),m(i.formatearFecha(i.albaran.fecha_cierre)),l(5),m(i.formatearHora(i.albaran.hora_entrada)),l(5),m(i.formatearHora(i.albaran.hora_salida)),l(6),m(i.albaran.descripcion_trabajo_realizado),l(5),d("ngIf",i.repuestosCompletos()&&i.albaran.repuestos_utilizados.length>0),l(),d("ngIf",!i.repuestosCompletos()&&i.albaran.repuestos_utilizados.length>0),l(),d("ngIf",i.albaran.repuestos_utilizados.length===0),l(),d("ngIf",i.albaran.presupuesto_necesario>0),l(),d("ngIf",i.albaran.dni_cliente||i.albaran.nombre_firma),l(),d("ngIf",i.tieneFirma()),l(),d("ngIf",i.albaran.observaciones),l(9),m(i.albaran.trabajo_id==null?null:i.albaran.trabajo_id.substring(0,8)),l(5),m(i.albaran.aviso_id==null?null:i.albaran.aviso_id.substring(0,8)),l(),d("ngIf",i.albaran.fecha_creacion))},dependencies:[T,F,V,rn,D],styles:["[_nghost-%COMP%]{display:block;max-width:800px;margin:0 auto;background:#fff;border-radius:12px;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff;padding:24px;border-radius:12px 12px 0 0;position:relative}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:20px}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;display:flex;align-items:center;gap:12px}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:8px 16px;border-radius:8px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease;display:flex;align-items:center;gap:8px}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#ffffff4d;border-color:#ffffff80}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:8px;border-radius:50%;cursor:pointer;transition:all .2s ease;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#ffffff4d;border-color:#ffffff80}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.modal-content[_ngcontent-%COMP%]{padding:32px 24px;max-height:70vh;overflow-y:auto}.modal-content[_ngcontent-%COMP%]   .estado-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.modal-content[_ngcontent-%COMP%]   .estado-section[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;border-radius:50px;color:#fff;font-size:16px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 4px 12px #00000026}.modal-content[_ngcontent-%COMP%]   .estado-section[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{margin-bottom:32px;padding:24px;background:#f9fafb;border-radius:12px;border:1px solid #E5E7EB}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:18px;font-weight:600;color:#1f2937;display:flex;align-items:center;gap:8px;padding-bottom:12px;border-bottom:2px solid #E5E7EB}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;color:#1f2937;font-weight:500}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;line-height:1.6;color:#374151;background:#fff;padding:16px;border-radius:8px;border:1px solid #E5E7EB}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]{overflow-x:auto}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #0000001a}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #E5E7EB}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f3f4f6;font-weight:600;color:#374151;font-size:14px;text-transform:uppercase;letter-spacing:.5px}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#1f2937}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{background:#f0f9ff;font-weight:600}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#1e40af}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-lista[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-wrap:wrap;gap:8px}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-lista[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#e0f2fe;color:#0c4a6e;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:500;border:1px solid #BAE6FD}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .no-materiales[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#6b7280;font-style:italic}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-amount[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;background:#fff;padding:16px;border-radius:8px;border:1px solid #E5E7EB}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-amount[_ngcontent-%COMP%]   .amount-label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#374151}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-amount[_ngcontent-%COMP%]   .amount-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#059669}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-imagen[_ngcontent-%COMP%]{text-align:center}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-imagen[_ngcontent-%COMP%]   .firma-img[_ngcontent-%COMP%]{max-width:100%;max-height:200px;border:2px solid #E5E7EB;border-radius:8px;box-shadow:0 4px 12px #0000001a}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-imagen[_ngcontent-%COMP%]   .firma-caption[_ngcontent-%COMP%]{margin-top:12px;font-size:14px;color:#6b7280;font-style:italic}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-texto[_ngcontent-%COMP%]{text-align:center;padding:20px;background:#fff;border-radius:8px;border:1px solid #E5E7EB}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-texto[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;color:#374151}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-texto[_ngcontent-%COMP%]   .firma-nombre[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;font-size:18px;font-weight:600;color:#059669}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-texto[_ngcontent-%COMP%]   .firma-nombre[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .observaciones-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;line-height:1.6;color:#374151;background:#fff;padding:16px;border-radius:8px;border:1px solid #E5E7EB;font-style:italic}.modal-footer[_ngcontent-%COMP%]{padding:24px;background:#f9fafb;border-top:1px solid #E5E7EB;border-radius:0 0 12px 12px;display:flex;gap:16px;justify-content:flex-end}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#4f46e5;color:#fff;border:none;padding:12px 24px;border-radius:8px;cursor:pointer;font-size:16px;font-weight:600;transition:background-color .2s ease;display:flex;align-items:center;gap:8px}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#4338ca}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#374151;border:1px solid #D1D5DB;padding:12px 24px;border-radius:8px;cursor:pointer;font-size:16px;font-weight:500;transition:all .2s ease}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#f9fafb;border-color:#9ca3af}@media (max-width: 768px){[_nghost-%COMP%]{margin:0;border-radius:0;max-height:100vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{border-radius:0;padding:20px}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;gap:16px;text-align:center}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{width:100%;justify-content:center}.modal-content[_ngcontent-%COMP%]{padding:20px 16px}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{padding:16px;margin-bottom:24px}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;margin-bottom:16px}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.modal-content[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]{font-size:12px}.modal-content[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px}.modal-footer[_ngcontent-%COMP%]{padding:20px 16px;flex-direction:column}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.modal-header[_ngcontent-%COMP%]{padding:16px}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.modal-content[_ngcontent-%COMP%]{padding:16px 12px}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{padding:12px;margin-bottom:20px}.modal-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px}.modal-footer[_ngcontent-%COMP%]{padding:16px 12px}}@media print{[_nghost-%COMP%]{box-shadow:none;border-radius:0}.modal-header[_ngcontent-%COMP%]{background:#fff!important;color:#000!important;border-bottom:2px solid black}.modal-footer[_ngcontent-%COMP%], .btn-close[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{display:none}}"]});let c=s;return c})();var ht=["fileInput"],vt=(c,s,a)=>({finalizado:c,"presupuesto-pendiente":s,"otra-visita":a}),yt=(c,s,a)=>({green:c,yellow:s,blue:a});function wt(c,s){c&1&&(n(0,"div",26)(1,"div",27),p(2,"ion-icon",28),n(3,"p"),r(4,"Cargando aviso..."),e()()())}function Et(c,s){if(c&1){let a=P();n(0,"div",29)(1,"div",30),p(2,"ion-icon",31),n(3,"p"),r(4),e(),n(5,"button",32),u("click",function(){b(a);let o=_();return C(o.cargarAviso())}),p(6,"ion-icon",33),r(7," Reintentar "),e()()()}if(c&2){let a=_();l(4),m(a.error)}}function kt(c,s){if(c&1){let a=P();n(0,"button",65),u("click",function(){b(a);let o=_(2);return C(o.completarAviso())}),p(1,"ion-icon",66),n(2,"span",10),r(3,"Completar Aviso"),e(),n(4,"span",11),r(5,"Completar"),e()()}}function zt(c,s){if(c&1){let a=P();n(0,"button",8),u("click",function(){b(a);let o=_(2);return C(o.editarAviso())}),p(1,"ion-icon",67),n(2,"span",10),r(3,"Editar aviso"),e(),n(4,"span",11),r(5,"Editar"),e()()}}function St(c,s){c&1&&(n(0,"div",68),p(1,"ion-icon",69),n(2,"span"),r(3,"Aviso completado"),e()())}function It(c,s){if(c&1&&(n(0,"div",70),p(1,"ion-icon",71),n(2,"span"),r(3),e()()),c&2){let a=_(2);l(3),m(a.aviso.nombre_contacto)}}function jt(c,s){if(c&1&&(n(0,"div",72),p(1,"ion-icon",73),n(2,"a",74),r(3),e()()),c&2){let a=_(2);l(2),un("href","tel:",a.aviso.telefono_cliente_aviso,"",I),l(),m(a.aviso.telefono_cliente_aviso)}}function At(c,s){if(c&1&&(n(0,"div",72),p(1,"ion-icon",75),n(2,"a",74),r(3),e()()),c&2){let a=_(2);l(2),un("href","mailto:",a.aviso.cliente==null?null:a.aviso.cliente.email,"",I),l(),m(a.aviso.cliente==null?null:a.aviso.cliente.email)}}function Ft(c,s){if(c&1){let a=P();n(0,"div",4)(1,"div",5)(2,"div",34)(3,"div",35)(4,"button",36),u("click",function(){b(a);let o=_();return C(o.volverALista())}),p(5,"ion-icon",37),n(6,"span",10),r(7,"Volver"),e(),n(8,"span",11),r(9,"Volver"),e()()()(),n(10,"div",38)(11,"button",39),u("click",function(){b(a);let o=_();return C(o.forzarRecargaDatos())}),p(12,"ion-icon",33),n(13,"span",10),r(14,"Recargar"),e(),n(15,"span",11),r(16,"Recargar"),e()(),f(17,kt,6,0,"button",40)(18,zt,6,0,"button",41)(19,St,4,0,"div",42),e(),n(20,"span",43),r(21),x(22,"titlecase"),e()(),n(23,"h2",44)(24,"span",10),r(25),x(26,"titlecase"),e()(),n(27,"div",45)(28,"div",46)(29,"div",47)(30,"label"),r(31,"Estado"),e(),n(32,"span",48),r(33),e()(),n(34,"div",47)(35,"label"),r(36,"Urgente"),e(),n(37,"span",49),r(38),e()(),n(39,"div",47)(40,"label"),r(41,"Fecha de creaci\xF3n"),e(),n(42,"span"),r(43),x(44,"date"),e()()(),n(45,"div",50)(46,"div",47)(47,"label"),r(48,"Descripci\xF3n Detallada del Problema/Petici\xF3n"),e(),n(49,"p",51),r(50),e()()(),n(51,"div",52)(52,"label"),r(53,"Cliente"),e(),n(54,"div",53)(55,"span",54),r(56),e(),n(57,"a",55),u("click",function(){b(a);let o=_();return C(o.verCliente())}),n(58,"span",10),r(59,"Ver cliente"),e()()()(),n(60,"div",56)(61,"label"),r(62,"Direcci\xF3n"),e(),n(63,"div",57)(64,"span",58),r(65),e(),n(66,"button",59),u("click",function(){b(a);let o=_();return C(o.verMapa())}),p(67,"ion-icon",60),e()()(),n(68,"div",61)(69,"label"),r(70,"Contacto Cliente"),e(),n(71,"div",62),f(72,It,4,1,"div",63)(73,jt,4,3,"div",64)(74,At,4,3,"div",64),e()()()()}if(c&2){let a=_();l(17),d("ngIf",(a.aviso==null?null:a.aviso.estado)!=="Completado"),l(),d("ngIf",(a.aviso==null?null:a.aviso.estado)!=="Completado"),l(),d("ngIf",(a.aviso==null?null:a.aviso.estado)==="Completado"),l(2),E("Aviso ",a.aviso.numero_secuencial||a.aviso.id," - ",Mn(22,18,(a.aviso==null?null:a.aviso.tipo)||"No especificado"),""),l(4),E("Aviso ",a.aviso.numero_secuencial||a.aviso.id," - ",Mn(26,20,(a.aviso==null?null:a.aviso.tipo)||"No especificado"),""),l(8),m(a.aviso.estado),l(4),Tn("urgent",a.aviso.urgencia==="Alta"||a.aviso.es_urgente),l(),w(" ",a.aviso.urgencia==="Alta"||a.aviso.es_urgente?"S\xED":"No"," "),l(5),m(A(44,22,a.aviso.fecha_creacion,"dd/MM/yyyy")),l(7),m(a.aviso==null?null:a.aviso.descripcion_problema),l(6),m(a.aviso.nombre_cliente_aviso),l(9),m(a.aviso.direccion_cliente_aviso),l(7),d("ngIf",a.aviso.nombre_contacto),l(),d("ngIf",a.aviso.telefono_cliente_aviso),l(),d("ngIf",a.aviso.cliente==null?null:a.aviso.cliente.email)}}function Vt(c,s){if(c&1){let a=P();n(0,"div",76)(1,"div",77)(2,"app-flujo-estado",78),u("accionEjecutada",function(o){b(a);let i=_();return C(i.onAccionFlujoEjecutada(o))}),e()()()}if(c&2){let a=_();l(2),d("avisoId",(a.aviso==null?null:a.aviso.id)||"")}}function Tt(c,s){c&1&&(n(0,"div",79),p(1,"ion-icon",80),n(2,"p"),r(3,"No hay albaranes cerrados para este aviso"),e(),n(4,"p",81),r(5,"Los albaranes aparecer\xE1n aqu\xED una vez que se cierren los trabajos realizados"),e()())}function Rt(c,s){if(c&1&&(n(0,"div",101)(1,"span",102),r(2),e(),n(3,"span",103),r(4,"repuestos"),e()()),c&2){let a=_().$implicit;l(2),m(a.repuestos_utilizados.length)}}function Dt(c,s){c&1&&(n(0,"div",104),r(1," Sin repuestos "),e())}function Bt(c,s){if(c&1&&(n(0,"div",105)(1,"span",106),r(2),x(3,"number"),e()()),c&2){let a=_().$implicit;l(2),w(" \u20AC",A(3,1,a.presupuesto_necesario,"1.2-2")," ")}}function Ht(c,s){if(c&1){let a=P();n(0,"div",89)(1,"div",90),r(2),e(),n(3,"div",91)(4,"span",92),r(5),e()(),n(6,"div",93),r(7),x(8,"date"),e(),n(9,"div",94),f(10,Rt,5,1,"div",95)(11,Dt,2,0,"div",96),e(),n(12,"div",97)(13,"button",98),u("click",function(){let o=b(a).$implicit,i=_(2);return C(i.verAlbaran(o))}),p(14,"ion-icon",99),e(),f(15,Bt,4,4,"div",100),e()()}if(c&2){let a=s.$implicit,t=s.index;d("ngClass",On(11,vt,a.estado_cierre==="Finalizado",a.estado_cierre==="Presupuesto pendiente",a.estado_cierre==="Otra visita")),l(2),m(t+1),l(2),d("ngClass",On(15,yt,a.estado_cierre==="Finalizado",a.estado_cierre==="Presupuesto pendiente",a.estado_cierre==="Otra visita")),l(),w(" ",a.estado_cierre," "),l(2),m(A(8,8,a.fecha_cierre,"dd/MM/yyyy")),l(3),d("ngIf",a.repuestos_utilizados&&a.repuestos_utilizados.length>0),l(),d("ngIf",!a.repuestos_utilizados||a.repuestos_utilizados.length===0),l(4),d("ngIf",a.presupuesto_necesario>0)}}function Nt(c,s){if(c&1&&(n(0,"div",82)(1,"div",83)(2,"div",84)(3,"div",85)(4,"div",86),r(5,"N\xFAmero"),e(),n(6,"div",86),r(7,"Estado"),e(),n(8,"div",86),r(9,"Fecha"),e(),n(10,"div",86),r(11,"Repuestos"),e(),n(12,"div",86),r(13,"Acciones"),e()()(),n(14,"div",87),f(15,Ht,16,19,"div",88),e()()()),c&2){let a=_();l(15),d("ngForOf",a.aviso==null?null:a.aviso.albaranes)}}function $t(c,s){c&1&&(n(0,"div",107),p(1,"ion-icon",28),n(2,"p"),r(3,"Subiendo im\xE1genes..."),e()())}function qt(c,s){c&1&&(n(0,"div",108),p(1,"ion-icon",109),n(2,"p"),r(3,"No hay im\xE1genes disponibles para este aviso"),e()())}function Ut(c,s){if(c&1){let a=P();n(0,"div",110),p(1,"img",111),n(2,"div",112)(3,"span",113),r(4),e(),n(5,"span",114),r(6),x(7,"date"),e()(),n(8,"button",115),u("click",function(){let o=b(a).$implicit,i=_();return C(i.eliminarFoto(o))}),p(9,"ion-icon",116),e()()}if(c&2){let a=s.$implicit;l(),d("src",a.url,I)("alt",a.descripcion||"Imagen del aviso"),l(3),m(a.descripcion||"Imagen del aviso"),l(2),m(A(7,4,a.fecha_subida,"dd/MM/yyyy HH:mm"))}}k({close:G,pencilOutline:X,navigate:yn,person:wn,call:xn,mail:hn,mapOutline:vn,arrowBackOutline:Pn});var No=(()=>{let s=class s{constructor(t,o,i,g,O){this.route=t,this.router=o,this.avisosService=i,this.modalController=g,this.flujoAvisosService=O,this.vistaGaleria="grid",this.aviso=null,this.loading=!1,this.error=null,this.subiendoImagenes=!1,this.destroy$=new Z,k({refreshOutline:N,alertCircleOutline:re,arrowBackOutline:Pn,close:G,pencilOutline:X,checkmarkCircleOutline:B,navigate:yn,person:wn,call:xn,mail:hn,addCircle:ae,informationCircleOutline:fe,documentTextOutline:H,eyeOutline:dn,imagesOutline:Ce,trashOutline:gn,constructOutline:pe,bugOutline:le,personOutline:Y,gridOutline:be,listOutline:Oe,chevronDownOutline:de,ellipsisVerticalOutline:ue,ellipsisVertical:me,add:oe,mapOutline:vn})}ngOnInit(){this.cargarAviso()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarAviso(){console.log("\u{1F504} cargarAviso() ejecut\xE1ndose..."),this.loading=!0,this.error=null,this.route.params.pipe(y(this.destroy$)).subscribe(t=>{let o=t["id-aviso"];console.log("\u{1F50D} ID de aviso obtenido de la URL:",o),o?this.avisosService.getResumenCompletoAviso(o).pipe(y(this.destroy$)).subscribe({next:i=>{var g;console.log("\u2705 Aviso cargado exitosamente:",i.id,"Estado:",i.estado),console.log("\u{1F4CA} Albaranes cargados:",((g=i.albaranes)==null?void 0:g.length)||0),this.aviso=i,this.loading=!1},error:i=>{console.error("\u274C Error al cargar el aviso:",i),this.error="Error al cargar el aviso. Por favor, int\xE9ntalo de nuevo.",this.loading=!1}}):(this.error="ID de aviso no v\xE1lido",this.loading=!1)})}cambiarVistaGaleria(t){this.vistaGaleria=t.detail.value}forzarRecargaDatos(){this.error=null,this.cargarAviso()}recargarAlbaranes(){var t;(t=this.aviso)!=null&&t.id&&(console.log("\u{1F504} Recargando albaranes del aviso:",this.aviso.id),this.avisosService.getResumenCompletoAviso(this.aviso.id).pipe(y(this.destroy$)).subscribe({next:o=>{var i;console.log("\u2705 Albaranes recargados:",((i=o.albaranes)==null?void 0:i.length)||0),this.aviso=o},error:o=>{console.error("\u274C Error al recargar albaranes:",o)}}))}volverALista(){let t=document.referrer;t&&t.includes("/historial")?this.router.navigate(["/historial"]):this.router.navigate(["/avisos"])}verCliente(){var t,o;(o=(t=this.aviso)==null?void 0:t.cliente)!=null&&o.id&&console.log("Navegar al cliente:",this.aviso.cliente.id)}verMapa(){var t;if((t=this.aviso)!=null&&t.direccion_cliente_aviso){let o=encodeURIComponent(this.aviso.direccion_cliente_aviso);window.open(`https://www.google.com/maps/search/?api=1&query=${o}`,"_blank")}}editarAviso(){var t;(t=this.aviso)!=null&&t.id&&this.abrirModalEditarAviso()}abrirModalEditarAviso(){return S(this,null,function*(){var g;if(!((g=this.aviso)!=null&&g.id))return;let t=yield this.modalController.create({component:ve,cssClass:"modal-crear-aviso",componentProps:{modoEdicion:!0,avisoExistente:this.aviso}});yield t.present();let{data:o,role:i}=yield t.onWillDismiss();if(i==="confirm"&&o)try{console.log("Datos del formulario de edici\xF3n:",o);let O={tipo:o.tipo,nombre_cliente_aviso:o.nombreContacto,direccion_cliente_aviso:o.direccionLocal,telefono_cliente_aviso:o.telefono,nombre_contacto:o.nombreContacto,descripcion_problema:o.descripcion,es_urgente:o.esUrgente,urgencia:o.esUrgente?"Alta":"Normal"};this.loading=!0,this.avisosService.actualizarAviso(this.aviso.id,O).pipe(y(this.destroy$)).subscribe({next:M=>{console.log("Aviso actualizado exitosamente:",M),this.loading=!1,this.mostrarMensaje("Aviso actualizado exitosamente","success"),this.cargarAviso()},error:M=>{console.error("Error al actualizar aviso:",M),this.loading=!1,this.mostrarMensaje(M.message||"Error al actualizar el aviso. Por favor, int\xE9ntalo de nuevo.","error")}})}catch(O){console.error("Error al procesar la edici\xF3n:",O),this.mostrarMensaje("Error al procesar la edici\xF3n. Por favor, int\xE9ntalo de nuevo.","error")}})}cerrarAlbaran(){var t;(t=this.aviso)!=null&&t.id&&console.log("Cerrar albar\xE1n para aviso:",this.aviso.id)}seleccionarImagenes(){this.fileInput&&this.fileInput.nativeElement.click()}onFileSelected(t){var i;let o=t.target.files;o.length>0&&((i=this.aviso)!=null&&i.id)&&this.subirImagenes(Array.from(o)),t.target.value=""}subirImagenes(t){return S(this,null,function*(){var o;if(!((o=this.aviso)!=null&&o.id)){console.error("No se puede subir im\xE1genes: aviso no v\xE1lido");return}this.subiendoImagenes=!0,this.error=null;try{yield new Promise(g=>{let O=0,M=t.length;t.forEach($=>{this.avisosService.subirFoto(this.aviso.id,$).pipe(y(this.destroy$)).subscribe({next:W=>{console.log("Foto subida:",W),O++,O===M&&g()},error:W=>{console.error("Error al subir foto:",W),O++,O===M&&g()}})})}),this.cargarAviso()}catch(i){console.error("Error al subir im\xE1genes:",i),this.error="Error al subir las im\xE1genes. Por favor, int\xE9ntalo de nuevo."}finally{this.subiendoImagenes=!1}})}crearAlbaran(){return S(this,null,function*(){var g;if(!((g=this.aviso)!=null&&g.id))return;let t=yield this.modalController.create({component:ze,componentProps:{aviso:this.aviso},cssClass:"modal-hacer-albaran modal-fullscreen",backdropDismiss:!1,showBackdrop:!0,breakpoints:[0,1],initialBreakpoint:1,backdropBreakpoint:0,handle:!1,handleBehavior:"none"});yield t.present();let{data:o,role:i}=yield t.onWillDismiss();if(i==="confirm"&&(o!=null&&o.success))try{console.log("\u2705 Albar\xE1n creado exitosamente:",o.albaran),alert(o.mensaje||"Albar\xE1n creado exitosamente"),this.cargarAviso()}catch(O){console.error("Error al procesar albar\xE1n:",O),alert("Error al procesar el albar\xE1n. Por favor, int\xE9ntalo de nuevo.")}})}eliminarFoto(t){return S(this,null,function*(){var i;if(!((i=this.aviso)!=null&&i.id)||!(t!=null&&t.id)){console.error("No se puede eliminar la foto: faltan datos");return}if(confirm(`\xBFEst\xE1s seguro de que quieres eliminar esta imagen?

Esta acci\xF3n no se puede deshacer.`))try{yield In(this.avisosService.eliminarFoto(t.id)),console.log("Foto eliminada exitosamente"),this.cargarAviso()}catch(g){console.error("Error al eliminar la foto:",g),alert("Error al eliminar la imagen. Por favor, int\xE9ntalo de nuevo.")}})}getEstadoClass(t){return t?"badge-"+t.toLowerCase().replace(/ /g,"-"):"badge-pendiente"}onAccionFlujoEjecutada(t){console.log("Acci\xF3n de flujo ejecutada:",t),this.cargarAviso(),t.mensaje&&(console.log("Mensaje de \xE9xito:",t.mensaje),alert(t.mensaje)),t.facturaId&&confirm("Se ha generado una factura. \xBFDeseas ver la factura creada?")&&this.router.navigate(["/facturas",t.facturaId])}completarAviso(){var t;(t=this.aviso)!=null&&t.id?(console.log("\u{1F504} Completando aviso:",this.aviso.id),confirm("\xBFEst\xE1s seguro de que quieres marcar este aviso como completado? Esta acci\xF3n no se puede deshacer.")&&(this.loading=!0,this.error=null,this.flujoAvisosService.completarAviso(this.aviso.id).subscribe({next:o=>{console.log("\u2705 Aviso completado exitosamente:",o),this.loading=!1,this.mostrarMensaje("Aviso completado exitosamente","success"),this.cargarAviso()},error:o=>{console.error("\u274C Error al completar aviso:",o),this.loading=!1;let i=o.message||"Error al completar el aviso. Verifica que haya trabajos realizados y facturas generadas.";this.mostrarMensaje(i,"error"),this.error=i}}))):(console.error("No hay aviso seleccionado para completar"),this.mostrarMensaje("No hay aviso seleccionado para completar","error"))}verAlbaran(t){return S(this,null,function*(){if(!(t!=null&&t.id)){console.error("No se puede abrir el albar\xE1n: ID no v\xE1lido");return}try{console.log("Abriendo modal de albar\xE1n:",t);let o=yield this.modalController.create({component:Ie,componentProps:{albaran:t,aviso:this.aviso},cssClass:"modal-ver-albaran modal-fullscreen",backdropDismiss:!0});yield o.present();let{data:i,role:g}=yield o.onWillDismiss();g==="confirm"&&i&&console.log("Modal de albar\xE1n cerrado con datos:",i)}catch(o){console.error("Error al abrir el modal del albar\xE1n:",o),this.mostrarMensaje("Error al abrir el albar\xE1n. Por favor, int\xE9ntalo de nuevo.","error")}})}mostrarMensaje(t,o="info"){console.log(`[${o.toUpperCase()}] ${t}`),o==="error"?alert(`ERROR: ${t}`):console.log(o==="success"?`\u2705 ${t}`:`\u2139\uFE0F ${t}`)}};s.\u0275fac=function(o){return new(o||s)(h(Bn),h(Hn),h(pn),h(Q),h(_n))},s.\u0275cmp=j({type:s,selectors:[["app-ver-avisos"]],viewQuery:function(o,i){if(o&1&&nn(ht,5),o&2){let g;en(g=tn())&&(i.fileInput=g.first)}},decls:40,vars:12,consts:[["fileInput",""],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","info-card",4,"ngIf"],[1,"info-card"],[1,"card-header"],[2,"text-wrap","nowrap"],[1,"header-actions-jobs"],[1,"btn-primary",3,"click"],["name","add-circle"],[1,"desktop-only"],[1,"mobile-only"],["class","flujo-section",4,"ngIf"],[1,"section-divider"],[1,"albaranes-section"],[1,"albaranes-container"],["class","no-albaranes",4,"ngIf"],["class","compact-albaranes-table",4,"ngIf"],[1,"card-header",2,"justify-content","space-between!important"],[1,"gallery-actions"],[1,"btn-primary",3,"click","disabled"],["type","file","multiple","","accept","image/*",2,"display","none",3,"change"],[1,"gallery-items"],["class","uploading-indicator",4,"ngIf"],["class","no-images",4,"ngIf"],["class","gallery-item",4,"ngFor","ngForOf"],[1,"loading-state"],[1,"loading-spinner"],["name","refresh-outline",1,"spinning"],[1,"error-state"],[1,"error-message"],["name","alert-circle-outline"],[1,"btn-retry",3,"click"],["name","refresh-outline"],[1,"header-container"],[1,"back-button"],[1,"btn-back",3,"click"],["name","arrow-back-outline"],[1,"header-actions"],["title","Recargar datos",1,"btn-secondary",3,"click"],["class","btn-secondary",3,"click",4,"ngIf"],["class","btn-primary",3,"click",4,"ngIf"],["class","aviso-completado-message",4,"ngIf"],[1,"mobile-only","title"],[1,"title"],[1,"info-grid"],[1,"info-row"],[1,"info-item"],[1,"estado-pendiente"],[1,"urgent-badge"],[1,"descripcion-content"],[1,"descripcion-texto"],[1,"info-item","cliente-section"],[1,"cliente-info"],[1,"cliente-nombre"],[1,"ver-cliente",3,"click"],[1,"info-item","direccion-section"],[1,"direccion-info"],[1,"direccion-texto"],["title","Ver en mapa",1,"btn-map",3,"click"],["name","navigate"],[1,"contacto-section"],[1,"contacto-items"],["class","contacto-item nombre-contacto",4,"ngIf"],["class","contacto-item",4,"ngIf"],[1,"btn-secondary",3,"click"],["name","close"],["name","pencil-outline"],[1,"aviso-completado-message"],["name","checkmark-circle-outline"],[1,"contacto-item","nombre-contacto"],["name","person"],[1,"contacto-item"],["name","call"],[1,"contacto-link",3,"href"],["name","mail"],[1,"flujo-section"],[1,"flujo-container"],[3,"accionEjecutada","avisoId"],[1,"no-albaranes"],["name","document-text-outline"],[1,"info-text"],[1,"compact-albaranes-table"],[1,"albaranes-table"],[1,"table-header"],[1,"header-row"],[1,"header-cell"],[1,"table-body"],["class","albaran-row",3,"ngClass",4,"ngFor","ngForOf"],[1,"albaran-row",3,"ngClass"],[1,"albaran-cell","numero-albaran"],[1,"albaran-cell","estado-albaran"],[1,"badge",3,"ngClass"],[1,"albaran-cell","fecha-albaran"],[1,"albaran-cell","repuestos-albaran"],["class","repuestos-info",4,"ngIf"],["class","repuestos-vacio",4,"ngIf"],[1,"albaran-cell","acciones"],["title","Ver albar\xE1n completo",1,"btn-ver",3,"click"],["name","eye-outline"],["class","mobile-info",4,"ngIf"],[1,"repuestos-info"],[1,"repuestos-count"],[1,"repuestos-label"],[1,"repuestos-vacio"],[1,"mobile-info"],[1,"presupuesto-mobile"],[1,"uploading-indicator"],[1,"no-images"],["name","images-outline"],[1,"gallery-item"],[3,"src","alt"],[1,"image-info"],[1,"image-title"],[1,"file-info"],["title","Eliminar imagen",1,"btn-delete",3,"click"],["name","trash-outline"]],template:function(o,i){if(o&1){let g=P();f(0,wt,5,0,"div",1)(1,Et,8,1,"div",2)(2,Ft,75,25,"div",3),n(3,"div",4)(4,"div",5)(5,"h2",6),r(6,"Gesti\xF3n de Albaranes"),e(),n(7,"div",7)(8,"button",8),u("click",function(){return b(g),C(i.crearAlbaran())}),p(9,"ion-icon",9),n(10,"span",10),r(11,"Crear Albar\xE1n"),e(),n(12,"span",11),r(13,"Crear Albar\xE1n"),e()()()(),f(14,Vt,3,1,"div",12),n(15,"div",13),p(16,"hr"),n(17,"span"),r(18,"Albaranes Cerrados"),e()(),n(19,"div",14)(20,"div",15),f(21,Tt,6,0,"div",16)(22,Nt,16,1,"div",17),e()()(),n(23,"div",4)(24,"div",18)(25,"h2"),r(26,"Galer\xEDa de im\xE1genes"),e(),n(27,"div",19)(28,"button",20),u("click",function(){return b(g),C(i.seleccionarImagenes())}),p(29,"ion-icon",9),n(30,"span",10),r(31),e(),n(32,"span",11),r(33),e()(),n(34,"input",21,0),u("change",function(M){return b(g),C(i.onFileSelected(M))}),e()()(),n(36,"div",22),f(37,$t,4,0,"div",23)(38,qt,4,0,"div",24)(39,Ut,10,7,"div",25),e()()}o&2&&(d("ngIf",i.loading),l(),d("ngIf",i.error&&!i.loading),l(),d("ngIf",i.aviso&&!i.loading),l(12),d("ngIf",i.aviso==null?null:i.aviso.id),l(7),d("ngIf",!(i.aviso!=null&&i.aviso.albaranes)||(i.aviso==null||i.aviso.albaranes==null?null:i.aviso.albaranes.length)===0),l(),d("ngIf",(i.aviso==null?null:i.aviso.albaranes)&&(i.aviso==null?null:i.aviso.albaranes.length)>0),l(6),d("disabled",i.subiendoImagenes),l(3),m(i.subiendoImagenes?"Subiendo...":"A\xF1adir im\xE1genes"),l(2),m(i.subiendoImagenes?"Subiendo...":"A\xF1adir"),l(4),d("ngIf",i.subiendoImagenes),l(),d("ngIf",!(i.aviso!=null&&i.aviso.fotos)||(i.aviso==null||i.aviso.fotos==null?null:i.aviso.fotos.length)===0),l(),d("ngForOf",i.aviso==null?null:i.aviso.fotos))},dependencies:[T,on,F,V,an,Rn,Dn,D,Se],styles:['[_nghost-%COMP%]{display:block;padding:24px}.back-button[_ngcontent-%COMP%]{margin-bottom:0}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 16px;background-color:#fff;color:#4f46e5;border:1px solid #E5E7EB;border-radius:8px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#f9fafb;border-color:#4f46e5}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px;text-align:center}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#4f46e5}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#ef4444}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 20px;background-color:#4f46e5;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:14px;font-weight:500;transition:background-color .2s ease}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover, .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover{background-color:#3a30e2}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.aviso-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.aviso-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#111827}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:10px 15px;background-color:#4f46e5;color:#fff;border:none;border-radius:.5rem;cursor:pointer;font-size:15px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#3a30e2}.btn-secondary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:10px 15px;background-color:#fff;color:#26262a;border:none;border-radius:.5rem;cursor:pointer;font-size:15px;font-weight:500;border:1px solid rgba(125,131,152,.2431372549)}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.btn-danger[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:10px 15px;background-color:#ef4444;color:#fff;border:none;border-radius:.5rem;cursor:pointer;font-size:15px;font-weight:500}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#dc2626}.btn-danger.btn-small[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;box-shadow:0 2px 8px #e0e7ef33;margin-bottom:24px;overflow:hidden}.info-card[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#111827;margin:0;padding:25px}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#111827;margin:0}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:25px 25px 0}.info-card[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.info-card[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:14px;margin-bottom:4px}.info-card[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#111827;font-size:16px}.badge-pendiente[_ngcontent-%COMP%]{background-color:#f59e0b1a;color:#f59e0b;padding:4px 12px;border-radius:16px;font-size:14px;font-weight:500}.badge-estado-aviso[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.badge-estado-aviso.badge-en-curso[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.badge-estado-aviso.badge-pendiente[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.badge-estado-aviso.badge-completado[_ngcontent-%COMP%]{background:#10b981;color:#fff}.badge-estado-aviso.badge-pendiente-de-presupuesto[_ngcontent-%COMP%]{background:#fcd34d;color:#92400e}.badge-estado-aviso.badge-listo-para-facturar[_ngcontent-%COMP%]{background:#d1fae5;color:#059669}.info-grid[_ngcontent-%COMP%]{padding:25px;padding-top:0!important;display:grid;gap:24px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:14px;margin-bottom:4px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#111827;font-size:16px}.info-grid[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:0!important}.info-grid[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:14px;margin-bottom:4px}.info-grid[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#111827;font-size:16px}.info-grid[_ngcontent-%COMP%]   .direccion-section[_ngcontent-%COMP%]   .btn-map[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;padding:8px;cursor:pointer;color:#fff;background-color:#4f46e5;font-size:16px;border-radius:50%}.info-grid[_ngcontent-%COMP%]   .contacto-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:14px;margin-bottom:4px}.info-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:24px}.cliente-info[_ngcontent-%COMP%], .direccion-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.cliente-info[_ngcontent-%COMP%]   .ver-cliente[_ngcontent-%COMP%], .direccion-info[_ngcontent-%COMP%]   .ver-cliente[_ngcontent-%COMP%]{color:#4f46e5;text-decoration:none;font-size:14px;cursor:pointer}.cliente-info[_ngcontent-%COMP%]   .ver-cliente[_ngcontent-%COMP%]:hover, .direccion-info[_ngcontent-%COMP%]   .ver-cliente[_ngcontent-%COMP%]:hover{text-decoration:underline}.contacto-items[_ngcontent-%COMP%]{display:flex;gap:24px;margin-top:8px}.contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background-color:#eef2ff;color:#4f46e5;padding:6px 15px;border-radius:10px;font-size:14px;font-weight:500}.contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]   .contacto-link[_ngcontent-%COMP%]{color:inherit;text-decoration:none;cursor:pointer;transition:color .2s ease}.contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]   .contacto-link[_ngcontent-%COMP%]:hover{color:#291fd9;text-decoration:underline}.estado-pendiente[_ngcontent-%COMP%]{color:#f59e0b!important;font-weight:500}.descripcion-content[_ngcontent-%COMP%]{padding:24px}.descripcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;line-height:1.5}.gallery-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{background:#f3f4f6;border-radius:30px;width:auto;height:auto;padding:2px 4px}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]::part(indicator){background:none}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--background: transparent;--background-checked: white;--background-hover: rgba(255,255,255,.1);--background-focused: rgba(255,255,255,.2);--border-radius: 50%;--border-width: 0;--indicator-color: transparent;--color: #6B7280;--color-checked: #4F46E5;--margin-top: 0;--margin-bottom: 0;--margin-start: 0;--margin-end: 0;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0;min-height:30px;min-width:30px;transition:all .2s ease;position:relative}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]::part(native){margin:0;padding:0 6px;height:100%}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]::part(indicator){display:none}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button.segment-button-checked[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a}.gallery-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-left:auto}.gallery-items[_ngcontent-%COMP%]{padding:24px;display:grid;gap:16px}.gallery-items[_ngcontent-%COMP%]   .uploading-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#4f46e5}.gallery-items[_ngcontent-%COMP%]   .uploading-indicator[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:12px}.gallery-items[_ngcontent-%COMP%]   .uploading-indicator[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.gallery-items[_ngcontent-%COMP%]   .uploading-indicator[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500}.gallery-items[_ngcontent-%COMP%]   .no-images[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.gallery-items[_ngcontent-%COMP%]   .no-images[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;border:1px solid #E5E7EB;border-radius:6px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:cover;border-radius:4px;margin-right:16px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]{flex:1}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#26262a}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span.file-info[_ngcontent-%COMP%]{color:#6b7280;font-size:14px;margin-top:4px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#ef4444;border-radius:4px;transition:all .2s ease}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]:hover{background-color:#ef44441a;color:#eb1515}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.table-container[_ngcontent-%COMP%]{padding:0 24px 24px}.table-search[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}.table-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:8px;padding:7px 14px;font-size:1rem;border:none;background:#f9fbff;color:#26262a}.table-search[_ngcontent-%COMP%]   .order-by[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#26262a;font-size:14px}.table-search[_ngcontent-%COMP%]   .order-by[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#4f46e5;font-weight:500}.table-search[_ngcontent-%COMP%]   .order-by[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#4f46e5;font-size:16px}.custom-mat-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 8px;margin-bottom:12px}.custom-mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#64748b;font-size:14px;font-weight:400;text-align:left;padding:8px 16px;background:transparent}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#f9fafb}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;color:#26262a;font-size:14px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:8px;border-bottom-left-radius:8px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:8px;border-bottom-right-radius:8px}.descripcion-trabajo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;line-height:1.4}.descripcion-trabajo[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:13px;color:#4b5563;padding:2px 6px;background-color:#f3f4f6;border-radius:4px;display:inline-block;margin-right:4px;margin-bottom:4px}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.badge-estado[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.badge-estado.badge-pendiente[_ngcontent-%COMP%]{background-color:var(--estado-pendiente-bg);color:var(--estado-pendiente-color)}.badge-estado.badge-en-curso[_ngcontent-%COMP%]{background-color:var(--estado-en-curso-bg);color:var(--estado-en-curso-color)}.badge-estado.badge-completado[_ngcontent-%COMP%]{background-color:var(--estado-completado-bg);color:var(--estado-completado-color)}.badge-estado.badge-cancelado[_ngcontent-%COMP%]{background-color:var(--estado-cancelado-bg);color:var(--estado-cancelado-color)}.repuestos-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;color:#4b5563;margin-bottom:4px}.repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.estado-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.estado-actions[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}.estado-actions[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:11px;font-weight:500;text-transform:uppercase;letter-spacing:.5px;margin-left:auto}.estado-actions[_ngcontent-%COMP%]   .estado-badge.estado-pendiente[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e}.estado-actions[_ngcontent-%COMP%]   .estado-badge.estado-en-curso[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.estado-actions[_ngcontent-%COMP%]   .estado-badge.estado-abierto[_ngcontent-%COMP%]{background-color:#dbeafe;color:#1e40af}.estado-actions[_ngcontent-%COMP%]   .estado-badge.estado-cerrado[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151}.estado-actions[_ngcontent-%COMP%]   .estado-badge.estado-finalizado[_ngcontent-%COMP%]{background-color:#ecfdf5;color:#14532d}.albaran-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;margin:8px 0}.albaran-info[_ngcontent-%COMP%]   .badge-albaran[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:6px 10px;border-radius:16px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap;background:#10b981;color:#fff}.albaran-info[_ngcontent-%COMP%]   .badge-albaran[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.albaran-info[_ngcontent-%COMP%]   .badge-albaran.badge-finalizado[_ngcontent-%COMP%]{background:#10b981;color:#fff}.albaran-info[_ngcontent-%COMP%]   .badge-albaran.badge-presupuesto-pendiente[_ngcontent-%COMP%]{background:#f59e0b;color:#fff}.albaran-info[_ngcontent-%COMP%]   .badge-albaran.badge-otra-visita[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.albaran-info[_ngcontent-%COMP%]   .albaran-details[_ngcontent-%COMP%]{font-size:10px;color:#6b7280;text-transform:capitalize}.no-trabajos[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#6b7280}.no-trabajos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.no-repuestos[_ngcontent-%COMP%]{color:#6b7280;font-style:italic;font-size:14px}.flujo-container[_ngcontent-%COMP%]{padding:0 25px}.info-section[_ngcontent-%COMP%]{padding:0 25px 25px}.info-section[_ngcontent-%COMP%]   .flow-description[_ngcontent-%COMP%]{background:#f0f9ff;border:1px solid #BAE6FD;border-radius:8px;padding:16px;margin:0;color:#0c4a6e;font-size:14px;display:flex;align-items:flex-start;gap:8px;line-height:1.5}.info-section[_ngcontent-%COMP%]   .flow-description[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#0ea5e9;margin-top:1px;flex-shrink:0}.info-section[_ngcontent-%COMP%]   .flow-description[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0c4a6e}.flujo-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;font-weight:400;margin-left:12px}.card-header[_ngcontent-%COMP%]   .flujo-subtitle[_ngcontent-%COMP%]{display:block;margin-top:4px;margin-left:0}.flujo-section[_ngcontent-%COMP%]{margin-top:25px;margin-bottom:5px}.flujo-section[_ngcontent-%COMP%]   .flujo-header[_ngcontent-%COMP%]{margin-bottom:16px}.flujo-section[_ngcontent-%COMP%]   .flujo-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1a202c;margin:0 0 4px}.flujo-section[_ngcontent-%COMP%]   .flujo-header[_ngcontent-%COMP%]   .flujo-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#64748b;font-weight:400}.section-divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:24px 0 20px}.section-divider[_ngcontent-%COMP%]:before, .section-divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:#e2e8f0}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 16px;font-size:14px;font-weight:500;color:#64748b;background:#fff}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#64748b}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#cbd5e0;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin:0 0 8px;color:#4a5568}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:14px;color:#a0aec0}.desktop-only[_ngcontent-%COMP%]{display:inline}.mobile-only[_ngcontent-%COMP%]{display:none}.urgent-badge[_ngcontent-%COMP%]{padding:2px 8px;border-radius:12px;font-size:12px;font-weight:500}.urgent-badge.urgent[_ngcontent-%COMP%]{background-color:#fef2f2;color:#dc2626}.urgent-badge[_ngcontent-%COMP%]:not(.urgent){background-color:#f3f4f6;color:#6b7280}.cliente-nombre[_ngcontent-%COMP%]{font-weight:500;color:#111827}.direccion-texto[_ngcontent-%COMP%]{word-break:break-word;line-height:1.4}.tipo-aviso[_ngcontent-%COMP%]{font-weight:500;color:#4f46e5}.descripcion-texto[_ngcontent-%COMP%]{line-height:1.6;color:#111827;font-weight:500}.image-title[_ngcontent-%COMP%]{font-weight:500;color:#111827}.ver-cliente[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#4f46e5;text-decoration:none;font-size:14px;cursor:pointer;transition:color .2s ease}.ver-cliente[_ngcontent-%COMP%]:hover{color:#291fd9}.ver-cliente[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.no-images[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.no-images[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#cbd5e0;margin-bottom:16px}.no-images[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}@media (max-width: 768px){[_nghost-%COMP%]{padding:16px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:inline}.info-card[_ngcontent-%COMP%]{margin-bottom:16px;border-radius:12px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:20px;flex-direction:row;align-items:center;justify-content:start;gap:25px!important}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .mobile-only.title[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:500;color:#111827;margin:0}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{width:auto;justify-content:space-between;gap:12px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:none;width:100%;flex-direction:column;gap:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions-jobs[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;gap:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions-jobs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.info-card[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{font-size:16px;padding:20px}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.info-grid[_ngcontent-%COMP%]{padding:15px;gap:16px}.info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{gap:20px}.info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{width:auto}.info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:max-content}.info-grid[_ngcontent-%COMP%]   .cliente-info[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%]   .direccion-info[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:space-between;gap:8px}.info-grid[_ngcontent-%COMP%]   .contacto-items[_ngcontent-%COMP%]{flex-direction:row;gap:8px}.info-grid[_ngcontent-%COMP%]   .contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.info-grid[_ngcontent-%COMP%]   .contacto-items[_ngcontent-%COMP%]   .contacto-item.nombre-contacto[_ngcontent-%COMP%]{display:none}.descripcion-content[_ngcontent-%COMP%]{padding:20px;gap:16px}.gallery-actions[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{align-self:center}.gallery-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-left:0;width:100%;justify-content:center}.gallery-items[_ngcontent-%COMP%]{padding:20px;gap:12px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:8px;margin-right:0}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]{width:100%}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{align-self:flex-end}.table-container[_ngcontent-%COMP%]{padding:0 20px 20px}.custom-mat-table[_ngcontent-%COMP%]{font-size:12px}.custom-mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:11px;padding:8px 12px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:12px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion-trabajo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion-trabajo[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:10px}.estado-actions[_ngcontent-%COMP%]{flex-direction:column;gap:6px}.estado-actions[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{width:100%;justify-content:center;padding:8px 12px;font-size:12px}.flujo-container[_ngcontent-%COMP%]{padding:0 20px 20px}.flujo-section[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:0}.section-divider[_ngcontent-%COMP%]{margin:20px 0 16px}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;padding:0 12px}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.badge-pendiente[_ngcontent-%COMP%]{font-size:12px;padding:3px 8px}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:11px;padding:2px 4px}.no-repuestos[_ngcontent-%COMP%]{font-size:12px}.empty-state[_ngcontent-%COMP%]{padding:30px 16px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px}.urgent-badge[_ngcontent-%COMP%]{font-size:11px;padding:2px 6px}.ver-cliente[_ngcontent-%COMP%]{font-size:12px}.ver-cliente[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.no-images[_ngcontent-%COMP%]{padding:30px 16px}.no-images[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px}.no-images[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){[_nghost-%COMP%]{padding:0}.info-card[_ngcontent-%COMP%]{margin-bottom:12px;border-radius:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:16px;gap:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{gap:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{gap:6px}.info-card[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{font-size:15px;padding:16px;display:none}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:15px!important}.descripcion-content[_ngcontent-%COMP%]{padding:16px;gap:12px}.descripcion-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px}.descripcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.gallery-actions[_ngcontent-%COMP%]{gap:8px}.gallery-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.gallery-items[_ngcontent-%COMP%]{padding:16px;gap:8px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{gap:8px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span.file-info[_ngcontent-%COMP%]{font-size:11px}.table-container[_ngcontent-%COMP%]{padding:0 16px 16px}.custom-mat-table[_ngcontent-%COMP%]{font-size:11px}.custom-mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:10px;padding:6px 8px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;font-size:11px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion-trabajo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion-trabajo[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:9px}.estado-actions[_ngcontent-%COMP%]{gap:4px}.estado-actions[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{padding:6px 8px;font-size:11px}.flujo-container[_ngcontent-%COMP%]{padding:0 16px 16px}.flujo-section[_ngcontent-%COMP%]{margin-top:16px}.section-divider[_ngcontent-%COMP%]{margin:16px 0 12px}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;padding:0 8px}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.badge-pendiente[_ngcontent-%COMP%]{font-size:11px;padding:2px 6px}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:10px;padding:1px 3px}.no-repuestos[_ngcontent-%COMP%]{font-size:11px}.empty-state[_ngcontent-%COMP%]{padding:24px 12px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:11px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}ion-icon[_ngcontent-%COMP%]{font-size:16px}.urgent-badge[_ngcontent-%COMP%]{font-size:10px;padding:1px 4px}.ver-cliente[_ngcontent-%COMP%]{font-size:11px}.ver-cliente[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:11px}.no-images[_ngcontent-%COMP%]{padding:24px 12px}.no-images[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px}.no-images[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}.no-albaranes[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.no-albaranes[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#d1d5db;margin-bottom:16px}.no-albaranes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:16px}.no-albaranes[_ngcontent-%COMP%]   p.info-text[_ngcontent-%COMP%]{font-size:14px;color:#9ca3af;font-style:italic}.albaranes-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.albaran-item[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;transition:all .2s ease}.albaran-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid #E5E7EB}.albaran-header[_ngcontent-%COMP%]   .albaran-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:18px;font-weight:600;color:#1f2937}.albaran-header[_ngcontent-%COMP%]   .albaran-info[_ngcontent-%COMP%]   .fecha-albaran[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;font-weight:500}.albaran-header[_ngcontent-%COMP%]   .estado-albaran[_ngcontent-%COMP%]   .badge-estado[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.albaran-header[_ngcontent-%COMP%]   .estado-albaran[_ngcontent-%COMP%]   .badge-estado.badge-finalizado[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.albaran-header[_ngcontent-%COMP%]   .estado-albaran[_ngcontent-%COMP%]   .badge-estado.badge-presupuesto-pendiente[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.albaran-header[_ngcontent-%COMP%]   .estado-albaran[_ngcontent-%COMP%]   .badge-estado.badge-otra-visita[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.albaran-header[_ngcontent-%COMP%]   .albaran-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.albaran-header[_ngcontent-%COMP%]   .albaran-actions[_ngcontent-%COMP%]   .btn-primary.btn-small[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;background:#4f46e5;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;gap:4px}.albaran-header[_ngcontent-%COMP%]   .albaran-actions[_ngcontent-%COMP%]   .btn-primary.btn-small[_ngcontent-%COMP%]:hover{background:#4338ca}.albaran-header[_ngcontent-%COMP%]   .albaran-actions[_ngcontent-%COMP%]   .btn-primary.btn-small[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.header-actions[_ngcontent-%COMP%]   .btn-secondary.btn-small[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;background:#6b7280;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;gap:4px}.header-actions[_ngcontent-%COMP%]   .btn-secondary.btn-small[_ngcontent-%COMP%]:hover{background:#4b5563}.header-actions[_ngcontent-%COMP%]   .btn-secondary.btn-small[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.albaran-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.albaran-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.albaran-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.albaran-details[_ngcontent-%COMP%]   .detail-item.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.albaran-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.albaran-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .albaran-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#1f2937;margin:0}.albaran-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.5;background:#f9fafb;padding:8px 12px;border-radius:6px;border:1px solid #E5E7EB}.albaran-details[_ngcontent-%COMP%]   .repuestos-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.albaran-details[_ngcontent-%COMP%]   .repuestos-tags[_ngcontent-%COMP%]   .repuesto-tag[_ngcontent-%COMP%]{background:#e0f2fe;color:#0c4a6e;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;border:1px solid #BAE6FD}@media (max-width: 768px){.albaranes-container[_ngcontent-%COMP%]{gap:16px}.albaran-item[_ngcontent-%COMP%]{padding:16px}.albaran-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:flex-start}.albaran-header[_ngcontent-%COMP%]   .estado-albaran[_ngcontent-%COMP%]{align-self:flex-start}.albaran-header[_ngcontent-%COMP%]   .albaran-actions[_ngcontent-%COMP%]{align-self:flex-start;margin-top:8px}.no-albaranes[_ngcontent-%COMP%]{padding:20px 10px}.no-albaranes[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px}.no-albaranes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.no-albaranes[_ngcontent-%COMP%]   p.info-text[_ngcontent-%COMP%]{font-size:12px}.albaran-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}.section-divider[_ngcontent-%COMP%]{position:relative;margin:32px 0;text-align:center}.section-divider[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:none;height:1px;background:linear-gradient(to right,transparent,#E5E7EB,transparent);margin:0}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:0 16px;font-size:14px;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.albaranes-section[_ngcontent-%COMP%]{margin-top:24px}.albaranes-section[_ngcontent-%COMP%]   .albaranes-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:16px 20px;background:#f9fafb;border-radius:8px;border:1px solid #E5E7EB}.albaranes-section[_ngcontent-%COMP%]   .albaranes-header[_ngcontent-%COMP%]   .albaranes-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.albaranes-section[_ngcontent-%COMP%]   .albaranes-header[_ngcontent-%COMP%]   .albaranes-info[_ngcontent-%COMP%]   .badge-info[_ngcontent-%COMP%]{padding:6px 12px;background:#e0f2fe;color:#0c4a6e;border-radius:20px;font-size:12px;font-weight:600;border:1px solid #BAE6FD}.albaranes-section[_ngcontent-%COMP%]   .albaranes-header[_ngcontent-%COMP%]   .btn-secondary.btn-small[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;background:#6b7280;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;gap:4px}.albaranes-section[_ngcontent-%COMP%]   .albaranes-header[_ngcontent-%COMP%]   .btn-secondary.btn-small[_ngcontent-%COMP%]:hover{background:#4b5563}.albaranes-section[_ngcontent-%COMP%]   .albaranes-header[_ngcontent-%COMP%]   .btn-secondary.btn-small[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.compact-albaranes-table[_ngcontent-%COMP%]{max-height:60vh;overflow-y:auto;border-radius:8px;border:1px solid #E5E7EB;background:#fff;margin-bottom:16px;width:100%;overflow-x:hidden}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1.5fr 1fr 1.5fr 1fr;font-size:12px;min-width:0;gap:0;align-items:stretch}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%], .compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:contents}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{padding:12px 8px;background:#f9fafb;border-bottom:1px solid #E5E7EB;font-weight:500;color:#374151;font-size:12px;text-transform:uppercase;letter-spacing:.5px;display:flex;align-items:center;min-width:0;justify-content:center;text-align:center}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]{display:contents}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]{display:contents;cursor:pointer;transition:all .2s ease;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]:hover   .albaran-cell[_ngcontent-%COMP%]{background-color:#f9fafb}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]:active{transform:scale(.98)}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.finalizado[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #10B981}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.finalizado[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{background-color:#ecfdf5}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.finalizado[_ngcontent-%COMP%]:hover   .albaran-cell[_ngcontent-%COMP%]{background-color:#d1fae5}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.presupuesto-pendiente[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #F59E0B}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.presupuesto-pendiente[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{background-color:#fffbeb}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.presupuesto-pendiente[_ngcontent-%COMP%]:hover   .albaran-cell[_ngcontent-%COMP%]{background-color:#fef3c7}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.otra-visita[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #3B82F6}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.otra-visita[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{background-color:#eff6ff}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.otra-visita[_ngcontent-%COMP%]:hover   .albaran-cell[_ngcontent-%COMP%]{background-color:#dbeafe}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{padding:12px 8px;border-bottom:1px solid #F3F4F6;display:flex;align-items:center;min-width:0;justify-content:center;text-align:center}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.numero-albaran[_ngcontent-%COMP%]{font-weight:600;color:#111827;font-size:14px;justify-content:center;flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]{justify-content:center;flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap;max-width:120px;overflow:hidden;text-overflow:ellipsis}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]   .badge.green[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]   .badge.yellow[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]   .badge.blue[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.fecha-albaran[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;justify-content:center;flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]{justify-content:center;flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-info[_ngcontent-%COMP%]   .repuestos-count[_ngcontent-%COMP%]{font-size:11px;color:#059669;font-weight:600;padding:2px 6px;background:#d1fae5;border-radius:6px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-info[_ngcontent-%COMP%]   .repuestos-label[_ngcontent-%COMP%]{font-size:10px;color:#6b7280;font-weight:500}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-vacio[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af;font-style:italic}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]{justify-content:center;gap:4px;flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;background:transparent;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#6b7280}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:hover{background-color:#10b981}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#059669}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   .mobile-info[_ngcontent-%COMP%]{display:none}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   .mobile-info[_ngcontent-%COMP%]   .presupuesto-mobile[_ngcontent-%COMP%]{font-size:11px;color:#059669;font-weight:600;padding:2px 6px;background:#d1fae5;border-radius:6px}@media (min-width: 769px){.compact-albaranes-table[_ngcontent-%COMP%]{width:100%;overflow-x:hidden;border-radius:0;border-left:none;border-right:none}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr 1fr 1.5fr 1fr;font-size:13px;min-width:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:12px;padding:12px 8px;min-width:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{padding:12px 8px;min-width:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.numero-albaran[_ngcontent-%COMP%]{font-size:14px;flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%], .compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.fecha-albaran[_ngcontent-%COMP%], .compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%], .compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]{flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 768px){.compact-albaranes-table[_ngcontent-%COMP%]{border-radius:0;border-left:none;border-right:none;max-height:none}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]{grid-template-columns:.8fr 1.2fr 1fr 1.2fr .8fr}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:10px;padding:8px 4px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{padding:8px 4px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.numero-albaran[_ngcontent-%COMP%]{font-size:12px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.fecha-albaran[_ngcontent-%COMP%]{font-size:11px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   .mobile-info[_ngcontent-%COMP%]{display:block;margin-left:4px}}@media (max-width: 480px){.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]{grid-template-columns:.6fr 1fr 1fr 1fr .8fr}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:9px;padding:6px 2px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{padding:6px 2px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.numero-albaran[_ngcontent-%COMP%]{font-size:11px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:8px;padding:2px 4px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.fecha-albaran[_ngcontent-%COMP%]{font-size:10px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]{font-size:9px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-info[_ngcontent-%COMP%]   .repuestos-count[_ngcontent-%COMP%]{font-size:8px;padding:1px 3px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-info[_ngcontent-%COMP%]   .repuestos-label[_ngcontent-%COMP%], .compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-vacio[_ngcontent-%COMP%]{font-size:8px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;align-items:center}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:22px;height:22px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   .mobile-info[_ngcontent-%COMP%]   .presupuesto-mobile[_ngcontent-%COMP%]{font-size:9px;padding:1px 4px}}@media (max-width: 768px){.section-divider[_ngcontent-%COMP%]{margin:24px 0}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;padding:0 12px}.albaranes-section[_ngcontent-%COMP%]{margin-top:20px}.albaranes-section[_ngcontent-%COMP%]   .albaranes-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch;padding:12px 16px}.albaranes-section[_ngcontent-%COMP%]   .albaranes-header[_ngcontent-%COMP%]   .albaranes-info[_ngcontent-%COMP%]{justify-content:center}.albaranes-section[_ngcontent-%COMP%]   .albaranes-header[_ngcontent-%COMP%]   .btn-secondary.btn-small[_ngcontent-%COMP%]{align-self:center;width:fit-content}}']});let c=s;return c})();export{No as VerAvisosComponent};
