import{a as mt}from"./chunk-XLBNYIMP.js";import{a as _t}from"./chunk-E7WEDNUB.js";import{a as gt}from"./chunk-AG44W7G2.js";import{Ba as ut,E as ct,X as st,a as et,c as nt,d as ot,g as it,i as rt,ra as lt,ta as dt,ua as pt,x as at}from"./chunk-YLXVY5X4.js";import{d as Z,j as tt}from"./chunk-HRZTQKZO.js";import"./chunk-EZQHEP6E.js";import{$ as x,$b as $,Aa as z,Ca as F,Da as T,Ea as V,I as P,J as M,Ka as y,Ma as E,Sa as j,Sb as L,Ta as D,U as s,Ub as b,V as O,Vb as G,Wb as R,X as w,Xa as N,Ya as B,_b as U,ac as W,b as S,cb as q,cc as H,dc as Y,ea as p,fb as A,ha as i,ia as o,ic as J,ja as u,lc as K,mc as Q,na as h,nc as X,oa as m,pa as g,w as k,xa as a,ya as f,za as v}from"./chunk-YCXETNVK.js";import"./chunk-3RJWN2F5.js";import"./chunk-2ELISCRH.js";import"./chunk-CALWKLRW.js";import"./chunk-IQN6SQ4S.js";import"./chunk-SGF4SMHT.js";import"./chunk-QXK7JUJJ.js";import"./chunk-JCSW2JUV.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-2MILALDA.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-CRC5ZNR6.js";function Mt(c,l){c&1&&(i(0,"div",24)(1,"div",25),u(2,"ion-icon",26),i(3,"p"),a(4,"Cargando presupuesto..."),o()()())}function Ot(c,l){if(c&1&&(i(0,"div",27)(1,"h2"),a(2),o(),i(3,"p")(4,"strong"),a(5,"Cliente:"),o(),a(6),o(),i(7,"p")(8,"strong"),a(9,"Descripci\xF3n:"),o(),a(10),o()()),c&2){let r=g();s(2),v("Aviso: #",r.aviso.id==null?null:r.aviso.id.substring(0,8),""),s(4),v(" ",r.aviso.nombre_cliente_aviso,""),s(4),v(" ",r.aviso.descripcion_problema,"")}}function xt(c,l){c&1&&(i(0,"div",39),u(1,"ion-icon",26),i(2,"span"),a(3,"Cargando productos..."),o()())}function vt(c,l){if(c&1&&(i(0,"div",40),u(1,"ion-icon",41),i(2,"span"),a(3),o()()),c&2){let r=g(2);s(3),f(r.errorProductos)}}function bt(c,l){if(c&1){let r=h();i(0,"div",44),m("click",function(){let e=P(r).$implicit,n=g(3);return M(n.agregarMaterialDelInventario(e))}),i(1,"div",45)(2,"div",46)(3,"span",47),a(4),o(),i(5,"span",48),a(6),y(7,"currency"),o()(),i(8,"span",49),a(9),o(),i(10,"div",50)(11,"span",51),a(12),o(),i(13,"span",52),a(14),o()()(),u(15,"ion-icon",53),o()}if(c&2){let r=l.$implicit;s(4),f(r.codigo),s(2),f(E(7,6,r.precio_neto,"EUR","symbol","1.2-2")),s(3),f(r.nombre),s(3),z("Stock: ",r.cantidad_disponible," ",r.unidad,""),s(2),f(r.descripcion)}}function ht(c,l){if(c&1&&(i(0,"div",42),x(1,bt,16,11,"div",43),o()),c&2){let r=g(2);s(),p("ngForOf",r.productosFiltrados)}}function yt(c,l){c&1&&(i(0,"div",54),u(1,"ion-icon",55),i(2,"p"),a(3,"No se encontraron productos"),o()())}function Et(c,l){if(c&1){let r=h();i(0,"div",28)(1,"div",29)(2,"h4"),a(3,"Seleccionar Materiales del Inventario"),o(),i(4,"button",30),m("click",function(){P(r);let e=g();return M(e.cerrarSelectorMateriales())}),u(5,"ion-icon",31),o()(),i(6,"div",32)(7,"input",33),V("ngModelChange",function(e){P(r);let n=g();return T(n.busquedaProducto,e)||(n.busquedaProducto=e),M(e)}),m("input",function(e){P(r);let n=g();return M(n.filtrarProductos(e.target.value))}),o(),u(8,"ion-icon",34),o(),x(9,xt,4,0,"div",35)(10,vt,4,1,"div",36)(11,ht,2,1,"div",37)(12,yt,4,0,"div",38),o()}if(c&2){let r=g();s(7),F("ngModel",r.busquedaProducto),s(2),p("ngIf",r.loadingProductos),s(),p("ngIf",r.errorProductos),s(),p("ngIf",!r.loadingProductos&&!r.errorProductos),s(),p("ngIf",!r.loadingProductos&&!r.errorProductos&&r.productosFiltrados.length===0)}}function It(c,l){if(c&1){let r=h();i(0,"div",59)(1,"div",60)(2,"div",61)(3,"span",62),a(4),o(),i(5,"span",63),a(6),y(7,"currency"),o()(),i(8,"div",64)(9,"div",65)(10,"label"),a(11,"Cantidad:"),o(),i(12,"input",66),m("change",function(e){let n=P(r).index,d=g(2);return M(d.actualizarCantidadMaterial(n,e.target.value))}),o()(),i(13,"div",65)(14,"label"),a(15,"Precio unitario:"),o(),i(16,"input",67),m("change",function(e){let n=P(r).index,d=g(2);return M(d.actualizarPrecioMaterial(n,e.target.value))}),o()()()(),i(17,"button",68),m("click",function(){let e=P(r).index,n=g(2);return M(n.eliminarMaterial(e))}),u(18,"ion-icon",69),o()()}if(c&2){let r=l.$implicit,t=g(2);s(4),f(t.getNombreProducto(r.material_id)),s(2),f(E(7,4,r.precio_unitario_al_momento,"EUR","symbol","1.2-2")),s(6),p("value",r.cantidad_estimada),s(4),p("value",r.precio_unitario_al_momento)}}function St(c,l){if(c&1&&(i(0,"div",56)(1,"h4"),a(2,"Materiales a\xF1adidos"),o(),x(3,It,19,9,"div",57),i(4,"div",58)(5,"strong"),a(6),y(7,"currency"),o()()()),c&2){let r=g();s(3),p("ngForOf",r.materiales),s(3),v("Costo total de materiales: ",E(7,2,r.calcularCostoTotalMateriales(),"EUR","symbol","1.2-2"),"")}}function kt(c,l){c&1&&(i(0,"div",70)(1,"p"),a(2,"No se han agregado materiales al presupuesto"),o()())}var Rt=(()=>{let l=class l{constructor(t,e,n,d,C,_){this.fb=t,this.router=e,this.route=n,this.presupuestosService=d,this.avisosService=C,this.inventarioService=_,this.avisoId=null,this.presupuestoId=null,this.aviso=null,this.presupuesto=null,this.loading=!1,this.materiales=[],this.modoEdicion=!1,this.productosInventario=[],this.productosFiltrados=[],this.loadingProductos=!1,this.errorProductos=null,this.busquedaProducto="",this.mostrarSelectorMateriales=!1,this.destroy$=new S,et({arrowBackOutline:rt,saveOutline:dt,addCircleOutline:ot,trashOutline:ut,refreshOutline:lt,listOutline:st,close:at,searchOutline:pt,addCircle:nt,cubeOutline:ct,alertCircleOutline:it}),this.presupuestoForm=this.fb.group({horas_estimadas:[0,[b.required,b.min(0)]],total_estimado:[0,[b.required,b.min(0)]]})}ngOnInit(){this.cargarAviso(),this.cargarProductosInventario()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarAviso(){this.route.queryParams.subscribe(t=>{this.avisoId=t.avisoId,this.presupuestoId=t.id,this.modoEdicion=t.edit==="true",this.avisoId&&this.avisosService.getAviso(this.avisoId).subscribe({next:e=>{this.aviso=e},error:e=>{console.error("Error al cargar aviso:",e)}}),this.presupuestoId&&this.modoEdicion&&this.cargarPresupuestoParaEditar()})}cargarProductosInventario(){this.loadingProductos=!0,this.errorProductos=null,this.inventarioService.getInventario(1,1e3,"","nombre","asc",!1).pipe(k(this.destroy$)).subscribe({next:t=>{this.productosInventario=t.inventario,this.productosFiltrados=[...this.productosInventario],this.loadingProductos=!1},error:t=>{console.error("Error al cargar productos del inventario:",t),this.errorProductos="Error al cargar productos del inventario",this.loadingProductos=!1}})}filtrarProductos(t){this.busquedaProducto=t,t.trim()?this.productosFiltrados=this.productosInventario.filter(e=>{var n;return e.nombre.toLowerCase().includes(t.toLowerCase())||e.codigo.toLowerCase().includes(t.toLowerCase())||(((n=e.descripcion)==null?void 0:n.toLowerCase())||"").includes(t.toLowerCase())}):this.productosFiltrados=[...this.productosInventario]}abrirSelectorMateriales(){this.mostrarSelectorMateriales=!0,this.productosFiltrados=[...this.productosInventario],this.busquedaProducto=""}cerrarSelectorMateriales(){this.mostrarSelectorMateriales=!1}agregarMaterialDelInventario(t){let e=this.materiales.find(n=>n.material_id===t.id);e?e.cantidad_estimada=(e.cantidad_estimada||0)+1:this.materiales.push({material_id:t.id,cantidad_estimada:1,precio_unitario_al_momento:t.precio_neto,producto:t}),this.calcularTotal(),this.cerrarSelectorMateriales()}getNombreProducto(t){let e=this.productosInventario.find(n=>n.id===t);return e?e.nombre:"Producto no encontrado"}getPrecioProducto(t){let e=this.productosInventario.find(n=>n.id===t);return e?e.precio_neto:0}cargarPresupuestoParaEditar(){this.presupuestoId&&(this.loading=!0,this.presupuestosService.getPresupuesto(this.presupuestoId).subscribe({next:t=>{this.presupuesto=t,this.presupuestoForm.patchValue({horas_estimadas:t.horas_estimadas,total_estimado:t.total_estimado}),t.materiales&&t.materiales.length>0&&(this.materiales=t.materiales.map(e=>({material_id:e.material_id,cantidad_estimada:e.cantidad_estimada,precio_unitario_al_momento:e.precio_unitario_al_momento}))),setTimeout(()=>{this.calcularTotal()},100),this.loading=!1},error:t=>{console.error("Error al cargar presupuesto para editar:",t),this.loading=!1}}))}agregarMaterial(){this.materiales.push({material_id:"",cantidad_estimada:1,precio_unitario_al_momento:0})}eliminarMaterial(t){this.materiales.splice(t,1),this.calcularTotal()}actualizarCantidadMaterial(t,e){this.materiales[t]&&(this.materiales[t].cantidad_estimada=parseInt(e)||1,this.calcularTotal())}actualizarPrecioMaterial(t,e){this.materiales[t]&&(this.materiales[t].precio_unitario_al_momento=parseFloat(e)||0,this.calcularTotal())}calcularCostoTotalMateriales(){return this.materiales.reduce((t,e)=>t+e.cantidad_estimada*e.precio_unitario_al_momento,0)}calcularTotal(){var _;let t=((_=this.presupuestoForm.get("horas_estimadas"))==null?void 0:_.value)||0,e=50,n=t*e,d=this.materiales.reduce((ft,I)=>{let Ct=I.cantidad_estimada||0,Pt=I.precio_unitario_al_momento||0;return ft+Ct*Pt},0),C=n+d;console.log("Calculando total:",{horasEstimadas:t,precioPorHora:e,costoManoObra:n,costoMateriales:d,totalEstimado:C}),this.presupuestoForm.patchValue({total_estimado:C})}guardarPresupuesto(){var t,e,n,d;if(!(!this.presupuestoForm.valid||!this.avisoId))if(this.loading=!0,this.modoEdicion&&this.presupuestoId){let C={horas_estimadas:(t=this.presupuestoForm.get("horas_estimadas"))==null?void 0:t.value,total_estimado:(e=this.presupuestoForm.get("total_estimado"))==null?void 0:e.value};this.presupuestosService.actualizarPresupuesto(this.presupuestoId,C).subscribe({next:_=>{console.log("Presupuesto actualizado:",_),this.loading=!1,this.router.navigate(["/presupuestos"])},error:_=>{console.error("Error al actualizar presupuesto:",_),this.loading=!1}})}else{let C={aviso_id:this.avisoId,horas_estimadas:(n=this.presupuestoForm.get("horas_estimadas"))==null?void 0:n.value,total_estimado:(d=this.presupuestoForm.get("total_estimado"))==null?void 0:d.value,materiales:this.materiales};this.presupuestosService.crearPresupuesto(C).subscribe({next:_=>{console.log("Presupuesto creado:",_),this.loading=!1,this.router.navigate(["/presupuestos"])},error:_=>{console.error("Error al crear presupuesto:",_),this.loading=!1}})}}volver(){this.router.navigate(["/presupuestos"])}};l.\u0275fac=function(e){return new(e||l)(O(K),O(A),O(q),O(mt),O(gt),O(_t))},l.\u0275cmp=w({type:l,selectors:[["app-crear-presupuesto"]],decls:42,vars:9,consts:[[1,"presupuesto-container"],[1,"page-header"],[1,"btn-back",3,"click"],["name","arrow-back-outline"],["class","loading-state",4,"ngIf"],["class","aviso-info",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-group"],["type","number","formControlName","horas_estimadas","min","0","step","0.5","placeholder","0.0",3,"input"],["type","number","formControlName","total_estimado","min","0","step","0.01","placeholder","0.00"],[1,"section-header"],[1,"header-actions"],["type","button",1,"btn-select-inventory",3,"click"],["name","list-outline"],["type","button",1,"btn-add",3,"click"],["name","add-circle-outline"],["class","inventory-selector",4,"ngIf"],["class","materiales-list",4,"ngIf"],["class","no-materiales",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],["name","save-outline"],[1,"loading-state"],[1,"loading-spinner"],["name","refresh-outline",1,"spinning"],[1,"aviso-info"],[1,"inventory-selector"],[1,"selector-header"],["type","button",1,"btn-close",3,"click"],["name","close"],[1,"search-container"],["type","text","placeholder","Buscar productos...",1,"search-input",3,"ngModelChange","input","ngModel"],["name","search-outline"],["class","loading-products",4,"ngIf"],["class","error-products",4,"ngIf"],["class","products-list",4,"ngIf"],["class","no-products",4,"ngIf"],[1,"loading-products"],[1,"error-products"],["name","alert-circle-outline"],[1,"products-list"],["class","product-item",3,"click",4,"ngFor","ngForOf"],[1,"product-item",3,"click"],[1,"product-info"],[1,"product-header"],[1,"product-code"],[1,"product-price"],[1,"product-name"],[1,"product-details"],[1,"product-stock"],[1,"product-description"],["name","add-circle-outline",1,"add-icon"],[1,"no-products"],["name","cube-outline"],[1,"materiales-list"],["class","material-item",4,"ngFor","ngForOf"],[1,"costo-total"],[1,"material-item"],[1,"material-info"],[1,"material-header"],[1,"material-name"],[1,"material-price"],[1,"material-fields"],[1,"field-group"],["type","number","min","1",1,"quantity-input",3,"change","value"],["type","number","min","0","step","0.01",1,"price-input",3,"change","value"],["type","button",1,"btn-remove",3,"click"],["name","trash-outline"],[1,"no-materiales"]],template:function(e,n){e&1&&(i(0,"ion-content")(1,"div",0)(2,"div",1)(3,"button",2),m("click",function(){return n.volver()}),u(4,"ion-icon",3),a(5," Volver "),o(),i(6,"h1"),a(7),o()(),x(8,Mt,5,0,"div",4)(9,Ot,11,3,"div",5),i(10,"form",6),m("ngSubmit",function(){return n.guardarPresupuesto()}),i(11,"div",7)(12,"h3"),a(13,"Estimaci\xF3n de Trabajo"),o(),i(14,"div",8)(15,"label"),a(16,"Horas estimadas"),o(),i(17,"input",9),m("input",function(){return n.calcularTotal()}),o()(),i(18,"div",8)(19,"label"),a(20,"Total estimado (\u20AC)"),o(),u(21,"input",10),o()(),i(22,"div",7)(23,"div",11)(24,"h3"),a(25,"Materiales Estimados"),o(),i(26,"div",12)(27,"button",13),m("click",function(){return n.abrirSelectorMateriales()}),u(28,"ion-icon",14),a(29," Seleccionar del Inventario "),o(),i(30,"button",15),m("click",function(){return n.agregarMaterial()}),u(31,"ion-icon",16),a(32," Agregar Manualmente "),o()()(),x(33,Et,13,5,"div",17)(34,St,8,7,"div",18)(35,kt,3,0,"div",19),o(),i(36,"div",20)(37,"button",21),m("click",function(){return n.volver()}),a(38," Cancelar "),o(),i(39,"button",22),u(40,"ion-icon",23),a(41),o()()()()()),e&2&&(s(7),f(n.modoEdicion?"Editar Presupuesto":"Crear Presupuesto"),s(),p("ngIf",n.loading&&n.modoEdicion),s(),p("ngIf",n.aviso&&!n.loading),s(),p("formGroup",n.presupuestoForm),s(23),p("ngIf",n.mostrarSelectorMateriales),s(),p("ngIf",n.materiales.length>0),s(),p("ngIf",n.materiales.length===0),s(4),p("disabled",!n.presupuestoForm.valid||n.loading),s(2),v(" ",n.loading?"Guardando...":n.modoEdicion?"Actualizar Presupuesto":"Guardar Presupuesto"," "))},dependencies:[B,j,D,N,X,$,L,W,G,R,J,H,Y,Q,U,Z,tt],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: #fff}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{text-align:center;color:#64748b}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;color:#cbd5e0}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:0}.presupuesto-container[_ngcontent-%COMP%]{margin:0 auto;padding:20px;background-color:#fff}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1a202c;margin:0}.btn-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#f7fafc;border:1px solid #e2e8f0;border-radius:8px;color:#4a5568;text-decoration:none;cursor:pointer;transition:all .2s}.btn-back[_ngcontent-%COMP%]:hover{background:#edf2f7;border-color:#cbd5e0}.btn-back[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.aviso-info[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:20px;margin-bottom:24px}.aviso-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#2d3748;margin:0 0 12px}.aviso-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#4a5568}.aviso-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2d3748}.form-section[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:24px;margin-bottom:20px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#2d3748;margin:0 0 20px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:between;align-items:center;margin-bottom:20px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;flex:1}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#4a5568;margin-bottom:6px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #e2e8f0;border-radius:6px;font-size:14px;color:#2d3748;background:#fff;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#a0aec0}.btn-add[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#4f46e5;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:background .2s}.btn-add[_ngcontent-%COMP%]:hover{background:#4338ca}.btn-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.materiales-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.material-item[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start;padding:16px;background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px}.material-fields[_ngcontent-%COMP%]{display:flex;gap:12px;flex:1}.material-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:1px solid #e2e8f0;border-radius:6px;font-size:13px}.material-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5}.btn-remove[_ngcontent-%COMP%]{padding:8px;background:#fed7d7;color:#e53e3e;border:none;border-radius:6px;cursor:pointer;transition:background .2s}.btn-remove[_ngcontent-%COMP%]:hover{background:#feb2b2}.btn-remove[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.no-materiales[_ngcontent-%COMP%]{text-align:center;color:#a0aec0;font-style:italic;padding:20px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:24px}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:8px}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#4a5568;border:1px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7fafc;border-color:#cbd5e0}.btn-primary[_ngcontent-%COMP%]{background:#4f46e5;color:#fff;border:1px solid #4f46e5}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#4338ca;border-color:#4338ca}.btn-primary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.inventory-selector[_ngcontent-%COMP%]{background:#fff;border:1px solid #E2E8F0;border-radius:12px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #0000001a}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:18px;font-weight:600}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;font-size:20px;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 16px;border:1px solid #D1D5DB;border-radius:8px;font-size:14px;background:#f9fafb}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 3px #3b82f61a}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:18px}.inventory-selector[_ngcontent-%COMP%]   .loading-products[_ngcontent-%COMP%], .inventory-selector[_ngcontent-%COMP%]   .error-products[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:40px 20px;color:#6b7280;font-size:14px}.inventory-selector[_ngcontent-%COMP%]   .loading-products[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .inventory-selector[_ngcontent-%COMP%]   .error-products[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px}.inventory-selector[_ngcontent-%COMP%]   .loading-products.spinning[_ngcontent-%COMP%], .inventory-selector[_ngcontent-%COMP%]   .error-products.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.inventory-selector[_ngcontent-%COMP%]   .error-products[_ngcontent-%COMP%]{color:#dc2626}.inventory-selector[_ngcontent-%COMP%]   .error-products[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#dc2626}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;border:1px solid #E5E7EB;border-radius:8px;background:#f9fafb}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid #E5E7EB;cursor:pointer;transition:all .2s}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:hover{background:#f3f4f6}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{flex:1}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-code[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;background:#e5e7eb;padding:2px 6px;border-radius:4px;font-weight:500}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-weight:600;color:#059669;font-size:14px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;font-size:14px;margin-bottom:4px;display:block}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-stock[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{color:#3b82f6;font-size:20px;margin-left:12px}.inventory-selector[_ngcontent-%COMP%]   .no-products[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.inventory-selector[_ngcontent-%COMP%]   .no-products[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#d1d5db;margin-bottom:12px}.inventory-selector[_ngcontent-%COMP%]   .no-products[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.header-actions[_ngcontent-%COMP%]   .btn-select-inventory[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:8px 16px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:6px;transition:all .2s}.header-actions[_ngcontent-%COMP%]   .btn-select-inventory[_ngcontent-%COMP%]:hover{background:#2563eb}.header-actions[_ngcontent-%COMP%]   .btn-select-inventory[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.materiales-list[_ngcontent-%COMP%]{margin-top:20px}.materiales-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#1f2937;font-size:16px;font-weight:600}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px;background:#f9fafb;border:1px solid #E5E7EB;border-radius:8px;margin-bottom:12px}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .material-info[_ngcontent-%COMP%]{flex:1}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .material-info[_ngcontent-%COMP%]   .material-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .material-info[_ngcontent-%COMP%]   .material-header[_ngcontent-%COMP%]   .material-name[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;font-size:14px}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .material-info[_ngcontent-%COMP%]   .material-header[_ngcontent-%COMP%]   .material-price[_ngcontent-%COMP%]{font-weight:600;color:#059669;font-size:14px}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .material-info[_ngcontent-%COMP%]   .material-fields[_ngcontent-%COMP%]{display:flex;gap:16px}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .material-info[_ngcontent-%COMP%]   .material-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .material-info[_ngcontent-%COMP%]   .material-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-weight:500}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .material-info[_ngcontent-%COMP%]   .material-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]   .quantity-input[_ngcontent-%COMP%], .materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .material-info[_ngcontent-%COMP%]   .material-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]   .price-input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #D1D5DB;border-radius:6px;font-size:14px;width:100px;background-color:#fff;color:#000}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .material-info[_ngcontent-%COMP%]   .material-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]   .quantity-input[_ngcontent-%COMP%]:focus, .materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .material-info[_ngcontent-%COMP%]   .material-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]   .price-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 2px #3b82f61a}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626;border:none;padding:8px;border-radius:6px;cursor:pointer;transition:all .2s}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]:hover{background:#fecaca}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.materiales-list[_ngcontent-%COMP%]   .costo-total[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background:#f0f9ff;border:1px solid #BAE6FD;border-radius:8px;text-align:center}.materiales-list[_ngcontent-%COMP%]   .costo-total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0369a1;font-size:16px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.presupuesto-container[_ngcontent-%COMP%]{padding:16px}.page-header[_ngcontent-%COMP%]{margin-bottom:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.form-section[_ngcontent-%COMP%]{padding:16px}.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.material-fields[_ngcontent-%COMP%]{flex-direction:column}.material-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]{max-height:250px}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .material-fields[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.header-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.header-actions[_ngcontent-%COMP%]   .btn-select-inventory[_ngcontent-%COMP%], .header-actions[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{width:100%;justify-content:center}}']});let c=l;return c})();export{Rt as CrearPresupuestoComponent};
