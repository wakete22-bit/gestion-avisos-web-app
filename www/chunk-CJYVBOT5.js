import{a as yn}from"./chunk-UYUMC5OH.js";import{a as He}from"./chunk-BBKUQSPP.js";import"./chunk-UG6LXTTM.js";import{a as vn}from"./chunk-JOFRD2OP.js";import{a as hn}from"./chunk-POYQTKRJ.js";import{a as xn}from"./chunk-S7Q5O5P3.js";import"./chunk-NZLZCUTU.js";import"./chunk-4YIX43F7.js";import{$ as Mn,A as ye,Ba as Fe,C as W,Da as Ve,E as we,Ea as L,Ga as Te,H as Ee,Ha as De,J as K,K as fn,N as U,P as ke,Qa as Z,R as ze,S as Se,Sa as On,U as Pn,Va as nn,X as Ae,_ as je,a as I,aa as Ie,b as fe,c as Pe,d as Me,f as Oe,ga as Dn,h as Vn,ia as Rn,j as xe,la as Hn,m as he,o as bn,q as Cn,r as Tn,ra as rn,ta as Nn,va as X,w as q,x as ve}from"./chunk-CPCGS7XX.js";import"./chunk-ZYOLHR5D.js";import{a as Re}from"./chunk-7SSV6UJL.js";import"./chunk-COJJC4NP.js";import{h as pn,i as _n,j as un,r as mn,s as J,w as $,x as be}from"./chunk-S56F5NGH.js";import"./chunk-37L2DCME.js";import{b as Ce}from"./chunk-CSU5APV4.js";import{$ as R,$a as H,A as S,Aa as tn,Ac as ue,Ba as on,Bc as me,Da as c,Ea as m,F as Gn,Fa as k,Ga as G,I as kn,Ia as Sn,Ja as An,Ka as jn,M as C,N as f,Na as Jn,Oa as In,R as Wn,Sa as y,Ta as Fn,Ua as an,Va as A,W as D,Y as l,Z as h,_a as Q,ab as N,c as sn,cb as Kn,da as P,db as Xn,dc as ee,eb as Zn,f as E,fb as gn,fc as z,gb as B,gc as te,hc as oe,i as Un,ia as g,j as V,ja as Qn,ka as Yn,lc as ae,m as Ln,ma as t,mc as ie,na as a,nc as re,oa as p,pb as ne,qc as ce,rc as le,s as T,sa as x,sb as Y,sc as se,ta as u,tc as de,ua as _,uc as ge,wc as pe,xa as zn,z as dn,za as en,zc as _e}from"./chunk-ICGOMMV6.js";import"./chunk-3SUPCH3T.js";import"./chunk-QUJFQN2Y.js";import"./chunk-OGR5ZLHR.js";import"./chunk-CUT3BV6K.js";import"./chunk-73IMGLZG.js";import"./chunk-G2E2NLL6.js";import"./chunk-ILJSYHS4.js";import"./chunk-OAP23YNX.js";import"./chunk-YYM7CL2V.js";import"./chunk-5LR2YXX6.js";import"./chunk-WDU4QEMV.js";import"./chunk-CKP3SGE2.js";import"./chunk-ULLEADC5.js";import"./chunk-2ELISCRH.js";import"./chunk-BV4CTHEE.js";import"./chunk-JILLMCFB.js";import"./chunk-WWN5RJW3.js";import"./chunk-H3LYBNOM.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-NBD2MYJO.js";import"./chunk-3SBX7V6R.js";import"./chunk-SQKDQBOS.js";import"./chunk-SWRJZAEI.js";import"./chunk-JCSW2JUV.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-36KMLI7A.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as cn,b as ln,d as qn,k as j}from"./chunk-CRC5ZNR6.js";var Ne=[{valor:"Finalizado",label:"Finalizado",descripcion:"Trabajo completado, listo para facturar"},{valor:"Presupuesto pendiente",label:"Presupuesto pendiente",descripcion:"Se requiere presupuesto adicional"},{valor:"Otra visita",label:"Otra visita",descripcion:"Se necesita realizar otra visita"}];var En=(()=>{let s=class s{constructor(n,e){this.supabaseClientService=n,this.inventarioService=e,this.supabase=this.supabaseClientService.getClient()}crearAlbaran(n){console.log("\u{1F4CB} Creando albar\xE1n con datos:",n);let d=n,{repuestos_utilizados:e}=d,o=qn(d,["repuestos_utilizados"]);return E(this.supabase.from("albaranes").insert([o]).select().single()).pipe(dn(({data:b,error:M})=>{if(M)throw M;if(console.log("\u2705 Albar\xE1n b\xE1sico creado:",b.id),!e||e.length===0)return console.log("\u{1F4CB} Sin repuestos que procesar"),E([b]);let w=e.map(O=>({albaran_id:b.id,nombre:O.nombre,cantidad:O.cantidad,precio_neto:O.precio_neto||0,precio_pvp:O.precio_pvp||0,unidad:O.unidad||"unidad",codigo:O.codigo||""}));return console.log("\u{1F4CB} Insertando repuestos en tabla repuestos_albaran:",w),E(this.supabase.from("repuestos_albaran").insert(w).select()).pipe(dn(({data:O,error:v})=>{if(v)throw console.error("\u274C Error al insertar repuestos:",v),v;if(console.log("\u2705 Repuestos insertados correctamente:",(O==null?void 0:O.length)||0,"repuestos"),O&&O.length>0){console.log("\u{1F4E6} Actualizando stock del inventario...");let F=O.map(Ge=>this.actualizarStockInventario(Ge));return Ln(F).pipe(V(()=>(console.log("\u2705 Stock del inventario actualizado correctamente"),ln(cn({},b),{repuestos:O||[]}))))}return E([ln(cn({},b),{repuestos:O||[]})])}))}),T(b=>{throw console.error("\u274C Error al crear albar\xE1n:",b),b}))}getAlbaran(n){return E(this.supabase.from("albaranes").select(`
          *,
          aviso:avisos(*),
          repuestos:repuestos_albaran(*)
        `).eq("id",n).single()).pipe(V(({data:e,error:o})=>{if(o)throw o;return console.log("\u{1F4CB} Albar\xE1n obtenido con repuestos:",e),e}),T(e=>{throw console.error("Error al obtener albar\xE1n:",e),e}))}actualizarStockInventario(n){console.log("\u{1F4E6} Actualizando stock para repuesto:",n);let e=this.supabase.from("inventario").select("*");return n.codigo?e=e.eq("codigo",n.codigo):e=e.eq("nombre",n.nombre),E(e.single()).pipe(dn(({data:o,error:d})=>{if(d)return console.warn("\u26A0\uFE0F Producto no encontrado en inventario:",n.nombre||n.codigo),E([void 0]);let b=o,M=b.cantidad_disponible||0,w=n.cantidad||1,O=Math.max(0,M-w);return console.log(`\u{1F4E6} Stock actual: ${M}, Cantidad usada: ${w}, Nueva cantidad: ${O}`),E(this.supabase.from("inventario").update({cantidad_disponible:O,fecha_actualizacion:new Date().toISOString()}).eq("id",b.id)).pipe(V(({error:v})=>{if(v)throw console.error("\u274C Error al actualizar stock:",v),v;console.log(`\u2705 Stock actualizado: ${b.nombre} - ${M} \u2192 ${O}`),this.inventarioService.getInventario().subscribe()}))}),T(o=>(console.error("\u274C Error en actualizarStockInventario:",o),E([void 0]))))}getAlbaranesAviso(n){return E(this.supabase.from("albaranes").select(`
          *,
          repuestos:repuestos_albaran(*)
        `).eq("aviso_id",n).order("fecha_trabajo",{ascending:!1})).pipe(V(({data:e,error:o})=>{if(o)throw o;return console.log("\u{1F4CB} Albaranes obtenidos con repuestos:",(e==null?void 0:e.length)||0,"albaranes"),e}),T(e=>{throw console.error("Error al obtener albaranes del aviso:",e),e}))}actualizarAlbaran(n,e){return E(this.supabase.from("albaranes").update(ln(cn({},e),{fecha_actualizacion:new Date})).eq("id",n).select().single()).pipe(V(({data:o,error:d})=>{if(d)throw d;return o}),T(o=>{throw console.error("Error al actualizar albar\xE1n:",o),o}))}eliminarAlbaran(n){return console.log("\u{1F50D} eliminarAlbaran llamado con ID:",n),E(this.supabase.from("albaranes").delete().eq("id",n)).pipe(V(({data:e,error:o})=>{if(console.log("\u{1F50D} Respuesta de Supabase:",{data:e,error:o}),o)throw console.error("\u274C Error de Supabase:",o),o;console.log("\u2705 Albar\xE1n eliminado exitosamente de la BD")}),T(e=>{throw console.error("\u274C Error en eliminarAlbaran:",e),e}))}getEstadisticasAlbaranes(n){return E(this.supabase.from("albaranes").select("estado_cierre").eq("aviso_id",n)).pipe(V(({data:e,error:o})=>{if(o)throw o;let d=e;return{total:d.length,finalizados:d.filter(M=>M.estado_cierre==="Finalizado").length,presupuestoPendiente:d.filter(M=>M.estado_cierre==="Presupuesto pendiente").length,otraVisita:d.filter(M=>M.estado_cierre==="Otra visita").length}}),T(e=>{throw console.error("Error al obtener estad\xEDsticas de albaranes:",e),e}))}};s.\u0275fac=function(e){return new(e||s)(kn(Ce),kn(vn))},s.\u0275prov=Gn({token:s,factory:s.\u0275fac,providedIn:"root"});let r=s;return r})();var Je=["signaturePad"],Ke=(r,s)=>({"stock-bajo":r,"stock-critico":s});function Xe(r,s){if(r&1){let i=x();t(0,"div",51)(1,"div",52)(2,"h4"),c(3,"Agregar Repuesto"),a(),t(4,"button",53),u("click",function(){C(i);let e=_();return f(e.cerrarFormularioManual())}),p(5,"ion-icon",54),a()(),t(6,"div",55)(7,"div",56),p(8,"input",57),a(),t(9,"div",58),p(10,"input",59),a(),t(11,"div",60),p(12,"input",61),a(),t(13,"button",62),u("click",function(){C(i);let e=_();return f(e.agregarRepuestoDesdeFormulario())}),p(14,"ion-icon",63),a()()()}if(r&2){let i=_();l(6),g("formGroup",i.repuestoManualForm)}}function Ze(r,s){if(r&1&&(t(0,"span",80),c(1),a()),r&2){let i=_().$implicit;l(),k(" ",i.cantidad_disponible===0?" (Sin stock)":" (Stock bajo)"," ")}}function nt(r,s){if(r&1){let i=x();t(0,"div",71),u("click",function(){let e=C(i).$implicit,o=_(2);return f(o.agregarRepuesto(e))}),t(1,"div",72)(2,"span",73),c(3),a(),t(4,"div",74)(5,"span",75),c(6),P(7,Ze,2,1,"span",76),a(),t(8,"span",77),c(9),a()()(),t(10,"span",78),c(11),y(12,"currency"),a(),p(13,"ion-icon",79),a()}if(r&2){let i=s.$implicit;l(3),m(i.nombre),l(2),g("ngClass",Jn(12,Ke,i.cantidad_disponible<=2,i.cantidad_disponible===0)),l(),G(" Stock: ",i.cantidad_disponible," ",i.unidad," "),l(),g("ngIf",i.cantidad_disponible<=2),l(2),m(i.descripcion),l(2),m(A(12,7,i.precio_neto,"EUR","symbol","1.2-2"))}}function et(r,s){if(r&1){let i=x();t(0,"div",64)(1,"div",65)(2,"h4"),c(3,"Seleccionar Repuestos"),a(),t(4,"button",53),u("click",function(){C(i);let e=_();return f(e.cerrarSelectorRepuestos())}),p(5,"ion-icon",54),a()(),t(6,"div",66)(7,"ion-input",67),jn("ngModelChange",function(e){C(i);let o=_();return An(o.busquedaRepuesto,e)||(o.busquedaRepuesto=e),f(e)}),u("ionInput",function(e){C(i);let o=_();return f(o.filtrarProductos(e))}),a(),p(8,"ion-icon",68),a(),t(9,"div",69),P(10,nt,14,15,"div",70),a()()}if(r&2){let i=_();l(7),Sn("ngModel",i.busquedaRepuesto),l(3),g("ngForOf",i.productosFiltrados)}}function tt(r,s){if(r&1&&(t(0,"div",84)(1,"strong"),c(2),y(3,"currency"),a()()),r&2){let i=_(2);l(2),k("Precio Total: ",A(3,1,i.calcularPrecioTotalRepuestos(),"EUR","symbol","1.2-2"),"")}}function ot(r,s){if(r&1){let i=x();t(0,"div",85)(1,"span",86),c(2),a(),t(3,"input",87),u("change",function(e){let o=C(i).$implicit,d=_(2);return f(d.actualizarCantidadRepuesto(o,e.target.value))}),a(),t(4,"button",88),u("click",function(){let e=C(i).$implicit,o=_(2);return f(o.eliminarRepuesto(e))}),p(5,"ion-icon",89),a()()}if(r&2){let i=s.$implicit;l(2),m(i.nombre),l(),g("value",i.cantidad)("min",1)}}function at(r,s){if(r&1&&(t(0,"div",81)(1,"h4"),c(2,"Repuestos Seleccionados:"),a(),P(3,tt,4,6,"div",82)(4,ot,6,3,"div",83),a()),r&2){let i=_();l(3),g("ngIf",i.repuestosSeleccionados.length>0),l(),g("ngForOf",i.repuestosSeleccionados)}}function it(r,s){r&1&&(t(0,"div",90),p(1,"ion-icon",25),t(2,"p"),c(3,"No hay repuestos seleccionados"),a(),t(4,"small"),c(5,"Selecciona repuestos del inventario o agrega manualmente"),a()())}function rt(r,s){if(r&1&&(t(0,"option",91),c(1),a()),r&2){let i=s.$implicit;g("value",i.valor),l(),G(" ",i.label," - ",i.descripcion," ")}}function ct(r,s){r&1&&(t(0,"div",92)(1,"h3"),c(2,"Presupuesto Pendiente"),a(),t(3,"div",93),p(4,"ion-icon",94),t(5,"div",95)(6,"p"),c(7,"Se crear\xE1 autom\xE1ticamente un presupuesto para este trabajo."),a(),t(8,"small"),c(9,"Podr\xE1s editarlo despu\xE9s desde la secci\xF3n de presupuestos."),a()()()())}function lt(r,s){if(r&1){let i=x();t(0,"div",96),p(1,"ion-icon",97),t(2,"span"),c(3,"\xC1rea de firma digital"),a(),t(4,"small"),c(5,"Haz clic para comenzar a firmar"),a(),t(6,"button",98),u("click",function(){C(i);let e=_();return f(e.iniciarFirma())}),p(7,"ion-icon",97),c(8," Comenzar Firma "),a()()}}function st(r,s){if(r&1){let i=x();t(0,"div",99),p(1,"canvas",100,0),t(3,"div",101)(4,"button",102),u("click",function(){C(i);let e=_();return f(e.limpiarFirma())}),p(5,"ion-icon",89),c(6," Limpiar "),a(),t(7,"button",103),u("click",function(){C(i);let e=_();return f(e.guardarFirma())}),p(8,"ion-icon",63),c(9," Guardar Firma "),a()()()}}function dt(r,s){if(r&1){let i=x();t(0,"div",104),p(1,"img",105),t(2,"div",106)(3,"button",107),u("click",function(){C(i);let e=_();return f(e.editarFirma())}),p(4,"ion-icon",97),c(5," Editar "),a(),t(6,"button",108),u("click",function(){C(i);let e=_();return f(e.eliminarFirma())}),p(7,"ion-icon",89),c(8," Eliminar "),a()()()}if(r&2){let i=_();l(),g("src",i.firmaDataUrl,D)}}function gt(r,s){if(r&1){let i=x();t(0,"div",51)(1,"div",52)(2,"h4"),c(3,"Agregar Repuesto"),a(),t(4,"button",53),u("click",function(){C(i);let e=_();return f(e.cerrarFormularioManual())}),p(5,"ion-icon",54),a()(),t(6,"div",55)(7,"div",56),p(8,"input",57),a(),t(9,"div",58),p(10,"input",109),a(),t(11,"div",60),p(12,"input",61),a(),t(13,"button",62),u("click",function(){C(i);let e=_();return f(e.agregarRepuestoDesdeFormulario())}),p(14,"ion-icon",63),a()()()}if(r&2){let i=_();l(6),g("formGroup",i.repuestoManualForm)}}function pt(r,s){if(r&1){let i=x();t(0,"div",71),u("click",function(){let e=C(i).$implicit,o=_(2);return f(o.agregarRepuesto(e))}),t(1,"div",72)(2,"div",110)(3,"span",78),c(4),y(5,"currency"),a()(),t(6,"span",73),c(7),a(),t(8,"div",74)(9,"span",111),c(10),a(),t(11,"span",77),c(12),a()()(),p(13,"ion-icon",79),a()}if(r&2){let i=s.$implicit;l(4),m(A(5,5,i.precio_neto,"EUR","symbol","1.2-2")),l(3),m(i.nombre),l(3),G("Stock: ",i.cantidad_disponible," ",i.unidad,""),l(2),m(i.descripcion)}}function _t(r,s){if(r&1){let i=x();t(0,"div",64)(1,"div",65)(2,"h4"),c(3,"Seleccionar Repuestos"),a(),t(4,"button",53),u("click",function(){C(i);let e=_();return f(e.cerrarSelectorRepuestos())}),p(5,"ion-icon",54),a()(),t(6,"div",66)(7,"ion-input",67),jn("ngModelChange",function(e){C(i);let o=_();return An(o.busquedaRepuesto,e)||(o.busquedaRepuesto=e),f(e)}),u("ionInput",function(e){C(i);let o=_();return f(o.filtrarProductos(e))}),a(),p(8,"ion-icon",68),a(),t(9,"div",69),P(10,pt,14,10,"div",70),a()()}if(r&2){let i=_();l(7),Sn("ngModel",i.busquedaRepuesto),l(3),g("ngForOf",i.productosFiltrados)}}function ut(r,s){if(r&1&&(t(0,"div",84)(1,"strong"),c(2),y(3,"currency"),a()()),r&2){let i=_(2);l(2),k("Precio Total: ",A(3,1,i.calcularPrecioTotalRepuestos(),"EUR","symbol","1.2-2"),"")}}function mt(r,s){if(r&1){let i=x();t(0,"div",85)(1,"span",86),c(2),a(),t(3,"input",87),u("change",function(e){let o=C(i).$implicit,d=_(2);return f(d.actualizarCantidadRepuesto(o,e.target.value))}),a(),t(4,"button",88),u("click",function(){let e=C(i).$implicit,o=_(2);return f(o.eliminarRepuesto(e))}),p(5,"ion-icon",89),a()()}if(r&2){let i=s.$implicit;l(2),m(i.nombre),l(),g("value",i.cantidad)("min",1)}}function bt(r,s){if(r&1&&(t(0,"div",81)(1,"h4"),c(2,"Repuestos Seleccionados:"),a(),P(3,ut,4,6,"div",82)(4,mt,6,3,"div",83),a()),r&2){let i=_();l(3),g("ngIf",i.repuestosSeleccionados.length>0),l(),g("ngForOf",i.repuestosSeleccionados)}}function Ct(r,s){r&1&&(t(0,"div",90),p(1,"ion-icon",25),t(2,"p"),c(3,"No hay repuestos seleccionados"),a(),t(4,"small"),c(5,"Selecciona repuestos del inventario o agrega manualmente"),a()())}function ft(r,s){if(r&1){let i=x();t(0,"button",115),u("click",function(){C(i);let e=_(2);return f(e.reintentarOperacion())}),p(1,"ion-icon",116),c(2," Reintentar "),a()}}function Pt(r,s){if(r&1&&(t(0,"div",112),p(1,"ion-icon",113),t(2,"span"),c(3),a(),P(4,ft,3,0,"button",114),a()),r&2){let i=_();l(3),m(i.error),l(),g("ngIf",i.error.includes("conexi\xF3n")||i.error.includes("Sesi\xF3n expirada"))}}function Mt(r,s){r&1&&p(0,"ion-icon",117)}function Ot(r,s){r&1&&p(0,"ion-icon",118)}var Ue=(()=>{let s=class s{constructor(n,e,o,d,b,M,w,O){this.fb=n,this.modalController=e,this.inventarioService=o,this.albaranesService=d,this.avisosService=b,this.presupuestosService=M,this.router=w,this.reconnectionService=O,this.loading=!1,this.error=null,this.productosInventario=[],this.productosFiltrados=[],this.busquedaRepuesto="",this.mostrarSelectorRepuestos=!1,this.repuestosSeleccionados=[],this.mostrarFormularioRepuesto=!1,this.firmaCapturada=!1,this.firmaDataUrl="",this.mostrarCanvas=!1,this.fechaActualFormateada="",this.estadosCierre=Ne,this.isComponentActive=!0,console.log("HacerAlbaranComponent constructor called"),I({closeOutline:we,timeOutline:Z,cubeOutline:fn,addCircleOutline:Me,close:W,searchOutline:De,trashOutline:On,informationCircleOutline:Mn,createOutline:K,checkmarkOutline:ve,warningOutline:nn,saveOutline:Te,refreshOutline:L,checkmarkCircleOutline:q,calendarOutline:Cn,personOutline:X,pencilOutline:rn,documentTextOutline:U}),this.albaranForm=this.fb.group({fecha_trabajo:["",z.required],fecha_cierre:["",z.required],hora_entrada:["",z.required],hora_salida:["",z.required],descripcion_trabajo_realizado:["",z.required],repuestos_utilizados:[[]],estado_cierre:["",z.required],dni_cliente:[""],nombre_firma:[""],firma_cliente:[""],observaciones:[""]}),this.repuestoManualForm=this.fb.group({denominacion:["",z.required],cantidad:["",[z.required,z.min(1)]],precio:["",[z.required,z.min(0)]]})}ngOnInit(){return j(this,null,function*(){console.log("\u{1F3AF} HacerAlbaranComponent ngOnInit - Aviso:",this.aviso),console.log("\u{1F3AF} Formulario inicializado:",this.albaranForm),this.setupReconnectionHandling(),this.establecerFechaActual(),this.establecerFechaTrabajo();try{yield this.cargarProductosInventario(),this.inicializarFormulario()}catch(n){console.error("Error al inicializar componente:",n)}})}ngAfterViewInit(){setTimeout(()=>{var n,e;(n=this.albaranForm.get("fecha_cierre"))!=null&&n.value||this.establecerFechaActual(),(e=this.albaranForm.get("fecha_trabajo"))!=null&&e.value||this.establecerFechaTrabajo()},100)}ngOnDestroy(){console.log("\u{1F9F9} HacerAlbaranComponent ngOnDestroy - Limpiando suscripciones"),this.isComponentActive=!1,this.reconnectionSubscription&&this.reconnectionSubscription.unsubscribe()}inicializarFormulario(){let n=this.generarHoraActual();this.albaranForm.patchValue({hora_entrada:n,hora_salida:n,repuestos_utilizados:[]}),this.repuestosSeleccionados=[],console.log("\u{1F50D} Formulario inicializado con valores por defecto")}cargarProductosInventario(){return new Promise((n,e)=>{this.inventarioService.getInventario(1,1e3,"","nombre","asc",!1).subscribe({next:o=>{this.productosInventario=o.inventario,this.productosFiltrados=[...this.productosInventario],console.log(" Inventario cargado:",this.productosInventario.length,"productos"),n()},error:o=>{console.error("Error al cargar productos del inventario:",o),e(o)}})})}filtrarProductos(n){var o;let e=((o=n==null?void 0:n.target)==null?void 0:o.value)||n||"";this.busquedaRepuesto=e,e.trim()?this.productosFiltrados=this.productosInventario.filter(d=>{var b;return d.nombre.toLowerCase().includes(e.toLowerCase())||d.codigo.toLowerCase().includes(e.toLowerCase())||(((b=d.descripcion)==null?void 0:b.toLowerCase())||"").includes(e.toLowerCase())}):this.productosFiltrados=[...this.productosInventario]}abrirSelectorRepuestos(){this.mostrarSelectorRepuestos=!0,this.productosFiltrados=[...this.productosInventario],this.busquedaRepuesto=""}cerrarSelectorRepuestos(){this.mostrarSelectorRepuestos=!1}agregarRepuesto(n){console.log("\u{1F50D} agregarRepuesto - Producto recibido:",n);let e=n.cantidad_disponible||0;if(e<=0){alert(`\u26A0\uFE0F No hay stock disponible para ${n.nombre}`);return}let o=this.repuestosSeleccionados.find(d=>d.nombre===n.nombre);if(o){let d=o.cantidad+1;if(d>e){alert(`\u26A0\uFE0F No hay suficiente stock. Disponible: ${e} ${n.unidad}, Solicitado: ${d} ${n.unidad}`);return}o.cantidad+=1,console.log("\u{1F50D} agregarRepuesto - Repuesto existente, cantidad aumentada a:",o.cantidad)}else{let d={nombre:n.nombre,cantidad:1,precio_neto:n.precio_neto||0,precio_pvp:n.pvp||n.precio_neto||0,unidad:n.unidad||"unidad",codigo:n.codigo||""};console.log("\u{1F50D} agregarRepuesto - Nuevo repuesto creado:",d),this.repuestosSeleccionados.push(d)}this.albaranForm.patchValue({repuestos_utilizados:this.repuestosSeleccionados}),console.log("\u{1F50D} agregarRepuesto - Repuestos seleccionados actualizados:",this.repuestosSeleccionados),this.cerrarSelectorRepuestos()}eliminarRepuesto(n){this.repuestosSeleccionados=this.repuestosSeleccionados.filter(e=>e!==n),this.albaranForm.patchValue({repuestos_utilizados:this.repuestosSeleccionados})}actualizarCantidadRepuesto(n,e){e>0&&(n.cantidad=e,this.albaranForm.patchValue({repuestos_utilizados:this.repuestosSeleccionados}))}mostrarFormularioManual(){this.mostrarFormularioRepuesto=!0,this.repuestoManualForm.reset({denominacion:"",cantidad:1,precio:0})}cerrarFormularioManual(){this.mostrarFormularioRepuesto=!1,this.repuestoManualForm.reset({denominacion:"",cantidad:1,precio:0})}agregarRepuestoDesdeFormulario(){var o,d,b;if(console.log("\u{1F50D} Debug - repuestoManualForm value:",this.repuestoManualForm.value),console.log("\u{1F50D} Debug - repuestoManualForm valid:",this.repuestoManualForm.valid),this.repuestoManualForm.invalid){if(this.repuestoManualForm.markAllAsTouched(),(o=this.repuestoManualForm.get("denominacion"))!=null&&o.invalid){alert("Por favor, introduce la denominaci\xF3n del repuesto");return}if((d=this.repuestoManualForm.get("cantidad"))!=null&&d.invalid){alert("La cantidad debe ser mayor a 0");return}if((b=this.repuestoManualForm.get("precio"))!=null&&b.invalid){alert("El precio debe ser mayor o igual a 0");return}return}let n=this.repuestoManualForm.value,e={nombre:n.denominacion.trim(),cantidad:n.cantidad,precio_neto:n.precio||0,precio_pvp:n.precio||0,unidad:"unidad",codigo:""};console.log("\u{1F50D} agregarRepuestoDesdeFormulario - Repuesto manual creado:",e),this.repuestosSeleccionados.push(e),this.albaranForm.patchValue({repuestos_utilizados:this.repuestosSeleccionados}),this.cerrarFormularioManual()}generarHoraActual(){let n=new Date;return`${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`}establecerHoraActual(){let n=this.generarHoraActual();this.albaranForm.patchValue({hora_salida:n})}formatearFechaParaInput(n){let e=n.getFullYear(),o=String(n.getMonth()+1).padStart(2,"0"),d=String(n.getDate()).padStart(2,"0");return`${e}-${o}-${d}`}establecerFechaActual(){let n=new Date,e=this.formatearFechaParaInput(n);this.albaranForm.patchValue({fecha_cierre:e}),this.fechaActualFormateada=e,console.log("\u{1F4C5} Fecha de cierre establecida:",e)}establecerFechaTrabajo(){let n=new Date,e=this.formatearFechaParaInput(n);this.albaranForm.patchValue({fecha_trabajo:e}),console.log("\u{1F4C5} Fecha de trabajo establecida:",e)}guardarAlbaran(){if(this.albaranForm.valid){this.loading=!0,this.error=null;let n={aviso_id:this.aviso.id,fecha_trabajo:this.albaranForm.value.fecha_trabajo,fecha_cierre:this.albaranForm.value.fecha_cierre,hora_entrada:this.albaranForm.value.hora_entrada,hora_salida:this.albaranForm.value.hora_salida,descripcion_trabajo_realizado:this.albaranForm.value.descripcion_trabajo_realizado,repuestos_utilizados:this.albaranForm.value.repuestos_utilizados,estado_cierre:this.albaranForm.value.estado_cierre,presupuesto_necesario:0,dni_cliente:this.albaranForm.value.dni_cliente,nombre_firma:this.albaranForm.value.nombre_firma,firma_cliente:this.albaranForm.value.firma_cliente,observaciones:this.albaranForm.value.observaciones};console.log("Datos del albar\xE1n:",n),this.albaranesService.crearAlbaran(n).subscribe({next:e=>{console.log("Albar\xE1n guardado exitosamente:",e),n.estado_cierre==="Presupuesto pendiente"?this.manejarPresupuestoPendiente(e):this.finalizarGuardadoAlbaran(e)},error:e=>{this.loading=!1,e.status===0||e.status===408||e.name==="TimeoutError"?(this.error="Error de conexi\xF3n. Verifica tu conexi\xF3n a internet e intenta de nuevo.",console.error("Error de conexi\xF3n al guardar albar\xE1n:",e)):e.status===401?(this.error="Sesi\xF3n expirada. Por favor, recarga la p\xE1gina e intenta de nuevo.",console.error("Error de autenticaci\xF3n al guardar albar\xE1n:",e)):(this.error="Error al guardar el albar\xE1n: "+(e.message||"Error desconocido"),console.error("Error al guardar albar\xE1n:",e))}})}else this.error="Por favor, complete todos los campos requeridos",this.marcarCamposComoTocados()}marcarCamposComoTocados(){Object.keys(this.albaranForm.controls).forEach(n=>{let e=this.albaranForm.get(n);e==null||e.markAsTouched()})}cancelar(){this.modalController.dismiss()}reintentarOperacion(){console.log("\u{1F504} Reintentando operaci\xF3n..."),this.error=null,this.albaranForm.valid?this.guardarAlbaran():this.error="Por favor, complete todos los campos requeridos antes de reintentar"}requierePresupuesto(){var n;return((n=this.albaranForm.get("estado_cierre"))==null?void 0:n.value)==="Presupuesto pendiente"}requiereOtraVisita(){var n;return((n=this.albaranForm.get("estado_cierre"))==null?void 0:n.value)==="Otra visita"}calcularPrecioTotalRepuestos(){return this.repuestosSeleccionados.reduce((n,e)=>n+e.precio_pvp*e.cantidad,0)}debugAlbaran(){console.log("Albar\xE1n en progreso:",this.albaranForm.value),console.log("Repuestos seleccionados:",this.repuestosSeleccionados),console.log("Precio total repuestos:",this.calcularPrecioTotalRepuestos())}iniciarFirma(){this.mostrarCanvas=!0,this.firmaCapturada=!1,this.firmaDataUrl="",setTimeout(()=>{this.inicializarSignaturePad()},100)}inicializarSignaturePad(){var e;if(!((e=this.signaturePadElement)!=null&&e.nativeElement)){console.warn("Canvas no encontrado");return}let n=this.signaturePadElement.nativeElement;import("./chunk-PGY3UNFJ.js").then(({default:o})=>{this.signaturePad=new o(n,{backgroundColor:"white",penColor:"black",minWidth:1,maxWidth:2.5,throttle:16,velocityFilterWeight:.7,dotSize:1}),this.ajustarCanvas(),window.addEventListener("resize",()=>this.ajustarCanvas())})}ajustarCanvas(){var M;if(!((M=this.signaturePadElement)!=null&&M.nativeElement)||!this.signaturePad)return;let n=this.signaturePadElement.nativeElement,e=n.parentElement;if(!e)return;let o=e.getBoundingClientRect(),d=Math.max(o.width-40,300),b=200;n.width=d,n.height=b,this.signaturePad.resizeCanvas()}limpiarFirma(){this.signaturePad&&this.signaturePad.clear()}guardarFirma(){this.signaturePad&&!this.signaturePad.isEmpty()?(this.firmaDataUrl=this.signaturePad.toDataURL(),this.firmaCapturada=!0,this.mostrarCanvas=!1,this.albaranForm.patchValue({firma_cliente:this.firmaDataUrl}),console.log("Firma guardada exitosamente")):console.warn("No hay firma para guardar")}editarFirma(){this.mostrarCanvas=!0,this.firmaCapturada=!1,setTimeout(()=>{this.signaturePad?this.signaturePad.clear():this.inicializarSignaturePad()},100)}eliminarFirma(){this.firmaCapturada=!1,this.firmaDataUrl="",this.mostrarCanvas=!1,this.signaturePad&&this.signaturePad.clear(),this.albaranForm.patchValue({firma_cliente:""}),console.log("Firma eliminada")}manejarPresupuestoPendiente(n){console.log("\u{1F504} Manejando albar\xE1n con presupuesto pendiente:",n),this.crearPresupuestoDesdeAlbaran(n)}crearPresupuestoDesdeAlbaran(n){console.log("\u{1F3AF} Creando presupuesto desde albar\xE1n:",n);let e=this.prepararMaterialesParaPresupuesto(),o={aviso_id:this.aviso.id,albaran_id:n.id,horas_estimadas:this.calcularHorasEstimadas(),total_estimado:this.calcularTotalEstimado(),materiales:e};console.log("\u{1F4CB} Datos para el presupuesto:",o),this.presupuestosService.crearPresupuesto(o).subscribe({next:d=>{console.log("\u2705 Presupuesto creado exitosamente:",d),this.loading=!1,this.modalController.dismiss({success:!0,albaran:n,presupuesto:d,mensaje:"Albar\xE1n guardado y presupuesto creado exitosamente",accion:"presupuesto_creado"},"confirm")},error:d=>{console.error("\u274C Error al crear presupuesto:",d),alert(`\u26A0\uFE0F El albar\xE1n se guard\xF3 correctamente, pero hubo un error al crear el presupuesto autom\xE1ticamente.

Puedes crear el presupuesto manualmente desde la secci\xF3n de presupuestos.`),this.finalizarGuardadoAlbaran(n)}})}prepararMaterialesParaPresupuesto(){return this.repuestosSeleccionados.map(n=>({material_id:n.codigo||this.generarIdTemporal(),cantidad_estimada:n.cantidad,precio_neto_al_momento:n.precio_neto,producto:{id:n.codigo||this.generarIdTemporal(),nombre:n.nombre,precio_neto:n.precio_neto,unidad:n.unidad}}))}calcularHorasEstimadas(){let n=this.albaranForm.value.hora_entrada,e=this.albaranForm.value.hora_salida;if(n&&e){let[o,d]=n.split(":").map(Number),[b,M]=e.split(":").map(Number),w=o*60+d,F=(b*60+M-w)/60;return Math.max(F,1)}return 2}calcularTotalEstimado(){let n=this.calcularPrecioTotalRepuestos(),d=this.calcularHorasEstimadas()*50;return n+d}generarIdTemporal(){return"temp_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}finalizarGuardadoAlbaran(n){this.avisosService.actualizarEstadoAutomatico(this.aviso.id).subscribe({next:e=>{this.loading=!1,console.log("Estado del aviso actualizado autom\xE1ticamente:",e),this.modalController.dismiss({success:!0,albaran:n,aviso:e,mensaje:"Albar\xE1n guardado exitosamente"},"confirm")},error:e=>{console.error("Error al actualizar estado del aviso:",e),this.loading=!1,this.modalController.dismiss({success:!0,albaran:n,mensaje:"Albar\xE1n guardado exitosamente"},"confirm")}})}setupReconnectionHandling(){console.log("\u{1F504} Configurando manejo de reconexi\xF3n en HacerAlbaranComponent"),this.reconnectionSubscription=this.reconnectionService.appResumed.subscribe({next:n=>{n&&this.isComponentActive&&(console.log("\u{1F504} App reanudada - verificando estado del componente"),this.handleAppResume())},error:n=>{console.error("\u274C Error en suscripci\xF3n de reconexi\xF3n:",n)}})}handleAppResume(){return j(this,null,function*(){if(!this.isComponentActive){console.log("\u{1F504} Componente no activo, saltando manejo de reconexi\xF3n");return}try{console.log("\u{1F504} HacerAlbaranComponent: App reanudada, verificando conexi\xF3n...");let n=this.albaranForm.value;Object.values(n).some(o=>o!=null&&o!==""&&(Array.isArray(o)?o.length>0:!0))&&(console.log("\u{1F504} Formulario tiene datos, evitando navegaci\xF3n autom\xE1tica"),this.loading&&(this.loading=!1,this.error="Conexi\xF3n restablecida. Puedes continuar con el albar\xE1n.",setTimeout(()=>{this.isComponentActive&&(this.error=null)},3e3)))}catch(n){console.error("\u274C Error en handleAppResume:",n)}})}shouldKeepComponentActive(){var o;let n=this.albaranForm.value;return n.descripcion_trabajo_realizado||((o=n.repuestos_utilizados)==null?void 0:o.length)>0||n.firma_cliente||n.observaciones}};s.\u0275fac=function(e){return new(e||s)(h(_e),h(J),h(vn),h(En),h(xn),h(hn),h(Y),h(Re))},s.\u0275cmp=R({type:s,selectors:[["app-hacer-albaran"]],viewQuery:function(e,o){if(e&1&&en(Je,5),e&2){let d;tn(d=on())&&(o.signaturePadElement=d.first)}},inputs:{aviso:"aviso"},decls:133,vars:19,consts:[["signaturePad",""],[1,"header-content"],[1,"close-button",3,"click"],["name","close-outline"],[1,"subtitle"],[1,"modal-body",2,"--padding-top","0","--padding-bottom","0"],[1,"modal-content",3,"ngSubmit","formGroup"],[1,"modal-grid"],[1,"form-section"],[1,"form-group"],[1,"required"],["type","date","formControlName","fecha_trabajo",1,"form-control",3,"click"],[1,"help-text"],["type","date","formControlName","fecha_cierre",1,"form-control",3,"click"],[1,"form-row"],[1,"form-group","half"],["type","time","formControlName","hora_entrada",1,"form-control"],[1,"input-with-button"],["type","time","formControlName","hora_salida",1,"form-control",3,"click"],["type","button",1,"add-button",3,"click"],["name","time-outline"],["formControlName","descripcion_trabajo_realizado","placeholder","Describe detalladamente el trabajo realizado...","rows","3",1,"form-control"],[1,"repuestos-section","mobile-only"],[1,"repuestos-actions"],["type","button",1,"btn-select-inventory",3,"click"],["name","cube-outline"],["type","button",1,"btn-add-manual",3,"click"],["name","add-circle-outline"],["class","formulario-repuesto-manual",4,"ngIf"],["class","inventory-selector",4,"ngIf"],["class","repuestos-list",4,"ngIf"],["class","repuestos-empty",4,"ngIf"],["formControlName","estado_cierre",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","presupuesto-info",4,"ngIf"],["formControlName","observaciones","placeholder","Observaciones adicionales...","rows","2",1,"form-control"],["type","text","formControlName","dni_cliente","placeholder","DNI del cliente",1,"form-control"],["type","text","formControlName","nombre_firma","placeholder","Nombre de la persona que firma",1,"form-control"],[1,"signature-area"],["class","signature-placeholder",4,"ngIf"],["class","signature-canvas-container",4,"ngIf"],["class","signature-preview",4,"ngIf"],[1,"images-section"],[1,"repuestos-container","desktop-only"],["class","error-message",4,"ngIf"],[1,"button-group"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["name","save-outline",4,"ngIf"],["name","refresh-outline","class","spinning",4,"ngIf"],[1,"formulario-repuesto-manual"],[1,"formulario-header"],["type","button",1,"btn-close",3,"click"],["name","close"],[1,"formulario-campos",3,"formGroup"],[1,"campo-input"],["type","text","formControlName","denominacion","placeholder","Denominaci\xF3n del repuesto",1,"input-denominacion"],[1,"campo-cantidad"],["type","number","formControlName","cantidad","placeholder","Cantidad","min","1",1,"input-cantidad"],[1,"campo-precio"],["type","number","formControlName","precio","placeholder","Precio \u20AC","min","0","step","0.01",1,"input-precio"],["type","button",1,"btn-agregar",3,"click"],["name","checkmark-outline"],[1,"inventory-selector"],[1,"selector-header"],[1,"search-container"],["type","text","placeholder","Buscar repuestos...",1,"search-input",3,"ngModelChange","ionInput","ngModel"],["name","search-outline"],[1,"products-list"],["class","product-item",3,"click",4,"ngFor","ngForOf"],[1,"product-item",3,"click"],[1,"product-info"],[1,"product-name"],[1,"product-details"],[1,"product-stock",3,"ngClass"],["class","stock-indicador",4,"ngIf"],[1,"product-description"],[1,"product-price"],["name","add-circle-outline",1,"add-icon"],[1,"stock-indicador"],[1,"repuestos-list"],["class","precio-total",4,"ngIf"],["class","repuesto-item-compacto",4,"ngFor","ngForOf"],[1,"precio-total"],[1,"repuesto-item-compacto"],[1,"repuesto-denominacion"],["type","number",1,"cantidad-input-compacto",3,"change","value","min"],["type","button",1,"btn-remove-compacto",3,"click"],["name","trash-outline"],[1,"repuestos-empty"],[3,"value"],[1,"presupuesto-info"],[1,"info-box"],["name","information-circle-outline"],[1,"info-content"],[1,"signature-placeholder"],["name","create-outline"],["type","button",1,"btn-start-signature",3,"click"],[1,"signature-canvas-container"],[1,"signature-canvas"],[1,"signature-controls"],["type","button",1,"btn-clear",3,"click"],["type","button",1,"btn-save",3,"click"],[1,"signature-preview"],["alt","Firma del cliente",1,"firma-image",3,"src"],[1,"signature-actions"],["type","button",1,"btn-edit",3,"click"],["type","button",1,"btn-remove",3,"click"],["type","number","formControlName","cantidad","placeholder","Cantidad","min","0",1,"input-cantidad"],[1,"product-header"],[1,"product-stock"],[1,"error-message"],["name","warning-outline"],["type","button","class","btn-retry",3,"click",4,"ngIf"],["type","button",1,"btn-retry",3,"click"],["name","refresh-outline"],["name","save-outline"],["name","refresh-outline",1,"spinning"]],template:function(e,o){e&1&&(t(0,"ion-header")(1,"ion-toolbar")(2,"div",1)(3,"h2"),c(4,"Crear Albar\xE1n"),a(),t(5,"button",2),u("click",function(){return o.cancelar()}),p(6,"ion-icon",3),a()(),t(7,"p",4),c(8,"Crear albar\xE1n para el trabajo realizado"),a()()(),t(9,"ion-content",5)(10,"form",6),u("ngSubmit",function(){return o.guardarAlbaran()}),t(11,"div",7)(12,"div",8)(13,"h3"),c(14,"Fecha y Horarios"),a(),t(15,"div",9)(16,"label"),c(17,"Fecha del Trabajo "),t(18,"span",10),c(19,"*"),a()(),t(20,"input",11),u("click",function(){return o.establecerFechaTrabajo()}),a(),t(21,"small",12),c(22,"Fecha en que se realiz\xF3 el trabajo"),a()(),t(23,"div",9)(24,"label"),c(25,"Fecha de Cierre "),t(26,"span",10),c(27,"*"),a()(),t(28,"input",13),u("click",function(){return o.establecerFechaActual()}),a(),t(29,"small",12),c(30,"Fecha de cierre del albar\xE1n (autom\xE1tica)"),a()(),t(31,"div",14)(32,"div",15)(33,"label"),c(34,"Hora Entrada "),t(35,"span",10),c(36,"*"),a()(),p(37,"input",16),a(),t(38,"div",15)(39,"label"),c(40,"Hora Salida "),t(41,"span",10),c(42,"*"),a()(),t(43,"div",17)(44,"input",18),u("click",function(){return o.establecerHoraActual()}),a(),t(45,"button",19),u("click",function(){return o.establecerHoraActual()}),p(46,"ion-icon",20),c(47," Ahora "),a()()()(),t(48,"h3"),c(49,"Descripci\xF3n del Trabajo Realizado"),a(),t(50,"div",9)(51,"label"),c(52,"Descripci\xF3n "),t(53,"span",10),c(54,"*"),a()(),t(55,"textarea",21),c(56,"            "),a()(),t(57,"div",22)(58,"h3"),c(59,"Repuestos Utilizados"),a(),t(60,"div",23)(61,"button",24),u("click",function(){return o.abrirSelectorRepuestos()}),p(62,"ion-icon",25),c(63," Seleccionar del Inventario "),a(),t(64,"button",26),u("click",function(){return o.mostrarFormularioManual()}),p(65,"ion-icon",27),c(66," Agregar Manualmente "),a()(),P(67,Xe,15,1,"div",28)(68,et,11,2,"div",29)(69,at,5,2,"div",30)(70,it,6,0,"div",31),a(),t(71,"h3"),c(72,"Estado de Cierre"),a(),t(73,"div",9)(74,"label"),c(75,"Estado "),t(76,"span",10),c(77,"*"),a()(),t(78,"select",32)(79,"option",33),c(80,"Selecciona el estado"),a(),P(81,rt,2,3,"option",34),a()(),P(82,ct,10,0,"div",35),t(83,"h3"),c(84,"Observaciones Adicionales"),a(),t(85,"div",9)(86,"label"),c(87,"Observaciones"),a(),t(88,"textarea",36),c(89,"            "),a()(),t(90,"h3"),c(91,"Identificaci\xF3n y Firma"),a(),t(92,"div",14)(93,"div",15)(94,"label"),c(95,"DNI Cliente"),a(),p(96,"input",37),a(),t(97,"div",15)(98,"label"),c(99,"Nombre Firma"),a(),p(100,"input",38),a()(),t(101,"div",9)(102,"label"),c(103,"Firma Digital"),a(),t(104,"div",39),P(105,lt,9,0,"div",40)(106,st,10,0,"div",41)(107,dt,9,1,"div",42),a()()()(),t(108,"div",43)(109,"div",44)(110,"h3"),c(111,"Repuestos Utilizados"),a(),t(112,"div",23)(113,"button",24),u("click",function(){return o.abrirSelectorRepuestos()}),p(114,"ion-icon",25),c(115," Seleccionar del Inventario "),a(),t(116,"button",26),u("click",function(){return o.mostrarFormularioManual()}),p(117,"ion-icon",27),c(118," Agregar Manualmente "),a()(),P(119,gt,15,1,"div",28)(120,_t,11,2,"div",29)(121,bt,5,2,"div",30)(122,Ct,6,0,"div",31),a()()()(),t(123,"ion-footer")(124,"ion-toolbar"),P(125,Pt,5,2,"div",45),t(126,"div",46)(127,"button",47),u("click",function(){return o.cancelar()}),c(128," Cancelar "),a(),t(129,"button",48),u("click",function(){return o.guardarAlbaran()}),P(130,Mt,1,0,"ion-icon",49)(131,Ot,1,0,"ion-icon",50),c(132),a()()()()),e&2&&(l(10),g("formGroup",o.albaranForm),l(57),g("ngIf",o.mostrarFormularioRepuesto),l(),g("ngIf",o.mostrarSelectorRepuestos),l(),g("ngIf",o.repuestosSeleccionados.length>0),l(),g("ngIf",o.repuestosSeleccionados.length===0&&!o.mostrarSelectorRepuestos),l(11),g("ngForOf",o.estadosCierre),l(),g("ngIf",o.requierePresupuesto()),l(23),g("ngIf",!o.firmaCapturada&&!o.mostrarCanvas),l(),g("ngIf",o.mostrarCanvas&&!o.firmaCapturada),l(),g("ngIf",o.firmaCapturada),l(12),g("ngIf",o.mostrarFormularioRepuesto),l(),g("ngIf",o.mostrarSelectorRepuestos),l(),g("ngIf",o.repuestosSeleccionados.length>0),l(),g("ngIf",o.repuestosSeleccionados.length===0&&!o.mostrarSelectorRepuestos),l(3),g("ngIf",o.error),l(4),g("disabled",!o.albaranForm.valid||o.loading),l(),g("ngIf",!o.loading),l(),g("ngIf",o.loading),l(),k(" ",o.loading?"Guardando...":"Guardar Albar\xE1n"," "))},dependencies:[B,Q,H,N,gn,me,ie,de,ge,ee,re,se,te,oe,pe,ce,le,ue,ae,$,be,pn,un,mn,_n],styles:[`@charset "UTF-8";ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #fff;--border-color: #e5e7eb;--color: #111827}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#111827}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6b7280;margin-top:0;font-size:14px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#6b7280;display:flex;align-items:center;justify-content:center}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{color:#111827}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}ion-content[_ngcontent-%COMP%]{--background: #fff;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0;overflow-x:hidden}ion-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex;flex-direction:column;min-height:0;overflow-x:hidden}ion-content[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{flex:1;overflow:auto;overflow-x:hidden;position:relative;min-height:0;height:100%}ion-content[_ngcontent-%COMP%]   .modal-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:0;height:100%;overflow:hidden;overflow-x:hidden}@media (max-width: 768px){ion-content[_ngcontent-%COMP%]   .modal-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:auto auto;height:auto;overflow:visible}}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #fff;--border-color: #e5e7eb}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#fef2f2;border:1px solid #FECACA;border-radius:6px;color:#dc2626;margin-bottom:20px;font-size:14px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#dc2626;flex-shrink:0}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500;flex:1}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:6px 12px;background:#dc2626;color:#fff;border:none;border-radius:4px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s;margin-left:8px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover{background:#b91c1c}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;color:#fff}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-size:14px;font-weight:500;display:flex;align-items:center;gap:8px;cursor:pointer;transition:all .2s}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{background:none;border:1px solid #d1d5db;color:#374151}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f8fafc;border-color:#9ca3af}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#2563eb;border:1px solid #2563eb;color:#fff}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1d4ed8;border-color:#1d4ed8}.form-section[_ngcontent-%COMP%]{padding:24px;border-right:1px solid #e5e7eb;overflow-y:auto;height:100%;max-height:100%}@media (max-width: 768px){.form-section[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid #e5e7eb;height:auto;max-height:none;overflow:visible;padding-bottom:30px}}.form-section[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#d1d5db #f3f4f6}.form-section[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.form-section[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f3f4f6;border-radius:3px}.form-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:3px}.form-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#9ca3af}.images-section[_ngcontent-%COMP%]{padding:24px;background-color:#f9fafb;overflow-y:auto;height:100%;max-height:100%}@media (max-width: 768px){.images-section[_ngcontent-%COMP%]{height:auto;max-height:none;overflow:visible;min-height:300px;padding-bottom:80px}}.images-section[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#d1d5db #f3f4f6}.images-section[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.images-section[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f3f4f6;border-radius:3px}.images-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:3px}.images-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#9ca3af}.images-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:16px;color:#374151;font-weight:600}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc2626}.form-group.half[_ngcontent-%COMP%]{flex:1}.form-control[_ngcontent-%COMP%]{position:relative;width:100%;padding:8px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;color:#111827;background-color:#fff;transition:border-color .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 2px #2563eb1a}.form-control[_ngcontent-%COMP%]:disabled{background-color:#f9fafb;color:#6b7280;cursor:not-allowed}select.form-control[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;background-size:16px;padding-right:40px}select.form-control[_ngcontent-%COMP%]:disabled{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E")}select.form-control[_ngcontent-%COMP%]::placeholder{color:#9ca3af}select.form-control[_ngcontent-%COMP%]   option[value=""][_ngcontent-%COMP%]{color:#9ca3af}select.form-control[_ngcontent-%COMP%]{padding-right:40px;background-color:#fafafb;border:1px solid transparent;padding-top:10px;padding-bottom:10px;border-radius:6px;font-size:14px;color:#111827;transition:border-color .2s}select.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}input.form-control[_ngcontent-%COMP%]{padding-right:40px;background-color:#fafafb;border:1px solid transparent;padding-top:10px;padding-bottom:10px;border-radius:6px;font-size:14px;color:#111827;transition:border-color .2s}input.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}textarea.form-control[_ngcontent-%COMP%]{position:relative;padding-right:40px;background-color:#fafafb;border:1px solid transparent;padding-top:10px;padding-bottom:10px;border-radius:6px;font-size:14px;color:#111827;transition:border-color .2s;resize:vertical;min-height:80px}textarea.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.character-count[_ngcontent-%COMP%]{margin-top:4px;text-align:right;font-size:12px;color:#6b7280;position:absolute;bottom:13px;right:13px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:20px}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0;flex:1}.input-with-button[_ngcontent-%COMP%]{position:relative;display:flex;gap:8px}.input-with-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.input-with-button[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:6px 10px;background:none;border:none;color:#4f46e5;font-size:14px;cursor:pointer;white-space:nowrap;border:1px solid #d2d2d2;position:absolute;right:8px;top:6px;border-radius:8px;font-weight:500}.input-with-button[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]:hover{color:#1d4ed8}.input-with-button[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.help-text[_ngcontent-%COMP%]{display:block;font-size:11px;color:#6b7280;margin-top:4px;font-style:italic;line-height:1.4}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.checkbox-group[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-group[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;margin:0}.checkbox-group[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{font-size:14px;color:#374151}.checkbox-group[_ngcontent-%COMP%]   .helper-text[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;margin-left:24px}.imagen-upload-container[_ngcontent-%COMP%]{margin-bottom:24px}.imagen-upload-container[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]{border:2px dashed #d1d5db;border-radius:8px;padding:32px;text-align:center;cursor:pointer;transition:all .2s;background-color:#fff}.imagen-upload-container[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]:hover{border-color:#2563eb;background-color:#f8fafc}.imagen-upload-container[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#6b7280}.imagen-upload-container[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;font-size:16px;color:#374151}.imagen-upload-container[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#6b7280}.uploaded-files[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;color:#374151}.file-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.file-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px;background-color:#fff;border-radius:6px;border:1px solid #e5e7eb}.file-item[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:4px;overflow:hidden;background-color:#f3f4f6}.file-item[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{flex:1;min-width:0}.file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{display:block;font-size:14px;color:#374151;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.file-item[_ngcontent-%COMP%]   .remove-file[_ngcontent-%COMP%]{background:none;border:none;padding:8px;color:#dc2626;cursor:pointer;display:flex;align-items:center;justify-content:center}.file-item[_ngcontent-%COMP%]   .remove-file[_ngcontent-%COMP%]:hover{color:#b91c1c}.file-item[_ngcontent-%COMP%]   .remove-file[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}@media (max-width: 768px){.modal-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:auto auto;height:auto;overflow:visible}.form-section[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid #e5e7eb;height:auto;max-height:none;overflow:visible;padding-bottom:30px}.images-section[_ngcontent-%COMP%]{display:none;height:auto;max-height:none;overflow:visible;min-height:300px;padding-bottom:80px}.form-control[_ngcontent-%COMP%]{font-size:16px;padding:12px}textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font-size:14px!important;padding:12px}.input-with-button[_ngcontent-%COMP%]{flex-direction:column}.input-with-button[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{position:static;margin-top:8px;width:100%;justify-content:center}}.loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px;font-size:12px;color:#6b7280}.loading-indicator[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#dc2626;display:flex;align-items:center;gap:4px}.error-message[_ngcontent-%COMP%]:before{content:"\\26a0";font-size:14px}.repuestos-section[_ngcontent-%COMP%], .repuestos-container[_ngcontent-%COMP%]{position:sticky;top:20px}.repuestos-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .repuestos-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{border-bottom:2px solid #10B981;padding-bottom:8px}@media (max-width: 1199px){.repuestos-section[_ngcontent-%COMP%]{position:static;top:auto}}.repuestos-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:24px}.repuestos-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;width:100%}.repuestos-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.repuestos-actions[_ngcontent-%COMP%]   .btn-select-inventory[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.repuestos-actions[_ngcontent-%COMP%]   .btn-select-inventory[_ngcontent-%COMP%]:hover{background:#1d4ed8}.repuestos-actions[_ngcontent-%COMP%]   .btn-add-manual[_ngcontent-%COMP%]{background:#10b981;color:#fff}.repuestos-actions[_ngcontent-%COMP%]   .btn-add-manual[_ngcontent-%COMP%]:hover{background:#059669}.repuestos-empty[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#9ca3af}.repuestos-empty[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.5}.repuestos-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;font-weight:500;color:#6b7280}.repuestos-empty[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:13px;color:#9ca3af;line-height:1.4}.inventory-selector[_ngcontent-%COMP%]{background:#fff;padding:0;margin-bottom:15px;max-height:400px;overflow:hidden;display:flex;flex-direction:column}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:16px;font-weight:600}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;font-size:20px;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative;margin-bottom:5px}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{--background: #FAFAFB;--border-radius: 6px;--border-width: 1px;--border-color: transparent;--padding-start: 40px 12px 12px;--padding-end: 12px;--padding-top: 10px;--padding-left: 12px;--padding-bottom: 10px;--color: #111827;--placeholder-color: #9CA3AF;font-size:14px;transition:border-color .2s}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus-within{--border-color: #2563eb;--background: #fff;box-shadow:0 0 0 2px #2563eb1a}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:18px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]{flex:1;max-height:250px;overflow-y:auto;border:1px solid #E5E7EB;border-radius:6px;background:#f9fafb}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px;border-bottom:1px solid #E5E7EB;cursor:pointer;transition:all .2s}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:hover{background:#f3f4f6}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-weight:600;color:#059669;font-size:13px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{flex:1}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-code[_ngcontent-%COMP%]{font-size:11px;color:#6b7280;background:#e5e7eb;padding:2px 6px;border-radius:4px;font-weight:500}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-weight:600;color:#059669;font-size:13px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;font-size:13px;margin-bottom:4px;display:block}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-stock[_ngcontent-%COMP%]{font-size:11px;color:#6b7280}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-stock.stock-bajo[_ngcontent-%COMP%]{color:#f59e0b;font-weight:600}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-stock.stock-critico[_ngcontent-%COMP%]{color:#ef4444;font-weight:700}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-stock[_ngcontent-%COMP%]   .stock-indicador[_ngcontent-%COMP%]{font-size:10px;font-style:italic;margin-left:4px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{color:#3b82f6;font-size:18px;margin-left:8px}.repuestos-list[_ngcontent-%COMP%]{margin-top:20px}.repuestos-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#1f2937;font-size:16px;font-weight:600}.repuestos-list[_ngcontent-%COMP%]   .precio-total[_ngcontent-%COMP%]{background:#f0fdf4;border:1px solid #BBF7D0;border-radius:6px;padding:12px 16px;margin-bottom:16px;text-align:center}.repuestos-list[_ngcontent-%COMP%]   .precio-total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#059669;font-size:16px}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item-compacto[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px 12px;background:#f0f9ff;border:1px solid #BAE6FD;border-radius:6px;margin-bottom:6px;width:100%}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item-compacto[_ngcontent-%COMP%]   .repuesto-denominacion[_ngcontent-%COMP%]{flex:1;font-weight:500;color:#0369a1;font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item-compacto[_ngcontent-%COMP%]   .cantidad-input-compacto[_ngcontent-%COMP%]{width:50px;padding:4px 6px;border:1px solid #D1D5DB;border-radius:4px;font-size:12px;text-align:center;background-color:#fafafb;color:#111827}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item-compacto[_ngcontent-%COMP%]   .btn-remove-compacto[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626;border:none;padding:4px;border-radius:4px;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;width:28px;height:28px}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item-compacto[_ngcontent-%COMP%]   .btn-remove-compacto[_ngcontent-%COMP%]:hover{background:#fecaca}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item-compacto[_ngcontent-%COMP%]   .btn-remove-compacto[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.formulario-repuesto-manual[_ngcontent-%COMP%]{background:#fff;border:1px solid #E2E8F0;border-radius:8px;padding:16px;margin-bottom:16px;box-shadow:0 1px 3px #0000001a}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:14px;font-weight:600}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;font-size:16px;cursor:pointer;padding:2px;border-radius:4px;transition:all .2s}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-input[_ngcontent-%COMP%]{flex:1}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-input[_ngcontent-%COMP%]   .input-denominacion[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #D1D5DB;border-radius:6px;font-size:14px;background-color:#fafafb;color:#111827;transition:border-color .2s}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-input[_ngcontent-%COMP%]   .input-denominacion[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-input[_ngcontent-%COMP%]   .input-denominacion[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-cantidad[_ngcontent-%COMP%]   .input-cantidad[_ngcontent-%COMP%]{width:60px;padding:8px 6px;border:1px solid #D1D5DB;border-radius:6px;font-size:14px;text-align:center;background-color:#fafafb;color:#111827;transition:border-color .2s}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-cantidad[_ngcontent-%COMP%]   .input-cantidad[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-cantidad[_ngcontent-%COMP%]   .input-cantidad[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-precio[_ngcontent-%COMP%]   .input-precio[_ngcontent-%COMP%]{width:70px;padding:8px 6px;border:1px solid #D1D5DB;border-radius:6px;font-size:14px;text-align:center;background-color:#fafafb;color:#111827;transition:border-color .2s}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-precio[_ngcontent-%COMP%]   .input-precio[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-precio[_ngcontent-%COMP%]   .input-precio[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .btn-agregar[_ngcontent-%COMP%]{background:#10b981;color:#fff;border:none;padding:8px;border-radius:6px;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;width:36px;height:36px}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .btn-agregar[_ngcontent-%COMP%]:hover{background:#059669}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .btn-agregar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.estados-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}@media (min-width: 1200px){.estados-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:20px}}.estado-option[_ngcontent-%COMP%]{border:2px solid #E5E7EB;border-radius:8px;padding:20px;cursor:pointer;transition:all .2s ease;position:relative;background:#fff}.estado-option[_ngcontent-%COMP%]:hover{border-color:#2563eb;transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.estado-option.selected[_ngcontent-%COMP%]{border-color:#2563eb;background:#eff6ff}.estado-option.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#2563eb}.estado-option[_ngcontent-%COMP%]   .estado-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;font-weight:600;color:#111827}.estado-option[_ngcontent-%COMP%]   .estado-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#6b7280;line-height:1.4}.estado-option[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;font-size:20px;color:#9ca3af}.signature-area[_ngcontent-%COMP%]{border:2px dashed #D1D5DB;border-radius:8px;padding:20px;text-align:center;background:#f9fafb;transition:all .2s ease;min-height:200px;display:flex;align-items:center;justify-content:center;position:relative}.signature-area[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#eff6ff}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;gap:16px}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-canvas[_ngcontent-%COMP%]{border:1px solid #E5E7EB;border-radius:6px;background:#fff;cursor:crosshair;touch-action:none}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]:hover{background:#fecaca}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#10b981;color:#fff}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background:#059669}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;gap:16px}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .firma-image[_ngcontent-%COMP%]{max-width:100%;max-height:120px;border:1px solid #E5E7EB;border-radius:6px;background:#fff}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]:hover{background:#bfdbfe}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]:hover{background:#fecaca}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;color:#6b7280;margin-top:15px}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#9ca3af}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   .btn-start-signature[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 20px;background:#2563eb;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;margin-top:8px}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   .btn-start-signature[_ngcontent-%COMP%]:hover{background:#1d4ed8}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   .btn-start-signature[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.mobile-only[_ngcontent-%COMP%]{display:block}.desktop-only[_ngcontent-%COMP%]{display:none}@media (min-width: 1200px){.mobile-only[_ngcontent-%COMP%]{display:none}.desktop-only[_ngcontent-%COMP%]{display:block}}@media (max-width: 768px){.modal-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:auto auto;height:auto;overflow:visible}.form-section[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid #e5e7eb;height:auto;max-height:none;overflow:visible;padding-bottom:30px}.images-section[_ngcontent-%COMP%]{height:auto;max-height:none;overflow:visible;min-height:300px;padding-bottom:80px}.form-control[_ngcontent-%COMP%]{font-size:16px;padding:12px}textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font-size:14px!important;padding:12px}.input-with-button[_ngcontent-%COMP%]{flex-direction:column}.input-with-button[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{position:static;margin-top:8px;width:100%;justify-content:center}.estados-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.estado-option[_ngcontent-%COMP%]{padding:16px}.estado-option[_ngcontent-%COMP%]   .estado-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:15px}.estado-option[_ngcontent-%COMP%]   .estado-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.estado-option[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;top:12px;right:12px}.repuestos-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.repuestos-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.repuestos-list[_ngcontent-%COMP%]{width:100%;overflow:hidden}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item-compacto[_ngcontent-%COMP%]{padding:6px 8px;gap:8px}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item-compacto[_ngcontent-%COMP%]   .repuesto-denominacion[_ngcontent-%COMP%]{font-size:13px}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item-compacto[_ngcontent-%COMP%]   .cantidad-input-compacto[_ngcontent-%COMP%]{width:45px;font-size:12px}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item-compacto[_ngcontent-%COMP%]   .btn-remove-compacto[_ngcontent-%COMP%]{width:24px;height:24px}.repuestos-list[_ngcontent-%COMP%]   .repuesto-item-compacto[_ngcontent-%COMP%]   .btn-remove-compacto[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:10px}.formulario-repuesto-manual[_ngcontent-%COMP%]{padding:12px;margin-bottom:12px}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]{flex-direction:row;gap:8px}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-input[_ngcontent-%COMP%]{width:100%}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-input[_ngcontent-%COMP%]   .input-denominacion[_ngcontent-%COMP%]{font-size:16px;padding:10px 12px}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-cantidad[_ngcontent-%COMP%]{align-self:flex-start}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-cantidad[_ngcontent-%COMP%]   .input-cantidad[_ngcontent-%COMP%]{width:60px;font-size:16px;padding:10px 6px}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-precio[_ngcontent-%COMP%]{align-self:flex-start}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-precio[_ngcontent-%COMP%]   .input-precio[_ngcontent-%COMP%]{width:60px;font-size:16px;padding:10px 6px}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .btn-agregar[_ngcontent-%COMP%]{align-self:flex-end;width:40px;height:43px}.formulario-repuesto-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .btn-agregar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.signature-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px 10px;min-height:200px;border:2px dashed #D1D5DB;border-radius:8px;background:#f9fafb;transition:all .2s ease}.signature-area[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#eff6ff}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;color:#6b7280;text-align:center}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#9ca3af}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   .btn-start-signature[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 20px;background:#2563eb;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;margin-top:8px}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   .btn-start-signature[_ngcontent-%COMP%]:hover{background:#1d4ed8}.signature-area[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]   .btn-start-signature[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;gap:16px}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-canvas[_ngcontent-%COMP%]{border:1px solid #E5E7EB;border-radius:6px;background:#fff;cursor:crosshair;touch-action:none;width:100%;max-width:400px;height:200px}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]:hover{background:#fecaca}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#10b981;color:#fff}.signature-area[_ngcontent-%COMP%]   .signature-canvas-container[_ngcontent-%COMP%]   .signature-controls[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background:#059669}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;gap:16px}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .firma-image[_ngcontent-%COMP%]{max-width:100%;max-height:120px;border:1px solid #E5E7EB;border-radius:6px;background:#fff}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]:hover{background:#bfdbfe}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.signature-area[_ngcontent-%COMP%]   .signature-preview[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]:hover{background:#fecaca}}@media all and (display-mode: standalone){ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding-top:calc(16px + var(--ion-safe-area-top, 0px))}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding-bottom:calc(16px + var(--ion-safe-area-bottom, 0px))}}@supports (-webkit-touch-callout: none){@media all and (display-mode: standalone){ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding-top:calc(16px + var(--ion-safe-area-top, 0px))}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding-bottom:calc(16px + var(--ion-safe-area-bottom, 0px))}}}@supports not (-webkit-touch-callout: none){ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding-bottom:calc(16px + var(--ion-safe-area-bottom, 16px))}}.presupuesto-info[_ngcontent-%COMP%]{margin-bottom:20px}.presupuesto-info[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]{background:#f0f9ff;border:1px solid #BAE6FD;border-radius:8px;padding:16px;display:flex;align-items:flex-start;gap:12px;width:100%;box-sizing:border-box;overflow:hidden;word-wrap:break-word}.presupuesto-info[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#0ea5e9;font-size:20px;margin-top:1px;flex-shrink:0}.presupuesto-info[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{flex:1;min-width:0;overflow:hidden}.presupuesto-info[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;color:#0c4a6e;font-size:14px;font-weight:500;line-height:1.4;word-wrap:break-word;overflow-wrap:break-word}.presupuesto-info[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#0369a1;font-size:12px;margin:0;display:block;line-height:1.3;word-wrap:break-word;overflow-wrap:break-word}`]});let r=s;return r})();function ht(r,s){r&1&&(t(0,"div",4),p(1,"ion-icon",5),t(2,"span",6),c(3,"Cargando estado del flujo..."),a(),t(4,"span",7),c(5,"Cargando..."),a()())}function vt(r,s){if(r&1){let i=x();t(0,"div",8),p(1,"ion-icon",9),t(2,"span",10),c(3),a(),t(4,"button",11),u("click",function(){C(i);let e=_();return f(e.recargar())}),p(5,"ion-icon",12),t(6,"span",6),c(7,"Reintentar"),a(),t(8,"span",7),c(9,"Reintentar"),a()()()}if(r&2){let i=_();l(3),m(i.error)}}function yt(r,s){if(r&1){let i=x();t(0,"div",19)(1,"div",20),p(2,"ion-icon",21),t(3,"span",22),c(4),a()(),t(5,"button",23),u("click",function(){C(i);let e=_(2);return f(e.recargar())}),p(6,"ion-icon",12),a()()}if(r&2){let i=_(2);l(),g("ngClass",i.getEstadoClass()),l(),g("name",i.getEstadoIcon()),l(2),m(i.estadoFlujo.estadoActual)}}function wt(r,s){if(r&1){let i=x();t(0,"button",28),u("click",function(){let e=C(i).$implicit,o=_(3);return f(o.ejecutarAccion(e))}),p(1,"ion-icon",21),t(2,"span",29),c(3),a()()}if(r&2){let i=s.$implicit,n=_(3);g("disabled",n.loading)("title",n.getAccionTexto(i)),l(),g("name",n.getAccionIcon(i)),l(2),m(n.getAccionTexto(i))}}function Et(r,s){if(r&1&&(t(0,"div",24)(1,"h4",25),c(2,"Acciones disponibles:"),a(),t(3,"div",26),P(4,wt,4,4,"button",27),a()()),r&2){let i=_(2);l(4),g("ngForOf",i.accionesDisponibles)}}function kt(r,s){r&1&&(t(0,"div",30),p(1,"ion-icon",31),t(2,"span",32),c(3,"Aviso completado"),a()())}function zt(r,s){r&1&&(t(0,"div",35),p(1,"ion-icon",36),t(2,"span",37),c(3,"Esperando cierre de albaranes o facturaci\xF3n"),a()())}function St(r,s){if(r&1&&(t(0,"div",33),P(1,zt,4,0,"div",34),a()),r&2){let i=_(2);l(),g("ngIf",i.accionesDisponibles.length===0&&!i.estadoFlujo.puedeCrearPresupuesto&&i.estadoFlujo.estadoActual!=="Completado")}}function At(r,s){if(r&1&&(t(0,"div",13)(1,"div",14),P(2,yt,7,3,"div",15),a(),P(3,Et,5,1,"div",16)(4,kt,4,0,"div",17)(5,St,2,1,"div",18),a()),r&2){let i=_();l(2),g("ngIf",i.estadoFlujo.estadoActual!=="Completado"),l(),g("ngIf",i.accionesDisponibles.length>0&&i.estadoFlujo.estadoActual!=="Completado"),l(),g("ngIf",i.estadoFlujo.estadoActual==="Completado"),l(),g("ngIf",i.estadoFlujo.estadoActual==="No visitado"||i.estadoFlujo.estadoActual==="Visitado pendiente")}}var $n=(()=>{let s=class s{constructor(n){this.flujoService=n,this.accionEjecutada=new Wn,this.estadoFlujo=null,this.accionesDisponibles=[],this.loading=!1,this.error=null,this.destroy$=new sn,I({documentTextOutline:U,checkmarkCircleOutline:q,timeOutline:Z,receiptOutline:Ve,createOutline:K,eyeOutline:Pn,arrowForwardOutline:xe,warningOutline:nn,refreshOutline:L})}ngOnInit(){this.avisoId&&this.cargarEstadoFlujo()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarEstadoFlujo(){this.loading=!0,this.error=null,this.flujoService.obtenerEstadoFlujo(this.avisoId).pipe(S(this.destroy$)).subscribe({next:n=>{this.estadoFlujo=n,this.cargarAccionesDisponibles(),this.loading=!1},error:n=>{console.error("Error al cargar estado del flujo:",n),this.error="Error al cargar el estado del flujo",this.loading=!1}})}cargarAccionesDisponibles(){this.flujoService.obtenerAccionesDisponibles(this.avisoId).pipe(S(this.destroy$)).subscribe({next:n=>{this.accionesDisponibles=n},error:n=>{console.error("Error al cargar acciones:",n)}})}recargarFlujo(){console.log("\u{1F504} Recargando flujo desde componente padre..."),this.cargarEstadoFlujo()}ejecutarAccion(n){var o,d,b,M,w,O;this.loading=!0,this.error=null;let e;switch(n){case"crear_presupuesto":e=this.flujoService.ejecutarFlujoCompleto(this.avisoId,!0);break;case"aprobar_presupuesto":let v=(b=(d=(o=this.estadoFlujo)==null?void 0:o.resumen)==null?void 0:d.presupuesto)==null?void 0:b.id;v&&(e=this.flujoService.aprobarPresupuesto(v));break;case"facturar_presupuesto":let F=(O=(w=(M=this.estadoFlujo)==null?void 0:M.resumen)==null?void 0:w.presupuesto)==null?void 0:O.id;F&&(e=this.flujoService.facturarPresupuesto(F));break;case"facturar_trabajos":e=this.flujoService.facturarTrabajos(this.avisoId);break;case"completar_aviso":this.completarAviso();break;default:this.loading=!1;return}e&&e.pipe(S(this.destroy$)).subscribe({next:v=>{console.log("Acci\xF3n ejecutada:",v),this.accionEjecutada.emit(v),this.cargarEstadoFlujo(),this.cargarAccionesDisponibles(),this.loading=!1},error:v=>{console.error("Error al ejecutar acci\xF3n:",v),this.error=`Error al ejecutar ${n}: ${v.message}`,this.loading=!1}})}iniciarFlujoDirecto(){this.loading=!0,this.flujoService.ejecutarFlujoCompleto(this.avisoId,!1).pipe(S(this.destroy$)).subscribe({next:n=>{console.log("Flujo directo iniciado:",n),this.accionEjecutada.emit(n),this.cargarEstadoFlujo(),this.cargarAccionesDisponibles(),this.loading=!1},error:n=>{console.error("Error al iniciar flujo directo:",n),this.error=`Error al iniciar flujo directo: ${n.message}`,this.loading=!1}})}completarAviso(){if(!this.avisoId){console.error("No hay aviso seleccionado para completar");return}console.log("\u{1F504} Completando aviso:",this.avisoId),this.loading=!0,this.flujoService.completarAviso(this.avisoId).subscribe({next:n=>{console.log("\u2705 Aviso completado exitosamente:",n),this.loading=!1,this.mostrarMensaje("Aviso completado exitosamente","success"),this.cargarEstadoFlujo(),this.cargarAccionesDisponibles(),this.accionEjecutada.emit(n)},error:n=>{console.error("\u274C Error al completar aviso:",n),this.loading=!1,this.mostrarMensaje(n.message||"Error al completar el aviso. Verifica que haya trabajos realizados y facturas generadas.","error")}})}mostrarMensaje(n,e="info"){console.log(`[${e.toUpperCase()}] ${n}`)}getEstadoIcon(){if(!this.estadoFlujo)return"time-outline";switch(this.estadoFlujo.estadoActual){case"No visitado":return"time-outline";case"Visitado pendiente":return"eye-outline";case"Pendiente de presupuesto":return"document-text-outline";case"En curso":return"create-outline";case"Completado":return"checkmark-circle-outline";default:return"time-outline"}}getEstadoClass(){if(!this.estadoFlujo)return"pendiente";switch(this.estadoFlujo.estadoActual){case"Pendiente":return"pendiente";case"Pendiente de presupuesto":return"presupuesto";case"En curso":return"en-curso";case"Listo para facturar":return"listo-facturar";case"Completado":return"completado";case"Cancelado":return"cancelado";default:return"pendiente"}}getAccionTexto(n){switch(n){case"crear_presupuesto":return"Crear Presupuesto";case"aprobar_presupuesto":return"Aprobar Presupuesto";case"facturar_presupuesto":return"Generar Factura desde Presupuesto";case"facturar_trabajos":return"Facturar Trabajos Realizados";case"completar_aviso":return"Completar Aviso";default:return n}}getAccionIcon(n){switch(n){case"crear_presupuesto":return"document-text-outline";case"aprobar_presupuesto":return"checkmark-circle-outline";case"facturar_presupuesto":case"facturar_trabajos":return"receipt-outline";case"completar_aviso":return"checkmark-circle-outline";default:return"arrow-forward-outline"}}recargar(){this.cargarEstadoFlujo()}};s.\u0275fac=function(e){return new(e||s)(h(yn))},s.\u0275cmp=R({type:s,selectors:[["app-flujo-estado"]],inputs:{avisoId:"avisoId"},outputs:{accionEjecutada:"accionEjecutada"},decls:4,vars:3,consts:[[1,"flujo-estado-container"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","flujo-content",4,"ngIf"],[1,"loading-state"],["name","refresh-outline",1,"spinning"],[1,"desktop-only"],[1,"mobile-only"],[1,"error-state"],["name","warning-outline"],[1,"error-text"],[1,"btn-retry",3,"click"],["name","refresh-outline"],[1,"flujo-content"],[1,"estado-actual"],["class","estado-header",4,"ngIf"],["class","acciones-disponibles",4,"ngIf"],["class","aviso-completado",4,"ngIf"],["class","flujo-inicial",4,"ngIf"],[1,"estado-header"],[1,"estado-badge",3,"ngClass"],[3,"name"],[1,"estado-text"],["title","Actualizar estado",1,"btn-refresh",3,"click"],[1,"acciones-disponibles"],[1,"section-title"],[1,"acciones-grid"],["class","btn-accion",3,"disabled","title","click",4,"ngFor","ngForOf"],[1,"btn-accion",3,"click","disabled","title"],[1,"accion-text"],[1,"aviso-completado"],["name","checkmark-circle-outline",1,"complete-icon"],[1,"complete-text"],[1,"flujo-inicial"],["class","sin-acciones",4,"ngIf"],[1,"sin-acciones"],["name","time-outline",1,"waiting-icon"],[1,"waiting-text"]],template:function(e,o){e&1&&(t(0,"div",0),P(1,ht,6,0,"div",1)(2,vt,10,1,"div",2)(3,At,6,4,"div",3),a()),e&2&&(l(),g("ngIf",o.loading),l(),g("ngIf",o.error&&!o.loading),l(),g("ngIf",o.estadoFlujo&&!o.loading&&!o.error))},dependencies:[B,Q,H,N,$],styles:[".flujo-estado-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #E2E8F0;overflow:hidden;box-shadow:0 1px 3px #0000001a}.desktop-only[_ngcontent-%COMP%]{display:inline}.mobile-only[_ngcontent-%COMP%]{display:none}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:24px;text-align:center;color:#64748b;font-size:14px}.loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#4f46e5}.loading-state.error-state[_ngcontent-%COMP%], .error-state.error-state[_ngcontent-%COMP%]{color:#dc2626}.loading-state.error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state.error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#dc2626}.error-text[_ngcontent-%COMP%]{word-break:break-word;line-height:1.4}.btn-retry[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#f1f5f9;border:1px solid #CBD5E1;border-radius:8px;font-size:12px;color:#475569;cursor:pointer;transition:all .2s ease}.btn-retry[_ngcontent-%COMP%]:hover{background:#e2e8f0;border-color:#94a3b8}.btn-retry[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.flujo-content[_ngcontent-%COMP%]{padding:20px}.estado-actual[_ngcontent-%COMP%]   .estado-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:500}.estado-actual[_ngcontent-%COMP%]   .estado-badge.pendiente[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.estado-actual[_ngcontent-%COMP%]   .estado-badge.pendiente[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#d97706}.estado-actual[_ngcontent-%COMP%]   .estado-badge.presupuesto[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.estado-actual[_ngcontent-%COMP%]   .estado-badge.presupuesto[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#3b82f6}.estado-actual[_ngcontent-%COMP%]   .estado-badge.en-curso[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.estado-actual[_ngcontent-%COMP%]   .estado-badge.en-curso[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#22c55e}.estado-actual[_ngcontent-%COMP%]   .estado-badge.completado[_ngcontent-%COMP%]{background:#ecfdf5;color:#14532d}.estado-actual[_ngcontent-%COMP%]   .estado-badge.completado[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#10b981}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.estado-actual[_ngcontent-%COMP%]   .estado-text[_ngcontent-%COMP%]{font-weight:500}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#f8fafc;border:1px solid #E2E8F0;border-radius:8px;cursor:pointer;transition:all .2s ease}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#64748b}.resumen-info[_ngcontent-%COMP%]{background:#f8fafc;border-radius:8px;padding:16px}.resumen-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:13px;color:#64748b;font-weight:500}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:13px;color:#1e293b;font-weight:600}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.si[_ngcontent-%COMP%]{color:#059669}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.no[_ngcontent-%COMP%]{color:#dc2626}.acciones-disponibles[_ngcontent-%COMP%]{margin-bottom:24px}.acciones-disponibles[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px;color:#1e293b;font-weight:600}.acciones-disponibles[_ngcontent-%COMP%]   .acciones-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 16px;background:#4f46e5;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;text-align:left}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]:hover:not(:disabled){background:#4338ca;transform:translateY(-1px);box-shadow:0 4px 8px #4f46e54d}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]   .accion-text[_ngcontent-%COMP%]{flex:1}.flujo-inicial[_ngcontent-%COMP%]{margin-bottom:24px}.flujo-inicial[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;color:#1e293b;font-weight:600}.flujo-inicial[_ngcontent-%COMP%]   .flujo-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px;background:#f8fafc;border:1px solid #E2E8F0;border-radius:12px;transition:all .2s ease}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]:hover{background:#f0f9ff;border-color:#4f46e5;transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px;color:#4f46e5;flex-shrink:0;background:#eef2ff;padding:12px;border-radius:50%}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;flex:1}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1e293b}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-description[_ngcontent-%COMP%]{font-size:14px;color:#64748b;line-height:1.4}.sin-acciones[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:20px;color:#64748b;font-size:14px;text-align:center}.sin-acciones[_ngcontent-%COMP%]   .waiting-icon[_ngcontent-%COMP%]{font-size:20px;color:#f59e0b}.sin-acciones[_ngcontent-%COMP%]   .waiting-text[_ngcontent-%COMP%]{font-weight:500}.aviso-completado[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:15px;color:#10b981;background:#ecfdf5;font-size:14px;text-align:center;border-radius:12px;border:1px solid #D1FAE5}.aviso-completado[_ngcontent-%COMP%]   .complete-icon[_ngcontent-%COMP%]{font-size:20px;color:#10b981}.aviso-completado[_ngcontent-%COMP%]   .complete-text[_ngcontent-%COMP%]{font-weight:500}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:inline}.flujo-content[_ngcontent-%COMP%]{padding:16px}.estado-actual[_ngcontent-%COMP%]   .estado-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin-bottom:12px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{width:28px;height:28px}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.resumen-info[_ngcontent-%COMP%]{padding:12px}.resumen-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:12px}.acciones-disponibles[_ngcontent-%COMP%]{margin-bottom:20px}.acciones-disponibles[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:15px;margin-bottom:10px}.acciones-disponibles[_ngcontent-%COMP%]   .acciones-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]{padding:10px 12px;font-size:13px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.flujo-inicial[_ngcontent-%COMP%]{margin-bottom:20px}.flujo-inicial[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:15px;margin-bottom:10px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-info[_ngcontent-%COMP%]{gap:12px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]{padding:16px;gap:12px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;padding:10px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{font-size:14px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-description[_ngcontent-%COMP%]{font-size:12px}.sin-acciones[_ngcontent-%COMP%]{padding:16px}.sin-acciones[_ngcontent-%COMP%]   .complete-icon[_ngcontent-%COMP%]{font-size:18px}.sin-acciones[_ngcontent-%COMP%]   .complete-text[_ngcontent-%COMP%]{font-size:13px}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{padding:20px;font-size:13px}.loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.btn-retry[_ngcontent-%COMP%]{padding:6px 12px;font-size:11px}.btn-retry[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 480px){.flujo-content[_ngcontent-%COMP%]{padding:12px}.estado-actual[_ngcontent-%COMP%]   .estado-header[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:space-between;gap:8px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]{justify-content:center;padding:4px 10px;font-size:12px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{align-self:center;width:26px;height:26px}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.resumen-info[_ngcontent-%COMP%]{padding:10px}.resumen-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{gap:6px}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:11px}.acciones-disponibles[_ngcontent-%COMP%]{margin-bottom:16px}.acciones-disponibles[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.acciones-disponibles[_ngcontent-%COMP%]   .acciones-grid[_ngcontent-%COMP%]{gap:6px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]{padding:8px 10px;font-size:12px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.flujo-inicial[_ngcontent-%COMP%]{margin-bottom:16px}.flujo-inicial[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-info[_ngcontent-%COMP%]{gap:8px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]{padding:12px;gap:8px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;padding:8px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{font-size:13px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-description[_ngcontent-%COMP%]{font-size:11px}.sin-acciones[_ngcontent-%COMP%]{padding:12px;gap:8px}.sin-acciones[_ngcontent-%COMP%]   .complete-icon[_ngcontent-%COMP%]{font-size:16px}.sin-acciones[_ngcontent-%COMP%]   .complete-text[_ngcontent-%COMP%]{font-size:12px}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{padding:16px;font-size:12px;gap:8px}.loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.btn-retry[_ngcontent-%COMP%]{padding:4px 8px;font-size:10px}.btn-retry[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:10px}}"]});let r=s;return r})();function jt(r,s){if(r&1&&(t(0,"tr")(1,"td"),c(2),a(),t(3,"td"),c(4),a(),t(5,"td"),c(6),a(),t(7,"td"),c(8),a(),t(9,"td"),c(10),y(11,"currency"),a(),t(12,"td"),c(13),y(14,"currency"),a()()),r&2){let i=s.$implicit;l(2),m(i.codigo||"-"),l(2),m(i.nombre),l(2),m(i.cantidad),l(2),m(i.unidad),l(2),m(A(11,6,i.precio_pvp,"EUR","symbol","1.2-2")),l(3),m(A(14,11,i.precio_pvp*i.cantidad,"EUR","symbol","1.2-2"))}}function It(r,s){if(r&1&&(t(0,"div",29)(1,"table",30)(2,"thead")(3,"tr")(4,"th"),c(5,"C\xF3digo"),a(),t(6,"th"),c(7,"Material"),a(),t(8,"th"),c(9,"Cantidad"),a(),t(10,"th"),c(11,"Unidad"),a(),t(12,"th"),c(13,"Precio Unit."),a(),t(14,"th"),c(15,"Total"),a()()(),t(16,"tbody"),P(17,jt,15,16,"tr",31),a(),t(18,"tfoot")(19,"tr",32)(20,"td",33)(21,"strong"),c(22,"Total Materiales:"),a()(),t(23,"td")(24,"strong"),c(25),y(26,"currency"),a()()()()()()),r&2){let i=_();l(17),g("ngForOf",i.materialesUtilizados),l(8),m(A(26,2,i.calcularTotalMateriales(),"EUR","symbol","1.2-2"))}}function Ft(r,s){if(r&1&&(t(0,"li"),c(1),a()),r&2){let i=s.$implicit;l(),m(i.nombre)}}function Vt(r,s){if(r&1&&(t(0,"div",34)(1,"ul",35),P(2,Ft,2,1,"li",31),a()()),r&2){let i=_();l(2),g("ngForOf",i.materialesUtilizados)}}function Tt(r,s){r&1&&(t(0,"div",36)(1,"p"),c(2,"No se utilizaron materiales en este trabajo"),a()())}function Dt(r,s){if(r&1&&(t(0,"div",43)(1,"span",44),c(2,"Monto estimado:"),a(),t(3,"span",45),c(4),y(5,"currency"),a()()),r&2){let i=_(2);l(4),m(A(5,1,i.albaran.presupuesto_necesario,"EUR","symbol","1.2-2"))}}function Rt(r,s){if(r&1){let i=x();t(0,"div",46)(1,"p",47),c(2," Puedes crear un presupuesto basado en este albar\xE1n con los materiales y tiempo ya registrados. "),a(),t(3,"button",48),u("click",function(){C(i);let e=_(2);return f(e.crearPresupuestoDesdeAlbaran())}),p(4,"ion-icon",49),c(5," Crear Presupuesto "),a()()}}function Ht(r,s){if(r&1&&(t(0,"div",16)(1,"h3"),c(2,"Presupuesto"),a(),t(3,"div",37)(4,"div",38),p(5,"ion-icon",39),t(6,"span",40),c(7,"Este albar\xE1n requiere presupuesto"),a()(),P(8,Dt,6,6,"div",41)(9,Rt,6,0,"div",42),a()()),r&2){let i=_();l(8),g("ngIf",i.albaran.presupuesto_necesario>0),l(),g("ngIf",i.puedeCrearPresupuesto())}}function Nt(r,s){if(r&1&&(t(0,"div",18)(1,"label"),c(2,"DNI:"),a(),t(3,"span"),c(4),a()()),r&2){let i=_(2);l(4),m(i.albaran.dni_cliente)}}function Bt(r,s){if(r&1&&(t(0,"div",18)(1,"label"),c(2,"Firmado por:"),a(),t(3,"span"),c(4),a()()),r&2){let i=_(2);l(4),m(i.albaran.nombre_firma)}}function $t(r,s){if(r&1&&(t(0,"div",16)(1,"h3"),c(2,"Informaci\xF3n del Cliente"),a(),t(3,"div",17),P(4,Nt,5,1,"div",25)(5,Bt,5,1,"div",25),a()()),r&2){let i=_();l(4),g("ngIf",i.albaran.dni_cliente),l(),g("ngIf",i.albaran.nombre_firma)}}function qt(r,s){if(r&1&&(t(0,"div",53),p(1,"img",54),t(2,"p",55),c(3,"Firma digital del cliente"),a()()),r&2){let i=_(2);l(),g("src",i.albaran.firma_url,D)}}function Ut(r,s){if(r&1&&(t(0,"div",56)(1,"p"),c(2,"El cliente ha firmado este albar\xE1n"),a(),t(3,"div",57),p(4,"ion-icon",58),t(5,"span"),c(6),a()()()),r&2){let i=_(2);l(6),m(i.albaran.nombre_firma)}}function Lt(r,s){if(r&1&&(t(0,"div",16)(1,"h3"),c(2,"Firma del Cliente"),a(),t(3,"div",50),P(4,qt,4,1,"div",51)(5,Ut,7,1,"div",52),a()()),r&2){let i=_();l(4),g("ngIf",i.albaran.firma_url),l(),g("ngIf",!i.albaran.firma_url&&i.albaran.nombre_firma)}}function Gt(r,s){if(r&1&&(t(0,"div",16)(1,"h3"),c(2,"Observaciones"),a(),t(3,"div",59)(4,"p"),c(5),a()()()),r&2){let i=_();l(5),m(i.albaran.observaciones)}}function Wt(r,s){if(r&1&&(t(0,"div",18)(1,"label"),c(2,"Fecha de creaci\xF3n:"),a(),t(3,"span"),c(4),a()()),r&2){let i=_();l(4),m(i.formatearFecha(i.albaran.fecha_creacion))}}var Le=(()=>{let s=class s{constructor(n,e,o){this.modalController=n,this.router=e,this.presupuestosService=o,I({close:W,documentTextOutline:U,personOutline:X,timeOutline:Z,calendarOutline:Cn,cubeOutline:fn,checkmarkCircleOutline:q,warningOutline:nn,refreshOutline:L,downloadOutline:ke,printOutline:Fe,createOutline:K,calculator:bn})}ngOnInit(){console.log("Modal de albar\xE1n cargado:",this.albaran)}cerrarModal(){this.modalController.dismiss()}descargarPDF(){console.log("Descargando albar\xE1n como PDF..."),alert("Funcionalidad de descarga de PDF en desarrollo")}imprimirAlbaran(){console.log("Imprimiendo albar\xE1n..."),window.print()}tieneFirma(){return!!(this.albaran.firma_url||this.albaran.nombre_firma)}getEstadoClass(n){return"badge-"+n.toLowerCase().replace(/ /g,"-")}get materialesUtilizados(){return this.albaran.repuestos&&this.albaran.repuestos.length>0?(console.log("\u{1F4CB} Usando repuestos de tabla repuestos_albaran:",this.albaran.repuestos),this.albaran.repuestos):this.albaran.repuestos_utilizados&&this.albaran.repuestos_utilizados.length>0?(console.log("\u{1F4CB} Usando repuestos_utilizados legacy:",this.albaran.repuestos_utilizados),typeof this.albaran.repuestos_utilizados[0]=="object"?this.albaran.repuestos_utilizados:this.albaran.repuestos_utilizados.map(n=>{if(typeof n=="string")try{let e=JSON.parse(n);return{nombre:e.nombre||n,cantidad:Number(e.cantidad)||1,precio_neto:Number(e.precio_neto)||0,precio_pvp:Number(e.precio_pvp)||0,unidad:e.unidad||"unidad",codigo:e.codigo||""}}catch{return{nombre:n,cantidad:1,precio_neto:0,precio_pvp:0,unidad:"unidad",codigo:""}}return n})):[]}repuestosCompletos(){let n=this.materialesUtilizados;return n.length>0&&n[0].precio_pvp!==void 0}calcularTotalMateriales(){return this.materialesUtilizados.reduce((n,e)=>n+e.precio_pvp*e.cantidad,0)}formatearFecha(n){return n?new Date(n).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"No especificada"}formatearHora(n){return n||"No especificada"}getEstadoColor(n){switch(n){case"Finalizado":return"#10B981";case"Presupuesto pendiente":return"#F59E0B";case"Otra visita":return"#EF4444";default:return"#6B7280"}}puedeCrearPresupuesto(){var n;return this.albaran.estado_cierre==="Presupuesto pendiente"&&((n=this.aviso)==null?void 0:n.id)}crearPresupuestoDesdeAlbaran(){if(!this.puedeCrearPresupuesto()){console.warn("No se puede crear presupuesto desde este albar\xE1n");return}console.log("\u{1F3AF} Creando presupuesto desde albar\xE1n:",this.albaran);let n=this.prepararMaterialesParaPresupuesto(),e={aviso_id:this.aviso.id,albaran_id:this.albaran.id,horas_estimadas:this.calcularHorasEstimadas(),total_estimado:this.calcularTotalEstimado(),materiales:n};console.log("\u{1F4CB} Datos para el presupuesto:",e),this.presupuestosService.crearPresupuesto(e).subscribe({next:o=>{console.log("\u2705 Presupuesto creado exitosamente:",o),confirm(`\u2705 Presupuesto creado exitosamente.

\xBFDeseas ir a editarlo ahora para ajustar detalles?`)?(this.modalController.dismiss({accion:"presupuesto_creado",presupuesto:o},"confirm"),this.router.navigate(["/presupuestos/crear"],{queryParams:{id:o.id,edit:"true"}})):this.modalController.dismiss({accion:"presupuesto_creado",presupuesto:o,mensaje:"Presupuesto creado exitosamente"},"confirm")},error:o=>{console.error("\u274C Error al crear presupuesto:",o),alert("Error al crear el presupuesto: "+(o.message||"Error desconocido"))}})}prepararMaterialesParaPresupuesto(){return this.materialesUtilizados.map(e=>({material_id:e.codigo||this.generarIdTemporal(),cantidad_estimada:e.cantidad,precio_neto_al_momento:e.precio_neto||e.precio_pvp,producto:{id:e.codigo||this.generarIdTemporal(),nombre:e.nombre,precio_neto:e.precio_neto||e.precio_pvp,unidad:e.unidad||"unidad"}}))}calcularHorasEstimadas(){let n=this.albaran.hora_entrada,e=this.albaran.hora_salida;if(n&&e){let[o,d]=n.split(":").map(Number),[b,M]=e.split(":").map(Number),w=o*60+d,F=(b*60+M-w)/60;return Math.max(F,1)}return 2}calcularTotalEstimado(){let n=this.calcularTotalMateriales(),d=this.calcularHorasEstimadas()*50;return n+d}generarIdTemporal(){return"temp_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}};s.\u0275fac=function(e){return new(e||s)(h(J),h(Y),h(hn))},s.\u0275cmp=R({type:s,selectors:[["app-ver-albaran-modal"]],inputs:{albaran:"albaran",aviso:"aviso"},decls:103,vars:21,consts:[[1,"header-content"],["name","document-text-outline"],[1,"header-actions"],["title","Descargar PDF",1,"btn-secondary",3,"click"],["name","download-outline"],[1,"desktop-only"],["title","Imprimir",1,"btn-secondary",3,"click"],["name","print-outline"],["title","Cerrar",1,"close-button",3,"click"],["name","close"],[1,"subtitle"],[1,"modal-body"],[1,"modal-content"],[1,"estado-section"],[1,"estado-badge"],["name","checkmark-circle-outline"],[1,"info-section"],[1,"info-grid"],[1,"info-item"],[1,"descripcion-content"],[1,"materiales-content"],["class","materiales-tabla",4,"ngIf"],["class","materiales-lista",4,"ngIf"],["class","no-materiales",4,"ngIf"],["class","info-section",4,"ngIf"],["class","info-item",4,"ngIf"],[1,"button-group"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"materiales-tabla"],[1,"materiales-table"],[4,"ngFor","ngForOf"],[1,"total-row"],["colspan","5"],[1,"materiales-lista"],[1,"repuestos-list"],[1,"no-materiales"],[1,"presupuesto-content"],[1,"presupuesto-status"],["name","warning-outline",1,"warning-icon"],[1,"status-text"],["class","presupuesto-amount",4,"ngIf"],["class","presupuesto-actions",4,"ngIf"],[1,"presupuesto-amount"],[1,"amount-label"],[1,"amount-value"],[1,"presupuesto-actions"],[1,"action-description"],[1,"btn-crear-presupuesto",3,"click"],["name","calculator"],[1,"firma-content"],["class","firma-imagen",4,"ngIf"],["class","firma-texto",4,"ngIf"],[1,"firma-imagen"],["alt","Firma del cliente",1,"firma-img",3,"src"],[1,"firma-caption"],[1,"firma-texto"],[1,"firma-nombre"],["name","person-outline"],[1,"observaciones-content"]],template:function(e,o){e&1&&(t(0,"ion-header")(1,"ion-toolbar")(2,"div",0)(3,"h2"),p(4,"ion-icon",1),c(5),a(),t(6,"div",2)(7,"button",3),u("click",function(){return o.descargarPDF()}),p(8,"ion-icon",4),t(9,"span",5),c(10,"PDF"),a()(),t(11,"button",6),u("click",function(){return o.imprimirAlbaran()}),p(12,"ion-icon",7),t(13,"span",5),c(14,"Imprimir"),a()(),t(15,"button",8),u("click",function(){return o.cerrarModal()}),p(16,"ion-icon",9),a()()(),t(17,"p",10),c(18,"Detalles del albar\xE1n de trabajo"),a()()(),t(19,"ion-content",11)(20,"div",12)(21,"div",13)(22,"div",14),p(23,"ion-icon",15),c(24),a()(),t(25,"div",16)(26,"h3"),c(27,"Informaci\xF3n del Aviso"),a(),t(28,"div",17)(29,"div",18)(30,"label"),c(31,"Cliente:"),a(),t(32,"span"),c(33),a()(),t(34,"div",18)(35,"label"),c(36,"Direcci\xF3n:"),a(),t(37,"span"),c(38),a()(),t(39,"div",18)(40,"label"),c(41,"Fecha de creaci\xF3n:"),a(),t(42,"span"),c(43),a()()()(),t(44,"div",16)(45,"h3"),c(46,"Fechas y Horarios"),a(),t(47,"div",17)(48,"div",18)(49,"label"),c(50,"Fecha de cierre:"),a(),t(51,"span"),c(52),a()(),t(53,"div",18)(54,"label"),c(55,"Hora de entrada:"),a(),t(56,"span"),c(57),a()(),t(58,"div",18)(59,"label"),c(60,"Hora de salida:"),a(),t(61,"span"),c(62),a()()()(),t(63,"div",16)(64,"h3"),c(65,"Descripci\xF3n del Trabajo Realizado"),a(),t(66,"div",19)(67,"p"),c(68),a()()(),t(69,"div",16)(70,"h3"),c(71,"Materiales Utilizados"),a(),t(72,"div",20),P(73,It,27,7,"div",21)(74,Vt,3,1,"div",22)(75,Tt,3,0,"div",23),a()(),P(76,Ht,10,2,"div",24)(77,$t,6,2,"div",24)(78,Lt,6,2,"div",24)(79,Gt,6,1,"div",24),t(80,"div",16)(81,"h3"),c(82,"Informaci\xF3n Adicional"),a(),t(83,"div",17)(84,"div",18)(85,"label"),c(86,"ID del trabajo:"),a(),t(87,"span"),c(88),a()(),t(89,"div",18)(90,"label"),c(91,"ID del aviso:"),a(),t(92,"span"),c(93),a()(),P(94,Wt,5,1,"div",25),a()()()(),t(95,"ion-footer")(96,"ion-toolbar")(97,"div",26)(98,"button",27),u("click",function(){return o.cerrarModal()}),c(99," Cerrar "),a(),t(100,"button",28),u("click",function(){return o.imprimirAlbaran()}),p(101,"ion-icon",7),c(102," Imprimir Albar\xE1n "),a()()()()),e&2&&(l(5),k(" Albar\xE1n #",o.albaran.id==null?null:o.albaran.id.substring(0,8)," "),l(17),Qn("background-color",o.getEstadoColor(o.albaran.estado_cierre)),l(2),k(" ",o.albaran.estado_cierre," "),l(9),m((o.aviso==null?null:o.aviso.nombre_cliente_aviso)||"No especificado"),l(5),m((o.aviso==null?null:o.aviso.direccion_cliente_aviso)||"No especificada"),l(5),m(o.formatearFecha(o.aviso==null?null:o.aviso.fecha_creacion)),l(9),m(o.formatearFecha(o.albaran.fecha_cierre)),l(5),m(o.formatearHora(o.albaran.hora_entrada)),l(5),m(o.formatearHora(o.albaran.hora_salida)),l(6),m(o.albaran.descripcion_trabajo_realizado),l(5),g("ngIf",o.repuestosCompletos()&&o.materialesUtilizados.length>0),l(),g("ngIf",!o.repuestosCompletos()&&o.materialesUtilizados.length>0),l(),g("ngIf",o.materialesUtilizados.length===0),l(),g("ngIf",o.albaran.estado_cierre==="Presupuesto pendiente"),l(),g("ngIf",o.albaran.dni_cliente||o.albaran.nombre_firma),l(),g("ngIf",o.tieneFirma()),l(),g("ngIf",o.albaran.observaciones),l(9),m(o.albaran.trabajo_id==null?null:o.albaran.trabajo_id.substring(0,8)),l(5),m(o.albaran.aviso_id==null?null:o.albaran.aviso_id.substring(0,8)),l(),g("ngIf",o.albaran.fecha_creacion))},dependencies:[B,H,N,gn,$,un,mn,pn,_n],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #fff;--border-color: #e5e7eb;--color: #111827}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#111827;display:flex;align-items:center;gap:12px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6b7280;margin-top:0;font-size:14px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#2563eb1a;color:#2563eb;border:1px solid rgba(37,99,235,.2);padding:8px 16px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease;display:flex;align-items:center;gap:8px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#2563eb26;border-color:#2563eb4d}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]   .desktop-only[_ngcontent-%COMP%]{display:none}}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#6b7280;display:flex;align-items:center;justify-content:center}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{color:#111827}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}ion-content[_ngcontent-%COMP%]{--background: #fff;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0}ion-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex;flex-direction:column;min-height:0}ion-content[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{flex:1;overflow:auto;position:relative;min-height:0;height:100%;padding:24px;max-height:70vh;overflow-y:auto}@media (max-width: 768px){ion-content[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:20px 16px}}@media (max-width: 480px){ion-content[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:16px 12px}}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #fff;--border-color: #e5e7eb}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end}@media (max-width: 768px){ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{flex-direction:column}}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-size:14px;font-weight:500;display:flex;align-items:center;gap:8px;cursor:pointer;transition:all .2s}@media (max-width: 768px){ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{background:none;border:1px solid #d1d5db;color:#374151}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f8fafc;border-color:#9ca3af}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#2563eb;border:1px solid #2563eb;color:#fff}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1d4ed8;border-color:#1d4ed8}.estado-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.estado-section[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;border-radius:50px;color:#fff;font-size:16px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 4px 12px #00000026}.estado-section[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.info-section[_ngcontent-%COMP%]{margin-bottom:32px;padding:24px;background:#f9fafb;border-radius:12px;border:1px solid #E5E7EB}@media (max-width: 768px){.info-section[_ngcontent-%COMP%]{padding:16px;margin-bottom:24px}}@media (max-width: 480px){.info-section[_ngcontent-%COMP%]{padding:12px;margin-bottom:20px}}.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:18px;font-weight:600;color:#1f2937;display:flex;align-items:center;gap:8px;padding-bottom:12px;border-bottom:2px solid #E5E7EB}@media (max-width: 768px){.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;margin-bottom:16px}}@media (max-width: 480px){.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px}}.info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}@media (max-width: 768px){.info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}}.info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;color:#1f2937;font-weight:500}.info-section[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;line-height:1.6;color:#374151;background:#fff;padding:16px;border-radius:8px;border:1px solid #E5E7EB}.info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]{overflow-x:auto}.info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #0000001a}.info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #E5E7EB}@media (max-width: 768px){.info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px}}.info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f3f4f6;font-weight:600;color:#374151;font-size:14px;text-transform:uppercase;letter-spacing:.5px}.info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#1f2937}@media (max-width: 768px){.info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px}}.info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{background:#f0f9ff;font-weight:600}.info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-tabla[_ngcontent-%COMP%]   .materiales-table[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#1e40af}.info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-lista[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-wrap:wrap;gap:8px}.info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .materiales-lista[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#e0f2fe;color:#0c4a6e;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:500;border:1px solid #BAE6FD}.info-section[_ngcontent-%COMP%]   .materiales-content[_ngcontent-%COMP%]   .no-materiales[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#6b7280;font-style:italic}.info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#fef3c7;border:1px solid #F59E0B;border-radius:8px;margin-bottom:16px}.info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-status[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{font-size:20px;color:#f59e0b}.info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{font-weight:600;color:#92400e}.info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-amount[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;background:#f0f9ff;padding:16px;border-radius:8px;border:1px solid #BAE6FD;margin-bottom:16px}.info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-amount[_ngcontent-%COMP%]   .amount-label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#0369a1}.info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-amount[_ngcontent-%COMP%]   .amount-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#0369a1}.info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-actions[_ngcontent-%COMP%]   .action-description[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0 0 16px;line-height:1.5}.info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-actions[_ngcontent-%COMP%]   .btn-crear-presupuesto[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 20px;background:#10b981;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;width:100%;justify-content:center}.info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-actions[_ngcontent-%COMP%]   .btn-crear-presupuesto[_ngcontent-%COMP%]:hover{background:#059669;transform:translateY(-1px);box-shadow:0 4px 8px #10b9814d}.info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-actions[_ngcontent-%COMP%]   .btn-crear-presupuesto[_ngcontent-%COMP%]:active{transform:translateY(0)}.info-section[_ngcontent-%COMP%]   .presupuesto-content[_ngcontent-%COMP%]   .presupuesto-actions[_ngcontent-%COMP%]   .btn-crear-presupuesto[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-imagen[_ngcontent-%COMP%]{text-align:center}.info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-imagen[_ngcontent-%COMP%]   .firma-img[_ngcontent-%COMP%]{max-width:100%;max-height:200px;border:2px solid #E5E7EB;border-radius:8px;box-shadow:0 4px 12px #0000001a}.info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-imagen[_ngcontent-%COMP%]   .firma-caption[_ngcontent-%COMP%]{margin-top:12px;font-size:14px;color:#6b7280;font-style:italic}.info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-texto[_ngcontent-%COMP%]{text-align:center;padding:20px;background:#fff;border-radius:8px;border:1px solid #E5E7EB}.info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-texto[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;color:#374151}.info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-texto[_ngcontent-%COMP%]   .firma-nombre[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;font-size:18px;font-weight:600;color:#059669}.info-section[_ngcontent-%COMP%]   .firma-content[_ngcontent-%COMP%]   .firma-texto[_ngcontent-%COMP%]   .firma-nombre[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.info-section[_ngcontent-%COMP%]   .observaciones-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;line-height:1.6;color:#374151;background:#fff;padding:16px;border-radius:8px;border:1px solid #E5E7EB;font-style:italic}@media print{ion-header[_ngcontent-%COMP%], ion-footer[_ngcontent-%COMP%]{display:none}ion-content[_ngcontent-%COMP%]{--background: white}ion-content[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:0;max-height:none;overflow:visible}}"]});let r=s;return r})();var Qt=["fileInput"],Yt=(r,s,i)=>({finalizado:r,"presupuesto-pendiente":s,"otra-visita":i}),Jt=(r,s,i)=>({green:r,yellow:s,blue:i});function Kt(r,s){r&1&&(t(0,"div",25)(1,"div",26),p(2,"ion-icon",27),t(3,"p"),c(4,"Cargando aviso..."),a()()())}function Xt(r,s){if(r&1){let i=x();t(0,"div",28)(1,"div",29),p(2,"ion-icon",30),t(3,"p"),c(4),a(),t(5,"button",31),u("click",function(){C(i);let e=_();return f(e.cargarAviso())}),p(6,"ion-icon",32),c(7," Reintentar "),a()()()}if(r&2){let i=_();l(4),m(i.error)}}function Zt(r,s){if(r&1){let i=x();t(0,"button",64),u("click",function(){C(i);let e=_(2);return f(e.completarAviso())}),p(1,"ion-icon",65),t(2,"span",18),c(3,"Completar Aviso"),a(),t(4,"span",19),c(5,"Completar"),a()()}}function no(r,s){if(r&1){let i=x();t(0,"button",66),u("click",function(){C(i);let e=_(2);return f(e.editarAviso())}),p(1,"ion-icon",67),t(2,"span",18),c(3,"Editar aviso"),a(),t(4,"span",19),c(5,"Editar"),a()()}}function eo(r,s){r&1&&(t(0,"div",68),p(1,"ion-icon",69),t(2,"span"),c(3,"Aviso completado"),a()())}function to(r,s){if(r&1&&(t(0,"div",70),p(1,"ion-icon",71),t(2,"span"),c(3),a()()),r&2){let i=_(2);l(3),m(i.aviso.nombre_contacto)}}function oo(r,s){if(r&1&&(t(0,"div",72),p(1,"ion-icon",73),t(2,"a",74),c(3),a()()),r&2){let i=_(2);l(2),zn("href","tel:",i.aviso.telefono_cliente_aviso,"",D),l(),m(i.aviso.telefono_cliente_aviso)}}function ao(r,s){if(r&1&&(t(0,"div",72),p(1,"ion-icon",75),t(2,"a",74),c(3),a()()),r&2){let i=_(2);l(2),zn("href","mailto:",i.aviso.cliente==null?null:i.aviso.cliente.email,"",D),l(),m(i.aviso.cliente==null?null:i.aviso.cliente.email)}}function io(r,s){if(r&1){let i=x();t(0,"div",4)(1,"div",5)(2,"div",33)(3,"div",34)(4,"button",35),u("click",function(){C(i);let e=_();return f(e.volverALista())}),p(5,"ion-icon",36),t(6,"span",18),c(7,"Volver"),a(),t(8,"span",19),c(9,"Volver"),a()()()(),t(10,"div",37)(11,"button",38),u("click",function(){C(i);let e=_();return f(e.forzarRecargaDatos())}),p(12,"ion-icon",32),t(13,"span",18),c(14,"Recargar"),a(),t(15,"span",19),c(16,"Recargar"),a()(),P(17,Zt,6,0,"button",39)(18,no,6,0,"button",40)(19,eo,4,0,"div",41),a(),t(20,"span",42),c(21),y(22,"titlecase"),a()(),t(23,"h2",43)(24,"span",18),c(25),y(26,"titlecase"),a()(),t(27,"div",44)(28,"div",45)(29,"div",46)(30,"label"),c(31,"Estado"),a(),t(32,"span",47),c(33),a()(),t(34,"div",46)(35,"label"),c(36,"Urgente"),a(),t(37,"span",48),c(38),a()(),t(39,"div",46)(40,"label"),c(41,"Fecha de creaci\xF3n"),a(),t(42,"span"),c(43),y(44,"date"),a()()(),t(45,"div",49)(46,"div",46)(47,"label"),c(48,"Descripci\xF3n Detallada del Problema/Petici\xF3n"),a(),t(49,"p",50),c(50),a()()(),t(51,"div",51)(52,"label"),c(53,"Cliente"),a(),t(54,"div",52)(55,"span",53),c(56),a(),t(57,"a",54),u("click",function(){C(i);let e=_();return f(e.verCliente())}),t(58,"span",18),c(59,"Ver cliente"),a()()()(),t(60,"div",55)(61,"label"),c(62,"Direcci\xF3n"),a(),t(63,"div",56)(64,"span",57),c(65),a(),t(66,"button",58),u("click",function(){C(i);let e=_();return f(e.verMapa())}),p(67,"ion-icon",59),a()()(),t(68,"div",60)(69,"label"),c(70,"Contacto Cliente"),a(),t(71,"div",61),P(72,to,4,1,"div",62)(73,oo,4,3,"div",63)(74,ao,4,3,"div",63),a()()()()}if(r&2){let i=_();l(17),g("ngIf",(i.aviso==null?null:i.aviso.estado)!=="Completado"),l(),g("ngIf",(i.aviso==null?null:i.aviso.estado)!=="Completado"),l(),g("ngIf",(i.aviso==null?null:i.aviso.estado)==="Completado"),l(2),G("Aviso ",i.aviso.numero_secuencial||i.aviso.id," - ",Fn(22,19,(i.aviso==null?null:i.aviso.tipo)||"No especificado"),""),l(4),G("Aviso ",i.aviso.numero_secuencial||i.aviso.id," - ",Fn(26,21,(i.aviso==null?null:i.aviso.tipo)||"No especificado"),""),l(7),g("ngClass",i.getEstadoClass(i.aviso.estado)),l(),m(i.aviso.estado),l(4),Yn("urgent",i.aviso.urgencia==="Alta"||i.aviso.es_urgente),l(),k(" ",i.aviso.urgencia==="Alta"||i.aviso.es_urgente?"S\xED":"No"," "),l(5),m(an(44,23,i.aviso.fecha_creacion,"dd/MM/yyyy")),l(7),m(i.aviso==null?null:i.aviso.descripcion_problema),l(6),m(i.aviso.nombre_cliente_aviso),l(9),m(i.aviso.direccion_cliente_aviso),l(7),g("ngIf",i.aviso.nombre_contacto),l(),g("ngIf",i.aviso.telefono_cliente_aviso),l(),g("ngIf",i.aviso.cliente==null?null:i.aviso.cliente.email)}}function ro(r,s){if(r&1){let i=x();t(0,"div",76)(1,"button",66),u("click",function(){C(i);let e=_();return f(e.crearAlbaran())}),p(2,"ion-icon",17),t(3,"span",18),c(4,"Crear Albar\xE1n"),a(),t(5,"span",19),c(6,"Crear Albar\xE1n"),a()()()}}function co(r,s){if(r&1){let i=x();t(0,"div",77)(1,"div",78)(2,"app-flujo-estado",79),u("accionEjecutada",function(e){C(i);let o=_();return f(o.onAccionFlujoEjecutada(e))}),a()()()}if(r&2){let i=_();l(2),g("avisoId",(i.aviso==null?null:i.aviso.id)||"")}}function lo(r,s){r&1&&(t(0,"div",80),p(1,"ion-icon",81),t(2,"p"),c(3,"No hay albaranes cerrados para este aviso"),a(),t(4,"p",82),c(5,"Los albaranes aparecer\xE1n aqu\xED una vez que se cierren los trabajos realizados"),a()())}function so(r,s){r&1&&(t(0,"span",106),p(1,"ion-icon",107),a())}function go(r,s){if(r&1&&(t(0,"div",108)(1,"span",109),c(2),a(),t(3,"span",110),c(4,"repuestos"),a()()),r&2){let i=_().$implicit;l(2),k(" ",i.repuestos&&i.repuestos.length>0?i.repuestos.length:i.repuestos_utilizados.length," ")}}function po(r,s){r&1&&(t(0,"div",111),c(1," Sin repuestos "),a())}function _o(r,s){if(r&1&&(t(0,"div",112)(1,"span",113),c(2),y(3,"number"),a()()),r&2){let i=_().$implicit;l(2),k(" \u20AC",an(3,1,i.presupuesto_necesario,"1.2-2")," ")}}function uo(r,s){if(r&1){let i=x();t(0,"div",90)(1,"div",91),c(2),a(),t(3,"div",92)(4,"div",93)(5,"span",94),c(6),a(),P(7,so,2,0,"span",95),a()(),t(8,"div",96),c(9),y(10,"date"),a(),t(11,"div",97),P(12,go,5,1,"div",98)(13,po,2,0,"div",99),a(),t(14,"div",100)(15,"button",101),u("click",function(){let e=C(i).$implicit,o=_(2);return f(o.verAlbaran(e))}),p(16,"ion-icon",102),a(),t(17,"button",103),u("click",function(){let e=C(i).$implicit,o=_(2);return f(o.eliminarAlbaran(e))}),p(18,"ion-icon",104),a(),P(19,_o,4,4,"div",105),a()()}if(r&2){let i=s.$implicit,n=s.index,e=_(2);g("ngClass",In(12,Yt,i.estado_cierre==="Finalizado",i.estado_cierre==="Presupuesto pendiente",i.estado_cierre==="Otra visita")),l(2),m(n+1),l(3),g("ngClass",In(16,Jt,i.estado_cierre==="Finalizado",i.estado_cierre==="Presupuesto pendiente",i.estado_cierre==="Otra visita")),l(),k(" ",i.estado_cierre," "),l(),g("ngIf",e.tienePresupuestoAsociado(i)),l(2),m(an(10,9,i.fecha_cierre,"dd/MM/yyyy")),l(3),g("ngIf",i.repuestos&&i.repuestos.length>0||i.repuestos_utilizados&&i.repuestos_utilizados.length>0),l(),g("ngIf",(!i.repuestos||i.repuestos.length===0)&&(!i.repuestos_utilizados||i.repuestos_utilizados.length===0)),l(6),g("ngIf",i.presupuesto_necesario>0)}}function mo(r,s){if(r&1&&(t(0,"div",83)(1,"div",84)(2,"div",85)(3,"div",86)(4,"div",87),c(5,"N\xFAmero"),a(),t(6,"div",87),c(7,"Estado"),a(),t(8,"div",87),c(9,"Fecha"),a(),t(10,"div",87),c(11,"Repuestos"),a(),t(12,"div",87),c(13,"Acciones"),a()()(),t(14,"div",88),P(15,uo,20,20,"div",89),a()()()),r&2){let i=_();l(15),g("ngForOf",i.aviso==null?null:i.aviso.albaranes)}}function bo(r,s){r&1&&(t(0,"div",114),p(1,"ion-icon",27),t(2,"p"),c(3,"Subiendo im\xE1genes..."),a()())}function Co(r,s){r&1&&(t(0,"div",115),p(1,"ion-icon",116),t(2,"p"),c(3,"No hay im\xE1genes disponibles para este aviso"),a()())}function fo(r,s){if(r&1){let i=x();t(0,"div",117),p(1,"img",118),t(2,"div",119)(3,"span",120),c(4),a(),t(5,"span",121),c(6),y(7,"date"),a()(),t(8,"button",122),u("click",function(){let e=C(i).$implicit,o=_();return f(o.eliminarFoto(e))}),p(9,"ion-icon",104),a()()}if(r&2){let i=s.$implicit;l(),g("src",i.url,D)("alt",i.descripcion||"Imagen del aviso"),l(3),m(i.descripcion||"Imagen del aviso"),l(2),m(an(7,4,i.fecha_subida,"dd/MM/yyyy HH:mm"))}}I({close:W,pencilOutline:rn,navigate:Hn,person:Nn,call:Tn,mail:Dn,mapOutline:Rn,arrowBackOutline:Vn});var ia=(()=>{let s=class s{constructor(n,e,o,d,b,M){this.route=n,this.router=e,this.avisosService=o,this.albaranesService=d,this.modalController=b,this.flujoAvisosService=M,this.vistaGaleria="grid",this.aviso=null,this.loading=!1,this.error=null,this.subiendoImagenes=!1,this.destroy$=new sn,I({refreshOutline:L,alertCircleOutline:Oe,arrowBackOutline:Vn,close:W,pencilOutline:rn,checkmarkCircleOutline:q,navigate:Hn,person:Nn,call:Tn,mail:Dn,addCircle:Pe,documentTextOutline:U,calculator:bn,eyeOutline:Pn,imagesOutline:je,trashOutline:On,informationCircleOutline:Mn,constructOutline:Ee,bugOutline:he,personOutline:X,gridOutline:Ae,listOutline:Ie,chevronDownOutline:ye,ellipsisVerticalOutline:Se,ellipsisVertical:ze,add:fe,mapOutline:Rn})}ngOnInit(){this.cargarAviso()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarAviso(){console.log("\u{1F504} cargarAviso() ejecut\xE1ndose..."),this.loading=!0,this.error=null,this.route.params.pipe(S(this.destroy$)).subscribe(n=>{let e=n["id-aviso"];console.log("\u{1F50D} ID de aviso obtenido de la URL:",e),e?this.avisosService.getResumenCompletoAviso(e).pipe(S(this.destroy$)).subscribe({next:o=>{var d;console.log("\u2705 Aviso cargado exitosamente:",o.id,"Estado:",o.estado),console.log("\u{1F4CA} Albaranes cargados:",((d=o.albaranes)==null?void 0:d.length)||0),this.aviso=o,this.loading=!1,setTimeout(()=>{this.flujoComponent&&this.flujoComponent.recargarFlujo()},100)},error:o=>{console.error("\u274C Error al cargar el aviso:",o),this.error="Error al cargar el aviso. Por favor, int\xE9ntalo de nuevo.",this.loading=!1}}):(this.error="ID de aviso no v\xE1lido",this.loading=!1)})}cambiarVistaGaleria(n){this.vistaGaleria=n.detail.value}forzarRecargaDatos(){this.error=null,this.cargarAviso(),setTimeout(()=>{this.flujoComponent&&this.flujoComponent.recargarFlujo()},200)}recargarAlbaranes(){var n;(n=this.aviso)!=null&&n.id&&(console.log("\u{1F504} Recargando albaranes del aviso:",this.aviso.id),this.avisosService.getResumenCompletoAviso(this.aviso.id).pipe(S(this.destroy$)).subscribe({next:e=>{var o;console.log("\u2705 Albaranes recargados:",((o=e.albaranes)==null?void 0:o.length)||0),this.aviso=e},error:e=>{console.error("\u274C Error al recargar albaranes:",e)}}))}volverALista(){let n=document.referrer;n&&n.includes("/historial")?this.router.navigate(["/historial"]):this.router.navigate(["/avisos"])}verCliente(){var n,e;(e=(n=this.aviso)==null?void 0:n.cliente)!=null&&e.id&&console.log("Navegar al cliente:",this.aviso.cliente.id)}verMapa(){var n;if((n=this.aviso)!=null&&n.direccion_cliente_aviso){let e=encodeURIComponent(this.aviso.direccion_cliente_aviso);window.open(`https://www.google.com/maps/search/?api=1&query=${e}`,"_blank")}}editarAviso(){var n;(n=this.aviso)!=null&&n.id&&this.abrirModalEditarAviso()}abrirModalEditarAviso(){return j(this,null,function*(){var d;if(!((d=this.aviso)!=null&&d.id))return;let n=yield this.modalController.create({component:He,cssClass:"modal-crear-aviso",componentProps:{modoEdicion:!0,avisoExistente:this.aviso}});yield n.present();let{data:e,role:o}=yield n.onWillDismiss();if(o==="confirm"&&e)try{console.log("Datos del formulario de edici\xF3n:",e);let b={tipo:e.tipo,nombre_cliente_aviso:e.nombreContacto,direccion_cliente_aviso:e.direccionLocal,telefono_cliente_aviso:e.telefono,nombre_contacto:e.nombreContacto,descripcion_problema:e.descripcion,es_urgente:e.esUrgente,urgencia:e.esUrgente?"Alta":"Normal"};this.loading=!0,this.avisosService.actualizarAviso(this.aviso.id,b).pipe(S(this.destroy$)).subscribe({next:M=>{console.log("Aviso actualizado exitosamente:",M),this.loading=!1,this.mostrarMensaje("Aviso actualizado exitosamente","success"),this.cargarAviso()},error:M=>{console.error("Error al actualizar aviso:",M),this.loading=!1,this.mostrarMensaje(M.message||"Error al actualizar el aviso. Por favor, int\xE9ntalo de nuevo.","error")}})}catch(b){console.error("Error al procesar la edici\xF3n:",b),this.mostrarMensaje("Error al procesar la edici\xF3n. Por favor, int\xE9ntalo de nuevo.","error")}})}cerrarAlbaran(){var n;(n=this.aviso)!=null&&n.id&&console.log("Cerrar albar\xE1n para aviso:",this.aviso.id)}seleccionarImagenes(){this.fileInput&&this.fileInput.nativeElement.click()}onFileSelected(n){var o;let e=n.target.files;e.length>0&&((o=this.aviso)!=null&&o.id)&&this.subirImagenes(Array.from(e)),n.target.value=""}subirImagenes(n){return j(this,null,function*(){var e;if(!((e=this.aviso)!=null&&e.id)){console.error("No se puede subir im\xE1genes: aviso no v\xE1lido");return}this.subiendoImagenes=!0,this.error=null;try{yield new Promise(d=>{let b=0,M=n.length;n.forEach(w=>{this.avisosService.subirFoto(this.aviso.id,w).pipe(S(this.destroy$)).subscribe({next:O=>{console.log("Foto subida:",O),b++,b===M&&d()},error:O=>{console.error("Error al subir foto:",O),b++,b===M&&d()}})})}),this.cargarAviso()}catch(o){console.error("Error al subir im\xE1genes:",o),this.error="Error al subir las im\xE1genes. Por favor, int\xE9ntalo de nuevo."}finally{this.subiendoImagenes=!1}})}crearAlbaran(){return j(this,null,function*(){var d;if(!((d=this.aviso)!=null&&d.id))return;let n=yield this.modalController.create({component:Ue,componentProps:{aviso:this.aviso},backdropDismiss:!1,showBackdrop:!0});yield n.present();let{data:e,role:o}=yield n.onWillDismiss();if(o==="confirm"&&(e!=null&&e.success))try{console.log("\u2705 Albar\xE1n creado exitosamente:",e.albaran),e.presupuesto&&e.accion==="presupuesto_creado"&&(console.log("\u2705 Presupuesto creado junto con el albar\xE1n:",e.presupuesto),alert(e.mensaje||"Albar\xE1n y presupuesto creados exitosamente. Puedes editarlo desde la secci\xF3n de presupuestos.")),alert(e.mensaje||"Albar\xE1n creado exitosamente"),this.cargarAviso()}catch(b){console.error("Error al procesar albar\xE1n:",b),alert("Error al procesar el albar\xE1n. Por favor, int\xE9ntalo de nuevo.")}})}eliminarFoto(n){return j(this,null,function*(){var o;if(!((o=this.aviso)!=null&&o.id)||!(n!=null&&n.id)){console.error("No se puede eliminar la foto: faltan datos");return}if(confirm(`\xBFEst\xE1s seguro de que quieres eliminar esta imagen?

Esta acci\xF3n no se puede deshacer.`))try{yield Un(this.avisosService.eliminarFoto(n.id)),console.log("Foto eliminada exitosamente"),this.cargarAviso()}catch(d){console.error("Error al eliminar la foto:",d),alert("Error al eliminar la imagen. Por favor, int\xE9ntalo de nuevo.")}})}getEstadoClass(n){if(!n)return"estado-pendiente";let o=`estado-${n.toLowerCase().replace(/ /g,"-")}`;return console.log(`\u{1F50D} Estado: "${n}" \u2192 Clase CSS: "${o}"`),o}onAccionFlujoEjecutada(n){console.log("Acci\xF3n de flujo ejecutada:",n),this.cargarAviso(),n.mensaje&&(console.log("Mensaje de \xE9xito:",n.mensaje),alert(n.mensaje)),n.facturaId&&confirm("Se ha generado una factura. \xBFDeseas ver la factura creada?")&&this.router.navigate(["/facturas",n.facturaId])}completarAviso(){var n;(n=this.aviso)!=null&&n.id?(console.log("\u{1F504} Completando aviso:",this.aviso.id),confirm("\xBFEst\xE1s seguro de que quieres marcar este aviso como completado? Esta acci\xF3n no se puede deshacer.")&&(this.loading=!0,this.error=null,this.flujoAvisosService.completarAviso(this.aviso.id).subscribe({next:e=>{console.log("\u2705 Aviso completado exitosamente:",e),this.loading=!1,this.mostrarMensaje("Aviso completado exitosamente","success"),this.cargarAviso()},error:e=>{console.error("\u274C Error al completar aviso:",e),this.loading=!1;let o=e.message||"Error al completar el aviso. Verifica que haya trabajos realizados y facturas generadas.";this.mostrarMensaje(o,"error"),this.error=o}}))):(console.error("No hay aviso seleccionado para completar"),this.mostrarMensaje("No hay aviso seleccionado para completar","error"))}verAlbaran(n){return j(this,null,function*(){if(!(n!=null&&n.id)){console.error("No se puede abrir el albar\xE1n: ID no v\xE1lido");return}try{console.log("Abriendo modal de albar\xE1n:",n);let e=yield this.modalController.create({component:Le,componentProps:{albaran:n,aviso:this.aviso},cssClass:"modal-ver-albaran modal-fullscreen",backdropDismiss:!0});yield e.present();let{data:o,role:d}=yield e.onWillDismiss();if(d==="confirm"&&o&&(console.log("Modal de albar\xE1n cerrado con datos:",o),o.accion==="presupuesto_creado")){console.log("\u2705 Presupuesto creado desde el modal del albar\xE1n:",o.presupuesto),o.mensaje&&alert(o.mensaje),o.navegoAPresupuesto||this.cargarAviso();return}console.log("Modal de albar\xE1n cerrado. Recargando datos..."),this.cargarAviso()}catch(e){console.error("Error al abrir el modal del albar\xE1n:",e),this.mostrarMensaje("Error al abrir el albar\xE1n. Por favor, int\xE9ntalo de nuevo.","error")}})}tienePresupuestoAsociado(n){var e;return!((e=this.aviso)!=null&&e.presupuestos)||this.aviso.presupuestos.length===0?!1:this.aviso.presupuestos.some(o=>o.albaran_id===n.id)}eliminarAlbaran(n){var o;if(!(n!=null&&n.id)){console.error("No se puede eliminar el albar\xE1n: ID no v\xE1lido");return}if(this.tienePresupuestoAsociado(n)){alert(`\u26A0\uFE0F No se puede eliminar este albar\xE1n porque tiene un presupuesto asociado.

Primero debes eliminar el presupuesto.`);return}confirm(`\xBFEst\xE1s seguro de que quieres eliminar el albar\xE1n #${(o=n.id)==null?void 0:o.substring(0,8)}?

Esta acci\xF3n no se puede deshacer.`)&&(this.loading=!0,this.albaranesService.eliminarAlbaran(n.id).subscribe({next:()=>{console.log("Albar\xE1n eliminado exitosamente"),this.loading=!1,this.cargarAviso()},error:d=>{console.error("Error al eliminar albar\xE1n:",d),this.loading=!1,alert("Error al eliminar el albar\xE1n: "+(d.message||"Error desconocido"))}}))}mostrarMensaje(n,e="info"){console.log(`[${e.toUpperCase()}] ${n}`),e==="error"?alert(`ERROR: ${n}`):console.log(e==="success"?`\u2705 ${n}`:`\u2139\uFE0F ${n}`)}};s.\u0275fac=function(e){return new(e||s)(h(ne),h(Y),h(xn),h(En),h(J),h(yn))},s.\u0275cmp=R({type:s,selectors:[["app-ver-avisos"]],viewQuery:function(e,o){if(e&1&&(en(Qt,5),en($n,5)),e&2){let d;tn(d=on())&&(o.fileInput=d.first),tn(d=on())&&(o.flujoComponent=d.first)}},decls:34,vars:13,consts:[["fileInput",""],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","info-card",4,"ngIf"],[1,"info-card"],[1,"card-header"],[2,"text-wrap","nowrap"],["class","header-actions-jobs",4,"ngIf"],["class","flujo-section",4,"ngIf"],[1,"section-divider"],[1,"albaranes-section"],[1,"albaranes-container"],["class","no-albaranes",4,"ngIf"],["class","compact-albaranes-table",4,"ngIf"],[1,"card-header",2,"justify-content","space-between!important"],[1,"gallery-actions"],[1,"btn-primary",3,"click","disabled"],["name","add-circle"],[1,"desktop-only"],[1,"mobile-only"],["type","file","multiple","","accept","image/*",2,"display","none",3,"change"],[1,"gallery-items"],["class","uploading-indicator",4,"ngIf"],["class","no-images",4,"ngIf"],["class","gallery-item",4,"ngFor","ngForOf"],[1,"loading-state"],[1,"loading-spinner"],["name","refresh-outline",1,"spinning"],[1,"error-state"],[1,"error-message"],["name","alert-circle-outline"],[1,"btn-retry",3,"click"],["name","refresh-outline"],[1,"header-container"],[1,"back-button"],[1,"btn-back",3,"click"],["name","arrow-back-outline"],[1,"header-actions"],["title","Recargar datos",1,"btn-secondary",3,"click"],["class","btn-secondary",3,"click",4,"ngIf"],["class","btn-primary",3,"click",4,"ngIf"],["class","aviso-completado-message",4,"ngIf"],[1,"mobile-only","title"],[1,"title"],[1,"info-grid"],[1,"info-row"],[1,"info-item"],[1,"estado-aviso",3,"ngClass"],[1,"urgent-badge"],[1,"descripcion-content"],[1,"descripcion-texto"],[1,"info-item","cliente-section"],[1,"cliente-info"],[1,"cliente-nombre"],[1,"ver-cliente",3,"click"],[1,"info-item","direccion-section"],[1,"direccion-info"],[1,"direccion-texto"],["title","Ver en mapa",1,"btn-map",3,"click"],["name","navigate"],[1,"contacto-section"],[1,"contacto-items"],["class","contacto-item nombre-contacto",4,"ngIf"],["class","contacto-item",4,"ngIf"],[1,"btn-secondary",3,"click"],["name","close"],[1,"btn-primary",3,"click"],["name","pencil-outline"],[1,"aviso-completado-message"],["name","checkmark-circle-outline"],[1,"contacto-item","nombre-contacto"],["name","person"],[1,"contacto-item"],["name","call"],[1,"contacto-link",3,"href"],["name","mail"],[1,"header-actions-jobs"],[1,"flujo-section"],[1,"flujo-container"],[3,"accionEjecutada","avisoId"],[1,"no-albaranes"],["name","document-text-outline"],[1,"info-text"],[1,"compact-albaranes-table"],[1,"albaranes-table"],[1,"table-header"],[1,"header-row"],[1,"header-cell"],[1,"table-body"],["class","albaran-row",3,"ngClass",4,"ngFor","ngForOf"],[1,"albaran-row",3,"ngClass"],[1,"albaran-cell","numero-albaran"],[1,"albaran-cell","estado-albaran"],[1,"estado-container"],[1,"badge",3,"ngClass"],["class","badge badge-presupuesto","title","Presupuesto creado",4,"ngIf"],[1,"albaran-cell","fecha-albaran"],[1,"albaran-cell","repuestos-albaran"],["class","repuestos-info",4,"ngIf"],["class","repuestos-vacio",4,"ngIf"],[1,"albaran-cell","acciones"],["title","Ver albar\xE1n completo",1,"btn-ver",3,"click"],["name","eye-outline"],["title","Eliminar albar\xE1n",1,"btn-eliminar",3,"click"],["name","trash-outline"],["class","mobile-info",4,"ngIf"],["title","Presupuesto creado",1,"badge","badge-presupuesto"],["name","calculator"],[1,"repuestos-info"],[1,"repuestos-count"],[1,"repuestos-label"],[1,"repuestos-vacio"],[1,"mobile-info"],[1,"presupuesto-mobile"],[1,"uploading-indicator"],[1,"no-images"],["name","images-outline"],[1,"gallery-item"],[3,"src","alt"],[1,"image-info"],[1,"image-title"],[1,"file-info"],["title","Eliminar imagen",1,"btn-delete",3,"click"]],template:function(e,o){if(e&1){let d=x();P(0,Kt,5,0,"div",1)(1,Xt,8,1,"div",2)(2,io,75,26,"div",3),t(3,"div",4)(4,"div",5)(5,"h2",6),c(6,"Gesti\xF3n de Albaranes"),a(),P(7,ro,7,0,"div",7),a(),P(8,co,3,1,"div",8),t(9,"div",9),p(10,"hr"),t(11,"span"),c(12,"Albaranes Cerrados"),a()(),t(13,"div",10)(14,"div",11),P(15,lo,6,0,"div",12)(16,mo,16,1,"div",13),a()()(),t(17,"div",4)(18,"div",14)(19,"h2"),c(20,"Galer\xEDa de im\xE1genes"),a(),t(21,"div",15)(22,"button",16),u("click",function(){return C(d),f(o.seleccionarImagenes())}),p(23,"ion-icon",17),t(24,"span",18),c(25),a(),t(26,"span",19),c(27),a()(),t(28,"input",20,0),u("change",function(M){return C(d),f(o.onFileSelected(M))}),a()()(),t(30,"div",21),P(31,bo,4,0,"div",22)(32,Co,4,0,"div",23)(33,fo,10,7,"div",24),a()()}e&2&&(g("ngIf",o.loading),l(),g("ngIf",o.error&&!o.loading),l(),g("ngIf",o.aviso&&!o.loading),l(5),g("ngIf",(o.aviso==null?null:o.aviso.estado)!=="Completado"),l(),g("ngIf",o.aviso==null?null:o.aviso.id),l(7),g("ngIf",!(o.aviso!=null&&o.aviso.albaranes)||(o.aviso==null||o.aviso.albaranes==null?null:o.aviso.albaranes.length)===0),l(),g("ngIf",(o.aviso==null?null:o.aviso.albaranes)&&(o.aviso==null?null:o.aviso.albaranes.length)>0),l(6),g("disabled",o.subiendoImagenes),l(3),m(o.subiendoImagenes?"Subiendo...":"A\xF1adir im\xE1genes"),l(2),m(o.subiendoImagenes?"Subiendo...":"A\xF1adir"),l(4),g("ngIf",o.subiendoImagenes),l(),g("ngIf",!(o.aviso!=null&&o.aviso.fotos)||(o.aviso==null||o.aviso.fotos==null?null:o.aviso.fotos.length)===0),l(),g("ngForOf",o.aviso==null?null:o.aviso.fotos))},dependencies:[B,Q,H,N,Zn,Kn,Xn,$,$n],styles:['[_nghost-%COMP%]{display:block;padding:24px}.back-button[_ngcontent-%COMP%]{margin-bottom:0}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 16px;background-color:#fff;color:#4f46e5;border:1px solid #E5E7EB;border-radius:8px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#f9fafb;border-color:#4f46e5}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px;text-align:center}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#4f46e5}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#ef4444}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 20px;background-color:#4f46e5;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:14px;font-weight:500;transition:background-color .2s ease}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover, .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover{background-color:#3a30e2}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.aviso-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.aviso-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#111827}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:10px 15px;background-color:#4f46e5;color:#fff;border:none;border-radius:.5rem;cursor:pointer;font-size:15px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#3a30e2}.btn-secondary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:10px 15px;background-color:#fff;color:#26262a;border:none;border-radius:.5rem;cursor:pointer;font-size:15px;font-weight:500;border:1px solid rgba(125,131,152,.2431372549)}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.btn-danger[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:10px 15px;background-color:#ef4444;color:#fff;border:none;border-radius:.5rem;cursor:pointer;font-size:15px;font-weight:500}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#dc2626}.btn-danger.btn-small[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;box-shadow:0 2px 8px #e0e7ef33;margin-bottom:24px;overflow:hidden}.info-card[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#111827;margin:0;padding:25px}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#111827;margin:0}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:25px 25px 0}.info-card[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.info-card[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:14px;margin-bottom:4px}.info-card[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#111827;font-size:16px}.badge-pendiente[_ngcontent-%COMP%]{background-color:#f59e0b1a;color:#f59e0b;padding:4px 12px;border-radius:16px;font-size:14px;font-weight:500}.badge-estado-aviso[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.badge-estado-aviso.badge-en-curso[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.badge-estado-aviso.badge-pendiente[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.badge-estado-aviso.badge-completado[_ngcontent-%COMP%]{background:#10b981;color:#fff}.badge-estado-aviso.badge-pendiente-de-presupuesto[_ngcontent-%COMP%]{background:#fcd34d;color:#92400e}.badge-estado-aviso.badge-listo-para-facturar[_ngcontent-%COMP%]{background:#d1fae5;color:#059669}.info-grid[_ngcontent-%COMP%]{padding:25px;padding-top:0!important;display:grid;gap:24px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:14px;margin-bottom:4px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#111827;font-size:16px}.info-grid[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:0!important}.info-grid[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:14px;margin-bottom:4px}.info-grid[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#111827;font-size:16px}.info-grid[_ngcontent-%COMP%]   .direccion-section[_ngcontent-%COMP%]   .btn-map[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;padding:8px;cursor:pointer;color:#fff;background-color:#4f46e5;font-size:16px;border-radius:50%}.info-grid[_ngcontent-%COMP%]   .contacto-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:14px;margin-bottom:4px}.info-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:24px}.cliente-info[_ngcontent-%COMP%], .direccion-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.cliente-info[_ngcontent-%COMP%]   .ver-cliente[_ngcontent-%COMP%], .direccion-info[_ngcontent-%COMP%]   .ver-cliente[_ngcontent-%COMP%]{color:#4f46e5;text-decoration:none;font-size:14px;cursor:pointer}.cliente-info[_ngcontent-%COMP%]   .ver-cliente[_ngcontent-%COMP%]:hover, .direccion-info[_ngcontent-%COMP%]   .ver-cliente[_ngcontent-%COMP%]:hover{text-decoration:underline}.contacto-items[_ngcontent-%COMP%]{display:flex;gap:24px;margin-top:8px}.contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background-color:#eef2ff;color:#4f46e5;padding:6px 15px;border-radius:10px;font-size:14px;font-weight:500}.contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]   .contacto-link[_ngcontent-%COMP%]{color:inherit;text-decoration:none;cursor:pointer;transition:color .2s ease}.contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]   .contacto-link[_ngcontent-%COMP%]:hover{color:#291fd9;text-decoration:underline}.info-item[_ngcontent-%COMP%]   .estado-aviso[_ngcontent-%COMP%]{font-weight:500}.info-item[_ngcontent-%COMP%]   .estado-aviso.estado-pendiente[_ngcontent-%COMP%]{color:#f59e0b!important}.info-item[_ngcontent-%COMP%]   .estado-aviso.estado-en-curso[_ngcontent-%COMP%]{color:#3b82f6!important}.info-item[_ngcontent-%COMP%]   .estado-aviso.estado-completado[_ngcontent-%COMP%]{color:#10b981!important}.info-item[_ngcontent-%COMP%]   .estado-aviso.estado-cancelado[_ngcontent-%COMP%]{color:#ef4444!important}.info-item[_ngcontent-%COMP%]   .estado-aviso.estado-pendiente-de-presupuesto[_ngcontent-%COMP%]{color:#f59e0b!important}.info-item[_ngcontent-%COMP%]   .estado-aviso.estado-listo-para-facturar[_ngcontent-%COMP%]{color:#059669!important}.info-item[_ngcontent-%COMP%]   .estado-aviso[_ngcontent-%COMP%]:not([class*=estado-]){color:#6b7280!important}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .estado-aviso.estado-pendiente[_ngcontent-%COMP%]{color:#f59e0b!important}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .estado-aviso.estado-en-curso[_ngcontent-%COMP%]{color:#3b82f6!important}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .estado-aviso.estado-completado[_ngcontent-%COMP%]{color:#10b981!important}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .estado-aviso.estado-cancelado[_ngcontent-%COMP%]{color:#ef4444!important}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .estado-aviso.estado-pendiente-de-presupuesto[_ngcontent-%COMP%]{color:#f59e0b!important}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .estado-aviso.estado-listo-para-facturar[_ngcontent-%COMP%]{color:#059669!important}.descripcion-content[_ngcontent-%COMP%]{padding:24px}.descripcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;line-height:1.5}.gallery-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{background:#f3f4f6;border-radius:30px;width:auto;height:auto;padding:2px 4px}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]::part(indicator){background:none}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--background: transparent;--background-checked: white;--background-hover: rgba(255,255,255,.1);--background-focused: rgba(255,255,255,.2);--border-radius: 50%;--border-width: 0;--indicator-color: transparent;--color: #6B7280;--color-checked: #4F46E5;--margin-top: 0;--margin-bottom: 0;--margin-start: 0;--margin-end: 0;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0;min-height:30px;min-width:30px;transition:all .2s ease;position:relative}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]::part(native){margin:0;padding:0 6px;height:100%}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]::part(indicator){display:none}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button.segment-button-checked[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a}.gallery-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-left:auto}.gallery-items[_ngcontent-%COMP%]{padding:24px;display:grid;gap:16px}.gallery-items[_ngcontent-%COMP%]   .uploading-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#4f46e5}.gallery-items[_ngcontent-%COMP%]   .uploading-indicator[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:12px}.gallery-items[_ngcontent-%COMP%]   .uploading-indicator[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.gallery-items[_ngcontent-%COMP%]   .uploading-indicator[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500}.gallery-items[_ngcontent-%COMP%]   .no-images[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.gallery-items[_ngcontent-%COMP%]   .no-images[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;border:1px solid #E5E7EB;border-radius:6px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:cover;border-radius:4px;margin-right:16px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]{flex:1}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#26262a}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span.file-info[_ngcontent-%COMP%]{color:#6b7280;font-size:14px;margin-top:4px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#ef4444;border-radius:4px;transition:all .2s ease}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]:hover{background-color:#ef44441a;color:#eb1515}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.table-container[_ngcontent-%COMP%]{padding:0 24px 24px}.table-search[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}.table-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:8px;padding:7px 14px;font-size:1rem;border:none;background:#f9fbff;color:#26262a}.table-search[_ngcontent-%COMP%]   .order-by[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#26262a;font-size:14px}.table-search[_ngcontent-%COMP%]   .order-by[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#4f46e5;font-weight:500}.table-search[_ngcontent-%COMP%]   .order-by[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#4f46e5;font-size:16px}.custom-mat-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 8px;margin-bottom:12px}.custom-mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#64748b;font-size:14px;font-weight:400;text-align:left;padding:8px 16px;background:transparent}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#f9fafb}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;color:#26262a;font-size:14px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:8px;border-bottom-left-radius:8px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:8px;border-bottom-right-radius:8px}.descripcion-trabajo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;line-height:1.4}.descripcion-trabajo[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:13px;color:#4b5563;padding:2px 6px;background-color:#f3f4f6;border-radius:4px;display:inline-block;margin-right:4px;margin-bottom:4px}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.badge-estado[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.badge-estado.badge-pendiente[_ngcontent-%COMP%]{background-color:var(--estado-pendiente-bg);color:var(--estado-pendiente-color)}.badge-estado.badge-en-curso[_ngcontent-%COMP%]{background-color:var(--estado-en-curso-bg);color:var(--estado-en-curso-color)}.badge-estado.badge-completado[_ngcontent-%COMP%]{background-color:var(--estado-completado-bg);color:var(--estado-completado-color)}.badge-estado.badge-cancelado[_ngcontent-%COMP%]{background-color:var(--estado-cancelado-bg);color:var(--estado-cancelado-color)}.repuestos-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;color:#4b5563;margin-bottom:4px}.repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.estado-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.estado-actions[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}.estado-actions[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:11px;font-weight:500;text-transform:uppercase;letter-spacing:.5px;margin-left:auto}.estado-actions[_ngcontent-%COMP%]   .estado-badge.estado-pendiente[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e}.estado-actions[_ngcontent-%COMP%]   .estado-badge.estado-en-curso[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.estado-actions[_ngcontent-%COMP%]   .estado-badge.estado-abierto[_ngcontent-%COMP%]{background-color:#dbeafe;color:#1e40af}.estado-actions[_ngcontent-%COMP%]   .estado-badge.estado-cerrado[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151}.estado-actions[_ngcontent-%COMP%]   .estado-badge.estado-finalizado[_ngcontent-%COMP%]{background-color:#ecfdf5;color:#14532d}.albaran-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;margin:8px 0}.albaran-info[_ngcontent-%COMP%]   .badge-albaran[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:6px 10px;border-radius:16px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap;background:#10b981;color:#fff}.albaran-info[_ngcontent-%COMP%]   .badge-albaran[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.albaran-info[_ngcontent-%COMP%]   .badge-albaran.badge-finalizado[_ngcontent-%COMP%]{background:#10b981;color:#fff}.albaran-info[_ngcontent-%COMP%]   .badge-albaran.badge-presupuesto-pendiente[_ngcontent-%COMP%]{background:#f59e0b;color:#fff}.albaran-info[_ngcontent-%COMP%]   .badge-albaran.badge-otra-visita[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.albaran-info[_ngcontent-%COMP%]   .albaran-details[_ngcontent-%COMP%]{font-size:10px;color:#6b7280;text-transform:capitalize}.no-trabajos[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#6b7280}.no-trabajos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.no-repuestos[_ngcontent-%COMP%]{color:#6b7280;font-style:italic;font-size:14px}.flujo-container[_ngcontent-%COMP%]{padding:0 25px}.info-section[_ngcontent-%COMP%]{padding:0 25px 25px}.info-section[_ngcontent-%COMP%]   .flow-description[_ngcontent-%COMP%]{background:#f0f9ff;border:1px solid #BAE6FD;border-radius:8px;padding:16px;margin:0;color:#0c4a6e;font-size:14px;display:flex;align-items:flex-start;gap:8px;line-height:1.5}.info-section[_ngcontent-%COMP%]   .flow-description[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#0ea5e9;margin-top:1px;flex-shrink:0}.info-section[_ngcontent-%COMP%]   .flow-description[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0c4a6e}.flujo-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;font-weight:400;margin-left:12px}.card-header[_ngcontent-%COMP%]   .flujo-subtitle[_ngcontent-%COMP%]{display:block;margin-top:4px;margin-left:0}.flujo-section[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.flujo-section[_ngcontent-%COMP%]   .flujo-header[_ngcontent-%COMP%]{margin-bottom:16px}.flujo-section[_ngcontent-%COMP%]   .flujo-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1a202c;margin:0 0 4px}.flujo-section[_ngcontent-%COMP%]   .flujo-header[_ngcontent-%COMP%]   .flujo-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#64748b;font-weight:400}.section-divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:24px 0 20px}.section-divider[_ngcontent-%COMP%]:before, .section-divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:#e2e8f0}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 16px;font-size:14px;font-weight:500;color:#64748b;background:#fff}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#64748b}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#cbd5e0;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin:0 0 8px;color:#4a5568}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:14px;color:#a0aec0}.desktop-only[_ngcontent-%COMP%]{display:inline}.mobile-only[_ngcontent-%COMP%]{display:none}.urgent-badge[_ngcontent-%COMP%]{padding:2px 8px;border-radius:12px;font-size:12px;font-weight:500}.urgent-badge.urgent[_ngcontent-%COMP%]{background-color:#fef2f2;color:#dc2626}.urgent-badge[_ngcontent-%COMP%]:not(.urgent){background-color:#f3f4f6;color:#6b7280}.cliente-nombre[_ngcontent-%COMP%]{font-weight:500;color:#111827}.direccion-texto[_ngcontent-%COMP%]{word-break:break-word;line-height:1.4}.tipo-aviso[_ngcontent-%COMP%]{font-weight:500;color:#4f46e5}.descripcion-texto[_ngcontent-%COMP%]{line-height:1.6;color:#111827;font-weight:500}.image-title[_ngcontent-%COMP%]{font-weight:500;color:#111827}.ver-cliente[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#4f46e5;text-decoration:none;font-size:14px;cursor:pointer;transition:color .2s ease}.ver-cliente[_ngcontent-%COMP%]:hover{color:#291fd9}.ver-cliente[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.no-images[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.no-images[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#cbd5e0;margin-bottom:16px}.no-images[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}@media (max-width: 768px){[_nghost-%COMP%]{padding:16px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:inline}.info-card[_ngcontent-%COMP%]{margin-bottom:16px;border-radius:12px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:20px;flex-direction:row;align-items:center;justify-content:start;gap:25px!important}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .mobile-only.title[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:500;color:#111827;margin:0}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{width:auto;justify-content:space-between;gap:12px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:none;width:100%;flex-direction:column;gap:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions-jobs[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;gap:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions-jobs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .aviso-completado-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#10b981;font-size:14px;font-weight:500}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .aviso-completado-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.info-card[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{font-size:16px;padding:20px}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.info-grid[_ngcontent-%COMP%]{padding:15px;gap:16px}.info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{gap:20px}.info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{width:auto}.info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:max-content}.info-grid[_ngcontent-%COMP%]   .cliente-info[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%]   .direccion-info[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:space-between;gap:8px}.info-grid[_ngcontent-%COMP%]   .contacto-items[_ngcontent-%COMP%]{flex-direction:row;gap:8px}.info-grid[_ngcontent-%COMP%]   .contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.info-grid[_ngcontent-%COMP%]   .contacto-items[_ngcontent-%COMP%]   .contacto-item.nombre-contacto[_ngcontent-%COMP%]{display:none}.descripcion-content[_ngcontent-%COMP%]{padding:20px;gap:16px}.gallery-actions[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{align-self:center}.gallery-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-left:0;width:100%;justify-content:center}.gallery-items[_ngcontent-%COMP%]{padding:20px;gap:12px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:8px;margin-right:0}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]{width:100%}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{align-self:flex-end}.table-container[_ngcontent-%COMP%]{padding:0 20px 20px}.custom-mat-table[_ngcontent-%COMP%]{font-size:12px}.custom-mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:11px;padding:8px 12px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:12px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion-trabajo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion-trabajo[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:10px}.estado-actions[_ngcontent-%COMP%]{flex-direction:column;gap:6px}.estado-actions[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{width:100%;justify-content:center;padding:8px 12px;font-size:12px}.flujo-container[_ngcontent-%COMP%]{padding:0 20px 20px}.flujo-section[_ngcontent-%COMP%]{margin-bottom:0}.section-divider[_ngcontent-%COMP%]{margin:20px 0 16px}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;padding:0 12px}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.badge-pendiente[_ngcontent-%COMP%]{font-size:12px;padding:3px 8px}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:11px;padding:2px 4px}.no-repuestos[_ngcontent-%COMP%]{font-size:12px}.empty-state[_ngcontent-%COMP%]{padding:30px 16px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px}.urgent-badge[_ngcontent-%COMP%]{font-size:11px;padding:2px 6px}.ver-cliente[_ngcontent-%COMP%]{font-size:12px}.ver-cliente[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.no-images[_ngcontent-%COMP%]{padding:30px 16px}.no-images[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px}.no-images[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){[_nghost-%COMP%]{padding:0}.info-card[_ngcontent-%COMP%]{margin-bottom:12px;border-radius:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:16px;gap:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{gap:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{gap:6px}.info-card[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{font-size:15px;padding:16px;display:none}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:15px!important}.descripcion-content[_ngcontent-%COMP%]{padding:16px;gap:12px}.descripcion-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px}.descripcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.gallery-actions[_ngcontent-%COMP%]{gap:8px}.gallery-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.gallery-items[_ngcontent-%COMP%]{padding:16px;gap:8px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{gap:8px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span.file-info[_ngcontent-%COMP%]{font-size:11px}.table-container[_ngcontent-%COMP%]{padding:0 16px 16px}.custom-mat-table[_ngcontent-%COMP%]{font-size:11px}.custom-mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:10px;padding:6px 8px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;font-size:11px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion-trabajo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion-trabajo[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:9px}.estado-actions[_ngcontent-%COMP%]{gap:4px}.estado-actions[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{padding:6px 8px;font-size:11px}.flujo-container[_ngcontent-%COMP%]{padding:0 16px 16px}.section-divider[_ngcontent-%COMP%]{margin:16px 0 12px}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;padding:0 8px}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.badge-pendiente[_ngcontent-%COMP%]{font-size:11px;padding:2px 6px}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:10px;padding:1px 3px}.no-repuestos[_ngcontent-%COMP%]{font-size:11px}.empty-state[_ngcontent-%COMP%]{padding:24px 12px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:11px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}ion-icon[_ngcontent-%COMP%]{font-size:16px}.urgent-badge[_ngcontent-%COMP%]{font-size:10px;padding:1px 4px}.ver-cliente[_ngcontent-%COMP%]{font-size:11px}.ver-cliente[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:11px}.no-images[_ngcontent-%COMP%]{padding:24px 12px}.no-images[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px}.no-images[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}.no-albaranes[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.no-albaranes[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#d1d5db;margin-bottom:16px}.no-albaranes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:16px}.no-albaranes[_ngcontent-%COMP%]   p.info-text[_ngcontent-%COMP%]{font-size:14px;color:#9ca3af;font-style:italic}.albaranes-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.albaran-item[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;transition:all .2s ease}.albaran-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid #E5E7EB}.albaran-header[_ngcontent-%COMP%]   .albaran-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:18px;font-weight:600;color:#1f2937}.albaran-header[_ngcontent-%COMP%]   .albaran-info[_ngcontent-%COMP%]   .fecha-albaran[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;font-weight:500}.albaran-header[_ngcontent-%COMP%]   .estado-albaran[_ngcontent-%COMP%]   .badge-estado[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.albaran-header[_ngcontent-%COMP%]   .estado-albaran[_ngcontent-%COMP%]   .badge-estado.badge-finalizado[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.albaran-header[_ngcontent-%COMP%]   .estado-albaran[_ngcontent-%COMP%]   .badge-estado.badge-presupuesto-pendiente[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.albaran-header[_ngcontent-%COMP%]   .estado-albaran[_ngcontent-%COMP%]   .badge-estado.badge-otra-visita[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.albaran-header[_ngcontent-%COMP%]   .albaran-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.albaran-header[_ngcontent-%COMP%]   .albaran-actions[_ngcontent-%COMP%]   .btn-primary.btn-small[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;background:#4f46e5;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;gap:4px}.albaran-header[_ngcontent-%COMP%]   .albaran-actions[_ngcontent-%COMP%]   .btn-primary.btn-small[_ngcontent-%COMP%]:hover{background:#4338ca}.albaran-header[_ngcontent-%COMP%]   .albaran-actions[_ngcontent-%COMP%]   .btn-primary.btn-small[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.header-actions[_ngcontent-%COMP%]   .btn-secondary.btn-small[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;background:#6b7280;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;gap:4px}.header-actions[_ngcontent-%COMP%]   .btn-secondary.btn-small[_ngcontent-%COMP%]:hover{background:#4b5563}.header-actions[_ngcontent-%COMP%]   .btn-secondary.btn-small[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.albaran-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.albaran-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.albaran-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.albaran-details[_ngcontent-%COMP%]   .detail-item.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.albaran-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.albaran-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .albaran-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#1f2937;margin:0}.albaran-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.5;background:#f9fafb;padding:8px 12px;border-radius:6px;border:1px solid #E5E7EB}.albaran-details[_ngcontent-%COMP%]   .repuestos-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.albaran-details[_ngcontent-%COMP%]   .repuestos-tags[_ngcontent-%COMP%]   .repuesto-tag[_ngcontent-%COMP%]{background:#e0f2fe;color:#0c4a6e;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;border:1px solid #BAE6FD}@media (max-width: 768px){.albaranes-container[_ngcontent-%COMP%]{gap:16px}.albaran-item[_ngcontent-%COMP%]{padding:16px}.albaran-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:flex-start}.albaran-header[_ngcontent-%COMP%]   .estado-albaran[_ngcontent-%COMP%]{align-self:flex-start}.albaran-header[_ngcontent-%COMP%]   .albaran-actions[_ngcontent-%COMP%]{align-self:flex-start;margin-top:8px}.no-albaranes[_ngcontent-%COMP%]{padding:20px 10px}.no-albaranes[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px}.no-albaranes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.no-albaranes[_ngcontent-%COMP%]   p.info-text[_ngcontent-%COMP%]{font-size:12px}.albaran-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}.section-divider[_ngcontent-%COMP%]{position:relative;margin:32px 0;text-align:center}.section-divider[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:none;height:1px;background:linear-gradient(to right,transparent,#E5E7EB,transparent);margin:0}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:0 16px;font-size:14px;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.albaranes-section[_ngcontent-%COMP%]{margin-top:24px}.albaranes-section[_ngcontent-%COMP%]   .albaranes-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:16px 20px;background:#f9fafb;border-radius:8px;border:1px solid #E5E7EB}.aviso-completado-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#10b981;font-size:14px;font-weight:500;padding:8px 12px;background:#ecfdf5;border:1px solid #D1FAE5;border-radius:8px}.aviso-completado-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.albaranes-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.albaranes-info[_ngcontent-%COMP%]   .badge-info[_ngcontent-%COMP%]{padding:6px 12px;background:#e0f2fe;color:#0c4a6e;border-radius:20px;font-size:12px;font-weight:600;border:1px solid #BAE6FD}.btn-secondary.btn-small[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;background:#6b7280;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;gap:4px}.btn-secondary.btn-small[_ngcontent-%COMP%]:hover{background:#4b5563}.btn-secondary.btn-small[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.compact-albaranes-table[_ngcontent-%COMP%]{max-height:60vh;overflow-y:auto;border-radius:8px;border:1px solid #E5E7EB;background:#fff;margin-bottom:16px;width:100%;overflow-x:hidden}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1.5fr 1fr 1.5fr 1fr;font-size:12px;min-width:0;gap:0;align-items:stretch}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%], .compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:contents}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{padding:12px 8px;background:#f9fafb;border-bottom:1px solid #E5E7EB;font-weight:500;color:#374151;font-size:12px;text-transform:uppercase;letter-spacing:.5px;display:flex;align-items:center;min-width:0;justify-content:center;text-align:center}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]{display:contents}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]{display:contents;cursor:pointer;transition:all .2s ease;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]:hover   .albaran-cell[_ngcontent-%COMP%]{background-color:#f9fafb}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]:active{transform:scale(.98)}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.finalizado[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #10B981}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.finalizado[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{background-color:#ecfdf5}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.finalizado[_ngcontent-%COMP%]:hover   .albaran-cell[_ngcontent-%COMP%]{background-color:#d1fae5}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.presupuesto-pendiente[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #F59E0B}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.presupuesto-pendiente[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{background-color:#fffbeb}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.presupuesto-pendiente[_ngcontent-%COMP%]:hover   .albaran-cell[_ngcontent-%COMP%]{background-color:#fef3c7}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.otra-visita[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #3B82F6}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.otra-visita[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{background-color:#eff6ff}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row.otra-visita[_ngcontent-%COMP%]:hover   .albaran-cell[_ngcontent-%COMP%]{background-color:#dbeafe}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{padding:12px 8px;border-bottom:1px solid #F3F4F6;display:flex;align-items:center;min-width:0;justify-content:center;text-align:center}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.numero-albaran[_ngcontent-%COMP%]{font-weight:600;color:#111827;font-size:14px;justify-content:center;flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]{justify-content:center;flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]   .estado-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap;max-width:120px;overflow:hidden;text-overflow:ellipsis}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]   .badge.green[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]   .badge.yellow[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]   .badge.blue[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]   .badge.badge-presupuesto[_ngcontent-%COMP%]{background:#e0f2fe;color:#0369a1;border:1px solid #BAE6FD;padding:2px 6px;border-radius:8px;font-size:9px;display:flex;align-items:center;gap:2px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]   .badge.badge-presupuesto[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:10px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.fecha-albaran[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;justify-content:center;flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]{justify-content:center;flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-info[_ngcontent-%COMP%]   .repuestos-count[_ngcontent-%COMP%]{font-size:11px;color:#059669;font-weight:600;padding:2px 6px;background:#d1fae5;border-radius:6px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-info[_ngcontent-%COMP%]   .repuestos-label[_ngcontent-%COMP%]{font-size:10px;color:#6b7280;font-weight:500}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-vacio[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af;font-style:italic}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]{justify-content:center;gap:4px;flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;background:transparent;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#6b7280}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:hover{background-color:#10b981}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#059669}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button.btn-eliminar[_ngcontent-%COMP%]:hover{background-color:#ef4444}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button.btn-eliminar[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button.btn-eliminar[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#dc2626}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   .mobile-info[_ngcontent-%COMP%]{display:none}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   .mobile-info[_ngcontent-%COMP%]   .presupuesto-mobile[_ngcontent-%COMP%]{font-size:11px;color:#059669;font-weight:600;padding:2px 6px;background:#d1fae5;border-radius:6px}@media (min-width: 769px){.compact-albaranes-table[_ngcontent-%COMP%]{width:100%;overflow-x:hidden;border-radius:0;border-left:none;border-right:none}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr 1fr 1.5fr 1fr;font-size:13px;min-width:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:12px;padding:12px 8px;min-width:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{padding:12px 8px;min-width:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.numero-albaran[_ngcontent-%COMP%]{font-size:14px;flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%], .compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.fecha-albaran[_ngcontent-%COMP%], .compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%], .compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]{flex-shrink:0}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 768px){.compact-albaranes-table[_ngcontent-%COMP%]{border-radius:0;border-left:none;border-right:none;max-height:none}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]{grid-template-columns:.8fr 1.2fr 1fr 1.2fr .8fr}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:10px;padding:8px 4px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{padding:8px 4px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.numero-albaran[_ngcontent-%COMP%]{font-size:12px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.fecha-albaran[_ngcontent-%COMP%]{font-size:11px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   .mobile-info[_ngcontent-%COMP%]{display:block;margin-left:4px}}@media (max-width: 480px){.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]{grid-template-columns:.6fr 1fr 1fr 1fr .8fr}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:9px;padding:6px 2px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell[_ngcontent-%COMP%]{padding:6px 2px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.numero-albaran[_ngcontent-%COMP%]{font-size:11px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.estado-albaran[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:8px;padding:2px 4px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.fecha-albaran[_ngcontent-%COMP%]{font-size:10px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]{font-size:9px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-info[_ngcontent-%COMP%]   .repuestos-count[_ngcontent-%COMP%]{font-size:8px;padding:1px 3px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-info[_ngcontent-%COMP%]   .repuestos-label[_ngcontent-%COMP%], .compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.repuestos-albaran[_ngcontent-%COMP%]   .repuestos-vacio[_ngcontent-%COMP%]{font-size:8px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;align-items:center}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:22px;height:22px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.compact-albaranes-table[_ngcontent-%COMP%]   .albaranes-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .albaran-row[_ngcontent-%COMP%]   .albaran-cell.acciones[_ngcontent-%COMP%]   .mobile-info[_ngcontent-%COMP%]   .presupuesto-mobile[_ngcontent-%COMP%]{font-size:9px;padding:1px 4px}}@media (max-width: 768px){.section-divider[_ngcontent-%COMP%]{margin:24px 0}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;padding:0 12px}.albaranes-section[_ngcontent-%COMP%]{margin-top:20px}.albaranes-section[_ngcontent-%COMP%]   .albaranes-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch;padding:12px 16px}.albaranes-section[_ngcontent-%COMP%]   .albaranes-header[_ngcontent-%COMP%]   .albaranes-info[_ngcontent-%COMP%]{justify-content:center}.albaranes-section[_ngcontent-%COMP%]   .albaranes-header[_ngcontent-%COMP%]   .btn-secondary.btn-small[_ngcontent-%COMP%]{align-self:center;width:fit-content}}']});let r=s;return r})();export{ia as VerAvisosComponent};
