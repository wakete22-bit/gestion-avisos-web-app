import{a as bt}from"./chunk-PNFYV5D6.js";import"./chunk-KYCVJEX4.js";import"./chunk-FK6H3RFT.js";import{a as Ct}from"./chunk-PMJS7GFM.js";import"./chunk-Z7B4QQZC.js";import{Aa as gt,Da as mt,E as V,Fa as ut,Ha as ft,J as pt,O as T,P as dt,Qa as D,Ra as _t,U as st,a as I,za as N}from"./chunk-D2B24UYB.js";import"./chunk-SJDIOWVS.js";import{c as rt,i as at,q as ct,v as lt}from"./chunk-S7JRATTN.js";import"./chunk-OW3FFWTU.js";import{$ as R,$a as W,Ac as it,Da as o,Ea as g,Fa as z,Ia as x,Ja as O,Ka as P,M as u,Ma as h,N as f,Sa as _,Va as C,Y as c,Z as E,ab as A,da as y,db as U,dc as $,fb as L,fc as w,gb as G,gc as K,hc as Y,ia as p,ka as j,lc as J,ma as n,mc as Q,na as e,nc as X,oa as s,pb as q,pc as Z,qc as tt,sa as S,sb as H,ta as M,ua as b,vc as et,yc as nt,zc as ot}from"./chunk-M7VHNEAX.js";import"./chunk-ULLEADC5.js";import"./chunk-2ELISCRH.js";import"./chunk-BV4CTHEE.js";import"./chunk-NBD2MYJO.js";import"./chunk-3SBX7V6R.js";import"./chunk-SQKDQBOS.js";import"./chunk-SWRJZAEI.js";import"./chunk-JCSW2JUV.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-36KMLI7A.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{k}from"./chunk-CRC5ZNR6.js";var v=()=>({standalone:!0});function Mt(l,d){l&1&&(n(0,"div",38)(1,"div",39),s(2,"ion-icon",40),n(3,"p"),o(4,"Cargando factura para editar..."),e()()())}function xt(l,d){if(l&1){let a=S();n(0,"tr")(1,"td")(2,"input",58),P("ngModelChange",function(t){let r=u(a).$implicit;return O(r.nombre,t)||(r.nombre=t),f(t)}),e()(),n(3,"td")(4,"input",59),P("ngModelChange",function(t){let r=u(a).$implicit;return O(r.cantidad,t)||(r.cantidad=t),f(t)}),e()(),n(5,"td")(6,"input",60),P("ngModelChange",function(t){let r=u(a).$implicit;return O(r.precio_neto,t)||(r.precio_neto=t),f(t)}),e()(),n(7,"td",61)(8,"input",60),P("ngModelChange",function(t){let r=u(a).$implicit;return O(r.precio_pvp,t)||(r.precio_pvp=t),f(t)}),e()(),n(9,"td",62)(10,"button",63),M("click",function(){let t=u(a).index,r=b(2);return f(r.eliminarRepuesto(t))}),s(11,"ion-icon",64),e()()()}if(l&2){let a=d.$implicit;c(2),x("ngModel",a.nombre),p("ngModelOptions",h(8,v)),c(2),x("ngModel",a.cantidad),p("ngModelOptions",h(9,v)),c(2),x("ngModel",a.precio_neto),p("ngModelOptions",h(10,v)),c(2),x("ngModel",a.precio_pvp),p("ngModelOptions",h(11,v))}}function Ot(l,d){l&1&&(n(0,"tr",65)(1,"td",66),o(2,"No hay repuestos a\xF1adidos"),e()())}function Pt(l,d){if(l&1&&(n(0,"tr",67)(1,"td",68),o(2,"Total"),e(),n(3,"td"),o(4),_(5,"currency"),e(),n(6,"td",61),o(7),_(8,"currency"),e(),s(9,"td"),e()),l&2){let a=b(2);c(4),g(C(5,2,a.totalRepuestosNeto,"EUR","symbol","1.2-2")),c(3),g(C(8,7,a.totalRepuestosPvp,"EUR","symbol","1.2-2"))}}function ht(l,d){if(l&1){let a=S();n(0,"tr")(1,"td")(2,"input",69),P("ngModelChange",function(t){let r=u(a).$implicit;return O(r.nombre,t)||(r.nombre=t),f(t)}),e()(),n(3,"td")(4,"input",70),P("ngModelChange",function(t){let r=u(a).$implicit;return O(r.cantidad,t)||(r.cantidad=t),f(t)}),e()(),n(5,"td",61)(6,"input",60),P("ngModelChange",function(t){let r=u(a).$implicit;return O(r.precio_pvp,t)||(r.precio_pvp=t),f(t)}),e()(),n(7,"td",62)(8,"button",63),M("click",function(){let t=u(a).index,r=b(2);return f(r.eliminarManoObra(t))}),s(9,"ion-icon",64),e()()()}if(l&2){let a=d.$implicit;c(2),x("ngModel",a.nombre),p("ngModelOptions",h(6,v)),c(2),x("ngModel",a.cantidad),p("ngModelOptions",h(7,v)),c(2),x("ngModel",a.precio_pvp),p("ngModelOptions",h(8,v))}}function vt(l,d){l&1&&(n(0,"tr",65)(1,"td",71),o(2,"No hay mano de obra a\xF1adida"),e()())}function wt(l,d){if(l&1&&(n(0,"tr",67)(1,"td",68),o(2,"Total"),e(),n(3,"td",61),o(4),_(5,"currency"),e(),s(6,"td"),e()),l&2){let a=b(2);c(4),g(C(5,1,a.totalManoObra,"EUR","symbol","1.2-2"))}}function yt(l,d){if(l&1){let a=S();n(0,"tr")(1,"td")(2,"input",72),P("ngModelChange",function(t){let r=u(a).$implicit;return O(r.nombre,t)||(r.nombre=t),f(t)}),e()(),n(3,"td")(4,"input",73),P("ngModelChange",function(t){let r=u(a).$implicit;return O(r.cantidad,t)||(r.cantidad=t),f(t)}),e()(),n(5,"td",61)(6,"input",60),P("ngModelChange",function(t){let r=u(a).$implicit;return O(r.precio_pvp,t)||(r.precio_pvp=t),f(t)}),e()(),n(7,"td",62)(8,"button",63),M("click",function(){let t=u(a).index,r=b(2);return f(r.eliminarDesplazamiento(t))}),s(9,"ion-icon",64),e()()()}if(l&2){let a=d.$implicit;c(2),x("ngModel",a.nombre),p("ngModelOptions",h(6,v)),c(2),x("ngModel",a.cantidad),p("ngModelOptions",h(7,v)),c(2),x("ngModel",a.precio_pvp),p("ngModelOptions",h(8,v))}}function Ft(l,d){l&1&&(n(0,"tr",65)(1,"td",71),o(2,"No hay desplazamientos a\xF1adidos"),e()())}function Et(l,d){if(l&1&&(n(0,"tr",67)(1,"td",68),o(2,"Total"),e(),n(3,"td",61),o(4),_(5,"currency"),e(),s(6,"td"),e()),l&2){let a=b(2);c(4),g(C(5,1,a.totalDesplazamiento,"EUR","symbol","1.2-2"))}}function St(l,d){if(l&1){let a=S();n(0,"div",41)(1,"div",4)(2,"h2"),o(3),e(),n(4,"div",5)(5,"button",6),M("click",function(){u(a);let t=b();return f(t.toggleVistaPrevia())}),s(6,"ion-icon",42),n(7,"span",8),o(8,"Vista previa"),e()()()(),n(9,"form",43)(10,"div",44)(11,"div",45)(12,"label"),o(13,"N\xFAmero Factura"),e(),s(14,"input",46),e(),n(15,"div",45)(16,"label"),o(17,"Fecha de emisi\xF3n"),e(),s(18,"input",47),e(),n(19,"div",45)(20,"label"),o(21,"Nombre"),e(),s(22,"input",48),e(),n(23,"div",45)(24,"label"),o(25,"Direcci\xF3n"),e(),s(26,"input",49),e(),n(27,"div",45)(28,"label"),o(29,"CIF"),e(),s(30,"input",50),e(),n(31,"div",45)(32,"label"),o(33,"Correo electr\xF3nico"),e(),s(34,"input",51),e()(),n(35,"section",52)(36,"div",53)(37,"span"),o(38,"Repuestos Utilizados"),e(),n(39,"button",54),M("click",function(){u(a);let t=b();return f(t.agregarRepuesto())}),n(40,"span"),o(41,"+"),e()()(),n(42,"table")(43,"thead")(44,"tr")(45,"th"),o(46,"Nombre"),e(),n(47,"th"),o(48,"Cantidad"),e(),n(49,"th"),o(50,"Neto"),e(),n(51,"th"),o(52,"PVP"),e(),s(53,"th"),e()(),n(54,"tbody"),y(55,xt,12,12,"tr",23)(56,Ot,3,0,"tr",55)(57,Pt,10,12,"tr",25),e()()(),n(58,"section",52)(59,"div",53)(60,"span"),o(61,"Mano de Obra"),e(),n(62,"button",54),M("click",function(){u(a);let t=b();return f(t.agregarManoObra())}),n(63,"span"),o(64,"+"),e()()(),n(65,"table")(66,"thead")(67,"tr")(68,"th"),o(69,"Nombre"),e(),n(70,"th"),o(71,"Cantidad"),e(),n(72,"th"),o(73,"PVP"),e(),s(74,"th"),e()(),n(75,"tbody"),y(76,ht,10,9,"tr",23)(77,vt,3,0,"tr",55)(78,wt,7,6,"tr",25),e()()(),n(79,"section",52)(80,"div",53)(81,"span"),o(82,"Desplazamiento"),e(),n(83,"button",54),M("click",function(){u(a);let t=b();return f(t.agregarDesplazamiento())}),n(84,"span"),o(85,"+"),e()()(),n(86,"table")(87,"thead")(88,"tr")(89,"th"),o(90,"Nombre"),e(),n(91,"th"),o(92,"Cantidad"),e(),n(93,"th"),o(94,"PVP"),e(),s(95,"th"),e()(),n(96,"tbody"),y(97,yt,10,9,"tr",23)(98,Ft,3,0,"tr",55)(99,Et,7,6,"tr",25),e()()(),n(100,"section",52)(101,"div",56)(102,"span"),o(103,"Detalles descripci\xF3n"),e()(),n(104,"div",45),s(105,"textarea",57),e()()()()}if(l&2){let a=b();c(3),g(a.isEditing?"Editar Factura":"Crear Factura"),c(6),p("formGroup",a.facturaForm),c(46),p("ngForOf",a.repuestos),c(),p("ngIf",a.repuestos.length===0),c(),p("ngIf",a.repuestos.length>0),c(19),p("ngForOf",a.manoObra),c(),p("ngIf",a.manoObra.length===0),c(),p("ngIf",a.manoObra.length>0),c(19),p("ngForOf",a.desplazamientos),c(),p("ngIf",a.desplazamientos.length===0),c(),p("ngIf",a.desplazamientos.length>0)}}function zt(l,d){if(l&1&&(n(0,"tr")(1,"td"),o(2),e(),n(3,"td"),o(4),e(),n(5,"td"),o(6),_(7,"currency"),e(),n(8,"td"),o(9),_(10,"currency"),e()()),l&2){let a=d.$implicit;c(2),g(a.nombre||"Sin nombre"),c(2),g(a.cantidad||0),c(2),g(C(7,4,a.precio_neto||0,"EUR","symbol","1.2-2")),c(3),g(C(10,9,a.precio_pvp||0,"EUR","symbol","1.2-2"))}}function kt(l,d){l&1&&(n(0,"tr")(1,"td",71),o(2,"No hay repuestos"),e()())}function It(l,d){if(l&1&&(n(0,"tr",67)(1,"td")(2,"b"),o(3,"TOTAL"),e()(),s(4,"td"),n(5,"td",61),o(6),_(7,"currency"),e(),n(8,"td",61),o(9),_(10,"currency"),e()()),l&2){let a=b();c(6),g(C(7,2,a.totalRepuestosNeto,"EUR","symbol","1.2-2")),c(3),g(C(10,7,a.totalRepuestosPvp,"EUR","symbol","1.2-2"))}}function Vt(l,d){if(l&1&&(n(0,"tr")(1,"td"),o(2),e(),n(3,"td"),o(4),e(),n(5,"td"),o(6),_(7,"currency"),e()()),l&2){let a=d.$implicit;c(2),g(a.nombre||"Sin descripci\xF3n"),c(2),z("",a.cantidad||0,"h"),c(2),g(C(7,3,a.precio_pvp||0,"EUR","symbol","1.2-2"))}}function Tt(l,d){if(l&1&&(n(0,"tr")(1,"td"),o(2),e(),n(3,"td"),o(4),e(),n(5,"td"),o(6),_(7,"currency"),e()()),l&2){let a=d.$implicit;c(2),g(a.nombre||"Sin descripci\xF3n"),c(2),g(a.cantidad||0),c(2),g(C(7,3,a.precio_pvp||0,"EUR","symbol","1.2-2"))}}function Nt(l,d){l&1&&(n(0,"tr")(1,"td",74),o(2,"No hay mano de obra ni desplazamientos"),e()())}function Dt(l,d){if(l&1&&(n(0,"tr",67)(1,"td",68)(2,"b"),o(3,"TOTAL"),e()(),n(4,"td",61),o(5),_(6,"currency"),e()()),l&2){let a=b();c(5),g(C(6,1,a.totalManoObra+a.totalDesplazamiento,"EUR","symbol","1.2-2"))}}var Qt=(()=>{let d=class d{constructor(i,t,r,m,F){this.fb=i,this.facturasService=t,this.router=r,this.route=m,this.pdfService=F,this.repuestos=[],this.manoObra=[],this.desplazamientos=[],this.mostrarVistaPrevia=!1,this.loading=!1,this.isEditing=!1,this.facturaForm=this.fb.group({numeroFactura:["",w.required],fecha:[new Date().toISOString().split("T")[0],w.required],nombre:["",w.required],direccion:["",w.required],cif:["",w.required],email:["",[w.required,w.email]],notas:[""]}),I({closeOutline:V,refreshOutline:mt,trash:D,sendOutline:ft,saveOutline:ut,download:T,print:N,eyeOutline:st,downloadOutline:dt,printOutline:gt,trashOutline:_t,createOutline:pt})}ngOnInit(){I({trash:D,closeOutline:V,download:T,print:N}),this.route.params.subscribe(i=>{let t=i.id;t?(this.facturaId=t,this.isEditing=!0,this.cargarFacturaParaEditar(t)):this.generarNumeroFactura()})}cargarFacturaParaEditar(i){this.loading=!0,this.facturasService.getFactura(i).subscribe({next:t=>{this.facturaOriginal=t,this.cargarDatosFactura(t),this.loading=!1},error:t=>{console.error("Error al cargar factura para editar:",t),this.loading=!1,this.router.navigate(["/facturas"])}})}cargarDatosFactura(i){let t=i.factura,r=i.lineas;this.facturaForm.patchValue({numeroFactura:t.numero_factura,fecha:t.fecha_emision,nombre:t.nombre_cliente,direccion:t.direccion_cliente,cif:t.cif_cliente,email:t.email_cliente,notas:t.notas||""}),this.repuestos=r.filter(m=>m.tipo==="repuesto"),this.manoObra=r.filter(m=>m.tipo==="mano_obra"),this.desplazamientos=r.filter(m=>m.tipo==="desplazamiento"),console.log("\u2705 Factura cargada para edici\xF3n:",{factura:t,lineas:r,repuestos:this.repuestos,manoObra:this.manoObra,desplazamientos:this.desplazamientos})}generarNumeroFactura(){this.isEditing||this.facturasService.getSiguienteNumero().subscribe({next:i=>{this.facturaForm.patchValue({numeroFactura:i})},error:i=>{console.error("Error al generar n\xFAmero de factura:",i);let t=new Date().getFullYear();this.facturaForm.patchValue({numeroFactura:`F${t}-001`})}})}agregarRepuesto(){this.repuestos.push({tipo:"repuesto",nombre:"",cantidad:1,precio_neto:0,precio_pvp:0})}eliminarRepuesto(i){this.repuestos.splice(i,1)}agregarManoObra(){this.manoObra.push({tipo:"mano_obra",nombre:"",cantidad:1,precio_pvp:0})}eliminarManoObra(i){this.manoObra.splice(i,1)}agregarDesplazamiento(){this.desplazamientos.push({tipo:"desplazamiento",nombre:"",cantidad:1,precio_pvp:0})}eliminarDesplazamiento(i){this.desplazamientos.splice(i,1)}get totalRepuestosNeto(){return this.repuestos.reduce((i,t)=>i+t.cantidad*(t.precio_neto||0),0)}get totalRepuestosPvp(){return this.repuestos.reduce((i,t)=>i+t.cantidad*t.precio_pvp,0)}get totalManoObra(){return this.manoObra.reduce((i,t)=>i+t.cantidad*t.precio_pvp,0)}get totalDesplazamiento(){return this.desplazamientos.reduce((i,t)=>i+t.cantidad*t.precio_pvp,0)}get subtotal(){return this.totalRepuestosPvp+this.totalManoObra+this.totalDesplazamiento}get iva(){return+(this.subtotal*.21).toFixed(2)}get total(){return+(this.subtotal+this.iva).toFixed(2)}enviarFactura(){if(console.log("Bot\xF3n enviar factura clickeado"),console.log("Formulario v\xE1lido:",this.facturaForm.valid),console.log("Errores del formulario:",this.facturaForm.errors),console.log("Valores del formulario:",this.facturaForm.value),this.facturaForm.valid){console.log("Formulario es v\xE1lido, procediendo..."),this.loading=!0;let i=this.prepararDatosFactura();i.estado="En curso",console.log("Datos de factura a enviar:",i),this.isEditing&&this.facturaId?this.facturasService.actualizarFactura(this.facturaId,i).subscribe({next:t=>{console.log("Factura actualizada exitosamente:",t),this.loading=!1,this.router.navigate(["/facturas"])},error:t=>{console.error("Error al actualizar factura:",t),this.loading=!1}}):this.facturasService.crearFactura(i).subscribe({next:t=>{console.log("Factura creada exitosamente:",t),this.loading=!1,this.router.navigate(["/facturas"])},error:t=>{console.error("Error al crear factura:",t),this.loading=!1}})}else console.log("Formulario no es v\xE1lido"),Object.keys(this.facturaForm.controls).forEach(i=>{let t=this.facturaForm.get(i);t!=null&&t.invalid&&console.log(`Campo ${i} es inv\xE1lido:`,t.errors)})}generarFactura(){if(console.log("Bot\xF3n generar factura clickeado"),console.log("Formulario v\xE1lido:",this.facturaForm.valid),this.facturaForm.valid){console.log("Formulario es v\xE1lido, procediendo..."),this.loading=!0;let i=this.prepararDatosFactura();i.estado="Pendiente",console.log("Datos de factura a generar:",i),this.isEditing&&this.facturaId?this.facturasService.actualizarFactura(this.facturaId,i).subscribe({next:t=>{console.log("Factura actualizada exitosamente:",t),this.loading=!1,this.router.navigate(["/facturas"])},error:t=>{console.error("Error al actualizar factura:",t),this.loading=!1}}):this.facturasService.crearFactura(i).subscribe({next:t=>{console.log("Factura generada exitosamente:",t),this.loading=!1,this.router.navigate(["/facturas"])},error:t=>{console.error("Error al generar factura:",t),this.loading=!1}})}else console.log("Formulario no es v\xE1lido"),Object.keys(this.facturaForm.controls).forEach(i=>{let t=this.facturaForm.get(i);t!=null&&t.invalid&&console.log(`Campo ${i} es inv\xE1lido:`,t.errors)})}prepararDatosFactura(){let i=this.facturaForm.value,t=[...this.repuestos,...this.manoObra,...this.desplazamientos];return{numero_factura:i.numeroFactura,fecha_emision:i.fecha,nombre_cliente:i.nombre,direccion_cliente:i.direccion,cif_cliente:i.cif,email_cliente:i.email,subtotal:this.subtotal,iva:this.iva,total:this.total,estado:"Pendiente",notas:i.notas,lineas:t}}toggleVistaPrevia(){this.mostrarVistaPrevia=!this.mostrarVistaPrevia}debugFormulario(){console.log("=== DEBUG FORMULARIO ==="),console.log("Formulario v\xE1lido:",this.facturaForm.valid),console.log("Valores:",this.facturaForm.value),console.log("Errores:",this.facturaForm.errors),Object.keys(this.facturaForm.controls).forEach(i=>{let t=this.facturaForm.get(i);console.log(`Campo ${i}:`,{valor:t==null?void 0:t.value,v\u00E1lido:t==null?void 0:t.valid,errores:t==null?void 0:t.errors,touched:t==null?void 0:t.touched,dirty:t==null?void 0:t.dirty})})}descargarFactura(){return k(this,null,function*(){var i;try{console.log("\u{1F527} Iniciando descarga de factura...");let r=`factura_${((i=this.facturaForm.get("numeroFactura"))==null?void 0:i.value)||"factura"}.pdf`,m=this.prepararDatosFactura();this.pdfService.generarPdfNativo(m,r),console.log("\u2705 Factura descargada exitosamente")}catch(t){console.error("\u274C Error al descargar factura:",t)}})}imprimirFactura(){return k(this,null,function*(){try{console.log("\u{1F527} Iniciando impresi\xF3n de factura...");let i=this.prepararDatosFactura();yield this.pdfService.imprimirFacturaNativa(i),console.log("\u2705 Impresi\xF3n iniciada exitosamente")}catch(i){console.error("\u274C Error al imprimir factura:",i)}})}generarPdfDesdeDatos(){var i;try{console.log("\u{1F527} Generando PDF desde datos...");let t=this.prepararDatosFactura(),m=`factura_${((i=this.facturaForm.get("numeroFactura"))==null?void 0:i.value)||"factura"}.pdf`;this.pdfService.generarPdfNativo(t,m),console.log("\u2705 PDF desde datos generado exitosamente")}catch(t){console.error("\u274C Error al generar PDF desde datos:",t)}}};d.\u0275fac=function(t){return new(t||d)(E(nt),E(Ct),E(H),E(q),E(bt))},d.\u0275cmp=R({type:d,selectors:[["app-crear-factura"]],inputs:{facturaId:"facturaId"},decls:122,vars:42,consts:[[1,"factura-container"],["class","loading-state",4,"ngIf"],["class","factura-formulario",4,"ngIf"],[1,"factura-preview"],[1,"header-container"],[1,"actions-preview"],["type","button",1,"btn-outline",3,"click"],["name","download"],[1,"button-text"],["type","button",1,"btn-primary",3,"click"],["name","print"],["type","button",1,"btn-close",3,"click"],["name","close-outline"],[1,"preview-header"],[1,"logo-box"],["src","assets/icon/favicon.png","alt","Logo"],[1,"empresa-datos"],[1,"empresa-nombre"],[2,"margin-top","20px"],[1,"factura-info"],[1,"factura-label"],[2,"color","#111827","font-weight","500"],[1,"preview-tabla"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","total-row",4,"ngIf"],[1,"preview-totales-box"],[1,"totales-row"],[1,"totales-row","total-final"],[1,"preview-notas"],[1,"notas-texto"],[1,"preview-footer"],[1,"factura-footer",3,"translucent"],[1,"footer-buttons"],["fill","outline","color","primary",1,"footer-btn",3,"click","disabled"],["name","send-outline","slot","start"],["fill","solid","color","primary",1,"footer-btn",3,"click","disabled"],["name","save-outline","slot","start"],[1,"loading-state"],[1,"loading-spinner"],["name","refresh-outline",1,"spinning"],[1,"factura-formulario"],["name","eye-outline"],[3,"formGroup"],[1,"grid-datos"],[1,"form-group"],["type","text","formControlName","numeroFactura","placeholder","#876370A"],["type","date","formControlName","fecha"],["type","text","formControlName","nombre","placeholder","Ejemplo"],["type","text","formControlName","direccion","placeholder","Calle"],["type","text","formControlName","cif","placeholder","12345678A"],["type","email","formControlName","email","placeholder","ejemplo@gmail.com"],[1,"tabla-section"],[1,"tabla-header"],["type","button",1,"icon-btn","add-btn",3,"click"],["class","empty-row",4,"ngIf"],[1,"tabla-header",2,"margin-bottom","20px"],["formControlName","notas","placeholder","Notas"],["type","text","placeholder","Nombre del repuesto",1,"table-input",3,"ngModelChange","ngModel","ngModelOptions"],["type","number","min","0","step","0.01",1,"table-input",3,"ngModelChange","ngModel","ngModelOptions"],["type","number","min","0","step","0.01","placeholder","0.00",1,"table-input",3,"ngModelChange","ngModel","ngModelOptions"],[1,"success"],[1,"trash-btn"],["type","button",1,"icon-btn","danger",3,"click"],["name","trash"],[1,"empty-row"],["colspan","5",1,"text-center"],[1,"total-row"],["colspan","2"],["type","text","placeholder","Descripci\xF3n del trabajo",1,"table-input",3,"ngModelChange","ngModel","ngModelOptions"],["type","number","min","0","step","0.01","placeholder","Horas",1,"table-input",3,"ngModelChange","ngModel","ngModelOptions"],["colspan","4",1,"text-center"],["type","text","placeholder","Tipo de desplazamiento",1,"table-input",3,"ngModelChange","ngModel","ngModelOptions"],["type","number","min","0","step","0.01","placeholder","Cantidad",1,"table-input",3,"ngModelChange","ngModel","ngModelOptions"],["colspan","3",1,"text-center"]],template:function(t,r){if(t&1&&(n(0,"div",0),y(1,Mt,5,0,"div",1)(2,St,106,11,"div",2),n(3,"div",3)(4,"div",4)(5,"h2"),o(6,"Vista previa"),e(),n(7,"div",5)(8,"button",6),M("click",function(){return r.descargarFactura()}),s(9,"ion-icon",7),n(10,"span",8),o(11,"Descargar"),e()(),n(12,"button",9),M("click",function(){return r.imprimirFactura()}),s(13,"ion-icon",10),n(14,"span",8),o(15,"Imprimir"),e()(),n(16,"button",11),M("click",function(){return r.toggleVistaPrevia()}),s(17,"ion-icon",12),n(18,"span",8),o(19,"Cerrar"),e()()()(),n(20,"div",13)(21,"div",14),s(22,"img",15),e(),n(23,"div",16)(24,"div")(25,"span",17),o(26,"Datos de empresa"),e(),n(27,"span"),o(28,"Nombre de empresa"),e(),n(29,"address"),o(30,"Direcci\xF3n de empresa"),e(),n(31,"span"),o(32,"Ciudad de empresa"),e(),n(33,"span"),o(34,"CIF de empresa"),e(),n(35,"span",18),o(36,"ejemplodominio.es"),e(),n(37,"span"),o(38,"+34 123 45 56 65"),e()(),n(39,"div",19)(40,"label",20),o(41,"Factura"),e(),n(42,"label",21),o(43,"N\xBA FACTURA"),e(),n(44,"label"),o(45),e(),n(46,"label",21),o(47,"FECHA DE EMISI\xD3N"),e(),n(48,"label"),o(49),_(50,"date"),e()()()(),n(51,"div",22)(52,"table")(53,"thead")(54,"tr")(55,"th"),o(56,"Repuestos utilizados"),e(),n(57,"th"),o(58,"CANTIDAD"),e(),n(59,"th"),o(60,"NETO"),e(),n(61,"th"),o(62,"PVP"),e()()(),n(63,"tbody"),y(64,zt,11,14,"tr",23)(65,kt,3,0,"tr",24)(66,It,11,12,"tr",25),e()()(),n(67,"div",22)(68,"table")(69,"thead")(70,"tr")(71,"th"),o(72,"Mano de obra/Kilometraje"),e(),n(73,"th"),o(74,"CANTIDAD"),e(),n(75,"th"),o(76,"PVP"),e()()(),n(77,"tbody"),y(78,Vt,8,8,"tr",23)(79,Tt,8,8,"tr",23)(80,Nt,3,0,"tr",24)(81,Dt,7,6,"tr",25),e()()(),n(82,"div",26)(83,"div",27)(84,"span"),o(85,"Subtotal"),e(),n(86,"span"),o(87),_(88,"currency"),e()(),n(89,"div",27)(90,"span"),o(91,"IVA (21%)"),e(),n(92,"span"),o(93),_(94,"currency"),e()(),n(95,"div",28)(96,"span"),o(97,"TOTAL"),e(),n(98,"span"),o(99),_(100,"currency"),e()()(),n(101,"div",29)(102,"b"),o(103,"Notas"),e(),n(104,"div",30),o(105),e()(),n(106,"div",31)(107,"span"),o(108,"Nombre de empresa"),e(),n(109,"span"),o(110,"+34 698 12 12 12"),e(),n(111,"span"),o(112,"ejemploemail.com"),e()()(),n(113,"ion-footer",32)(114,"ion-toolbar")(115,"div",33)(116,"ion-button",34),M("click",function(){return r.enviarFactura()}),s(117,"ion-icon",35),o(118),e(),n(119,"ion-button",36),M("click",function(){return r.generarFactura()}),s(120,"ion-icon",37),o(121),e()()()()()),t&2){let m,F,B;c(),p("ngIf",r.loading&&r.isEditing),c(),p("ngIf",!r.loading||!r.isEditing),c(),j("active",r.mostrarVistaPrevia),c(42),g(((m=r.facturaForm.get("numeroFactura"))==null?null:m.value)||"N/A"),c(4),g((F=r.facturaForm.get("fecha"))!=null&&F.value?C(50,22,(F=r.facturaForm.get("fecha"))==null?null:F.value,"longDate","","es"):"N/A"),c(15),p("ngForOf",r.repuestos),c(),p("ngIf",r.repuestos.length===0),c(),p("ngIf",r.repuestos.length>0),c(12),p("ngForOf",r.manoObra),c(),p("ngForOf",r.desplazamientos),c(),p("ngIf",r.manoObra.length===0&&r.desplazamientos.length===0),c(),p("ngIf",r.manoObra.length>0||r.desplazamientos.length>0),c(6),g(C(88,27,r.subtotal,"EUR","symbol","1.2-2")),c(6),g(C(94,32,r.iva,"EUR","symbol","1.2-2")),c(6),g(C(100,37,r.total,"EUR","symbol","1.2-2")),c(6),z(" ",((B=r.facturaForm.get("notas"))==null?null:B.value)||"Sin notas adicionales"," "),c(8),p("translucent",!0),c(3),p("disabled",r.loading||!r.facturaForm.valid),c(2),z(" ",r.loading?"Enviando...":r.isEditing?"Actualizar factura":"Enviar factura"," "),c(),p("disabled",r.loading||!r.facturaForm.valid),c(2),z(" ",r.loading?"Generando...":r.isEditing?"Guardar cambios":"Generar factura"," ")}},dependencies:[G,W,A,L,U,it,Q,$,X,K,Y,et,Z,tt,ot,J,lt,at,ct,rt],styles:[".container[_ngcontent-%COMP%]{display:flex;height:100%;padding:20px;gap:20px}.form-column[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;background:#f5f5f5;border-radius:8px}.preview-column[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;background:#fff;border-radius:8px}.form-section[_ngcontent-%COMP%]{padding:24px;max-height:calc(85vh - 140px)}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc2626}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.header-container[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]{display:flex;gap:12px}.header-container[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:10px 15px;background-color:#fff;color:#26262a;border:none;border-radius:.5rem;cursor:pointer;font-size:15px;font-weight:500;border:1px solid rgba(125,131,152,.2431372549)}.header-container[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:10px 15px;background-color:#4f46e5;color:#fff;border:none;border-radius:.5rem;cursor:pointer;font-size:15px;font-weight:500}.form-control[_ngcontent-%COMP%]{position:relative;width:100%;padding:10px 12px;background-color:#fafafb;border:1px solid transparent;border-radius:6px;font-size:14px;color:#111827;transition:border-color .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.form-control[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-control[readonly][_ngcontent-%COMP%]{background-color:#f3f4f6;cursor:not-allowed}.lineas-factura[_ngcontent-%COMP%]{margin:20px 0;padding:16px;background:#fff;border-radius:8px}.lineas-factura[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:16px;font-size:16px;color:#374151}.linea-factura[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:flex-start;margin-bottom:16px;padding:10px;background:#f9f9f9;border-radius:4px}.linea-factura[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0;flex:1}.button-group[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:24px}.button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.button-group[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{background:none;border:1px solid #d1d5db;color:#374151}.button-group[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f8fafc;border-color:#9ca3af}.button-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#4f46e5;border:1px solid #4F46E5;color:#fff}.button-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#4338ca;border-color:#4338ca}.button-group[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#dc2626;border:1px solid #dc2626;color:#fff}.button-group[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#b91c1c;border-color:#b91c1c}.factura-preview[_ngcontent-%COMP%]{flex:1;background:#fff;border-radius:24px;padding:32px;min-width:420px;display:flex;flex-direction:column;gap:24px;position:relative}.factura-preview[_ngcontent-%COMP%]   .close-preview-btn[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;width:40px;height:40px;border-radius:50%;background:#f3f4f6;color:#6b7280;border:1px solid #d1d5db;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:1002;transition:all .2s ease}.factura-preview[_ngcontent-%COMP%]   .close-preview-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.factura-preview[_ngcontent-%COMP%]   .close-preview-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb;color:#374151;transform:scale(1.05)}.factura-preview[_ngcontent-%COMP%]   .close-preview-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.factura-preview[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin-bottom:5px;color:#111827}.factura-preview[_ngcontent-%COMP%]   .preview-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-bottom:12px}.factura-preview[_ngcontent-%COMP%]   .preview-toolbar[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{background:#f3f4f6;border:none;border-radius:50%;width:36px;height:36px;font-size:1.2rem;color:#4f46e5;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background .2s}.factura-preview[_ngcontent-%COMP%]   .preview-toolbar[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:32px}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .logo-box[_ngcontent-%COMP%]{border-radius:12px;display:flex;align-items:center;justify-content:center}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .logo-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:44px}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .empresa-datos[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-between}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .empresa-datos[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .empresa-datos[_ngcontent-%COMP%]   address[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:13px;margin-bottom:2px;font-style:normal}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .empresa-datos[_ngcontent-%COMP%]   .empresa-nombre[_ngcontent-%COMP%]{color:#4f46e5;font-weight:600;font-size:14px;margin-bottom:8px;text-transform:capitalize}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .factura-info[_ngcontent-%COMP%]{text-align:right}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .factura-info[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;margin-bottom:2px}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .factura-info[_ngcontent-%COMP%]   .factura-label[_ngcontent-%COMP%]{color:#4f46e5;font-weight:600;font-size:14px;margin-bottom:8px}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   .tabla-titulo[_ngcontent-%COMP%]{font-weight:600;color:#6b7280;margin-bottom:8px;font-size:1rem}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:8px}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px;text-align:left}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#9ca3af;font-weight:400;background:none;border-bottom:1px solid #E5E7EB}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#111827;border-bottom:1px solid #F3F4F6}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#27c26c;font-weight:600}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700;color:#4f46e5;border-bottom:none}.factura-preview[_ngcontent-%COMP%]   .preview-totales-box[_ngcontent-%COMP%]{margin:24px 0 0;background:#eef2ff;border-radius:16px;padding:15px;width:300px;align-self:flex-end}.factura-preview[_ngcontent-%COMP%]   .preview-totales-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#4f46e5}.factura-preview[_ngcontent-%COMP%]   .preview-totales-box[_ngcontent-%COMP%]   .totales-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:14px;margin-bottom:8px}.factura-preview[_ngcontent-%COMP%]   .preview-totales-box[_ngcontent-%COMP%]   .totales-row.total-final[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff;background:#4f46e5;border-radius:12px;padding:10px 16px;margin-top:12px;margin-bottom:0}.factura-preview[_ngcontent-%COMP%]   .preview-totales-box[_ngcontent-%COMP%]   .totales-row.total-final[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff!important}.factura-preview[_ngcontent-%COMP%]   .preview-notas[_ngcontent-%COMP%]{margin-top:24px}.factura-preview[_ngcontent-%COMP%]   .preview-notas[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#4f46e5;font-size:1rem}.factura-preview[_ngcontent-%COMP%]   .preview-notas[_ngcontent-%COMP%]   .notas-texto[_ngcontent-%COMP%]{color:#6b7280;font-size:.95rem;margin-top:4px}.factura-preview[_ngcontent-%COMP%]   .preview-footer[_ngcontent-%COMP%]{margin-top:32px;display:flex;justify-content:space-between;color:#6b7280;font-size:.95rem;border-top:1px solid #E5E7EB;padding-top:12px}.factura-preview[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]{display:flex;gap:8px}.factura-preview[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px}.factura-preview[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.factura-preview[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]   button.btn-close[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280;border:1px solid #d1d5db;border-radius:8px;font-size:14px;font-weight:500}.factura-preview[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]   button.btn-close[_ngcontent-%COMP%]:hover{background:#e5e7eb;color:#374151}.factura-container[_ngcontent-%COMP%]{width:100%;height:auto;gap:32px;display:flex;padding:25px 25px 80px}.factura-formulario[_ngcontent-%COMP%]{flex:1;box-shadow:0 2px 8px #e0e7ef33;border-radius:24px;padding:32px;background:#fff}.factura-formulario[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:500;margin-bottom:24px;color:#111827}.factura-formulario[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.grid-datos[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px 24px;margin-bottom:32px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:relative;width:100%;padding:10px 12px;background-color:#fafafb;border:1px solid transparent;border-radius:6px;font-size:14px;color:#111827;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{position:relative;width:100%;padding:10px 12px;background-color:#fafafb;border:1px solid transparent;border-radius:6px;font-size:14px;color:#111827;transition:border-color .2s;resize:vertical;min-height:80px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.tabla-section[_ngcontent-%COMP%]{margin:32px 0 0;background:#fff;border-radius:16px}.tabla-section[_ngcontent-%COMP%]   .tabla-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:500;font-size:1.1rem}.tabla-section[_ngcontent-%COMP%]   .tabla-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#111827}.tabla-section[_ngcontent-%COMP%]   .tabla-header[_ngcontent-%COMP%]   .icon-btn.add-btn[_ngcontent-%COMP%]{background:#4f46e5;color:#fff;border-radius:12px;width:35px;height:35px;font-size:1.3rem;display:flex;align-items:center;justify-content:center;border:none;cursor:pointer}.tabla-section[_ngcontent-%COMP%]   .tabla-header[_ngcontent-%COMP%]   .icon-btn.add-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#fff}.tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 8px;margin:0 0 8px}.tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#111827;font-size:14px;font-weight:400;background:none;border:none;padding:8px 0;text-align:left}.tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .trash-btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#fff;border-radius:8px}.tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#111827}.tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4f46e5;text-decoration:none}.tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.success[_ngcontent-%COMP%]{color:#2b9943;font-weight:500}.tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .icon-btn.danger[_ngcontent-%COMP%]{background:#e71d351d;color:#e71d36;border-radius:50%;width:32px;height:32px;font-size:1.1rem;display:flex;align-items:center;justify-content:center;border:none;cursor:pointer}.tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700;color:#111827;background:none}.tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#2b9943;font-weight:700!important}.factura-footer[_ngcontent-%COMP%]{--background: #ffffff;--border-top: 1px solid #e5e7eb;box-shadow:0 -2px 10px #0000001a;position:sticky;bottom:0;z-index:1000}.factura-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #ffffff;--border: none;--padding-top: 12px;--padding-bottom: 12px;--padding-start: 16px;--padding-end: 16px}.factura-footer[_ngcontent-%COMP%]   .footer-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;width:100%}.factura-footer[_ngcontent-%COMP%]   .footer-buttons[_ngcontent-%COMP%]   .footer-btn[_ngcontent-%COMP%]{flex:1;--border-radius: 12px;--padding-top: 12px;--padding-bottom: 12px;--font-weight: 600;--font-size: 14px;height:48px}.factura-footer[_ngcontent-%COMP%]   .footer-buttons[_ngcontent-%COMP%]   .footer-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.factura-info[_ngcontent-%COMP%]{text-align:right;min-width:180px}.factura-info[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:400;color:#6b7280;margin-bottom:4px}.factura-info[_ngcontent-%COMP%]   .factura-label[_ngcontent-%COMP%]{color:#4f46e5;font-weight:700;font-size:1.1rem;margin-bottom:4px}.factura-info[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]{margin:0;padding:0}.factura-info[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   .factura-dato[_ngcontent-%COMP%]{margin-bottom:8px}.factura-info[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   .factura-dato[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280;font-weight:600;text-transform:uppercase;margin-bottom:2px;letter-spacing:.5px}.factura-info[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   .factura-dato[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{font-size:1.05rem;color:#111827;font-weight:600;margin:0}.toggle-preview-btn[_ngcontent-%COMP%]{display:none}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:#f8fafc}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{text-align:center;color:#4f46e5}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.factura-container[_ngcontent-%COMP%]{flex-direction:column;padding:0 0 70px;gap:0;position:relative;height:100%}.factura-formulario[_ngcontent-%COMP%]{border-radius:0;padding:16px;box-shadow:none}.factura-formulario[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;margin-bottom:16px}.grid-datos[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:0px;margin-bottom:24px}.tabla-section[_ngcontent-%COMP%]{margin:24px 0 0}.tabla-section[_ngcontent-%COMP%]   .tabla-header[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:12px}.tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch}.tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.botones-footer[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#fff;padding:12px 16px;box-shadow:0 -2px 10px #0000001a;margin:0;z-index:100}.factura-preview[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;right:0;bottom:0;z-index:1000;border-radius:0;padding:16px;overflow-y:auto;min-width:unset;margin-top:30px}.factura-preview[_ngcontent-%COMP%]   .close-preview-btn[_ngcontent-%COMP%]{top:12px;right:12px;width:36px;height:36px}.factura-preview[_ngcontent-%COMP%]   .close-preview-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.factura-preview.active[_ngcontent-%COMP%]{display:block}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:10;padding:12px 0;margin-bottom:0!important}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px;padding:0;justify-content:center}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .button-text[_ngcontent-%COMP%]{display:none}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]   button.btn-close[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280;border:1px solid #d1d5db;border-radius:8px}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .empresa-datos[_ngcontent-%COMP%]{flex-direction:row;gap:16px}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .empresa-datos[_ngcontent-%COMP%]   .empresa-nombre[_ngcontent-%COMP%]{font-size:13px;text-transform:capitalize}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .empresa-datos[_ngcontent-%COMP%]   .factura-label[_ngcontent-%COMP%], .factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .empresa-datos[_ngcontent-%COMP%]   .factura-dato[_ngcontent-%COMP%]{font-size:13px}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .factura-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .factura-info[_ngcontent-%COMP%]   address[_ngcontent-%COMP%]{font-size:12px}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .factura-info[_ngcontent-%COMP%]   .empresa-nombre[_ngcontent-%COMP%]{font-size:13px}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch}.factura-preview[_ngcontent-%COMP%]   .preview-totales-box[_ngcontent-%COMP%]{width:100%;margin:16px 0}.toggle-preview-btn[_ngcontent-%COMP%]{position:fixed;bottom:120px;right:16px;width:56px;height:56px;border-radius:50%;background:#4f46e5;color:#fff;border:none;box-shadow:0 4px 12px #4f46e54d;display:flex;align-items:center;justify-content:center;z-index:1001;cursor:pointer}.toggle-preview-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.toggle-preview-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.factura-footer[_ngcontent-%COMP%]{position:sticky;bottom:0;z-index:1000}.factura-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--padding-top: 8px;--padding-bottom: 8px;--padding-start: 12px;--padding-end: 12px}.factura-footer[_ngcontent-%COMP%]   .footer-buttons[_ngcontent-%COMP%]{gap:8px}.factura-footer[_ngcontent-%COMP%]   .footer-buttons[_ngcontent-%COMP%]   .footer-btn[_ngcontent-%COMP%]{--font-size: 13px;height:44px}.factura-footer[_ngcontent-%COMP%]   .footer-buttons[_ngcontent-%COMP%]   .footer-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}}.table-input[_ngcontent-%COMP%]{width:100%;padding:6px 8px;border:1px solid #E5E7EB;border-radius:4px;font-size:13px;background:#fafafb;color:#111827;transition:border-color .2s}.table-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;background:#fff}.table-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.empty-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#6b7280;font-style:italic;text-align:center;padding:20px!important}.text-center[_ngcontent-%COMP%]{text-align:center}@media (max-width: 480px){.factura-formulario[_ngcontent-%COMP%]{padding:12px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:13px}.tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tabla-section[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.table-input[_ngcontent-%COMP%]{font-size:12px;padding:4px 6px}.factura-footer[_ngcontent-%COMP%]{position:sticky;bottom:0;z-index:1000}.factura-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--padding-top: 6px;--padding-bottom: 6px;--padding-start: 8px;--padding-end: 8px}.factura-footer[_ngcontent-%COMP%]   .footer-buttons[_ngcontent-%COMP%]{gap:6px}.factura-footer[_ngcontent-%COMP%]   .footer-buttons[_ngcontent-%COMP%]   .footer-btn[_ngcontent-%COMP%]{--font-size: 12px;height:40px}.factura-footer[_ngcontent-%COMP%]   .footer-buttons[_ngcontent-%COMP%]   .footer-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.factura-preview[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px}.factura-preview[_ngcontent-%COMP%]   .actions-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}}"]});let l=d;return l})();export{Qt as CrearFacturaComponent};
