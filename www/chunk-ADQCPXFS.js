import{b as w}from"./chunk-5NFKITCF.js";import{d as L,f as T,j as z}from"./chunk-MCEOU6HW.js";import{$ as b,Ac as k,Da as s,Fa as x,Y as a,Z as d,ab as C,da as f,dc as y,fc as p,gb as v,gc as O,hc as P,ia as c,ma as n,mc as I,na as o,oa as g,pc as E,qc as F,sb as M,ta as _,ua as u,yc as S}from"./chunk-GZDKEEK6.js";import"./chunk-3SUPCH3T.js";import"./chunk-QUJFQN2Y.js";import"./chunk-OGR5ZLHR.js";import"./chunk-CUT3BV6K.js";import"./chunk-73IMGLZG.js";import"./chunk-G2E2NLL6.js";import"./chunk-ILJSYHS4.js";import"./chunk-OAP23YNX.js";import"./chunk-YYM7CL2V.js";import"./chunk-5LR2YXX6.js";import"./chunk-WDU4QEMV.js";import"./chunk-CKP3SGE2.js";import"./chunk-2ELISCRH.js";import"./chunk-BV4CTHEE.js";import"./chunk-JILLMCFB.js";import"./chunk-WWN5RJW3.js";import"./chunk-H3LYBNOM.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-NBD2MYJO.js";import"./chunk-3SBX7V6R.js";import"./chunk-SQKDQBOS.js";import"./chunk-SWRJZAEI.js";import"./chunk-JCSW2JUV.js";import"./chunk-FXFZIWDD.js";import"./chunk-36KMLI7A.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{k as h}from"./chunk-CRC5ZNR6.js";function N(t,r){if(t&1&&(n(0,"div",18),s(1),o()),t&2){let m=u();a(),x(" ",m.getErrorMessage("email")," ")}}function j(t,r){if(t&1&&(n(0,"div",18),s(1),o()),t&2){let m=u();a(),x(" ",m.getErrorMessage("password")," ")}}function D(t,r){if(t&1&&(n(0,"div",19),s(1),o()),t&2){let m=u();a(),x(" ",m.errorMessage," ")}}function q(t,r){t&1&&g(0,"ion-spinner",20)}function A(t,r){t&1&&(n(0,"span"),s(1,"Iniciar Sesi\xF3n"),o())}var Q=(()=>{let r=class r{constructor(l,e,i){this.formBuilder=l,this.authService=e,this.router=i,this.isLoading=!1,this.errorMessage=""}ngOnInit(){this.initForm()}initForm(){this.loginForm=this.formBuilder.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]})}onSubmit(){return h(this,null,function*(){if(this.loginForm.valid){this.isLoading=!0,this.errorMessage="";let l=this.loginForm.value;try{let e=yield this.authService.login(l);console.log("Login exitoso:",e),this.router.navigate(["/home"])}catch(e){console.error("Error en login:",e),this.errorMessage=e.message||"Error al iniciar sesi\xF3n. Int\xE9ntalo de nuevo."}finally{this.isLoading=!1}}else this.markFormGroupTouched()})}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(l=>{let e=this.loginForm.get(l);e==null||e.markAsTouched()})}getErrorMessage(l){let e=this.loginForm.get(l);if(e!=null&&e.errors&&e.touched){if(e.errors.required)return`${l==="email"?"El email":"La contrase\xF1a"} es requerido`;if(e.errors.email)return"El email no es v\xE1lido";if(e.errors.minlength)return"La contrase\xF1a debe tener al menos 6 caracteres"}return""}goToRegister(){this.router.navigate(["/auth/register"])}};r.\u0275fac=function(e){return new(e||r)(d(S),d(w),d(M))},r.\u0275cmp=b({type:r,selectors:[["app-login"]],decls:30,vars:7,consts:[[1,"login-container"],[1,"login-card"],[1,"logo-container"],["src","assets/icon/LogoGestionAvisos.png","alt","Logo",1,"logo"],[1,"app-title"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-title"],[1,"form-group"],["type","email","formControlName","email","placeholder","tu@email.com","autocomplete","email",1,"form-control"],["class","error-message",4,"ngIf"],["type","password","formControlName","password","placeholder","Tu contrase\xF1a","autocomplete","current-password",1,"form-control"],["class","error-message global-error",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[1,"button-content"],["name","crescent",4,"ngIf"],[4,"ngIf"],[1,"register-link"],[1,"link",3,"click"],[1,"error-message"],[1,"error-message","global-error"],["name","crescent"]],template:function(e,i){e&1&&(n(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2),g(4,"img",3),n(5,"h1",4),s(6,"Gesti\xF3n de Avisos"),o()(),n(7,"form",5),_("ngSubmit",function(){return i.onSubmit()}),n(8,"h2",6),s(9,"Iniciar Sesi\xF3n"),o(),n(10,"div",7)(11,"label"),s(12,"Email"),o(),g(13,"input",8),o(),f(14,N,2,1,"div",9),n(15,"div",7)(16,"label"),s(17,"Contrase\xF1a"),o(),g(18,"input",10),o(),f(19,j,2,1,"div",9)(20,D,2,1,"div",11),n(21,"button",12)(22,"div",13),f(23,q,1,0,"ion-spinner",14)(24,A,2,0,"span",15),o()(),n(25,"div",16)(26,"p"),s(27,"\xBFNo tienes cuenta? "),n(28,"a",17),_("click",function(){return i.goToRegister()}),s(29,"Reg\xEDstrate aqu\xED"),o()()()()()()()),e&2&&(a(7),c("formGroup",i.loginForm),a(7),c("ngIf",i.getErrorMessage("email")),a(5),c("ngIf",i.getErrorMessage("password")),a(),c("ngIf",i.errorMessage),a(),c("disabled",i.isLoading||!i.loginForm.valid),a(2),c("ngIf",i.isLoading),a(),c("ngIf",!i.isLoading))},dependencies:[v,C,z,L,T,k,I,y,O,P,E,F],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:#fafbff;padding:20px;font-family:Inter,sans-serif}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 20px #00000014;padding:40px;width:100%;max-width:400px;animation:_ngcontent-%COMP%_slideUp .4s ease-out;border:1px solid #F1F5F9}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.logo-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.logo[_ngcontent-%COMP%]{width:100px;height:auto;margin-bottom:16px}.app-title[_ngcontent-%COMP%]{color:#26262a;font-size:24px;font-weight:600;margin:0;font-family:Poppins,sans-serif}.form-title[_ngcontent-%COMP%]{text-align:center;color:#26262a;font-size:18px;font-weight:500;margin-bottom:32px;font-family:Inter,sans-serif}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;font-weight:500;color:#26262a;font-family:Inter,sans-serif}.form-control[_ngcontent-%COMP%]{position:relative;width:100%;padding:12px 16px;background-color:#fafbff;border:1px solid #E2E8F0;border-radius:12px;font-size:16px;color:#26262a;transition:all .2s ease;font-family:Inter,sans-serif;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;background:#fff;box-shadow:0 0 0 3px #4f46e51a}.form-control[_ngcontent-%COMP%]::placeholder{color:#acacac}.form-control[_ngcontent-%COMP%]:hover{border-color:#4f46e5;background:#fff}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:13px;margin-top:6px;margin-left:4px;animation:_ngcontent-%COMP%_fadeIn .3s ease-in;font-family:Inter,sans-serif}.global-error[_ngcontent-%COMP%]{background:#fdf2f2;border:1px solid #fecaca;border-radius:8px;padding:12px 16px;margin:8px 0;text-align:center;font-size:14px;font-family:Inter,sans-serif}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.login-button[_ngcontent-%COMP%]{width:100%;background:#4f46e5;border:none;border-radius:12px;padding:16px;font-weight:600;font-size:16px;margin-top:8px;transition:all .2s ease;font-family:Inter,sans-serif;box-shadow:0 2px 8px #4f46e533;cursor:pointer;color:#fff;display:flex;align-items:center;justify-content:center}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#4338ca;transform:translateY(-1px);box-shadow:0 4px 12px #4f46e54d}.login-button[_ngcontent-%COMP%]:disabled{background:#acacac;transform:none;box-shadow:none;cursor:not-allowed;opacity:.6}.login-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:24px}.register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0;font-size:14px;font-family:Inter,sans-serif}.link[_ngcontent-%COMP%]{color:#4f46e5;text-decoration:none;font-weight:600;cursor:pointer;transition:color .2s ease;font-family:Inter,sans-serif}.link[_ngcontent-%COMP%]:hover{color:#4338ca;text-decoration:underline}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:16px}.login-card[_ngcontent-%COMP%]{padding:32px 24px;margin:0;border-radius:12px}.app-title[_ngcontent-%COMP%]{font-size:22px}.form-title[_ngcontent-%COMP%]{font-size:16px}.login-form[_ngcontent-%COMP%]{gap:16px}.form-control[_ngcontent-%COMP%]{padding:10px 14px;font-size:16px}.login-button[_ngcontent-%COMP%]{padding:14px;font-size:16px}}"]});let t=r;return t})();export{Q as LoginComponent};
