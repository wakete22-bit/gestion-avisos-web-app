import{a as O,b as Y}from"./chunk-XNMP2MVE.js";import{A as L,B as T,E,H as Q,Ja as H,K as z,N as R,Pa as U,X as N,a as C,da as X,ja as V,ma as j,ra as F,ta as D,v as I}from"./chunk-D2B24UYB.js";import{a as Z}from"./chunk-FQMIWEQL.js";import{b as K}from"./chunk-SVEN6MIY.js";import{h as J,v as w}from"./chunk-S7JRATTN.js";import"./chunk-IKRJSOOB.js";import"./chunk-OW3FFWTU.js";import{$ as k,Da as p,M as u,N as g,R as W,X as A,Y as _,Z as f,ab as M,da as v,gb as S,ia as b,ka as x,ma as o,na as t,oa as r,qb as G,sa as h,sb as P,ta as a,tb as $,ua as m,ub as q}from"./chunk-M7VHNEAX.js";import"./chunk-3SUPCH3T.js";import"./chunk-QUJFQN2Y.js";import"./chunk-OGR5ZLHR.js";import"./chunk-CUT3BV6K.js";import"./chunk-73IMGLZG.js";import"./chunk-G2E2NLL6.js";import"./chunk-ILJSYHS4.js";import"./chunk-OAP23YNX.js";import"./chunk-YYM7CL2V.js";import"./chunk-5LR2YXX6.js";import"./chunk-WDU4QEMV.js";import"./chunk-CKP3SGE2.js";import"./chunk-ULLEADC5.js";import"./chunk-2ELISCRH.js";import"./chunk-BV4CTHEE.js";import"./chunk-JILLMCFB.js";import"./chunk-WWN5RJW3.js";import"./chunk-H3LYBNOM.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-NBD2MYJO.js";import"./chunk-3SBX7V6R.js";import"./chunk-SQKDQBOS.js";import"./chunk-SWRJZAEI.js";import"./chunk-JCSW2JUV.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-36KMLI7A.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{k as B}from"./chunk-CRC5ZNR6.js";function oe(c,s){if(c&1){let l=h();o(0,"a",29),a("click",function(){u(l);let n=m();return g(n.onNavClick())}),r(1,"ion-icon",30),p(2,"T\xE9cnicos"),t()}}C({"grid-outline":N,"notifications-outline":j,"time-outline":U,"cube-outline":z,"document-text-outline":R,"cash-outline":I,"people-outline":F,"settings-outline":H,"person-circle-outline":D,"chevron-forward-outline":T,"chevron-down-outline":L,"close-outline":E});var ee=(()=>{let s=class s{constructor(i,n,e){this.authService=i,this.rolesService=n,this.router=e,this.isOpen=!1,this.closeSidebar=new W,this.currentUser=null,this.rolActual=null,this.TipoRol=O,this.isAdmin=!1,C({closeOutline:E,gridOutline:N,notificationsOutline:j,timeOutline:U,cubeOutline:z,documentTextOutline:R,cashOutline:I,peopleOutline:F,constructOutline:Q,settingsOutline:H,personCircleOutline:D,logOutOutline:X,chevronForwardOutline:T,chevronDownOutline:L})}ngOnInit(){this.authService.currentUser$.subscribe(i=>{this.currentUser=i}),this.rolesService.getRolActual().subscribe(i=>{this.rolActual=i}),this.rolesService.esAdministrador().subscribe(i=>{this.isAdmin=i,console.log("\u{1F527} SidebarComponent: Rol actual:",this.rolActual)})}onCloseSidebar(){this.closeSidebar.emit()}onNavClick(){window.innerWidth<=768&&this.onCloseSidebar()}onLogout(){return B(this,null,function*(){yield this.authService.logout(),this.router.navigate(["/auth/login"]),this.onCloseSidebar()})}getRolDisplayName(){return this.rolActual?{[O.ADMINISTRADOR]:"Administrador",[O.TECNICO]:"T\xE9cnico",[O.USUARIO]:"Usuario"}[this.rolActual]:"Usuario"}};s.\u0275fac=function(n){return new(n||s)(f(K),f(Y),f(P))},s.\u0275cmp=k({type:s,selectors:[["app-sidebar"]],inputs:{isOpen:"isOpen"},outputs:{closeSidebar:"closeSidebar"},decls:39,vars:3,consts:[[1,"sidebar"],[1,"sidebar-close-btn",3,"click"],["name","close-outline"],[1,"sidebar-header"],["src","assets/icon/LogoGestionAvisosLargo.png","alt","Logo",1,"logo",2,"width","180px"],[1,"sidebar-menu"],["routerLink","/home","routerLinkActive","active",3,"click"],["name","grid-outline",1,"icon"],["routerLink","/avisos","routerLinkActive","active",3,"click"],["name","notifications-outline",1,"icon"],["routerLink","/historial","routerLinkActive","active",3,"click"],["name","time-outline",1,"icon"],["routerLink","/inventario","routerLinkActive","active",3,"click"],["name","cube-outline",1,"icon"],["routerLink","/facturas","routerLinkActive","active",3,"click"],["name","document-text-outline",1,"icon"],["routerLink","/presupuestos","routerLinkActive","active",3,"click"],["name","cash-outline",1,"icon"],["routerLink","/clientes","routerLinkActive","active",3,"click"],["name","people-outline",1,"icon"],["routerLink","/tecnicos","routerLinkActive","active",3,"click",4,"ngIf"],[1,"sidebar-footer"],["routerLink","/ajustes","routerLinkActive","active",3,"click"],["name","settings-outline",1,"icon"],["routerLink","/cuenta","routerLinkActive","active",3,"click"],["name","person-circle-outline",1,"icon"],[1,"logout-link",3,"click"],["name","log-out-outline",1,"icon"],[1,"sidebar-spacer"],["routerLink","/tecnicos","routerLinkActive","active",3,"click"],["name","construct-outline",1,"icon"]],template:function(n,e){n&1&&(o(0,"aside",0)(1,"div",1),a("click",function(){return e.onCloseSidebar()}),r(2,"ion-icon",2),t(),o(3,"div",3),r(4,"img",4),t(),o(5,"nav",5)(6,"a",6),a("click",function(){return e.onNavClick()}),r(7,"ion-icon",7),p(8,"Inicio"),t(),o(9,"a",8),a("click",function(){return e.onNavClick()}),r(10,"ion-icon",9),p(11,"Avisos"),t(),o(12,"a",10),a("click",function(){return e.onNavClick()}),r(13,"ion-icon",11),p(14,"Historial"),t(),o(15,"a",12),a("click",function(){return e.onNavClick()}),r(16,"ion-icon",13),p(17,"Inventario"),t(),o(18,"a",14),a("click",function(){return e.onNavClick()}),r(19,"ion-icon",15),p(20,"Facturas"),t(),o(21,"a",16),a("click",function(){return e.onNavClick()}),r(22,"ion-icon",17),p(23,"Presupuestos"),t(),o(24,"a",18),a("click",function(){return e.onNavClick()}),r(25,"ion-icon",19),p(26,"Clientes"),t(),v(27,oe,3,0,"a",20),t(),o(28,"div",21)(29,"a",22),a("click",function(){return e.onNavClick()}),r(30,"ion-icon",23),p(31,"Ajustes"),t(),o(32,"a",24),a("click",function(){return e.onNavClick()}),r(33,"ion-icon",25),p(34,"Mi cuenta"),t(),o(35,"a",26),a("click",function(){return e.onLogout()}),r(36,"ion-icon",27),p(37,"Cerrar Sesi\xF3n"),t()(),r(38,"div",28),t()),n&2&&(x("open",e.isOpen),_(27),b("ngIf",e.rolActual===e.TipoRol.ADMINISTRADOR))},dependencies:[w,$,q,S,M],styles:[".sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:#fff;background-color:#fff;border-right:1px solid #E2E8F0;padding:24px 0 0;box-sizing:border-box;z-index:1001;position:relative;transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-close-btn[_ngcontent-%COMP%]{display:none;position:absolute;top:16px;right:16px;width:32px;height:32px;border-radius:50%;background:#f1f5f9;border:none;cursor:pointer;align-items:center;justify-content:center;z-index:1002;transition:background-color .2s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-close-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#64748b}.sidebar[_ngcontent-%COMP%]   .sidebar-close-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:0 32px 32px;font-weight:700;font-size:1.1rem}.sidebar-menu[_ngcontent-%COMP%], .sidebar-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:0 24px}.sidebar-menu[_ngcontent-%COMP%]{flex:0 0 auto}.sidebar-footer[_ngcontent-%COMP%]{margin-top:24px;padding-top:16px;flex:0 0 auto;padding-bottom:var(--safe-margin-bottom)}.sidebar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:8px;color:#64748b;text-decoration:none;font-size:1rem;transition:background .2s,color .2s}a.active[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{background:#eef2ff;color:#4f46e5;font-weight:500}a.active[_ngcontent-%COMP%]{background:#eef2ff;color:#4f46e5;font-weight:600}.logout-link[_ngcontent-%COMP%]{cursor:pointer;color:#e74c3c!important}.logout-link[_ngcontent-%COMP%]:hover{background:#fdf2f2!important;color:#c53030!important}.icon[_ngcontent-%COMP%]{font-size:1.2em}.sidebar-user[_ngcontent-%COMP%]{display:flex;gap:8px;padding:16px 24px;flex-direction:row;align-items:center;justify-content:space-between;border-top:1px solid #f0f0f0}.icon-user[_ngcontent-%COMP%]{font-size:1.2em;display:flex;align-items:center;color:#888}.topbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.topbar-right[_ngcontent-%COMP%]   .user-info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.topbar-right[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]{color:#888;font-size:14px}.topbar-right[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-weight:500;margin-right:8px;color:#222;font-size:14px}.topbar-right[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{font-size:12px;color:#666;font-weight:400}.topbar-right[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;background:#ffe7a0;border-radius:50%;display:inline-block;background-image:url(https://randomuser.me/api/portraits/men/1.jpg);background-size:cover;background-position:center}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:0;bottom:0;transform:translate(-100%);width:280px;max-width:85vw;background:#fff!important;box-shadow:2px 0 10px #0000001a;z-index:1000}.sidebar[_ngcontent-%COMP%]   .sidebar-close-btn[_ngcontent-%COMP%]{display:flex}.sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{padding:16px 24px 24px}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:140px!important}.sidebar[_ngcontent-%COMP%]   .sidebar-menu[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{padding:0 16px}.sidebar[_ngcontent-%COMP%]   .sidebar-user[_ngcontent-%COMP%]{padding:16px;background:#fff}}@media (max-width: 480px){.sidebar[_ngcontent-%COMP%]{width:100vw;max-width:100vw}}"]});let c=s;return c})();function re(c,s){if(c&1){let l=h();o(0,"ion-header",4)(1,"ion-toolbar")(2,"div",5)(3,"button",6),a("click",function(){u(l);let n=m();return g(n.toggleSidebar())}),r(4,"ion-icon",7),t(),o(5,"div",8),r(6,"img",9),t(),o(7,"div",10),a("click",function(){u(l);let n=m();return g(n.miCuenta())}),o(8,"span",11),r(9,"img",12),t()()()()()}}function ae(c,s){if(c&1){let l=h();o(0,"div",13),a("click",function(){u(l);let n=m();return g(n.onOverlayClick())}),t()}}function se(c,s){if(c&1){let l=h();o(0,"app-sidebar",14),a("closeSidebar",function(){u(l);let n=m();return g(n.closeSidebar())}),t()}if(c&2){let l=m();x("open",l.isMobile?l.isSidebarOpen:!0),b("isOpen",l.isMobile?l.isSidebarOpen:!0)}}C({"menu-outline":V});var Ie=(()=>{let s=class s{constructor(i,n){this.safeAreaService=i,this.router=n,this.isSidebarOpen=!1,this.isMobile=!1,this.isIOS=!1,this.isAndroid=!1,this.isStandalone=!1,C({menuOutline:V}),this.checkScreenSize()}ngOnInit(){this.initializePlatformInfo()}initializePlatformInfo(){let i=this.safeAreaService.getPlatformInfo();this.isIOS=i.isIOS,this.isAndroid=i.isAndroid,this.isStandalone=i.isStandalone}onResize(){this.checkScreenSize()}onOrientationChange(){setTimeout(()=>{this.safeAreaService.recalculateSafeAreas()},100)}checkScreenSize(){let i=this.isMobile;this.isMobile=window.innerWidth<=768,i===!1&&this.isMobile===!0&&(this.isSidebarOpen=!1),i===!0&&this.isMobile===!1&&(this.isSidebarOpen=!0)}toggleSidebar(){this.isMobile&&(this.isSidebarOpen=!this.isSidebarOpen)}miCuenta(){this.router.navigate(["/cuenta"])}closeSidebar(){this.isMobile&&(this.isSidebarOpen=!1)}onOverlayClick(){this.isMobile&&this.isSidebarOpen&&this.closeSidebar()}};s.\u0275fac=function(n){return new(n||s)(f(Z),f(P))},s.\u0275cmp=k({type:s,selectors:[["app-main-layout"]],hostBindings:function(n,e){n&1&&a("resize",function(y){return e.onResize(y)},!1,A)("orientationchange",function(y){return e.onOrientationChange(y)},!1,A)},decls:5,vars:11,consts:[["class","main-layout-mobile-header",4,"ngIf"],["class","sidebar-overlay",3,"click",4,"ngIf"],["class","sidebar",3,"open","isOpen","closeSidebar",4,"ngIf"],[1,"main-content"],[1,"main-layout-mobile-header"],[1,"mobile-toolbar-content"],[1,"hamburger-btn",3,"click"],["name","menu-outline"],[1,"mobile-title"],["src","assets/icon/LogoGestionAvisosLargo.png","alt","Logo",1,"mobile-logo"],[1,"mobile-profile",3,"click"],[1,"avatar"],["src","assets/icon/photo-profile.png","alt","Foto de perfil",1,"profile-avatar"],[1,"sidebar-overlay",3,"click"],[1,"sidebar",3,"closeSidebar","isOpen"]],template:function(n,e){n&1&&(v(0,re,10,0,"ion-header",0)(1,ae,1,0,"div",1)(2,se,1,3,"app-sidebar",2),o(3,"ion-content",3),r(4,"router-outlet"),t()),n&2&&(b("ngIf",e.isMobile),_(),b("ngIf",e.isMobile&&e.isSidebarOpen),_(),b("ngIf",!e.isMobile||e.isMobile&&e.isSidebarOpen),_(),x("mobile",e.isMobile)("ios",e.isIOS)("android",e.isAndroid)("standalone",e.isStandalone))},dependencies:[S,M,G,ee,w,J],styles:[".main-layout-mobile-header[_ngcontent-%COMP%]{display:none;background:#fff;border-bottom:1px solid #e2e8f0;box-shadow:0 1px 3px #0000001a}.main-layout-mobile-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #fff;--border-color: #e2e8f0;--min-height: 60px;--height: 60px}.mobile-toolbar-content[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:100%;padding:0 16px}.hamburger-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border:none;background:transparent;border-radius:8px;cursor:pointer;margin-right:12px;transition:background-color .2s ease}.hamburger-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#64748b}.hamburger-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9}.mobile-title[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center}.mobile-title[_ngcontent-%COMP%]   .mobile-logo[_ngcontent-%COMP%]{height:32px;width:auto}.mobile-profile[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-left:12px;cursor:pointer;padding:4px;border-radius:50%;transition:background-color .2s ease}.mobile-profile[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.mobile-profile[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;background:#ffe7a0;border-radius:50%;display:inline-block;background-image:var(--default-avatar);background-size:cover;background-position:center;border:2px solid #fff;box-shadow:0 2px 4px #0000001a}.sidebar-overlay[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;z-index:999;animation:_ngcontent-%COMP%_fadeIn .3s ease}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:250px;height:100vh;overflow-y:auto;overflow-x:hidden;background-color:#fafbff;transition:transform .3s ease;z-index:1000}@media (min-width: 769px){.sidebar[_ngcontent-%COMP%]{transform:translate(0);box-shadow:2px 0 8px #0000001a}}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{transform:translate(-100%)}.sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}}.main-content[_ngcontent-%COMP%]{--background: #FAFBFF;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0}@media (min-width: 769px){.main-content[_ngcontent-%COMP%]{--padding-start: 250px}}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{--padding-start: 0}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media (max-width: 768px){.main-layout-mobile-header[_ngcontent-%COMP%]{display:block}.main-layout-mobile-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--min-height: 50px;--height: 50px}.sidebar[_ngcontent-%COMP%]{width:100vw;max-width:100vw}.sidebar-overlay[_ngcontent-%COMP%]{display:block}}"]});let c=s;return c})();export{Ie as MainLayoutComponent};
