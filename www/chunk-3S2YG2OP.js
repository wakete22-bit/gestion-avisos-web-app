import{a as J,b as On}from"./chunk-DTEURPKB.js";import"./chunk-TPFNBOPC.js";import"./chunk-XLBNYIMP.js";import{a as xn}from"./chunk-E7WEDNUB.js";import{a as Cn}from"./chunk-AG44W7G2.js";import{$ as tt,B as Zt,Ba as Y,C as tn,D as nn,Da as un,H as G,M as en,N as on,P as U,S as an,V as rn,W as cn,X as sn,a as z,aa as ln,b as Lt,ba as nt,c as Gt,da as et,e as Ut,g as Ht,ha as ot,i as K,j as Qt,ja as it,k as Wt,la as H,n as Yt,o as X,qa as dn,ra as Q,sa as gn,t as Jt,ta as pn,ua as mn,v as L,x as Z,y as Kt,ya as _n,z as Xt,za as W}from"./chunk-YLXVY5X4.js";import{a as fn}from"./chunk-AXRRPIFT.js";import{e as Nt,h as Bt,j as qt}from"./chunk-CENH7PAC.js";import{e as Rt,j as q}from"./chunk-HRZTQKZO.js";import"./chunk-EZQHEP6E.js";import{$ as x,$b as kt,Aa as N,Ca as ut,Da as Ct,Ea as ft,Ga as xt,I as C,J as f,Ka as w,La as $,Ma as B,N as st,P as lt,Ra as Ot,S as dt,Sa as T,Sb as yt,Ta as V,U as s,Ub as k,V as b,Va as Pt,Vb as jt,Wa as Mt,Wb as wt,X as F,Xa as bt,Ya as A,_b as Et,b as I,cb as ht,cc as zt,dc as St,ea as d,ec as It,fa as D,fb as vt,fc as Ft,ga as gt,gc as Tt,h as j,ha as t,ia as e,ja as p,kc as Vt,lc as At,mc as Dt,na as P,nc as $t,oa as u,pa as g,ta as pt,ua as mt,va as _t,w as v,xa as a,ya as _,za as h}from"./chunk-YCXETNVK.js";import"./chunk-WSRQKSRN.js";import"./chunk-QUJFQN2Y.js";import"./chunk-K4IZC2RK.js";import"./chunk-XEKAQYZJ.js";import"./chunk-3PHZVRGI.js";import"./chunk-67GB35HJ.js";import"./chunk-3RJWN2F5.js";import"./chunk-2ELISCRH.js";import"./chunk-MSFXF37Z.js";import"./chunk-55RMRGVQ.js";import"./chunk-G2E2NLL6.js";import"./chunk-CFQAPMCR.js";import"./chunk-CW65YK7W.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-VAE5WQLH.js";import"./chunk-CKP3SGE2.js";import"./chunk-I2N4S4X5.js";import"./chunk-CALWKLRW.js";import"./chunk-IQN6SQ4S.js";import"./chunk-SGF4SMHT.js";import"./chunk-QXK7JUJJ.js";import"./chunk-JCSW2JUV.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-2MILALDA.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as rt,b as ct,k as y}from"./chunk-CRC5ZNR6.js";var yn=()=>({standalone:!0});function jn(c,l){c&1&&(t(0,"div",15)(1,"div",16),p(2,"ion-icon",17),t(3,"p"),a(4,"Cargando datos del trabajo..."),e()()())}function wn(c,l){c&1&&(t(0,"div",46),p(1,"ion-icon",47),t(2,"p"),a(3,"Al editar el trabajo, los materiales se ajustar\xE1n autom\xE1ticamente en el inventario."),e()())}function En(c,l){c&1&&(t(0,"div",48),p(1,"ion-icon",17),t(2,"span"),a(3,"Cargando productos..."),e()())}function kn(c,l){if(c&1&&(t(0,"div",49),a(1),e()),c&2){let o=g(2);s(),h(" ",o.errorProductos," ")}}function zn(c,l){if(c&1&&(t(0,"span",63),a(1),e()),c&2){let o=g().$implicit;s(),_(o.descripcion)}}function Sn(c,l){if(c&1){let o=P();t(0,"div",53),u("click",function(){let r=C(o).$implicit,i=g(3);return f(i.agregarMaterial(r))}),t(1,"div",54)(2,"div",55)(3,"span",56),a(4),e(),t(5,"span",57),a(6),e()(),t(7,"span",58),a(8),e(),x(9,zn,2,1,"span",59),t(10,"span",60),a(11),w(12,"currency"),e()(),t(13,"button",61),p(14,"ion-icon",62),e()()}if(c&2){let o=l.$implicit;D("sin-stock",o.cantidad_disponible<=0)("stock-bajo",o.cantidad_disponible>0&&o.cantidad_disponible<=5),s(4),_(o.codigo),s(),D("stock-bajo",o.cantidad_disponible>0&&o.cantidad_disponible<=5)("sin-stock",o.cantidad_disponible<=0),s(),N(" Stock: ",o.cantidad_disponible," ",o.unidad," "),s(2),_(o.nombre),s(),d("ngIf",o.descripcion),s(2),_(B(12,15,o.precio_neto,"EUR","symbol","1.2-2")),s(2),d("disabled",o.cantidad_disponible<=0)}}function In(c,l){if(c&1&&(t(0,"div",50)(1,"h4"),a(2,"Productos disponibles"),e(),t(3,"div",51),x(4,Sn,15,20,"div",52),e()()),c&2){let o=g(2);s(4),d("ngForOf",o.productosFiltrados)}}function Fn(c,l){if(c&1){let o=P();t(0,"div",67)(1,"div",68)(2,"div",69)(3,"span",70),a(4),e(),t(5,"span",71),a(6),w(7,"currency"),e()(),t(8,"span",72),a(9),e(),t(10,"div",73)(11,"label"),a(12,"Cantidad:"),e(),t(13,"input",74),u("change",function(r){let i=C(o).index,m=g(3);return f(m.actualizarCantidadMaterial(i,r.target.value))}),e(),t(14,"span",75),a(15),e()()(),t(16,"button",76),u("click",function(){let r=C(o).index,i=g(3);return f(i.eliminarMaterial(r))}),p(17,"ion-icon",77),e()()}if(c&2){let o=l.$implicit;s(4),_(o.producto.codigo),s(2),_(B(7,7,o.producto.precio_neto,"EUR","symbol","1.2-2")),s(3),_(o.producto.nombre),s(4),d("value",o.cantidad)("min",1)("max",o.producto.cantidad_disponible),s(2),_(o.producto.unidad)}}function Tn(c,l){if(c&1&&(t(0,"div",64)(1,"h4"),a(2,"Materiales a\xF1adidos"),e(),x(3,Fn,18,12,"div",65),t(4,"div",66)(5,"strong"),a(6),w(7,"currency"),e()()()),c&2){let o=g(2);s(3),d("ngForOf",o.materiales),s(3),h("Costo total de materiales: ",B(7,2,o.calcularCostoTotal(),"EUR","symbol","1.2-2"),"")}}function Vn(c,l){c&1&&(t(0,"div",78),p(1,"ion-icon",47),t(2,"p"),a(3,"No se han a\xF1adido materiales"),e(),t(4,"span"),a(5,"Selecciona productos del inventario para a\xF1adirlos como materiales"),e()())}function An(c,l){if(c&1){let o=P();t(0,"div",18)(1,"div",19)(2,"div",20)(3,"label"),a(4,"Fecha del trabajo "),t(5,"span",21),a(6,"*"),e()(),p(7,"input",22),e(),t(8,"div",23)(9,"div",24)(10,"label"),a(11,"Hora de inicio "),t(12,"span",21),a(13,"*"),e()(),p(14,"input",25),e(),t(15,"div",24)(16,"label"),a(17,"Hora de fin "),t(18,"span",21),a(19,"*"),e()(),p(20,"input",26),e()(),t(21,"div",20)(22,"label"),a(23,"Descripci\xF3n del trabajo "),t(24,"span",21),a(25,"*"),e()(),t(26,"textarea",27),a(27,"            "),e(),t(28,"div",28),a(29),e()(),t(30,"div",20)(31,"label"),a(32,"Estado del trabajo"),e(),t(33,"select",29)(34,"option",30),a(35,"Pendiente"),e(),t(36,"option",31),a(37,"En curso"),e(),t(38,"option",32),a(39,"Completado"),e(),t(40,"option",33),a(41,"Cancelado"),e()()()(),t(42,"div",34)(43,"div",35)(44,"h3"),a(45,"Materiales utilizados"),e(),x(46,wn,4,0,"div",36),t(47,"div",37)(48,"div",38),p(49,"ion-icon",39),t(50,"input",40),ft("ngModelChange",function(r){C(o);let i=g();return Ct(i.busquedaProducto,r)||(i.busquedaProducto=r),f(r)}),u("input",function(r){C(o);let i=g();return f(i.filtrarProductos(r))}),e()()(),x(51,En,4,0,"div",41)(52,kn,2,1,"div",42)(53,In,5,1,"div",43)(54,Tn,8,7,"div",44)(55,Vn,6,0,"div",45),e()()()}if(c&2){let o,n=g();s(29),h("",((o=n.trabajoForm.get("descripcion"))==null||o.value==null?null:o.value.length)||0,"/500"),s(17),d("ngIf",n.modoEdicion),s(4),ut("ngModel",n.busquedaProducto),d("ngModelOptions",xt(9,yn)),s(),d("ngIf",n.loadingProductos),s(),d("ngIf",n.errorProductos),s(),d("ngIf",!n.loadingProductos&&!n.errorProductos),s(),d("ngIf",n.materiales.length>0),s(),d("ngIf",n.materiales.length===0&&!n.loadingProductos&&!n.errorProductos)}}var bn=(()=>{let l=class l{constructor(n,r,i,m,O,M){this.fb=n,this.modalController=r,this.viewportService=i,this.elementRef=m,this.inventarioService=O,this.trabajosService=M,this.avisoId="",this.materiales=[],this.productosInventario=[],this.productosFiltrados=[],this.loadingProductos=!1,this.errorProductos=null,this.busquedaProducto="",this.modoEdicion=!1,this.destroy$=new I,this.trabajoForm=this.fb.group({fecha_trabajo:[new Date().toISOString().split("T")[0],k.required],hora_inicio:["",k.required],hora_fin:["",k.required],descripcion:["",[k.required,k.maxLength(500)]],estado:["Pendiente",k.required]})}ngOnInit(){z({arrowForward:Qt,personOutline:H,mailOutline:ln,chevronDownOutline:L,copyOutline:tn,shieldOutline:_n,informationCircleOutline:cn,cloudUploadOutline:Xt,closeOutline:Kt,save:gn,saveOutline:pn,trashOutline:Y,timeOutline:W,calendarOutline:Yt,documentTextOutline:G,addOutline:Ut,searchOutline:mn}),this.modoEdicion=!!this.trabajoExistente,this.modoEdicion&&this.trabajoExistente&&this.cargarDatosTrabajoExistente(),this.cargarProductosInventario()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){setTimeout(()=>{let n=this.elementRef.nativeElement.querySelector(".modal-container");n&&this.viewportService.applySafeAreaToModal(n)},100)}cargarDatosTrabajoExistente(){return y(this,null,function*(){var n;if((n=this.trabajoExistente)!=null&&n.id)try{let r=yield j(this.trabajosService.getTrabajo(this.trabajoExistente.id));if(this.trabajoForm.patchValue({fecha_trabajo:this.trabajoExistente.fecha_trabajo,hora_inicio:this.trabajoExistente.hora_inicio,hora_fin:this.trabajoExistente.hora_fin,descripcion:this.trabajoExistente.descripcion,estado:this.trabajoExistente.estado}),r.materiales&&r.materiales.length>0){let i=yield Promise.all(r.materiales.map(m=>y(this,null,function*(){return{producto:yield j(this.inventarioService.getProducto(m.material_id)),cantidad:m.cantidad_utilizada}})));this.materiales=i}}catch(r){console.error("Error al cargar datos del trabajo existente:",r),alert("Error al cargar los datos del trabajo para editar.")}})}cargarProductosInventario(){this.loadingProductos=!0,this.errorProductos=null,this.inventarioService.getProductosConStock(1,100,"","nombre","asc").pipe(v(this.destroy$)).subscribe({next:n=>{this.productosInventario=n.inventario,this.productosFiltrados=n.inventario,this.loadingProductos=!1},error:n=>{console.error("Error al cargar productos:",n),this.errorProductos="Error al cargar los productos del inventario",this.loadingProductos=!1}})}filtrarProductos(n){let r=n.target.value.toLowerCase();this.busquedaProducto=r,r?this.productosFiltrados=this.productosInventario.filter(i=>i.nombre.toLowerCase().includes(r)||i.codigo.toLowerCase().includes(r)||i.descripcion&&i.descripcion.toLowerCase().includes(r)):this.productosFiltrados=this.productosInventario}agregarMaterial(n){let r=this.materiales.find(i=>i.producto.id===n.id);if(r){let i=r.cantidad+1;if(i>n.cantidad_disponible){alert(`No hay suficiente stock. Solo quedan ${n.cantidad_disponible} ${n.unidad} de ${n.nombre}`);return}r.cantidad=i}else{if(n.cantidad_disponible<=0){alert(`No hay stock disponible para ${n.nombre}`);return}this.materiales.push({producto:n,cantidad:1})}}eliminarMaterial(n){this.materiales.splice(n,1)}actualizarCantidadMaterial(n,r){let i=this.materiales[n],m=parseInt(r.toString());if(!(isNaN(m)||m<=0)){if(m>i.producto.cantidad_disponible){alert(`No hay suficiente stock. Solo quedan ${i.producto.cantidad_disponible} ${i.producto.unidad} de ${i.producto.nombre}`);return}i.cantidad=m}}calcularCostoTotal(){return this.materiales.reduce((n,r)=>n+r.cantidad*r.producto.precio_neto,0)}crearTrabajo(){return y(this,null,function*(){if(this.trabajoForm.valid){let n=this.materiales.filter(i=>i.cantidad>i.producto.cantidad_disponible);if(n.length>0){let i=n.map(m=>`${m.producto.nombre}: solicitado ${m.cantidad} ${m.producto.unidad}, disponible ${m.producto.cantidad_disponible} ${m.producto.unidad}`).join(`
`);alert(`No hay suficiente stock para los siguientes materiales:

${i}`);return}let r=ct(rt({},this.trabajoForm.value),{aviso_id:this.avisoId,repuestos:this.materiales.map(i=>i.producto.nombre),materiales:this.materiales.map(i=>({material_id:i.producto.id,cantidad_utilizada:i.cantidad,precio_neto_al_momento:i.producto.precio_neto}))});yield this.modalController.dismiss(r,"confirm")}})}cerrarModal(){return y(this,null,function*(){yield this.modalController.dismiss(null,"cancel")})}};l.\u0275fac=function(r){return new(r||l)(b(At),b(Bt),b(fn),b(lt),b(xn),b(J))},l.\u0275cmp=F({type:l,selectors:[["app-crear-trabajos-realizados"]],inputs:{avisoId:"avisoId",trabajoExistente:"trabajoExistente"},decls:20,vars:7,consts:[[1,"modal-container"],[1,"modal-header"],[1,"header-content"],[1,"close-button",3,"click"],["name","close-outline"],[1,"subtitle"],[1,"modal-body",3,"ngSubmit","formGroup"],[1,"modal-content"],["class","loading-state",4,"ngIf"],["class","modal-grid",4,"ngIf"],[1,"modal-footer"],[1,"button-group"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["name","save-outline"],[1,"loading-state"],[1,"loading-spinner"],["name","refresh-outline",1,"spinning"],[1,"modal-grid"],[1,"form-section"],[1,"form-group"],[1,"required"],["type","date","formControlName","fecha_trabajo",1,"form-control"],[1,"form-row"],[1,"form-group","half"],["type","time","formControlName","hora_inicio",1,"form-control"],["type","time","formControlName","hora_fin",1,"form-control"],["formControlName","descripcion","placeholder","Describe detalladamente el trabajo realizado...","rows","4","maxlength","500",1,"form-control"],[1,"character-count"],["formControlName","estado",1,"form-control"],["value","Pendiente"],["value","En curso"],["value","Completado"],["value","Cancelado"],[1,"images-section"],[1,"repuestos-container"],["class","info-message",4,"ngIf"],[1,"search-container"],[1,"search-input"],["name","search-outline"],["type","text","placeholder","Buscar productos del inventario...",1,"form-control",3,"ngModelChange","input","ngModel","ngModelOptions"],["class","loading-indicator",4,"ngIf"],["class","error-message",4,"ngIf"],["class","productos-disponibles",4,"ngIf"],["class","repuestos-list",4,"ngIf"],["class","no-repuestos",4,"ngIf"],[1,"info-message"],["name","information-circle-outline"],[1,"loading-indicator"],[1,"error-message"],[1,"productos-disponibles"],[1,"productos-list"],["class","producto-item",3,"sin-stock","stock-bajo","click",4,"ngFor","ngForOf"],[1,"producto-item",3,"click"],[1,"producto-info"],[1,"producto-header"],[1,"producto-codigo"],[1,"producto-stock"],[1,"producto-nombre"],["class","producto-descripcion",4,"ngIf"],[1,"producto-precio"],["type","button",1,"add-producto-btn",3,"disabled"],["name","add-outline"],[1,"producto-descripcion"],[1,"repuestos-list"],["class","repuesto-item",4,"ngFor","ngForOf"],[1,"costo-total"],[1,"repuesto-item"],[1,"repuesto-info"],[1,"repuesto-header"],[1,"repuesto-codigo"],[1,"repuesto-precio"],[1,"repuesto-nombre"],[1,"repuesto-cantidad"],["type","number",1,"cantidad-input",3,"change","value","min","max"],[1,"unidad"],["type","button",1,"remove-repuesto",3,"click"],["name","trash-outline"],[1,"no-repuestos"]],template:function(r,i){r&1&&(t(0,"div",0)(1,"header",1)(2,"div",2)(3,"h2"),a(4),e(),t(5,"button",3),u("click",function(){return i.cerrarModal()}),p(6,"ion-icon",4),e()(),t(7,"p",5),a(8),e()(),t(9,"form",6),u("ngSubmit",function(){return i.crearTrabajo()}),t(10,"div",7),x(11,jn,5,0,"div",8)(12,An,56,10,"div",9),e()(),t(13,"footer",10)(14,"div",11)(15,"button",12),u("click",function(){return i.cerrarModal()}),a(16," Cancelar "),e(),t(17,"button",13),u("click",function(){return i.crearTrabajo()}),a(18),p(19,"ion-icon",14),e()()()()),r&2&&(s(4),_(i.modoEdicion?"Editar parte de trabajo":"Crear parte de trabajo"),s(4),_(i.modoEdicion?"Modifica el trabajo realizado":"Registra el trabajo realizado en este aviso"),s(),d("formGroup",i.trabajoForm),s(2),d("ngIf",i.modoEdicion&&!i.trabajoExistente),s(),d("ngIf",!i.modoEdicion||i.trabajoExistente),s(5),d("disabled",!i.trabajoForm.valid),s(),h(" ",i.modoEdicion?"Actualizar trabajo":"Crear trabajo"," "))},dependencies:[qt,Nt,A,T,V,bt,$t,kt,Ft,Tt,yt,It,jt,wt,Vt,zt,St,Dt,Et],styles:[`.modal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:90vh;background:#fff;position:relative}.modal-header[_ngcontent-%COMP%]{padding:16px 24px;border-bottom:1px solid #e5e7eb;flex-shrink:0}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#111827}.modal-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:8px 0 0;color:#6b7280;font-size:14px}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#6b7280;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{color:#111827}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.modal-body[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex;flex-direction:column;min-height:0}.modal-content[_ngcontent-%COMP%]{flex:1;overflow:auto;position:relative;min-height:0}.modal-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:0;height:100%;overflow:hidden}@media (max-width: 768px){.modal-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:auto auto;height:auto;overflow:visible}}.form-section[_ngcontent-%COMP%]{padding:24px;border-right:1px solid #e5e7eb;overflow-y:auto;height:100%;max-height:100%;scrollbar-width:thin;scrollbar-color:#d1d5db #f3f4f6}@media (max-width: 768px){.form-section[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid #e5e7eb;height:auto;max-height:none;overflow:visible;padding-bottom:30px}}.form-section[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.form-section[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f3f4f6;border-radius:3px}.form-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:3px}.form-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#9ca3af}.images-section[_ngcontent-%COMP%]{padding:24px;background-color:#f9fafb;overflow-y:auto;height:100%;max-height:100%;scrollbar-width:thin;scrollbar-color:#d1d5db #f3f4f6}@media (max-width: 768px){.images-section[_ngcontent-%COMP%]{height:auto;max-height:none;overflow:visible;min-height:300px;padding-bottom:80px}}.images-section[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.images-section[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f3f4f6;border-radius:3px}.images-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:3px}.images-section[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#9ca3af}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc2626}.form-group.half[_ngcontent-%COMP%]{flex:1}.form-control[_ngcontent-%COMP%]{position:relative;width:100%;padding:8px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;color:#111827;background-color:#fff;transition:border-color .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 2px #2563eb1a}.form-control[_ngcontent-%COMP%]:disabled{background-color:#f9fafb;color:#6b7280;cursor:not-allowed}select.form-control[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;background-size:16px;padding-right:40px}select.form-control[_ngcontent-%COMP%]:disabled{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E")}select.form-control[_ngcontent-%COMP%]::placeholder{color:#9ca3af}select.form-control[_ngcontent-%COMP%]{padding-right:40px;background-color:#fafafb;border:1px solid transparent;padding-top:10px;padding-bottom:10px;border-radius:6px;font-size:14px;color:#111827;transition:border-color .2s}select.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}input.form-control[_ngcontent-%COMP%]{padding-right:40px;background-color:#fafafb;border:1px solid transparent;padding-top:10px;padding-bottom:10px;border-radius:6px;font-size:14px;color:#111827;transition:border-color .2s}input.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}textarea.form-control[_ngcontent-%COMP%]{position:relative;padding-right:40px;background-color:#fafafb;border:1px solid transparent;padding-top:10px;padding-bottom:10px;border-radius:6px;font-size:14px;color:#111827;transition:border-color .2s;resize:vertical;min-height:80px}textarea.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.character-count[_ngcontent-%COMP%]{margin-top:4px;text-align:right;font-size:12px;color:#6b7280;position:absolute;bottom:13px;right:13px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:20px}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0;flex:1}.repuestos-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;color:#374151;font-weight:600}.search-container[_ngcontent-%COMP%]{margin-bottom:16px}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#6b7280;font-size:18px;z-index:1}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:40px;width:100%}.loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px;color:#6b7280;font-size:14px}.loading-indicator[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.loading-indicator[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px;text-align:center}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#4f46e5}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{padding:12px;background:#fef2f2;color:#dc2626;border-radius:6px;font-size:14px;margin-bottom:16px}.productos-disponibles[_ngcontent-%COMP%]{margin-bottom:24px}.productos-disponibles[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px;color:#374151}.productos-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #E5E7EB;border-radius:6px}.producto-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px;border-bottom:1px solid #F3F4F6;cursor:pointer;transition:background-color .2s}.producto-item[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.producto-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.producto-item.sin-stock[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.producto-item.sin-stock[_ngcontent-%COMP%]:hover{background-color:transparent}.producto-item.stock-bajo[_ngcontent-%COMP%]{border-left:3px solid #F59E0B}.producto-item[_ngcontent-%COMP%]   .producto-info[_ngcontent-%COMP%]{flex:1;min-width:0}.producto-item[_ngcontent-%COMP%]   .producto-info[_ngcontent-%COMP%]   .producto-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.producto-item[_ngcontent-%COMP%]   .producto-info[_ngcontent-%COMP%]   .producto-header[_ngcontent-%COMP%]   .producto-codigo[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-weight:500}.producto-item[_ngcontent-%COMP%]   .producto-info[_ngcontent-%COMP%]   .producto-header[_ngcontent-%COMP%]   .producto-stock[_ngcontent-%COMP%]{font-size:12px;color:#059669;font-weight:500}.producto-item[_ngcontent-%COMP%]   .producto-info[_ngcontent-%COMP%]   .producto-header[_ngcontent-%COMP%]   .producto-stock.stock-bajo[_ngcontent-%COMP%]{color:#f59e0b;font-weight:600}.producto-item[_ngcontent-%COMP%]   .producto-info[_ngcontent-%COMP%]   .producto-header[_ngcontent-%COMP%]   .producto-stock.sin-stock[_ngcontent-%COMP%]{color:#ef4444;font-weight:600}.producto-item[_ngcontent-%COMP%]   .producto-info[_ngcontent-%COMP%]   .producto-nombre[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#111827;margin-bottom:2px}.producto-item[_ngcontent-%COMP%]   .producto-info[_ngcontent-%COMP%]   .producto-descripcion[_ngcontent-%COMP%]{display:block;font-size:12px;color:#6b7280;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.producto-item[_ngcontent-%COMP%]   .producto-info[_ngcontent-%COMP%]   .producto-precio[_ngcontent-%COMP%]{font-size:14px;color:#059669;font-weight:600}.producto-item[_ngcontent-%COMP%]   .add-producto-btn[_ngcontent-%COMP%]{background:#4f46e5;color:#fff;border:none;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background-color .2s}.producto-item[_ngcontent-%COMP%]   .add-producto-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3730a3}.producto-item[_ngcontent-%COMP%]   .add-producto-btn[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed}.producto-item[_ngcontent-%COMP%]   .add-producto-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.repuestos-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;color:#374151;font-weight:500}.repuesto-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background-color:#fff;border-radius:6px;border:1px solid #e5e7eb;margin-bottom:8px}.repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]{flex:1;min-width:0}.repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-header[_ngcontent-%COMP%]   .repuesto-codigo[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-weight:500}.repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-header[_ngcontent-%COMP%]   .repuesto-precio[_ngcontent-%COMP%]{font-size:14px;color:#059669;font-weight:600}.repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-nombre[_ngcontent-%COMP%]{display:block;font-size:14px;color:#374151;font-weight:500;margin-bottom:8px}.repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-cantidad[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-cantidad[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-weight:500}.repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-cantidad[_ngcontent-%COMP%]   .cantidad-input[_ngcontent-%COMP%]{width:60px;padding:4px 8px;border:1px solid #D1D5DB;border-radius:4px;font-size:12px;text-align:center}.repuesto-item[_ngcontent-%COMP%]   .repuesto-info[_ngcontent-%COMP%]   .repuesto-cantidad[_ngcontent-%COMP%]   .unidad[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.repuesto-item[_ngcontent-%COMP%]   .remove-repuesto[_ngcontent-%COMP%]{background:none;border:none;padding:8px;color:#dc2626;cursor:pointer;display:flex;align-items:center;justify-content:center}.repuesto-item[_ngcontent-%COMP%]   .remove-repuesto[_ngcontent-%COMP%]:hover{color:#b91c1c}.repuesto-item[_ngcontent-%COMP%]   .remove-repuesto[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.costo-total[_ngcontent-%COMP%]{margin-top:16px;padding:12px;background-color:#f0f9ff;border:1px solid #BAE6FD;border-radius:6px;text-align:center}.costo-total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0369a1;font-size:14px}.no-repuestos[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.no-repuestos[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#d1d5db;margin-bottom:16px}.no-repuestos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;color:#374151}.no-repuestos[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#6b7280}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e5e7eb;background:#fff;flex-shrink:0;z-index:10;position:sticky;bottom:0;left:0;right:0}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-size:14px;font-weight:500;display:flex;align-items:center;gap:8px;cursor:pointer;transition:all .2s}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{background:none;border:1px solid #d1d5db;color:#374151}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f8fafc;border-color:#9ca3af}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#2563eb;border:1px solid #2563eb;color:#fff}.modal-footer[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1d4ed8;border-color:#1d4ed8}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{height:100vh;max-height:none}.modal-body[_ngcontent-%COMP%]{overflow-y:auto}.modal-content[_ngcontent-%COMP%]{height:auto;overflow:auto}.modal-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:auto auto;height:auto;overflow:visible}.form-section[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid #e5e7eb;height:auto;max-height:none;overflow:visible;padding-bottom:30px}.images-section[_ngcontent-%COMP%]{height:auto;max-height:none;overflow:visible;min-height:300px;padding-bottom:80px}.form-control[_ngcontent-%COMP%]{font-size:16px;padding:12px}textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font-size:14px!important;padding:12px}.add-repuesto[_ngcontent-%COMP%]{flex-direction:column}.add-repuesto[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (display-mode: standalone) and (max-width: 768px){.modal-container[_ngcontent-%COMP%]{height:calc(100vh - var(--safe-area-top, 0px) - var(--safe-area-bottom, 0px));max-height:calc(100vh - var(--safe-area-top, 0px) - var(--safe-area-bottom, 0px))}.modal-header[_ngcontent-%COMP%]{padding-top:calc(16px + var(--safe-area-top, 0px))}.modal-footer[_ngcontent-%COMP%]{padding-bottom:calc(16px + var(--safe-area-bottom, 0px))}}@supports (-webkit-touch-callout: none){@media (display-mode: standalone) and (max-width: 768px){.modal-container[_ngcontent-%COMP%]{height:calc(100vh - var(--safe-area-top, 0px) - var(--safe-area-bottom, 0px));max-height:calc(100vh - var(--safe-area-top, 0px) - var(--safe-area-bottom, 0px))}.modal-header[_ngcontent-%COMP%]{padding-top:calc(16px + var(--safe-area-top, 0px))}.modal-footer[_ngcontent-%COMP%]{padding-bottom:calc(16px + var(--safe-area-bottom, 0px))}}}@supports not (padding-top: env(safe-area-inset-top)){@media (display-mode: standalone) and (max-width: 768px){.modal-container[_ngcontent-%COMP%]{height:calc(100vh - 40px);max-height:calc(100vh - 40px)}.modal-header[_ngcontent-%COMP%]{padding-top:36px}.modal-footer[_ngcontent-%COMP%]{padding-bottom:36px}}}.info-message[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;padding:12px;background-color:#eff6ff;border:1px solid #BFDBFE;border-radius:6px;margin-bottom:16px}.info-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#3b82f6;font-size:18px;margin-top:2px;flex-shrink:0}.info-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#1e40af;line-height:1.4}`]});let c=l;return c})();function Dn(c,l){c&1&&(t(0,"div",4),p(1,"ion-icon",5),t(2,"span",6),a(3,"Cargando estado del flujo..."),e(),t(4,"span",7),a(5,"Cargando..."),e()())}function $n(c,l){if(c&1){let o=P();t(0,"div",8),p(1,"ion-icon",9),t(2,"span",10),a(3),e(),t(4,"button",11),u("click",function(){C(o);let r=g();return f(r.recargar())}),p(5,"ion-icon",12),t(6,"span",6),a(7,"Reintentar"),e(),t(8,"span",7),a(9,"Reintentar"),e()()()}if(c&2){let o=g();s(3),_(o.error)}}function Rn(c,l){if(c&1&&(t(0,"div",27)(1,"span",28),a(2,"Trabajos completados:"),e(),t(3,"span",29),a(4),e()()),c&2){let o=g(3);s(4),_(o.estadoFlujo.resumen.estadisticas.trabajosCompletados)}}function Nn(c,l){if(c&1&&(t(0,"div",27)(1,"span",28),a(2,"Tiene presupuesto:"),e(),t(3,"span",30),a(4),e()()),c&2){let o=g(3);s(3),d("ngClass",o.estadoFlujo.resumen.estadisticas.tienePresupuesto?"si":"no"),s(),h(" ",o.estadoFlujo.resumen.estadisticas.tienePresupuesto?"S\xED":"No"," ")}}function Bn(c,l){if(c&1&&(t(0,"div",27)(1,"span",28),a(2,"Estado presupuesto:"),e(),t(3,"span",29),a(4),e()()),c&2){let o=g(3);s(4),_(o.estadoFlujo.resumen.estadisticas.estadoPresupuesto)}}function qn(c,l){if(c&1&&(t(0,"div",27)(1,"span",28),a(2,"Total facturas:"),e(),t(3,"span",29),a(4),e()()),c&2){let o=g(3);s(4),_(o.estadoFlujo.resumen.estadisticas.totalFacturas)}}function Ln(c,l){if(c&1&&(t(0,"div",24)(1,"div",25),x(2,Rn,5,1,"div",26)(3,Nn,5,2,"div",26)(4,Bn,5,1,"div",26)(5,qn,5,1,"div",26),e()()),c&2){let o=g(2);s(2),d("ngIf",o.estadoFlujo.resumen.estadisticas),s(),d("ngIf",o.estadoFlujo.resumen.estadisticas),s(),d("ngIf",o.estadoFlujo.resumen.estadisticas&&o.estadoFlujo.resumen.estadisticas.tienePresupuesto),s(),d("ngIf",o.estadoFlujo.resumen.estadisticas)}}function Gn(c,l){if(c&1){let o=P();t(0,"button",35),u("click",function(){let r=C(o).$implicit,i=g(3);return f(i.ejecutarAccion(r))}),p(1,"ion-icon",17),t(2,"span",36),a(3),e()()}if(c&2){let o=l.$implicit,n=g(3);d("disabled",n.loading)("title",n.getAccionTexto(o)),s(),d("name",n.getAccionIcon(o)),s(2),_(n.getAccionTexto(o))}}function Un(c,l){if(c&1&&(t(0,"div",31)(1,"h4",32),a(2,"Acciones disponibles:"),e(),t(3,"div",33),x(4,Gn,4,4,"button",34),e()()),c&2){let o=g(2);s(4),d("ngForOf",o.accionesDisponibles)}}function Hn(c,l){if(c&1){let o=P();t(0,"div",37)(1,"h4",32),a(2,"Iniciar flujo:"),e(),t(3,"div",38)(4,"button",39),u("click",function(){C(o);let r=g(2);return f(r.ejecutarAccion("crear_presupuesto"))}),p(5,"ion-icon",40),t(6,"div",13)(7,"span",41),a(8,"Con Presupuesto"),e(),t(9,"span",42),a(10,"Crear presupuesto \u2192 Aprobaci\xF3n \u2192 Trabajos \u2192 Factura"),e(),t(11,"span",43),a(12,"Presupuesto \u2192 Aprobaci\xF3n \u2192 Trabajos \u2192 Factura"),e()()(),t(13,"button",44),u("click",function(){C(o);let r=g(2);return f(r.iniciarFlujoDirecto())}),p(14,"ion-icon",45),t(15,"div",13)(16,"span",41),a(17,"Trabajo Directo"),e(),t(18,"span",42),a(19,"Trabajos inmediatos \u2192 Factura"),e(),t(20,"span",43),a(21,"Trabajos \u2192 Factura"),e()()()()()}if(c&2){let o=g(2);s(4),d("disabled",o.loading),s(9),d("disabled",o.loading)}}function Qn(c,l){c&1&&(t(0,"div",46),p(1,"ion-icon",47),t(2,"span",48),a(3,"No hay acciones pendientes"),e()())}function Wn(c,l){if(c&1){let o=P();t(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16),p(4,"ion-icon",17),t(5,"span",18),a(6),e()(),t(7,"button",19),u("click",function(){C(o);let r=g();return f(r.recargar())}),p(8,"ion-icon",12),e()(),x(9,Ln,6,4,"div",20),e(),x(10,Un,5,1,"div",21)(11,Hn,22,2,"div",22)(12,Qn,4,0,"div",23),e()}if(c&2){let o=g();s(3),d("ngClass",o.getEstadoClass()),s(),d("name",o.getEstadoIcon()),s(2),_(o.estadoFlujo.estadoActual),s(3),d("ngIf",o.estadoFlujo.resumen),s(),d("ngIf",o.accionesDisponibles.length>0),s(),d("ngIf",o.estadoFlujo.puedeCrearPresupuesto),s(),d("ngIf",o.accionesDisponibles.length===0&&!o.estadoFlujo.puedeCrearPresupuesto)}}var hn=(()=>{let l=class l{constructor(n){this.flujoService=n,this.accionEjecutada=new st,this.estadoFlujo=null,this.accionesDisponibles=[],this.loading=!1,this.error=null,this.destroy$=new I,z({documentTextOutline:G,checkmarkCircleOutline:Jt,timeOutline:W,receiptOutline:dn,createOutline:nn,eyeOutline:U,arrowForwardOutline:Wt,warningOutline:un,refreshOutline:Q})}ngOnInit(){this.avisoId&&this.cargarEstadoFlujo()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarEstadoFlujo(){this.loading=!0,this.error=null,this.flujoService.obtenerEstadoFlujo(this.avisoId).pipe(v(this.destroy$)).subscribe({next:n=>{this.estadoFlujo=n,this.cargarAccionesDisponibles(),this.loading=!1},error:n=>{console.error("Error al cargar estado del flujo:",n),this.error="Error al cargar el estado del flujo",this.loading=!1}})}cargarAccionesDisponibles(){this.flujoService.obtenerAccionesDisponibles(this.avisoId).pipe(v(this.destroy$)).subscribe({next:n=>{this.accionesDisponibles=n},error:n=>{console.error("Error al cargar acciones:",n)}})}ejecutarAccion(n){var i,m,O,M,R,S;this.loading=!0,this.error=null;let r;switch(n){case"crear_presupuesto":r=this.flujoService.ejecutarFlujoCompleto(this.avisoId,!0);break;case"aprobar_presupuesto":let E=(O=(m=(i=this.estadoFlujo)==null?void 0:i.resumen)==null?void 0:m.presupuesto)==null?void 0:O.id;E&&(r=this.flujoService.aprobarPresupuesto(E));break;case"facturar_presupuesto":let at=(S=(R=(M=this.estadoFlujo)==null?void 0:M.resumen)==null?void 0:R.presupuesto)==null?void 0:S.id;at&&(r=this.flujoService.facturarPresupuesto(at));break;case"facturar_trabajos":r=this.flujoService.facturarTrabajos(this.avisoId);break;case"completar_aviso":break;default:this.loading=!1;return}r&&r.pipe(v(this.destroy$)).subscribe({next:E=>{console.log("Acci\xF3n ejecutada:",E),this.accionEjecutada.emit(E),this.cargarEstadoFlujo(),this.loading=!1},error:E=>{console.error("Error al ejecutar acci\xF3n:",E),this.error=`Error al ejecutar ${n}: ${E.message}`,this.loading=!1}})}iniciarFlujoDirecto(){this.loading=!0,this.flujoService.ejecutarFlujoCompleto(this.avisoId,!1).pipe(v(this.destroy$)).subscribe({next:n=>{console.log("Flujo directo iniciado:",n),this.accionEjecutada.emit(n),this.cargarEstadoFlujo(),this.loading=!1},error:n=>{console.error("Error al iniciar flujo directo:",n),this.error=`Error al iniciar flujo directo: ${n.message}`,this.loading=!1}})}getEstadoIcon(){if(!this.estadoFlujo)return"time-outline";switch(this.estadoFlujo.estadoActual){case"No visitado":return"time-outline";case"Visitado pendiente":return"eye-outline";case"Pendiente de presupuesto":return"document-text-outline";case"En curso":return"create-outline";case"Completado":return"checkmark-circle-outline";default:return"time-outline"}}getEstadoClass(){if(!this.estadoFlujo)return"pendiente";switch(this.estadoFlujo.estadoActual){case"No visitado":case"Visitado pendiente":return"pendiente";case"Pendiente de presupuesto":return"presupuesto";case"En curso":return"en-curso";case"Completado":return"completado";default:return"pendiente"}}getAccionTexto(n){switch(n){case"crear_presupuesto":return"Crear Presupuesto";case"aprobar_presupuesto":return"Aprobar Presupuesto";case"facturar_presupuesto":return"Generar Factura";case"facturar_trabajos":return"Facturar Trabajos";case"completar_aviso":return"Completar Aviso";default:return n}}getAccionIcon(n){switch(n){case"crear_presupuesto":return"document-text-outline";case"aprobar_presupuesto":return"checkmark-circle-outline";case"facturar_presupuesto":case"facturar_trabajos":return"receipt-outline";case"completar_aviso":return"checkmark-circle-outline";default:return"arrow-forward-outline"}}recargar(){this.cargarEstadoFlujo()}};l.\u0275fac=function(r){return new(r||l)(b(On))},l.\u0275cmp=F({type:l,selectors:[["app-flujo-estado"]],inputs:{avisoId:"avisoId"},outputs:{accionEjecutada:"accionEjecutada"},decls:4,vars:3,consts:[[1,"flujo-estado-container"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","flujo-content",4,"ngIf"],[1,"loading-state"],["name","refresh-outline",1,"spinning"],[1,"desktop-only"],[1,"mobile-only"],[1,"error-state"],["name","warning-outline"],[1,"error-text"],[1,"btn-retry",3,"click"],["name","refresh-outline"],[1,"flujo-content"],[1,"estado-actual"],[1,"estado-header"],[1,"estado-badge",3,"ngClass"],[3,"name"],[1,"estado-text"],["title","Actualizar estado",1,"btn-refresh",3,"click"],["class","resumen-info",4,"ngIf"],["class","acciones-disponibles",4,"ngIf"],["class","flujo-inicial",4,"ngIf"],["class","sin-acciones",4,"ngIf"],[1,"resumen-info"],[1,"info-grid"],["class","info-item",4,"ngIf"],[1,"info-item"],[1,"label"],[1,"value"],[1,"value",3,"ngClass"],[1,"acciones-disponibles"],[1,"section-title"],[1,"acciones-grid"],["class","btn-accion",3,"disabled","title","click",4,"ngFor","ngForOf"],[1,"btn-accion",3,"click","disabled","title"],[1,"accion-text"],[1,"flujo-inicial"],[1,"flujo-options"],["title","Crear presupuesto y seguir flujo completo",1,"btn-flujo","presupuesto",3,"click","disabled"],["name","document-text-outline"],[1,"title"],[1,"description","desktop-only"],[1,"description","mobile-only"],["title","Iniciar trabajos directos sin presupuesto",1,"btn-flujo","directo",3,"click","disabled"],["name","create-outline"],[1,"sin-acciones"],["name","checkmark-circle-outline",1,"complete-icon"],[1,"complete-text"]],template:function(r,i){r&1&&(t(0,"div",0),x(1,Dn,6,0,"div",1)(2,$n,10,1,"div",2)(3,Wn,13,7,"div",3),e()),r&2&&(s(),d("ngIf",i.loading),s(),d("ngIf",i.error&&!i.loading),s(),d("ngIf",i.estadoFlujo&&!i.loading&&!i.error))},dependencies:[A,Ot,T,V,q],styles:[".flujo-estado-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #E2E8F0;overflow:hidden;box-shadow:0 1px 3px #0000001a}.desktop-only[_ngcontent-%COMP%]{display:inline}.mobile-only[_ngcontent-%COMP%]{display:none}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:24px;text-align:center;color:#64748b;font-size:14px}.loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#4f46e5}.loading-state.error-state[_ngcontent-%COMP%], .error-state.error-state[_ngcontent-%COMP%]{color:#dc2626}.loading-state.error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state.error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#dc2626}.error-text[_ngcontent-%COMP%]{word-break:break-word;line-height:1.4}.btn-retry[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#f1f5f9;border:1px solid #CBD5E1;border-radius:8px;font-size:12px;color:#475569;cursor:pointer;transition:all .2s ease}.btn-retry[_ngcontent-%COMP%]:hover{background:#e2e8f0;border-color:#94a3b8}.btn-retry[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.flujo-content[_ngcontent-%COMP%]{padding:20px}.estado-actual[_ngcontent-%COMP%]{margin-bottom:24px}.estado-actual[_ngcontent-%COMP%]   .estado-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:500}.estado-actual[_ngcontent-%COMP%]   .estado-badge.pendiente[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.estado-actual[_ngcontent-%COMP%]   .estado-badge.pendiente[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#d97706}.estado-actual[_ngcontent-%COMP%]   .estado-badge.presupuesto[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.estado-actual[_ngcontent-%COMP%]   .estado-badge.presupuesto[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#3b82f6}.estado-actual[_ngcontent-%COMP%]   .estado-badge.en-curso[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.estado-actual[_ngcontent-%COMP%]   .estado-badge.en-curso[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#22c55e}.estado-actual[_ngcontent-%COMP%]   .estado-badge.completado[_ngcontent-%COMP%]{background:#ecfdf5;color:#14532d}.estado-actual[_ngcontent-%COMP%]   .estado-badge.completado[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#10b981}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.estado-actual[_ngcontent-%COMP%]   .estado-text[_ngcontent-%COMP%]{font-weight:500}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:#f8fafc;border:1px solid #E2E8F0;border-radius:8px;cursor:pointer;transition:all .2s ease}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#64748b}.resumen-info[_ngcontent-%COMP%]{background:#f8fafc;border-radius:8px;padding:16px}.resumen-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:13px;color:#64748b;font-weight:500}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:13px;color:#1e293b;font-weight:600}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.si[_ngcontent-%COMP%]{color:#059669}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value.no[_ngcontent-%COMP%]{color:#dc2626}.acciones-disponibles[_ngcontent-%COMP%]{margin-bottom:24px}.acciones-disponibles[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px;color:#1e293b;font-weight:600}.acciones-disponibles[_ngcontent-%COMP%]   .acciones-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 16px;background:#4f46e5;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;text-align:left}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]:hover:not(:disabled){background:#4338ca;transform:translateY(-1px);box-shadow:0 4px 8px #4f46e54d}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]   .accion-text[_ngcontent-%COMP%]{flex:1}.flujo-inicial[_ngcontent-%COMP%]{margin-bottom:24px}.flujo-inicial[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px;color:#1e293b;font-weight:600}.flujo-inicial[_ngcontent-%COMP%]   .flujo-options[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:12px}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#f8fafc;border:2px solid #E2E8F0;border-radius:12px;cursor:pointer;transition:all .2s ease;text-align:left}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#4f46e5;background:#f8fafc;transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo.presupuesto[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#3b82f6}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo.presupuesto[_ngcontent-%COMP%]:hover:not(:disabled)   ion-icon[_ngcontent-%COMP%]{color:#3b82f6}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo.directo[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#10b981}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo.directo[_ngcontent-%COMP%]:hover:not(:disabled)   ion-icon[_ngcontent-%COMP%]{color:#10b981}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#64748b;flex-shrink:0;transition:color .2s ease}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]   .flujo-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;flex:1;padding:0}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]   .flujo-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1e293b}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]   .flujo-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:12px;color:#64748b;line-height:1.4}.sin-acciones[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:20px;color:#64748b;font-size:14px;text-align:center}.sin-acciones[_ngcontent-%COMP%]   .complete-icon[_ngcontent-%COMP%]{font-size:20px;color:#10b981}.sin-acciones[_ngcontent-%COMP%]   .complete-text[_ngcontent-%COMP%]{font-weight:500}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:inline}.flujo-content[_ngcontent-%COMP%]{padding:16px}.estado-actual[_ngcontent-%COMP%]{margin-bottom:20px}.estado-actual[_ngcontent-%COMP%]   .estado-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin-bottom:12px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{width:28px;height:28px}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.resumen-info[_ngcontent-%COMP%]{padding:12px}.resumen-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:12px}.acciones-disponibles[_ngcontent-%COMP%]{margin-bottom:20px}.acciones-disponibles[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:15px;margin-bottom:10px}.acciones-disponibles[_ngcontent-%COMP%]   .acciones-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]{padding:10px 12px;font-size:13px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.flujo-inicial[_ngcontent-%COMP%]{margin-bottom:20px}.flujo-inicial[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:15px;margin-bottom:10px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-options[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]{padding:12px}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]   .flujo-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:13px}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]   .flujo-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:11px}.sin-acciones[_ngcontent-%COMP%]{padding:16px}.sin-acciones[_ngcontent-%COMP%]   .complete-icon[_ngcontent-%COMP%]{font-size:18px}.sin-acciones[_ngcontent-%COMP%]   .complete-text[_ngcontent-%COMP%]{font-size:13px}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{padding:20px;font-size:13px}.loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.btn-retry[_ngcontent-%COMP%]{padding:6px 12px;font-size:11px}.btn-retry[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 480px){.flujo-content[_ngcontent-%COMP%]{padding:12px}.estado-actual[_ngcontent-%COMP%]{margin-bottom:16px}.estado-actual[_ngcontent-%COMP%]   .estado-header[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:space-between;gap:8px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]{justify-content:center;padding:4px 10px;font-size:12px}.estado-actual[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{align-self:center;width:24px;height:24px}.estado-actual[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.resumen-info[_ngcontent-%COMP%]{padding:10px}.resumen-info[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{gap:6px}.resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .resumen-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:11px}.acciones-disponibles[_ngcontent-%COMP%]{margin-bottom:16px}.acciones-disponibles[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.acciones-disponibles[_ngcontent-%COMP%]   .acciones-grid[_ngcontent-%COMP%]{gap:6px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]{padding:8px 10px;font-size:12px}.acciones-disponibles[_ngcontent-%COMP%]   .btn-accion[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.flujo-inicial[_ngcontent-%COMP%]{margin-bottom:16px}.flujo-inicial[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.flujo-inicial[_ngcontent-%COMP%]   .flujo-options[_ngcontent-%COMP%]{gap:6px}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]{padding:10px}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]   .flujo-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:12px}.flujo-inicial[_ngcontent-%COMP%]   .btn-flujo[_ngcontent-%COMP%]   .flujo-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:10px}.sin-acciones[_ngcontent-%COMP%]{padding:12px;gap:8px}.sin-acciones[_ngcontent-%COMP%]   .complete-icon[_ngcontent-%COMP%]{font-size:16px}.sin-acciones[_ngcontent-%COMP%]   .complete-text[_ngcontent-%COMP%]{font-size:12px}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{padding:16px;font-size:12px;gap:8px}.loading-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.btn-retry[_ngcontent-%COMP%]{padding:4px 8px;font-size:10px}.btn-retry[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:10px}}"]});let c=l;return c})();var Yn=["fileInput"];function Jn(c,l){c&1&&(t(0,"div",30)(1,"div",31),p(2,"ion-icon",32),t(3,"p"),a(4,"Cargando aviso..."),e()()())}function Kn(c,l){if(c&1){let o=P();t(0,"div",33)(1,"div",34),p(2,"ion-icon",35),t(3,"p"),a(4),e(),t(5,"button",36),u("click",function(){C(o);let r=g();return f(r.cargarAviso())}),p(6,"ion-icon",37),a(7," Reintentar "),e()()()}if(c&2){let o=g();s(4),_(o.error)}}function Xn(c,l){if(c&1&&(t(0,"div",65),p(1,"ion-icon",66),t(2,"span"),a(3),e()()),c&2){let o=g(2);s(3),_(o.aviso.nombre_contacto)}}function Zn(c,l){if(c&1&&(t(0,"div",67),p(1,"ion-icon",68),t(2,"span"),a(3),e()()),c&2){let o=g(2);s(3),_(o.aviso.telefono_cliente_aviso)}}function te(c,l){if(c&1&&(t(0,"div",67),p(1,"ion-icon",69),t(2,"span"),a(3),e()()),c&2){let o=g(2);s(3),_(o.aviso.cliente==null?null:o.aviso.cliente.email)}}function ne(c,l){if(c&1){let o=P();t(0,"div",4)(1,"div",11)(2,"div",38)(3,"div",39)(4,"button",40),u("click",function(){C(o);let r=g();return f(r.volverALista())}),p(5,"ion-icon",41),t(6,"span",16),a(7,"Volver"),e(),t(8,"span",17),a(9,"Volver"),e()()()(),t(10,"div",42)(11,"button",43),u("click",function(){C(o);let r=g();return f(r.cerrarAlbaran())}),p(12,"ion-icon",44),t(13,"span",16),a(14,"Cerrar Albar\xE1n"),e(),t(15,"span",17),a(16,"Cerrar"),e()(),t(17,"button",14),u("click",function(){C(o);let r=g();return f(r.editarAviso())}),p(18,"ion-icon",45),t(19,"span",16),a(20,"Editar aviso"),e(),t(21,"span",17),a(22,"Editar"),e()()(),t(23,"span",46),a(24),e()(),t(25,"h2",47)(26,"span",16),a(27),e()(),t(28,"div",48)(29,"div",49)(30,"div",8)(31,"label"),a(32,"Estado"),e(),t(33,"span",50),a(34),e()(),t(35,"div",8)(36,"label"),a(37,"Urgente"),e(),t(38,"span",51),a(39),e()(),t(40,"div",8)(41,"label"),a(42,"Fecha de creaci\xF3n"),e(),t(43,"span"),a(44),w(45,"date"),e()()(),t(46,"div",52)(47,"label"),a(48,"Cliente"),e(),t(49,"div",53)(50,"span",54),a(51),e(),t(52,"a",55),u("click",function(){C(o);let r=g();return f(r.verCliente())}),t(53,"span",16),a(54,"Ver cliente"),e()()()(),t(55,"div",56)(56,"label"),a(57,"Direcci\xF3n"),e(),t(58,"div",57)(59,"span",58),a(60),e(),t(61,"button",59),u("click",function(){C(o);let r=g();return f(r.verMapa())}),p(62,"ion-icon",60),e()()(),t(63,"div",61)(64,"label"),a(65,"Contacto Cliente"),e(),t(66,"div",62),x(67,Xn,4,1,"div",63)(68,Zn,4,1,"div",64)(69,te,4,1,"div",64),e()()()()}if(c&2){let o=g();s(24),h("Aviso #",o.aviso.id==null?null:o.aviso.id.substring(0,8),""),s(3),h("Informaci\xF3n general del Aviso - #",o.aviso.id==null?null:o.aviso.id.substring(0,8),""),s(7),_(o.aviso.estado),s(4),D("urgent",o.aviso.urgencia==="Alta"||o.aviso.es_urgente),s(),h(" ",o.aviso.urgencia==="Alta"||o.aviso.es_urgente?"S\xED":"No"," "),s(5),_($(45,12,o.aviso.fecha_creacion,"dd/MM/yyyy")),s(7),_(o.aviso.nombre_cliente_aviso),s(9),_(o.aviso.direccion_cliente_aviso),s(7),d("ngIf",o.aviso.nombre_contacto),s(),d("ngIf",o.aviso.telefono_cliente_aviso),s(),d("ngIf",o.aviso.cliente==null?null:o.aviso.cliente.email)}}function ee(c,l){if(c&1){let o=P();t(0,"div",70)(1,"div",71)(2,"app-flujo-estado",72),u("accionEjecutada",function(r){C(o);let i=g();return f(i.onAccionFlujoEjecutada(r))}),e()()()}if(c&2){let o=g();s(2),d("avisoId",(o.aviso==null?null:o.aviso.id)||"")}}function oe(c,l){c&1&&(t(0,"div",30)(1,"div",31),p(2,"ion-icon",32),t(3,"p"),a(4,"Cargando trabajos..."),e()()())}function ie(c,l){c&1&&(t(0,"div",73)(1,"div",74),p(2,"ion-icon",75),t(3,"p"),a(4,"No hay trabajos realizados para este aviso"),e(),t(5,"small"),a(6,"Crea el primer parte de trabajo para comenzar"),e()()())}function ae(c,l){if(c&1&&(t(0,"li"),a(1),e()),c&2){let o=l.$implicit;s(),_(o)}}function re(c,l){if(c&1&&(t(0,"ul",94),x(1,ae,2,1,"li",77),e()),c&2){let o=g().$implicit;s(),d("ngForOf",o.repuestos)}}function ce(c,l){c&1&&(t(0,"span",95),a(1," Sin materiales "),e())}function se(c,l){if(c&1){let o=P();t(0,"tr")(1,"td",78),a(2),e(),t(3,"td",79),a(4),w(5,"date"),e(),t(6,"td",80),a(7),w(8,"number"),e(),t(9,"td",81)(10,"div",82)(11,"p"),a(12),e(),t(13,"small"),a(14),e()()(),t(15,"td",83)(16,"div",84),x(17,re,2,1,"ul",85)(18,ce,2,0,"span",86),e()(),t(19,"td",87)(20,"span",88),a(21),e()(),t(22,"td",89)(23,"div",90)(24,"button",91),u("click",function(){let r=C(o).$implicit,i=g(2);return f(i.editarTrabajo(r))}),p(25,"ion-icon",45),t(26,"span",16),a(27,"Editar"),e(),t(28,"span",17),a(29,"Editar"),e()(),t(30,"button",92),u("click",function(){let r=C(o).$implicit,i=g(2);return f(i.eliminarTrabajo(r))}),p(31,"ion-icon",93),t(32,"span",16),a(33,"Eliminar"),e(),t(34,"span",17),a(35,"Eliminar"),e()()()()()}if(c&2){let o=l.$implicit,n=l.index,r=g(2);s(2),h("#",n+1,""),s(2),_($(5,11,o.fecha_trabajo,"dd/MM/yyyy")),s(3),h("",$(8,14,r.calcularHorasTrabajo(o),"1.1-1"),"h"),s(5),_(o.descripcion),s(2),N("",o.hora_inicio," - ",o.hora_fin,""),s(3),d("ngIf",o.repuestos&&o.repuestos.length>0),s(),d("ngIf",!o.repuestos||o.repuestos.length===0),s(2),gt("badge-"+o.estado.toLowerCase().replace(" ","-")),s(),h(" ",o.estado," ")}}function le(c,l){if(c&1&&(t(0,"table",76)(1,"thead")(2,"tr")(3,"th"),a(4,"N\xFAmero"),e(),t(5,"th"),a(6,"Fecha trabajo"),e(),t(7,"th"),a(8,"Horas"),e(),t(9,"th"),a(10,"Descripci\xF3n"),e(),t(11,"th"),a(12,"Materiales"),e(),t(13,"th"),a(14,"Estado"),e(),t(15,"th"),a(16,"Acciones"),e()()(),t(17,"tbody"),x(18,se,36,17,"tr",77),e()()),c&2){let o=g();s(18),d("ngForOf",o.trabajosRealizados)}}function de(c,l){c&1&&(t(0,"div",96),p(1,"ion-icon",32),t(2,"p"),a(3,"Subiendo im\xE1genes..."),e()())}function ge(c,l){c&1&&(t(0,"div",97),p(1,"ion-icon",98),t(2,"p"),a(3,"No hay im\xE1genes disponibles para este aviso"),e()())}function pe(c,l){if(c&1){let o=P();t(0,"div",99),p(1,"img",100),t(2,"div",101)(3,"span",102),a(4),e(),t(5,"span",103),a(6),w(7,"date"),e()(),t(8,"button",104),u("click",function(){let r=C(o).$implicit,i=g();return f(i.eliminarFoto(r))}),p(9,"ion-icon",93),e()()}if(c&2){let o=l.$implicit;s(),d("src",o.url,dt)("alt",o.descripcion||"Imagen del aviso"),s(3),_(o.descripcion||"Imagen del aviso"),s(2),_($(7,4,o.fecha_subida,"dd/MM/yyyy HH:mm"))}}z({close:Z,pencilOutline:ot,navigate:et,person:it,call:X,mail:tt,mapOutline:nt,arrowBackOutline:K});var Je=(()=>{let l=class l{constructor(n,r,i,m,O){this.route=n,this.router=r,this.avisosService=i,this.trabajosService=m,this.modalController=O,this.vistaGaleria="grid",this.aviso=null,this.loading=!1,this.error=null,this.subiendoImagenes=!1,this.destroy$=new I,this.trabajosRealizados=[],this.loadingTrabajos=!1,z({refreshOutline:Q,alertCircleOutline:Ht,arrowBackOutline:K,close:Z,pencilOutline:ot,personOutline:H,navigate:et,person:it,call:X,mail:tt,gridOutline:an,listOutline:sn,addCircle:Gt,imagesOutline:rn,trashOutline:Y,constructOutline:Zt,chevronDownOutline:L,eyeOutline:U,ellipsisVerticalOutline:on,ellipsisVertical:en,add:Lt,mapOutline:nt})}ngOnInit(){this.cargarAviso()}cargarTrabajos(){var n;(n=this.aviso)!=null&&n.id&&(this.loadingTrabajos=!0,this.trabajosService.getTrabajosAviso(this.aviso.id).pipe(v(this.destroy$)).subscribe({next:r=>{this.trabajosRealizados=r.trabajos,this.loadingTrabajos=!1},error:r=>{console.error("Error al cargar trabajos:",r),this.loadingTrabajos=!1}}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarAviso(){this.loading=!0,this.error=null,this.route.params.pipe(v(this.destroy$)).subscribe(n=>{let r=n["id-aviso"];r?this.avisosService.getAviso(r).pipe(v(this.destroy$)).subscribe({next:i=>{this.aviso=i,this.loading=!1,this.cargarTrabajos()},error:i=>{console.error("Error al cargar el aviso:",i),this.error="Error al cargar el aviso. Por favor, int\xE9ntalo de nuevo.",this.loading=!1}}):(this.error="ID de aviso no v\xE1lido",this.loading=!1)})}cambiarVistaGaleria(n){this.vistaGaleria=n.detail.value}volverALista(){let n=document.referrer;n&&n.includes("/historial")?this.router.navigate(["/historial"]):this.router.navigate(["/avisos"])}verCliente(){var n,r;(r=(n=this.aviso)==null?void 0:n.cliente)!=null&&r.id&&console.log("Navegar al cliente:",this.aviso.cliente.id)}verMapa(){var n;if((n=this.aviso)!=null&&n.direccion_cliente_aviso){let r=encodeURIComponent(this.aviso.direccion_cliente_aviso);window.open(`https://www.google.com/maps/search/?api=1&query=${r}`,"_blank")}}editarAviso(){var n;(n=this.aviso)!=null&&n.id&&console.log("Editar aviso:",this.aviso.id)}cerrarAlbaran(){var n;(n=this.aviso)!=null&&n.id&&console.log("Cerrar albar\xE1n para aviso:",this.aviso.id)}seleccionarImagenes(){this.fileInput&&this.fileInput.nativeElement.click()}onFileSelected(n){var i;let r=n.target.files;r.length>0&&((i=this.aviso)!=null&&i.id)&&this.subirImagenes(Array.from(r)),n.target.value=""}subirImagenes(n){return y(this,null,function*(){var r;if(!((r=this.aviso)!=null&&r.id)){console.error("No se puede subir im\xE1genes: aviso no v\xE1lido");return}this.subiendoImagenes=!0,this.error=null;try{yield new Promise(m=>{let O=0,M=n.length;n.forEach(R=>{this.avisosService.subirFoto(this.aviso.id,R).pipe(v(this.destroy$)).subscribe({next:S=>{console.log("Foto subida:",S),O++,O===M&&m()},error:S=>{console.error("Error al subir foto:",S),O++,O===M&&m()}})})}),this.cargarAviso()}catch(i){console.error("Error al subir im\xE1genes:",i),this.error="Error al subir las im\xE1genes. Por favor, int\xE9ntalo de nuevo."}finally{this.subiendoImagenes=!1}})}crearTrabajoRealizado(n){return y(this,null,function*(){var O;if(!((O=this.aviso)!=null&&O.id))return;let r=yield this.modalController.create({component:bn,componentProps:{avisoId:this.aviso.id,trabajoExistente:n},cssClass:"modal-crear-trabajo"});yield r.present();let{data:i,role:m}=yield r.onWillDismiss();if(m==="confirm"&&i)try{if(n){let M=yield j(this.trabajosService.actualizarTrabajo(n.id,i));console.log("Trabajo actualizado exitosamente:",M),alert("Trabajo actualizado exitosamente.")}else{let M=yield j(this.trabajosService.crearTrabajo(i));console.log("Trabajo creado exitosamente:",M),alert("Trabajo creado exitosamente. Los materiales han sido descontados del inventario.")}this.cargarTrabajos()}catch(M){console.error("Error al procesar trabajo:",M),alert("Error al procesar el trabajo. Por favor, int\xE9ntalo de nuevo.")}})}editarTrabajo(n){return y(this,null,function*(){try{let r=yield j(this.trabajosService.getTrabajo(n.id));yield this.crearTrabajoRealizado(r.trabajo)}catch(r){console.error("Error al cargar el trabajo para editar:",r),alert("Error al cargar el trabajo para editar. Por favor, int\xE9ntalo de nuevo.")}})}eliminarTrabajo(n){return y(this,null,function*(){if(confirm(`\xBFEst\xE1s seguro de que quieres eliminar este trabajo?

Fecha: ${n.fecha_trabajo}
Descripci\xF3n: ${n.descripcion}

Esta acci\xF3n no se puede deshacer y los materiales ser\xE1n devueltos al inventario.`))try{yield j(this.trabajosService.eliminarTrabajo(n.id)),console.log("Trabajo eliminado exitosamente"),alert("Trabajo eliminado exitosamente. Los materiales han sido devueltos al inventario."),this.cargarTrabajos()}catch(i){console.error("Error al eliminar el trabajo:",i),alert("Error al eliminar el trabajo. Por favor, int\xE9ntalo de nuevo.")}})}realizarOtraVisita(n){console.log("Realizar otra visita para el trabajo:",n)}eliminarFoto(n){return y(this,null,function*(){var i;if(!((i=this.aviso)!=null&&i.id)||!(n!=null&&n.id)){console.error("No se puede eliminar la foto: faltan datos");return}if(confirm(`\xBFEst\xE1s seguro de que quieres eliminar esta imagen?

Esta acci\xF3n no se puede deshacer.`))try{yield j(this.avisosService.eliminarFoto(n.id)),console.log("Foto eliminada exitosamente"),this.cargarAviso()}catch(m){console.error("Error al eliminar la foto:",m),alert("Error al eliminar la imagen. Por favor, int\xE9ntalo de nuevo.")}})}calcularHorasTrabajo(n){let r=new Date(`2000-01-01T${n.hora_inicio}`),m=(new Date(`2000-01-01T${n.hora_fin}`).getTime()-r.getTime())/(1e3*60*60);return Math.max(0,m)}onAccionFlujoEjecutada(n){console.log("Acci\xF3n de flujo ejecutada:",n),this.cargarAviso(),n.mensaje&&(console.log("Mensaje de \xE9xito:",n.mensaje),alert(n.mensaje)),n.facturaId&&confirm("Se ha generado una factura. \xBFDeseas ver la factura creada?")&&this.router.navigate(["/facturas",n.facturaId])}};l.\u0275fac=function(r){return new(r||l)(b(ht),b(vt),b(Cn),b(J),b(Rt))},l.\u0275cmp=F({type:l,selectors:[["app-ver-avisos"]],viewQuery:function(r,i){if(r&1&&pt(Yn,5),r&2){let m;mt(m=_t())&&(i.fileInput=m.first)}},decls:56,vars:16,consts:[["fileInput",""],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","info-card",4,"ngIf"],[1,"info-card"],[1,"card-header",2,"justify-content","space-between!important"],[1,"badge-pendiente"],[1,"descripcion-content"],[1,"info-item"],[1,"tipo-aviso"],[1,"descripcion-texto"],[1,"card-header"],[2,"text-wrap","nowrap"],[1,"header-actions-jobs"],[1,"btn-primary",3,"click"],["name","add-circle"],[1,"desktop-only"],[1,"mobile-only"],["class","flujo-section",4,"ngIf"],[1,"section-divider"],[1,"table-container"],["class","no-trabajos",4,"ngIf"],["class","custom-mat-table",4,"ngIf"],[1,"gallery-actions"],[1,"btn-primary",3,"click","disabled"],["type","file","multiple","","accept","image/*",2,"display","none",3,"change"],[1,"gallery-items"],["class","uploading-indicator",4,"ngIf"],["class","no-images",4,"ngIf"],["class","gallery-item",4,"ngFor","ngForOf"],[1,"loading-state"],[1,"loading-spinner"],["name","refresh-outline",1,"spinning"],[1,"error-state"],[1,"error-message"],["name","alert-circle-outline"],[1,"btn-retry",3,"click"],["name","refresh-outline"],[1,"header-container"],[1,"back-button"],[1,"btn-back",3,"click"],["name","arrow-back-outline"],[1,"header-actions"],[1,"btn-secondary",3,"click"],["name","close"],["name","pencil-outline"],[1,"mobile-only","title"],[1,"title"],[1,"info-grid"],[1,"info-row"],[1,"estado-pendiente"],[1,"urgent-badge"],[1,"info-item","cliente-section"],[1,"cliente-info"],[1,"cliente-nombre"],[1,"ver-cliente",3,"click"],[1,"info-item","direccion-section"],[1,"direccion-info"],[1,"direccion-texto"],["title","Ver en mapa",1,"btn-map",3,"click"],["name","navigate"],[1,"contacto-section"],[1,"contacto-items"],["class","contacto-item nombre-contacto",4,"ngIf"],["class","contacto-item",4,"ngIf"],[1,"contacto-item","nombre-contacto"],["name","person"],[1,"contacto-item"],["name","call"],["name","mail"],[1,"flujo-section"],[1,"flujo-container"],[3,"accionEjecutada","avisoId"],[1,"no-trabajos"],[1,"empty-state"],["name","construct-outline"],[1,"custom-mat-table"],[4,"ngFor","ngForOf"],["data-label","N\xFAmero"],["data-label","Fecha trabajo"],["data-label","Horas"],["data-label","Descripci\xF3n"],[1,"descripcion-trabajo"],["data-label","Materiales"],[1,"materiales-info"],["class","repuestos-list",4,"ngIf"],["class","no-repuestos",4,"ngIf"],["data-label","Estado"],[1,"badge-estado"],["data-label","Acciones"],[1,"estado-actions"],["title","Editar trabajo",1,"btn-secondary","btn-small",3,"click"],["title","Eliminar trabajo",1,"btn-danger","btn-small",3,"click"],["name","trash-outline"],[1,"repuestos-list"],[1,"no-repuestos"],[1,"uploading-indicator"],[1,"no-images"],["name","images-outline"],[1,"gallery-item"],[3,"src","alt"],[1,"image-info"],[1,"image-title"],[1,"file-info"],["title","Eliminar imagen",1,"btn-delete",3,"click"]],template:function(r,i){if(r&1){let m=P();x(0,Jn,5,0,"div",1)(1,Kn,8,1,"div",2)(2,ne,70,15,"div",3),t(3,"div",4)(4,"div",5)(5,"h2"),a(6,"Descripci\xF3n del Aviso"),e(),t(7,"span",6),a(8),e()(),t(9,"div",7)(10,"div",8)(11,"label"),a(12,"Tipo de Aviso"),e(),t(13,"p",9),a(14),e()(),t(15,"div",8)(16,"label"),a(17,"Descripci\xF3n Detallada del Problema/Petici\xF3n"),e(),t(18,"p",10),a(19),e()()()(),t(20,"div",4)(21,"div",11)(22,"h2",12),a(23,"Gesti\xF3n de Albaranes"),e(),t(24,"div",13)(25,"button",14),u("click",function(){return C(m),f(i.crearTrabajoRealizado())}),p(26,"ion-icon",15),t(27,"span",16),a(28,"Crear parte de trabajo"),e(),t(29,"span",17),a(30,"Crear trabajo"),e()()()(),x(31,ee,3,1,"div",18),t(32,"div",19)(33,"span"),a(34,"Lista de Trabajos Registrados"),e()(),t(35,"div",20),x(36,oe,5,0,"div",1)(37,ie,7,0,"div",21)(38,le,19,1,"table",22),e()(),t(39,"div",4)(40,"div",5)(41,"h2"),a(42,"Galer\xEDa de im\xE1genes"),e(),t(43,"div",23)(44,"button",24),u("click",function(){return C(m),f(i.seleccionarImagenes())}),p(45,"ion-icon",15),t(46,"span",16),a(47),e(),t(48,"span",17),a(49),e()(),t(50,"input",25,0),u("change",function(M){return C(m),f(i.onFileSelected(M))}),e()()(),t(52,"div",26),x(53,de,4,0,"div",27)(54,ge,4,0,"div",28)(55,pe,10,7,"div",29),e()()}r&2&&(d("ngIf",i.loading),s(),d("ngIf",i.error&&!i.loading),s(),d("ngIf",i.aviso&&!i.loading),s(6),_((i.aviso==null?null:i.aviso.estado)||"No especificado"),s(6),_((i.aviso==null?null:i.aviso.tipo)||"No especificado"),s(5),_(i.aviso==null?null:i.aviso.descripcion_problema),s(12),d("ngIf",i.aviso==null?null:i.aviso.id),s(5),d("ngIf",i.loadingTrabajos),s(),d("ngIf",!i.loadingTrabajos&&(!i.trabajosRealizados||i.trabajosRealizados.length===0)),s(),d("ngIf",!i.loadingTrabajos&&i.trabajosRealizados.length>0),s(6),d("disabled",i.subiendoImagenes),s(3),_(i.subiendoImagenes?"Subiendo...":"A\xF1adir im\xE1genes"),s(2),_(i.subiendoImagenes?"Subiendo...":"A\xF1adir"),s(4),d("ngIf",i.subiendoImagenes),s(),d("ngIf",!(i.aviso!=null&&i.aviso.fotos)||(i.aviso==null||i.aviso.fotos==null?null:i.aviso.fotos.length)===0),s(),d("ngForOf",i.aviso==null?null:i.aviso.fotos))},dependencies:[A,T,V,Mt,Pt,q,hn],styles:['[_nghost-%COMP%]{display:block;padding:24px}.back-button[_ngcontent-%COMP%]{margin-bottom:24px}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 16px;background-color:#fff;color:#4f46e5;border:1px solid #E5E7EB;border-radius:8px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#f9fafb;border-color:#4f46e5}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px;text-align:center}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#4f46e5}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#ef4444}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 20px;background-color:#4f46e5;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:14px;font-weight:500;transition:background-color .2s ease}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover, .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover{background-color:#3a30e2}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.aviso-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.aviso-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#111827}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:10px 15px;background-color:#4f46e5;color:#fff;border:none;border-radius:.5rem;cursor:pointer;font-size:15px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#3a30e2}.btn-secondary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:10px 15px;background-color:#fff;color:#26262a;border:none;border-radius:.5rem;cursor:pointer;font-size:15px;font-weight:500;border:1px solid rgba(125,131,152,.2431372549)}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.btn-danger[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:10px 15px;background-color:#ef4444;color:#fff;border:none;border-radius:.5rem;cursor:pointer;font-size:15px;font-weight:500}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#dc2626}.btn-danger.btn-small[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;box-shadow:0 2px 8px #e0e7ef33;margin-bottom:24px;overflow:hidden}.info-card[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#111827;margin:0;padding:25px}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#111827;margin:0}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:25px 25px 0}.info-card[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.info-card[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:14px;margin-bottom:4px}.info-card[_ngcontent-%COMP%]   .descripcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#111827;font-size:16px}.badge-pendiente[_ngcontent-%COMP%]{background-color:#f59e0b1a;color:#f59e0b;padding:4px 12px;border-radius:16px;font-size:14px;font-weight:500}.info-grid[_ngcontent-%COMP%]{padding:25px;padding-top:0!important;display:grid;gap:24px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:14px;margin-bottom:4px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#111827;font-size:16px}.info-grid[_ngcontent-%COMP%]   .direccion-section[_ngcontent-%COMP%]   .btn-map[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;padding:8px;cursor:pointer;color:#fff;background-color:#4f46e5;font-size:16px;border-radius:50%}.info-grid[_ngcontent-%COMP%]   .contacto-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:14px;margin-bottom:4px}.info-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:24px}.cliente-info[_ngcontent-%COMP%], .direccion-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.cliente-info[_ngcontent-%COMP%]   .ver-cliente[_ngcontent-%COMP%], .direccion-info[_ngcontent-%COMP%]   .ver-cliente[_ngcontent-%COMP%]{color:#4f46e5;text-decoration:none;font-size:14px;cursor:pointer}.cliente-info[_ngcontent-%COMP%]   .ver-cliente[_ngcontent-%COMP%]:hover, .direccion-info[_ngcontent-%COMP%]   .ver-cliente[_ngcontent-%COMP%]:hover{text-decoration:underline}.contacto-items[_ngcontent-%COMP%]{display:flex;gap:24px;margin-top:8px}.contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background-color:#eef2ff;color:#4f46e5;padding:6px 15px;border-radius:10px;font-size:14px;font-weight:500}.estado-pendiente[_ngcontent-%COMP%]{color:#f59e0b!important;font-weight:500}.descripcion-content[_ngcontent-%COMP%]{padding:24px}.descripcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;line-height:1.5}.gallery-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{background:#f3f4f6;border-radius:30px;width:auto;height:auto;padding:2px 4px}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]::part(indicator){background:none}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--background: transparent;--background-checked: white;--background-hover: rgba(255,255,255,.1);--background-focused: rgba(255,255,255,.2);--border-radius: 50%;--border-width: 0;--indicator-color: transparent;--color: #6B7280;--color-checked: #4F46E5;--margin-top: 0;--margin-bottom: 0;--margin-start: 0;--margin-end: 0;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0;min-height:30px;min-width:30px;transition:all .2s ease;position:relative}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]::part(native){margin:0;padding:0 6px;height:100%}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]::part(indicator){display:none}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button.segment-button-checked[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a}.gallery-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-left:auto}.gallery-items[_ngcontent-%COMP%]{padding:24px;display:grid;gap:16px}.gallery-items[_ngcontent-%COMP%]   .uploading-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#4f46e5}.gallery-items[_ngcontent-%COMP%]   .uploading-indicator[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:12px}.gallery-items[_ngcontent-%COMP%]   .uploading-indicator[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.gallery-items[_ngcontent-%COMP%]   .uploading-indicator[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500}.gallery-items[_ngcontent-%COMP%]   .no-images[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.gallery-items[_ngcontent-%COMP%]   .no-images[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;border:1px solid #E5E7EB;border-radius:6px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:cover;border-radius:4px;margin-right:16px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]{flex:1}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#26262a}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span.file-info[_ngcontent-%COMP%]{color:#6b7280;font-size:14px;margin-top:4px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#ef4444;border-radius:4px;transition:all .2s ease}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]:hover{background-color:#ef44441a;color:#eb1515}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.table-container[_ngcontent-%COMP%]{padding:0 24px 24px}.table-search[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}.table-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:8px;padding:7px 14px;font-size:1rem;border:none;background:#f9fbff;color:#26262a}.table-search[_ngcontent-%COMP%]   .order-by[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#26262a;font-size:14px}.table-search[_ngcontent-%COMP%]   .order-by[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#4f46e5;font-weight:500}.table-search[_ngcontent-%COMP%]   .order-by[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#4f46e5;font-size:16px}.custom-mat-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 8px;margin-bottom:12px}.custom-mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#64748b;font-size:14px;font-weight:400;text-align:left;padding:8px 16px;background:transparent}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#f9fafb}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;color:#26262a;font-size:14px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:8px;border-bottom-left-radius:8px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:8px;border-bottom-right-radius:8px}.descripcion-trabajo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;line-height:1.4}.descripcion-trabajo[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:13px;color:#4b5563;padding:2px 6px;background-color:#f3f4f6;border-radius:4px;display:inline-block;margin-right:4px;margin-bottom:4px}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.badge-estado[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.badge-estado.badge-pendiente[_ngcontent-%COMP%]{background-color:var(--estado-pendiente-bg);color:var(--estado-pendiente-color)}.badge-estado.badge-en-curso[_ngcontent-%COMP%]{background-color:var(--estado-en-curso-bg);color:var(--estado-en-curso-color)}.badge-estado.badge-completado[_ngcontent-%COMP%]{background-color:var(--estado-completado-bg);color:var(--estado-completado-color)}.badge-estado.badge-cancelado[_ngcontent-%COMP%]{background-color:var(--estado-cancelado-bg);color:var(--estado-cancelado-color)}.repuestos-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;color:#4b5563;margin-bottom:4px}.repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.estado-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.estado-actions[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}.no-trabajos[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.no-trabajos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.no-repuestos[_ngcontent-%COMP%]{color:#6b7280;font-style:italic;font-size:14px}.flujo-container[_ngcontent-%COMP%]{padding:0 25px}.flujo-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;font-weight:400;margin-left:12px}.card-header[_ngcontent-%COMP%]   .flujo-subtitle[_ngcontent-%COMP%]{display:block;margin-top:4px;margin-left:0}.flujo-section[_ngcontent-%COMP%]{margin-top:25px;margin-bottom:5px}.flujo-section[_ngcontent-%COMP%]   .flujo-header[_ngcontent-%COMP%]{margin-bottom:16px}.flujo-section[_ngcontent-%COMP%]   .flujo-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1a202c;margin:0 0 4px}.flujo-section[_ngcontent-%COMP%]   .flujo-header[_ngcontent-%COMP%]   .flujo-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#64748b;font-weight:400}.section-divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:24px 0 20px}.section-divider[_ngcontent-%COMP%]:before, .section-divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:#e2e8f0}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 16px;font-size:14px;font-weight:500;color:#64748b;background:#fff}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#64748b}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#cbd5e0;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin:0 0 8px;color:#4a5568}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:14px;color:#a0aec0}.desktop-only[_ngcontent-%COMP%]{display:inline}.mobile-only[_ngcontent-%COMP%]{display:none}.urgent-badge[_ngcontent-%COMP%]{padding:2px 8px;border-radius:12px;font-size:12px;font-weight:500}.urgent-badge.urgent[_ngcontent-%COMP%]{background-color:#fef2f2;color:#dc2626}.urgent-badge[_ngcontent-%COMP%]:not(.urgent){background-color:#f3f4f6;color:#6b7280}.cliente-nombre[_ngcontent-%COMP%]{font-weight:500;color:#111827}.direccion-texto[_ngcontent-%COMP%]{word-break:break-word;line-height:1.4}.tipo-aviso[_ngcontent-%COMP%]{font-weight:500;color:#4f46e5}.descripcion-texto[_ngcontent-%COMP%]{line-height:1.6;color:#111827}.image-title[_ngcontent-%COMP%]{font-weight:500;color:#111827}.ver-cliente[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#4f46e5;text-decoration:none;font-size:14px;cursor:pointer;transition:color .2s ease}.ver-cliente[_ngcontent-%COMP%]:hover{color:#291fd9}.ver-cliente[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.no-images[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.no-images[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#cbd5e0;margin-bottom:16px}.no-images[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}@media (max-width: 768px){[_nghost-%COMP%]{padding:16px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:inline}.info-card[_ngcontent-%COMP%]{margin-bottom:16px;border-radius:12px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:20px;flex-direction:row;align-items:center;justify-content:start;gap:25px!important}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .mobile-only.title[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:500;color:#111827;margin:0}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{width:auto;justify-content:space-between;gap:12px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:none;width:100%;flex-direction:column;gap:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions-jobs[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;gap:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions-jobs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.info-card[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{font-size:16px;padding:20px}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.info-grid[_ngcontent-%COMP%]{padding:15px;gap:16px}.info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{gap:20px}.info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{width:auto}.info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:max-content}.info-grid[_ngcontent-%COMP%]   .cliente-info[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%]   .direccion-info[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:space-between;gap:8px}.info-grid[_ngcontent-%COMP%]   .contacto-items[_ngcontent-%COMP%]{flex-direction:row;gap:8px}.info-grid[_ngcontent-%COMP%]   .contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.info-grid[_ngcontent-%COMP%]   .contacto-items[_ngcontent-%COMP%]   .contacto-item.nombre-contacto[_ngcontent-%COMP%]{display:none}.descripcion-content[_ngcontent-%COMP%]{padding:20px;gap:16px}.gallery-actions[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{align-self:center}.gallery-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-left:0;width:100%;justify-content:center}.gallery-items[_ngcontent-%COMP%]{padding:20px;gap:12px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:8px;margin-right:0}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]{width:100%}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{align-self:flex-end}.table-container[_ngcontent-%COMP%]{padding:0 20px 20px}.custom-mat-table[_ngcontent-%COMP%]{font-size:12px}.custom-mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:11px;padding:8px 12px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:12px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion-trabajo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion-trabajo[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:10px}.estado-actions[_ngcontent-%COMP%]{flex-direction:column;gap:6px}.estado-actions[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{width:100%;justify-content:center;padding:8px 12px;font-size:12px}.flujo-container[_ngcontent-%COMP%]{padding:0 20px 20px}.flujo-section[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:0}.section-divider[_ngcontent-%COMP%]{margin:20px 0 16px}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;padding:0 12px}.back-button[_ngcontent-%COMP%]{margin-bottom:16px}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.badge-pendiente[_ngcontent-%COMP%]{font-size:12px;padding:3px 8px}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:11px;padding:2px 4px}.no-repuestos[_ngcontent-%COMP%]{font-size:12px}.empty-state[_ngcontent-%COMP%]{padding:30px 16px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px}.urgent-badge[_ngcontent-%COMP%]{font-size:11px;padding:2px 6px}.ver-cliente[_ngcontent-%COMP%]{font-size:12px}.ver-cliente[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.no-images[_ngcontent-%COMP%]{padding:30px 16px}.no-images[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px}.no-images[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){[_nghost-%COMP%]{padding:0}.info-card[_ngcontent-%COMP%]{margin-bottom:12px;border-radius:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:16px;gap:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{gap:8px}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{gap:6px}.info-card[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{font-size:15px;padding:16px;display:none}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:15px!important}.descripcion-content[_ngcontent-%COMP%]{padding:16px;gap:12px}.descripcion-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px}.descripcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.gallery-actions[_ngcontent-%COMP%]{gap:8px}.gallery-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.gallery-items[_ngcontent-%COMP%]{padding:16px;gap:8px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{gap:8px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span.file-info[_ngcontent-%COMP%]{font-size:11px}.table-container[_ngcontent-%COMP%]{padding:0 16px 16px}.custom-mat-table[_ngcontent-%COMP%]{font-size:11px}.custom-mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:10px;padding:6px 8px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;font-size:11px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion-trabajo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion-trabajo[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:9px}.estado-actions[_ngcontent-%COMP%]{gap:4px}.estado-actions[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{padding:6px 8px;font-size:11px}.flujo-container[_ngcontent-%COMP%]{padding:0 16px 16px}.flujo-section[_ngcontent-%COMP%]{margin-top:16px}.section-divider[_ngcontent-%COMP%]{margin:16px 0 12px}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;padding:0 8px}.back-button[_ngcontent-%COMP%]{margin-bottom:12px}.back-button[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{padding:6px 10px;font-size:12px}.badge-pendiente[_ngcontent-%COMP%]{font-size:11px;padding:2px 6px}.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:10px;padding:1px 3px}.no-repuestos[_ngcontent-%COMP%]{font-size:11px}.empty-state[_ngcontent-%COMP%]{padding:24px 12px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:11px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}ion-icon[_ngcontent-%COMP%]{font-size:16px}.urgent-badge[_ngcontent-%COMP%]{font-size:10px;padding:1px 4px}.ver-cliente[_ngcontent-%COMP%]{font-size:11px}.ver-cliente[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:11px}.no-images[_ngcontent-%COMP%]{padding:24px 12px}.no-images[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px}.no-images[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 768px){.custom-mat-table[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block}.custom-mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.custom-mat-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;margin-bottom:8px;border-radius:8px;background:#f9fafb;padding:12px}.custom-mat-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .custom-mat-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;text-align:left;padding:4px 0;border:none;white-space:normal}.custom-mat-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:before, .custom-mat-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label) ": ";font-weight:600;color:#6b7280;font-size:11px;text-transform:uppercase;letter-spacing:.5px}.custom-mat-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{display:none}.custom-mat-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:13px;line-height:1.4}.custom-mat-table[_ngcontent-%COMP%]   td.descripcion-trabajo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px}.custom-mat-table[_ngcontent-%COMP%]   td.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]{margin-top:4px}.custom-mat-table[_ngcontent-%COMP%]   td.materiales-info[_ngcontent-%COMP%]   .repuestos-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin:2px 4px 2px 0}.custom-mat-table[_ngcontent-%COMP%]   td.estado-actions[_ngcontent-%COMP%]{margin-top:8px;padding-top:8px;border-top:1px solid #E5E7EB}.custom-mat-table[_ngcontent-%COMP%]   td.estado-actions[_ngcontent-%COMP%]:before{content:"Acciones: "}.estado-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.estado-actions[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{flex:1;min-width:80px;max-width:120px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{border:1px solid #E5E7EB;border-radius:8px;padding:12px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:6px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]{margin:8px 0}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-bottom:2px}.badge-estado[_ngcontent-%COMP%]{display:inline-block;margin:2px 0}.btn-map[_ngcontent-%COMP%]{min-width:36px;height:36px}.btn-map[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]{border-radius:6px;padding:6px 10px;font-size:13px}.contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.empty-state[_ngcontent-%COMP%]{background:#f9fafb;border-radius:8px;margin:16px 0}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{min-height:150px}.error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #FECACA;border-radius:8px;padding:20px}.error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#dc2626}.header-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{margin-bottom:0}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{--background: #F3F4F6;--background-checked: white;--color: #6B7280;--color-checked: #4F46E5}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--background: transparent;--background-checked: white;--color: #6B7280;--color-checked: #4F46E5;--indicator-color: transparent;--border-radius: 50%;--margin: 0;--padding: 0;min-height:32px;min-width:32px}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.flujo-section[_ngcontent-%COMP%]   .flujo-container[_ngcontent-%COMP%]{padding:0 16px 16px}.section-divider[_ngcontent-%COMP%]{margin:16px 0 12px}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;padding:0 10px;background:#fff;color:#6b7280}.cliente-info[_ngcontent-%COMP%]   .cliente-nombre[_ngcontent-%COMP%]{font-size:14px;line-height:1.3}.direccion-info[_ngcontent-%COMP%]   .direccion-texto[_ngcontent-%COMP%]{font-size:13px;line-height:1.4}.descripcion-content[_ngcontent-%COMP%]   .tipo-aviso[_ngcontent-%COMP%]{font-size:14px}.descripcion-content[_ngcontent-%COMP%]   .descripcion-texto[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 480px){.custom-mat-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px}.custom-mat-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{font-size:10px}.custom-mat-table[_ngcontent-%COMP%]   .estado-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:end;gap:20px}.custom-mat-table[_ngcontent-%COMP%]   .estado-actions[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{min-width:70px;max-width:100px;font-size:11px;padding:6px 8px}.custom-mat-table[_ngcontent-%COMP%]   .estado-actions[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{padding:8px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px}.gallery-items[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   span.file-info[_ngcontent-%COMP%]{font-size:10px}.contacto-items[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:space-between;gap:8px}.contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px}.contacto-items[_ngcontent-%COMP%]   .contacto-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.btn-map[_ngcontent-%COMP%]{min-width:32px;height:32px}.btn-map[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.empty-state[_ngcontent-%COMP%]{padding:20px 12px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:10px}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{min-height:120px}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{min-height:28px;min-width:28px}.gallery-actions[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px;min-height:40px}.flujo-section[_ngcontent-%COMP%]   .flujo-container[_ngcontent-%COMP%]{padding:0 12px 12px}.section-divider[_ngcontent-%COMP%]{margin:12px 0 8px}.section-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;padding:0 8px}.cliente-info[_ngcontent-%COMP%]   .cliente-nombre[_ngcontent-%COMP%]{font-size:13px}.direccion-info[_ngcontent-%COMP%]   .direccion-texto[_ngcontent-%COMP%]{font-size:12px}.descripcion-content[_ngcontent-%COMP%]   .tipo-aviso[_ngcontent-%COMP%]{font-size:13px}.descripcion-content[_ngcontent-%COMP%]   .descripcion-texto[_ngcontent-%COMP%]{font-size:12px}}']});let c=l;return c})();export{Je as VerAvisosComponent};
