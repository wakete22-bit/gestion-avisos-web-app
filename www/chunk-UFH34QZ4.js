import{a as ae}from"./chunk-PNFYV5D6.js";import"./chunk-KYCVJEX4.js";import"./chunk-FK6H3RFT.js";import{a as te}from"./chunk-363ZOX5P.js";import{a as ne}from"./chunk-PMJS7GFM.js";import"./chunk-Z7B4QQZC.js";import{Aa as $,Da as ee,J as X,P as Y,U as Z,a as q,f as H,h as G,m as Q}from"./chunk-D2B24UYB.js";import"./chunk-SJDIOWVS.js";import{h as J,v as K}from"./chunk-S7JRATTN.js";import"./chunk-OW3FFWTU.js";import{$ as F,$a as k,Da as n,Ea as d,Fa as u,Ia as w,Ja as E,Ka as y,M as O,N as P,Sa as m,Va as _,Y as c,Z as b,ab as V,da as M,fb as N,gb as T,gc as R,ia as f,la as z,lc as L,ma as e,na as t,oa as C,pb as A,rc as D,sa as h,sb as j,sc as B,ta as x,tc as U,ua as p,zc as W}from"./chunk-M7VHNEAX.js";import"./chunk-ULLEADC5.js";import"./chunk-2ELISCRH.js";import"./chunk-BV4CTHEE.js";import"./chunk-NBD2MYJO.js";import"./chunk-3SBX7V6R.js";import"./chunk-SQKDQBOS.js";import"./chunk-SWRJZAEI.js";import"./chunk-JCSW2JUV.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-36KMLI7A.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-CRC5ZNR6.js";function oe(l,s){if(l&1){let i=h();e(0,"div",8)(1,"div",9)(2,"div",10)(3,"label",11),n(4,"Estado:"),t(),e(5,"select",12),y("ngModelChange",function(a){O(i);let r=p();return E(r.factura.factura.estado,a)||(r.factura.factura.estado=a),P(a)}),x("change",function(a){O(i);let r=p();return P(r.cambiarEstado(a))}),e(6,"option",13),n(7,"Pendiente"),t(),e(8,"option",14),n(9,"En curso"),t(),e(10,"option",15),n(11,"Completado"),t()()(),e(12,"div",16)(13,"select",17),y("ngModelChange",function(a){O(i);let r=p();return E(r.plantillaSeleccionada,a)||(r.plantillaSeleccionada=a),P(a)}),e(14,"option",18),n(15,"Plantilla Completa"),t(),e(16,"option",19),n(17,"Plantilla Simple"),t(),e(18,"option",20),n(19,"Plantilla Profesional"),t()()(),e(20,"button",21),x("click",function(){O(i);let a=p();return P(a.imprimirFactura())}),C(21,"ion-icon",22),n(22," Imprimir "),t(),e(23,"button",21),x("click",function(){O(i);let a=p();return P(a.editarFactura())}),C(24,"ion-icon",23),n(25," Editar "),t(),e(26,"button",24),x("click",function(){O(i);let a=p();return P(a.descargarFactura())}),C(27,"ion-icon",25),n(28," Descargar PDF "),t()()()}if(l&2){let i=p();c(5),w("ngModel",i.factura.factura.estado),c(8),w("ngModel",i.plantillaSeleccionada)}}function ie(l,s){l&1&&(e(0,"div",26)(1,"div",27),C(2,"ion-icon",28),e(3,"p"),n(4,"Cargando factura..."),t()()())}function re(l,s){if(l&1){let i=h();e(0,"div",29)(1,"div",30),C(2,"ion-icon",31),e(3,"p"),n(4),t(),e(5,"button",32),x("click",function(){O(i);let a=p();return P(a.cargarFactura())}),C(6,"ion-icon",33),n(7," Reintentar "),t()()()}if(l&2){let i=p();c(4),d(i.error)}}function ce(l,s){if(l&1&&(e(0,"tr")(1,"td"),n(2),t(),e(3,"td"),n(4),t(),e(5,"td"),n(6),m(7,"currency"),t(),e(8,"td"),n(9),m(10,"currency"),t()()),l&2){let i=s.$implicit;c(2),d(i.nombre),c(2),d(i.cantidad),c(2),d(_(7,4,i.precio_neto,"EUR","symbol","1.2-2")),c(3),d(_(10,9,i.precio_pvp,"EUR","symbol","1.2-2"))}}function le(l,s){if(l&1&&(e(0,"div",55)(1,"div",56),n(2,"Repuestos utilizados"),t(),e(3,"table")(4,"thead")(5,"tr")(6,"th"),n(7,"Repuestos utilizados"),t(),e(8,"th"),n(9,"CANTIDAD"),t(),e(10,"th"),n(11,"NETO"),t(),e(12,"th"),n(13,"PVP"),t()()(),e(14,"tbody"),M(15,ce,11,14,"tr",57),e(16,"tr",58)(17,"td")(18,"b"),n(19,"TOTAL"),t()(),C(20,"td"),e(21,"td",59),n(22),m(23,"currency"),t(),e(24,"td",59),n(25),m(26,"currency"),t()()()()()),l&2){let i=p(2);c(15),f("ngForOf",i.repuestos),c(7),u(" ",_(23,3,i.totalRepuestosNeto,"EUR","symbol","1.2-2")," "),c(3),u(" ",_(26,8,i.totalRepuestosPvp,"EUR","symbol","1.2-2")," ")}}function se(l,s){if(l&1&&(e(0,"tr")(1,"td"),n(2),t(),e(3,"td"),n(4),t(),e(5,"td"),n(6),m(7,"currency"),t()()),l&2){let i=s.$implicit;c(2),d(i.nombre),c(2),u("",i.cantidad,"h"),c(2),d(_(7,3,i.precio_pvp,"EUR","symbol","1.2-2"))}}function de(l,s){if(l&1&&(e(0,"tr")(1,"td"),n(2),t(),e(3,"td"),n(4),t(),e(5,"td"),n(6),m(7,"currency"),t()()),l&2){let i=s.$implicit;c(2),d(i.nombre),c(2),d(i.cantidad),c(2),d(_(7,3,i.precio_pvp,"EUR","symbol","1.2-2"))}}function pe(l,s){if(l&1&&(e(0,"div",55)(1,"div",56),n(2,"Mano de obra/Kilometraje"),t(),e(3,"table")(4,"thead")(5,"tr")(6,"th"),n(7,"Mano de obra/Kilometraje"),t(),e(8,"th"),n(9,"CANTIDAD"),t(),e(10,"th"),n(11,"PVP"),t()()(),e(12,"tbody"),M(13,se,8,8,"tr",57)(14,de,8,8,"tr",57),e(15,"tr",58)(16,"td",60)(17,"b"),n(18,"TOTAL"),t()(),e(19,"td",59),n(20),m(21,"currency"),t()()()()()),l&2){let i=p(2);c(13),f("ngForOf",i.manoObra),c(),f("ngForOf",i.desplazamientos),c(6),u(" ",_(21,3,i.totalManoObraDesplazamiento,"EUR","symbol","1.2-2")," ")}}function ge(l,s){if(l&1&&(e(0,"div",61)(1,"b"),n(2,"Notas"),t(),e(3,"div",62),n(4),t()()),l&2){let i=p(2);c(4),u(" ",i.factura.factura.notas," ")}}function ue(l,s){if(l&1&&(e(0,"div",34)(1,"div",35)(2,"h2"),n(3),t(),e(4,"div",36)(5,"span",37),n(6),t()()(),e(7,"div",38)(8,"div",39),C(9,"img",40),t(),e(10,"div",41)(11,"div")(12,"span",42),n(13,"Datos de empresa"),t(),e(14,"span"),n(15,"Nombre de empresa"),t(),e(16,"address"),n(17,"Direcci\xF3n de empresa"),t(),e(18,"span"),n(19,"Ciudad de empresa"),t(),e(20,"span"),n(21,"CIF de empresa"),t(),e(22,"span",43),n(23,"ejemplodominio.es"),t(),e(24,"span"),n(25,"+34 123 45 56 65"),t()(),e(26,"div",44)(27,"label",45),n(28,"Factura"),t(),e(29,"label",46),n(30,"N\xBA FACTURA"),t(),e(31,"label"),n(32),t(),e(33,"label",46),n(34,"FECHA DE EMISI\xD3N"),t(),e(35,"label"),n(36),t()()()(),e(37,"div",47)(38,"h3"),n(39,"Datos del Cliente"),t(),e(40,"div",48)(41,"p")(42,"strong"),n(43,"Nombre:"),t(),n(44),t(),e(45,"p")(46,"strong"),n(47,"Direcci\xF3n:"),t(),n(48),t(),e(49,"p")(50,"strong"),n(51,"CIF:"),t(),n(52),t(),e(53,"p")(54,"strong"),n(55,"Email:"),t(),n(56),t()()(),M(57,le,27,13,"div",49)(58,pe,22,8,"div",49),e(59,"div",50)(60,"div",51)(61,"span"),n(62,"Subtotal"),t(),e(63,"span"),n(64),m(65,"currency"),t()(),e(66,"div",51)(67,"span"),n(68,"IVA (21%)"),t(),e(69,"span"),n(70),m(71,"currency"),t()(),e(72,"div",52)(73,"span"),n(74,"TOTAL"),t(),e(75,"span"),n(76),m(77,"currency"),t()()(),M(78,ge,5,1,"div",53),e(79,"div",54)(80,"span"),n(81,"Nombre de empresa"),t(),e(82,"span"),n(83,"+34 698 12 12 12"),t(),e(84,"span"),n(85,"ejemploemail.com"),t()()()),l&2){let i=p();c(3),u("Factura ",i.factura.factura.numero_factura,""),c(2),z(i.getEstadoClass(i.factura.factura.estado)),c(),u(" ",i.factura.factura.estado," "),c(26),d(i.factura.factura.numero_factura),c(4),d(i.formatearFecha(i.factura.factura.fecha_emision)),c(8),u(" ",i.factura.factura.nombre_cliente,""),c(4),u(" ",i.factura.factura.direccion_cliente,""),c(4),u(" ",i.factura.factura.cif_cliente,""),c(4),u(" ",i.factura.factura.email_cliente,""),c(),f("ngIf",i.repuestos.length>0),c(),f("ngIf",i.manoObra.length>0||i.desplazamientos.length>0),c(6),d(_(65,16,i.factura.factura.subtotal,"EUR","symbol","1.2-2")),c(6),d(_(71,21,i.factura.factura.iva,"EUR","symbol","1.2-2")),c(6),d(_(77,26,i.factura.factura.total,"EUR","symbol","1.2-2")),c(2),f("ngIf",i.factura.factura.notas)}}var Ee=(()=>{let s=class s{constructor(o,a,r,g,v){this.route=o,this.router=a,this.facturasService=r,this.pdfService=g,this.avisosService=v,this.factura=null,this.loading=!1,this.error=null,this.facturaId=null,this.modoEdicion=!1,this.plantillaSeleccionada="completa",q({arrowBackOutline:G,printOutline:$,createOutline:X,downloadOutline:Y,bugOutline:Q,refreshOutline:ee,alertCircleOutline:H,eyeOutline:Z})}ngOnInit(){this.route.params.subscribe(o=>{this.facturaId=o.id,this.facturaId&&this.cargarFactura()}),this.route.queryParams.subscribe(o=>{this.modoEdicion=o.edit==="true"})}cargarFactura(){this.facturaId&&(this.loading=!0,this.error=null,this.facturasService.getFactura(this.facturaId).subscribe({next:o=>{console.log("\u{1F50D} Factura completa recibida del servicio:",o),console.log("\u{1F50D} L\xEDneas de la factura:",o.lineas),console.log("\u{1F50D} L\xEDneas de factura recibidas sin procesar:",o.lineas),this.factura=o,this.loading=!1,setTimeout(()=>{console.log("\u{1F50D} Repuestos procesados despu\xE9s de cargar:",this.repuestos),console.log("\u{1F50D} Mano de obra procesada despu\xE9s de cargar:",this.manoObra),console.log("\u{1F50D} Desplazamientos procesados despu\xE9s de cargar:",this.desplazamientos)},100)},error:o=>{console.error("Error al cargar factura:",o),this.error="Error al cargar la factura",this.loading=!1}}))}volver(){this.router.navigate(["/facturas"])}editarFactura(){this.facturaId&&this.router.navigate(["/facturas/editar",this.facturaId])}cambiarEstado(o){if(!this.facturaId||!this.factura)return;let a=o.target.value;this.facturasService.cambiarEstado(this.facturaId,a).subscribe({next:r=>{var g,v,S,I;console.log("\u2705 Estado de factura actualizado:",r),this.factura&&(this.factura.factura.estado=r.estado),a==="Completado"&&((v=(g=this.factura)==null?void 0:g.factura)!=null&&v.aviso_id)&&(console.log("\u{1F504} Actualizando estado del aviso asociado..."),this.actualizarEstadoAvisoAsociado((I=(S=this.factura)==null?void 0:S.factura)==null?void 0:I.aviso_id))},error:r=>{console.error("\u274C Error al cambiar estado:",r),this.factura&&(this.factura.factura.estado=o.target.defaultValue)}})}actualizarEstadoAvisoAsociado(o){this.avisosService.actualizarEstadoAutomatico(o).subscribe({next:a=>{console.log("\u2705 Estado del aviso actualizado autom\xE1ticamente:",a.estado),a.estado==="Completado"&&console.log("\u{1F389} El aviso se ha marcado autom\xE1ticamente como completado")},error:a=>{console.error("\u274C Error al actualizar estado del aviso:",a)}})}imprimirFactura(){window.print()}descargarFactura(){if(!this.factura){console.error("No hay factura para descargar");return}try{console.log("\u{1F527} Iniciando descarga de factura...");let a=`factura_${this.factura.factura.numero_factura||"factura"}.pdf`,r={numero_factura:this.factura.factura.numero_factura,fecha_emision:this.factura.factura.fecha_emision,nombre_cliente:this.factura.factura.nombre_cliente,direccion_cliente:this.factura.factura.direccion_cliente,cif_cliente:this.factura.factura.cif_cliente,email_cliente:this.factura.factura.email_cliente,cliente_id:this.factura.factura.cliente_id,subtotal:this.factura.factura.subtotal,iva:this.factura.factura.iva,total:this.factura.factura.total,estado:this.factura.factura.estado,notas:this.factura.factura.notas,lineas:this.factura.lineas};this.plantillaSeleccionada==="simple"?this.pdfService.generarPlantillaFacturaSimple(r,a):this.plantillaSeleccionada==="profesional"?this.pdfService.generarPlantillaFacturaProfesional(r,a):this.pdfService.generarPdfNativo(r,a),console.log("\u2705 Factura descargada exitosamente")}catch(o){console.error("\u274C Error al descargar factura:",o)}}formatearMoneda(o){return new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(o)}formatearFecha(o){return new Date(o).toLocaleDateString("es-ES")}getEstadoClass(o){switch(o.toLowerCase()){case"pendiente":return"estado-pendiente";case"en curso":return"estado-en-curso";case"completado":return"estado-completado";default:return"estado-default"}}get repuestos(){var a;if(!((a=this.factura)!=null&&a.lineas)||!Array.isArray(this.factura.lineas))return[];let o=this.factura.lineas.map(r=>this.parsearLinea(r)).filter(r=>r&&r.tipo==="repuesto");return console.log("\u{1F50D} Repuestos filtrados y parseados:",o),o}get manoObra(){var a;if(!((a=this.factura)!=null&&a.lineas)||!Array.isArray(this.factura.lineas))return[];let o=this.factura.lineas.map(r=>this.parsearLinea(r)).filter(r=>r&&r.tipo==="mano_obra");return console.log("\u{1F50D} Mano de obra filtrada y parseada:",o),o}get desplazamientos(){var a;if(!((a=this.factura)!=null&&a.lineas)||!Array.isArray(this.factura.lineas))return[];let o=this.factura.lineas.map(r=>this.parsearLinea(r)).filter(r=>r&&r.tipo==="desplazamiento");return console.log("\u{1F50D} Desplazamientos filtrados y parseados:",o),o}parsearLinea(o){if(!o)return null;console.log("\u{1F50D} Parseando l\xEDnea:",{tipo:typeof o,valor:o});let a;if(typeof o=="string")try{a=JSON.parse(o),console.log("\u2705 L\xEDnea parseada exitosamente de JSON:",a)}catch(g){return console.warn("\u26A0\uFE0F Error al parsear l\xEDnea JSON:",o,g),null}else if(typeof o=="object"&&o!==null)a=o,console.log("\u2705 L\xEDnea ya es objeto:",a);else return console.warn("\u26A0\uFE0F L\xEDnea no es string ni objeto:",o),null;a.nombre||console.warn("\u26A0\uFE0F L\xEDnea sin nombre:",a);let r={id:a.id||"",tipo:a.tipo||"repuesto",nombre:a.nombre||"Sin nombre",cantidad:Number(a.cantidad)||0,precio_neto:Number(a.precio_neto)||0,precio_pvp:Number(a.precio_pvp)||0,descripcion:a.descripcion||"",fecha_creacion:a.fecha_creacion||""};return console.log("\u2705 L\xEDnea normalizada:",r),r}get totalRepuestosNeto(){return this.repuestos.reduce((o,a)=>{let r=Number(a.cantidad)||0,g=Number(a.precio_neto)||0;return o+r*g},0)}get totalRepuestosPvp(){return this.repuestos.reduce((o,a)=>{let r=Number(a.cantidad)||0,g=Number(a.precio_pvp)||0;return o+r*g},0)}get totalManoObraDesplazamiento(){return[...this.manoObra,...this.desplazamientos].reduce((a,r)=>{let g=Number(r.cantidad)||0,v=Number(r.precio_pvp)||0;return a+g*v},0)}};s.\u0275fac=function(a){return new(a||s)(b(A),b(j),b(ne),b(ae),b(te))},s.\u0275cmp=F({type:s,selectors:[["app-ver-factura"]],decls:10,vars:4,consts:[[1,"factura-container"],[1,"page-header"],[1,"btn-back",3,"click"],["name","arrow-back-outline"],["class","header-actions",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","factura-preview active",4,"ngIf"],[1,"header-actions"],[1,"action-buttons"],[1,"estado-selector"],["for","estado-factura"],["id","estado-factura",1,"estado-select",3,"ngModelChange","change","ngModel"],["value","Pendiente"],["value","En curso"],["value","Completado"],[1,"pdf-options"],[1,"pdf-template-selector",3,"ngModelChange","ngModel"],["value","completa"],["value","simple"],["value","profesional"],[1,"btn-secondary",3,"click"],["name","print-outline"],["name","create-outline"],[1,"btn-primary",3,"click"],["name","download-outline"],[1,"loading-state"],[1,"loading-spinner"],["name","refresh-outline",1,"spinning"],[1,"error-state"],[1,"error-message"],["name","alert-circle-outline"],[1,"btn-retry",3,"click"],["name","refresh-outline"],[1,"factura-preview","active"],[1,"header-container"],[1,"estado-badge"],[1,"badge"],[1,"preview-header"],[1,"logo-box"],["src","assets/icon/favicon.png","alt","Logo"],[1,"empresa-datos"],[1,"empresa-nombre"],[2,"margin-top","20px"],[1,"factura-info"],[1,"factura-label"],[2,"color","#111827","font-weight","500"],[1,"cliente-datos"],[1,"cliente-info"],["class","preview-tabla",4,"ngIf"],[1,"preview-totales-box"],[1,"totales-row"],[1,"totales-row","total-final"],["class","preview-notas",4,"ngIf"],[1,"preview-footer"],[1,"preview-tabla"],[1,"tabla-titulo"],[4,"ngFor","ngForOf"],[1,"total-row"],[1,"success"],["colspan","2"],[1,"preview-notas"],[1,"notas-texto"]],template:function(a,r){a&1&&(e(0,"ion-content")(1,"div",0)(2,"div",1)(3,"button",2),x("click",function(){return r.volver()}),C(4,"ion-icon",3),n(5," Volver a Facturas "),t(),M(6,oe,29,2,"div",4),t(),M(7,ie,5,0,"div",5)(8,re,8,1,"div",6)(9,ue,86,31,"div",7),t()()),a&2&&(c(6),f("ngIf",r.factura),c(),f("ngIf",r.loading),c(),f("ngIf",r.error&&!r.loading),c(),f("ngIf",r.factura&&!r.loading))},dependencies:[T,k,V,N,W,B,U,D,R,L,J,K],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: #fff}.factura-container[_ngcontent-%COMP%]{margin:0 auto;padding:20px;gap:0;display:block;background-color:#fff}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #e2e8f0}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.page-header[_ngcontent-%COMP%]   .pdf-options[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.page-header[_ngcontent-%COMP%]   .pdf-options[_ngcontent-%COMP%]   .pdf-template-selector[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #e2e8f0;border-radius:6px;font-size:14px;background:#fff;color:#4a5568;cursor:pointer;transition:all .2s}.page-header[_ngcontent-%COMP%]   .pdf-options[_ngcontent-%COMP%]   .pdf-template-selector[_ngcontent-%COMP%]:hover{border-color:#cbd5e0}.page-header[_ngcontent-%COMP%]   .pdf-options[_ngcontent-%COMP%]   .pdf-template-selector[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.page-header[_ngcontent-%COMP%]   .estado-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.page-header[_ngcontent-%COMP%]   .estado-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#4a5568;white-space:nowrap}.page-header[_ngcontent-%COMP%]   .estado-selector[_ngcontent-%COMP%]   .estado-select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #e2e8f0;border-radius:6px;font-size:14px;background:#fff;color:#4a5568;cursor:pointer;transition:all .2s;min-width:120px}.page-header[_ngcontent-%COMP%]   .estado-selector[_ngcontent-%COMP%]   .estado-select[_ngcontent-%COMP%]:hover{border-color:#cbd5e0}.page-header[_ngcontent-%COMP%]   .estado-selector[_ngcontent-%COMP%]   .estado-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.btn-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#f7fafc;border:1px solid #e2e8f0;border-radius:8px;color:#4a5568;text-decoration:none;cursor:pointer;transition:all .2s}.btn-back[_ngcontent-%COMP%]:hover{background:#edf2f7;border-color:#cbd5e0}.btn-back[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#4a5568;border:1px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f7fafc;border-color:#cbd5e0}.btn-primary[_ngcontent-%COMP%]{background:#4f46e5;color:#fff;border:1px solid #4f46e5}.btn-primary[_ngcontent-%COMP%]:hover{background:#4338ca;border-color:#4338ca}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:300px}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{text-align:center;color:#64748b}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;color:#cbd5e0}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:0}.loading-state[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]{margin-top:16px;padding:8px 16px;background:#4f46e5;color:#fff;border:none;border-radius:6px;cursor:pointer;display:flex;align-items:center;gap:8px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.factura-preview[_ngcontent-%COMP%]{background:#fff;border-radius:24px;padding:32px;display:flex;flex-direction:column;gap:24px;border:1px solid #e2e8f0}.factura-preview.active[_ngcontent-%COMP%]{display:flex}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#111827;margin:0}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:12px;font-weight:600;text-transform:uppercase}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   .badge.estado-pendiente[_ngcontent-%COMP%]{background:var(--estado-pendiente-bg);color:var(--estado-pendiente-color)}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   .badge.estado-en-curso[_ngcontent-%COMP%]{background:var(--estado-en-curso-bg);color:var(--estado-en-curso-color)}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .estado-badge[_ngcontent-%COMP%]   .badge.estado-completado[_ngcontent-%COMP%]{background:var(--estado-completado-bg);color:var(--estado-completado-color)}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:32px}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .logo-box[_ngcontent-%COMP%]{border-radius:12px;display:flex;align-items:center;justify-content:center}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .logo-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:44px}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .empresa-datos[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-between}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .empresa-datos[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .empresa-datos[_ngcontent-%COMP%]   address[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:13px;margin-bottom:2px;font-style:normal}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .empresa-datos[_ngcontent-%COMP%]   .empresa-nombre[_ngcontent-%COMP%]{color:#4f46e5;font-weight:600;font-size:14px;margin-bottom:8px;text-transform:capitalize}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .factura-info[_ngcontent-%COMP%]{text-align:right}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .factura-info[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;color:#6b7280;margin-bottom:2px}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .factura-info[_ngcontent-%COMP%]   .factura-label[_ngcontent-%COMP%]{color:#4f46e5;font-weight:600;font-size:14px;margin-bottom:8px}.factura-preview[_ngcontent-%COMP%]   .cliente-datos[_ngcontent-%COMP%]{background:#f8fafc;border-radius:12px;padding:20px;margin:16px 0}.factura-preview[_ngcontent-%COMP%]   .cliente-datos[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4f46e5;font-size:16px;font-weight:600;margin:0 0 12px}.factura-preview[_ngcontent-%COMP%]   .cliente-datos[_ngcontent-%COMP%]   .cliente-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#4a5568}.factura-preview[_ngcontent-%COMP%]   .cliente-datos[_ngcontent-%COMP%]   .cliente-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2d3748}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   .tabla-titulo[_ngcontent-%COMP%]{font-weight:600;color:#6b7280;margin-bottom:8px;font-size:1rem}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:8px}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px;text-align:left}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#9ca3af;font-weight:400;background:none;border-bottom:1px solid #E5E7EB}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#111827;border-bottom:1px solid #F3F4F6}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#27c26c;font-weight:600}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700;color:#4f46e5;border-bottom:none}.factura-preview[_ngcontent-%COMP%]   .preview-totales-box[_ngcontent-%COMP%]{margin:24px 0 0;background:#eef2ff;border-radius:16px;padding:15px;width:300px;align-self:flex-end}.factura-preview[_ngcontent-%COMP%]   .preview-totales-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#4f46e5}.factura-preview[_ngcontent-%COMP%]   .preview-totales-box[_ngcontent-%COMP%]   .totales-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:14px;margin-bottom:8px}.factura-preview[_ngcontent-%COMP%]   .preview-totales-box[_ngcontent-%COMP%]   .totales-row.total-final[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff;background:#4f46e5;border-radius:12px;padding:10px 16px;margin-top:12px;margin-bottom:0}.factura-preview[_ngcontent-%COMP%]   .preview-totales-box[_ngcontent-%COMP%]   .totales-row.total-final[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff!important}.factura-preview[_ngcontent-%COMP%]   .preview-notas[_ngcontent-%COMP%]{margin-top:24px}.factura-preview[_ngcontent-%COMP%]   .preview-notas[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#4f46e5;font-size:1rem}.factura-preview[_ngcontent-%COMP%]   .preview-notas[_ngcontent-%COMP%]   .notas-texto[_ngcontent-%COMP%]{color:#6b7280;font-size:.95rem;margin-top:4px}.factura-preview[_ngcontent-%COMP%]   .preview-footer[_ngcontent-%COMP%]{margin-top:32px;display:flex;justify-content:space-between;color:#6b7280;font-size:.95rem;border-top:1px solid #E5E7EB;padding-top:12px}@media (max-width: 768px){.factura-container[_ngcontent-%COMP%]{padding:16px}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .pdf-options[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .pdf-options[_ngcontent-%COMP%]   .pdf-template-selector[_ngcontent-%COMP%]{width:100%;text-align:center}.factura-preview[_ngcontent-%COMP%]{padding:16px;border-radius:12px}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.factura-preview[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%], .factura-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .empresa-datos[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.factura-preview[_ngcontent-%COMP%]   .preview-totales-box[_ngcontent-%COMP%]{width:100%}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-size:12px}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 8px}}@media (max-width: 480px){.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .estado-selector[_ngcontent-%COMP%]{width:100%;justify-content:center}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .estado-selector[_ngcontent-%COMP%]   .estado-select[_ngcontent-%COMP%]{min-width:120px}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .pdf-options[_ngcontent-%COMP%]{width:100%;justify-content:center}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .pdf-options[_ngcontent-%COMP%]   .pdf-template-selector[_ngcontent-%COMP%]{min-width:120px}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:8px;width:100%}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center;padding:10px 12px;font-size:13px}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{grid-column:1/-1}.factura-preview[_ngcontent-%COMP%]{padding:12px}.factura-preview[_ngcontent-%COMP%]   .preview-tabla[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}}']});let l=s;return l})();export{Ee as VerFacturaComponent};
