import{a as hn}from"./chunk-SFQ52NF6.js";import{a as Et}from"./chunk-SWPOI2FM.js";import{a as yt}from"./chunk-K2V6VKHD.js";import{a as Mn}from"./chunk-CEBXDJYS.js";import"./chunk-5YRB7RVB.js";import{a as X}from"./chunk-TQRSRHIX.js";import"./chunk-JG55IETK.js";import{a as kt}from"./chunk-I3OVBRVV.js";import{a as Ot,b as ht,c as wt}from"./chunk-HRCV5JN7.js";import{a as dn}from"./chunk-4XNYWQEP.js";import{B as _n,C as st,D as lt,E as q,Ea as ft,Ha as Pt,J as gt,Na as K,Oa as vn,Pa as xt,Qa as Q,Sa as tn,T as dt,U as pt,Va as On,Y as mt,a as V,aa as bt,b as nt,ba as W,c as tt,d as et,e as ot,ea as _t,f as pn,fa as ut,i as mn,ia as Ct,k as it,ma as Y,oa as vt,q as at,qa as Mt,w as ct,xa as un,y as bn,z as rt,za as Cn}from"./chunk-CPCGS7XX.js";import"./chunk-WLL4S5XO.js";import{a as Jn}from"./chunk-STXSJFLK.js";import{c as $n,d as Dn,e as jn,f as Un,g as Bn,h as gn,i as Ln,j as qn,l as Hn,m as Gn,n as Wn,o as Yn,p as Kn,r as Qn,s as G,w as U}from"./chunk-YOFVTXCH.js";import"./chunk-LKFRID77.js";import{a as Xn,b as Zn}from"./chunk-A72QMOGB.js";import"./chunk-TWOPYUJN.js";import{A as I,F as T,Hb as Rn,I as F,Ia as d,Ja as O,Ka as E,La as H,Ma as Nn,N as P,O as x,Va as Fn,Wa as xn,Xa as cn,Za as rn,_ as l,ab as Tn,b as Sn,ba as z,c as L,da as R,f as Z,g as en,ha as f,j as J,kb as Vn,lb as $,mb as D,na as _,oa as Pn,pa as N,pb as sn,qa as In,ra as a,s as nn,sa as c,sb as j,t as zn,ta as C,ua as on,v as An,va as an,wb as ln,xa as S,ya as v,za as b}from"./chunk-4AY4VQCP.js";import"./chunk-3SUPCH3T.js";import"./chunk-QUJFQN2Y.js";import"./chunk-OGR5ZLHR.js";import"./chunk-CUT3BV6K.js";import"./chunk-73IMGLZG.js";import"./chunk-G2E2NLL6.js";import"./chunk-ILJSYHS4.js";import"./chunk-OAP23YNX.js";import"./chunk-YYM7CL2V.js";import"./chunk-5LR2YXX6.js";import"./chunk-WDU4QEMV.js";import"./chunk-CKP3SGE2.js";import"./chunk-ULLEADC5.js";import"./chunk-2ELISCRH.js";import"./chunk-BV4CTHEE.js";import"./chunk-JILLMCFB.js";import"./chunk-WWN5RJW3.js";import"./chunk-H3LYBNOM.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-NBD2MYJO.js";import"./chunk-3SBX7V6R.js";import"./chunk-SQKDQBOS.js";import"./chunk-SWRJZAEI.js";import"./chunk-JCSW2JUV.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-36KMLI7A.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as En,b as kn,k as w}from"./chunk-CRC5ZNR6.js";function Ut(r,g){if(r&1&&(a(0,"div",15)(1,"span",16),d(2,"Descripci\xF3n:"),c(),a(3,"span",17),d(4),c()()),r&2){let o=b();l(4),O(o.aviso.descripcion_problema)}}function Bt(r,g){if(r&1&&(a(0,"li"),d(1),c()),r&2){let o=g.$implicit;l(),O(o)}}function Lt(r,g){if(r&1&&(a(0,"div",28)(1,"h5"),d(2,"\u26A0\uFE0F Elementos que ser\xE1n afectados:"),c(),a(3,"ul",29),f(4,Bt,2,1,"li",30),c(),a(5,"p",10)(6,"strong"),d(7,"IMPORTANTE:"),c(),d(8," Estos elementos tambi\xE9n se ver\xE1n afectados por la eliminaci\xF3n. "),c()()),r&2){let o=b();l(4),_("ngForOf",o.dependencias)}}var zt=(()=>{let g=class g{constructor(n){this.modalController=n,V({warningOutline:On,closeOutline:q,trashOutline:tn})}ngOnInit(){V({closeOutline:q,trashOutline:tn,warningOutline:On,alertCircleOutline:pn})}confirmarEliminacion(){return w(this,null,function*(){yield this.modalController.dismiss({confirmado:!0},"confirm")})}cancelarEliminacion(){return w(this,null,function*(){yield this.modalController.dismiss({confirmado:!1},"cancel")})}cerrarModal(){return w(this,null,function*(){yield this.modalController.dismiss({confirmado:!1},"cancel")})}getEstadoClass(n){switch(n){case"Pendiente":return"pendiente";case"En curso":return"en-curso";case"Pendiente de presupuesto":return"pendiente-presupuesto";case"Listo para facturar":return"listo-para-facturar";case"Completado":return"completado";case"Cancelado":return"cancelado";default:return""}}};g.\u0275fac=function(t){return new(t||g)(z(G))},g.\u0275cmp=R({type:g,selectors:[["app-confirmar-eliminacion-aviso-modal"]],inputs:{aviso:"aviso",dependencias:"dependencias"},decls:78,vars:15,consts:[[1,"header-content"],[1,"warning-icon"],["name","warning-outline"],[1,"close-button",3,"click"],["name","close-outline"],[1,"modal-body"],[1,"modal-content"],[1,"warning-section"],[1,"warning-circle"],["name","trash-outline"],[1,"warning-text"],[1,"aviso-details"],[1,"aviso-card"],[1,"aviso-header"],[1,"aviso-info"],[1,"info-row"],[1,"label"],[1,"value"],["class","info-row",4,"ngIf"],[1,"value","estado-value"],[1,"value","urgencia-value"],[1,"consequences-section"],[1,"consequences-card"],[1,"consequences-list"],["class","dependencies-warning",4,"ngIf"],[1,"button-group"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"dependencies-warning"],[1,"dependencies-list"],[4,"ngFor","ngForOf"]],template:function(t,e){t&1&&(a(0,"ion-header")(1,"ion-toolbar")(2,"div",0)(3,"div",1),C(4,"ion-icon",2),c(),a(5,"h2"),d(6,"Confirmar eliminaci\xF3n"),c(),a(7,"button",3),v("click",function(){return e.cerrarModal()}),C(8,"ion-icon",4),c()()()(),a(9,"ion-content",5)(10,"div",6)(11,"div",7)(12,"div",8),C(13,"ion-icon",9),c(),a(14,"h3"),d(15,"\xBFEst\xE1s seguro de que quieres eliminar este aviso?"),c(),a(16,"p",10),d(17,"Esta acci\xF3n no se puede deshacer y eliminar\xE1 permanentemente el aviso y todas sus fotos asociadas."),c()(),a(18,"div",11)(19,"div",12)(20,"div",13)(21,"h4"),d(22,"Detalles del aviso"),c()(),a(23,"div",14)(24,"div",15)(25,"span",16),d(26,"N\xFAmero:"),c(),a(27,"span",17),d(28),c()(),a(29,"div",15)(30,"span",16),d(31,"Cliente:"),c(),a(32,"span",17),d(33),c()(),f(34,Ut,5,1,"div",18),a(35,"div",15)(36,"span",16),d(37,"Estado:"),c(),a(38,"span",19),d(39),c()(),a(40,"div",15)(41,"span",16),d(42,"Direcci\xF3n:"),c(),a(43,"span",17),d(44),c()(),a(45,"div",15)(46,"span",16),d(47,"Urgencia:"),c(),a(48,"span",20),d(49),c()(),a(50,"div",15)(51,"span",16),d(52,"Fecha creaci\xF3n:"),c(),a(53,"span",17),d(54),cn(55,"date"),c()()()()(),a(56,"div",21)(57,"div",22)(58,"h4"),d(59,"Consecuencias de la eliminaci\xF3n:"),c(),a(60,"ul",23)(61,"li"),d(62,"El aviso se eliminar\xE1 permanentemente de la base de datos"),c(),a(63,"li"),d(64,"Todas las fotos asociadas al aviso ser\xE1n eliminadas"),c(),a(65,"li"),d(66,"No se podr\xE1 recuperar la informaci\xF3n del aviso"),c(),a(67,"li"),d(68,"Se perder\xE1 el historial completo del servicio"),c()(),f(69,Lt,9,1,"div",24),c()()()(),a(70,"ion-footer")(71,"ion-toolbar")(72,"div",25)(73,"button",26),v("click",function(){return e.cancelarEliminacion()}),d(74," Cancelar "),c(),a(75,"button",27),v("click",function(){return e.confirmarEliminacion()}),C(76,"ion-icon",9),d(77," Eliminar permanentemente "),c()()()()),t&2&&(l(28),O(e.aviso.numero_secuencial||"N/A"),l(5),O(e.aviso.nombre_cliente_aviso),l(),_("ngIf",e.aviso.descripcion_problema),l(4),In(e.getEstadoClass(e.aviso.estado)),l(),E(" ",e.aviso.estado," "),l(5),O(e.aviso.direccion_cliente_aviso||"No especificada"),l(4),N("alta",e.aviso.es_urgente||e.aviso.urgencia==="Alta"),l(),E(" ",e.aviso.es_urgente||e.aviso.urgencia==="Alta"?"Alta":"Normal"," "),l(5),O(rn(55,12,e.aviso.fecha_creacion,"dd/MM/yyyy")),l(15),_("ngIf",e.dependencias&&e.dependencias.length>0))},dependencies:[U,j,$,D,sn,qn,Qn,gn,Ln],styles:['@charset "UTF-8";ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #FEF2F2;--border-color: #FECACA;--color: #DC2626}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#fee2e2;border-radius:50%}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#dc2626}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#dc2626;flex:1}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#dc2626;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background:#fee2e2;transform:scale(1.1)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}ion-content[_ngcontent-%COMP%]{--background: #FAFAFA;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0}ion-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex;flex-direction:column;min-height:0}ion-content[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{flex:1;overflow:auto;position:relative;min-height:0;height:100%;padding:24px}.warning-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:24px;background:#fef2f2;border-radius:16px;border:1px solid #FECACA}.warning-section[_ngcontent-%COMP%]   .warning-circle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:80px;height:80px;background:#fee2e2;border-radius:50%;margin:0 auto 20px}.warning-section[_ngcontent-%COMP%]   .warning-circle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px;color:#dc2626}.warning-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:24px;font-weight:600;color:#dc2626}.warning-section[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#991b1b;line-height:1.5}.aviso-details[_ngcontent-%COMP%]{margin-bottom:32px}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #E5E7EB;overflow:hidden;box-shadow:0 1px 3px #0000001a}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-header[_ngcontent-%COMP%]{background:#f9fafb;padding:16px 20px;border-bottom:1px solid #E5E7EB}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#374151}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]{padding:20px}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #F3F4F6}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#6b7280}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#111827;text-align:right;max-width:60%}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.estado-value.pendiente[_ngcontent-%COMP%]{color:#dc2626;font-weight:700}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.estado-value.en-curso[_ngcontent-%COMP%]{color:#d97706;font-weight:700}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.estado-value.pendiente-presupuesto[_ngcontent-%COMP%]{color:#3b82f6;font-weight:700}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.estado-value.listo-para-facturar[_ngcontent-%COMP%]{color:#059669;font-weight:700}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.estado-value.completado[_ngcontent-%COMP%]{color:#10b981;font-weight:700}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.estado-value.cancelado[_ngcontent-%COMP%]{color:#6b7280;font-weight:700}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value.urgencia-value.alta[_ngcontent-%COMP%]{color:#dc2626;font-weight:700}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #E5E7EB;padding:20px;box-shadow:0 1px 3px #0000001a}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600;color:#374151;display:flex;align-items:center;gap:8px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f";font-size:18px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   .consequences-list[_ngcontent-%COMP%]{margin:0;padding:0 0 0 20px;list-style:none}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   .consequences-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;margin-bottom:12px;font-size:14px;color:#6b7280;line-height:1.5}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   .consequences-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2022";color:#dc2626;font-weight:700;position:absolute;left:-20px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   .consequences-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #FFFFFF;--border-color: #E5E7EB}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px;justify-content:flex-end}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:8px;font-size:14px;font-weight:500;display:flex;align-items:center;gap:8px;cursor:pointer;transition:all .2s ease;border:none;min-height:44px;width:50%}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151;border:1px solid #D1D5DB}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e5e7eb;border-color:#9ca3af}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#dc2626;color:#fff;border:1px solid #DC2626}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#b91c1c;border-color:#b91c1c}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:active:not(:disabled){background-color:#991b1b}@media (max-width: 768px){ion-content[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:16px}.warning-section[_ngcontent-%COMP%]{padding:20px;margin-bottom:24px}.warning-section[_ngcontent-%COMP%]   .warning-circle[_ngcontent-%COMP%]{width:60px;height:60px;margin-bottom:16px}.warning-section[_ngcontent-%COMP%]   .warning-circle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:30px}.warning-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;margin-bottom:12px}.warning-section[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{font-size:14px}.aviso-details[_ngcontent-%COMP%]{margin-bottom:24px}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]{padding:16px}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{padding:10px 0}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:13px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]{padding:16px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:15px;margin-bottom:12px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   .consequences-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:13px;margin-bottom:10px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{gap:12px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:13px;min-height:40px}}@media (max-width: 480px){ion-content[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:12px}.warning-section[_ngcontent-%COMP%]{padding:16px;margin-bottom:20px}.warning-section[_ngcontent-%COMP%]   .warning-circle[_ngcontent-%COMP%]{width:50px;height:50px;margin-bottom:12px}.warning-section[_ngcontent-%COMP%]   .warning-circle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.warning-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.warning-section[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{font-size:13px}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]{padding:12px}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{padding:8px 0}.aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .aviso-details[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:12px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]{padding:12px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px}.consequences-section[_ngcontent-%COMP%]   .consequences-card[_ngcontent-%COMP%]   .consequences-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;margin-bottom:8px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{flex-direction:row;gap:8px;padding:0 15px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:50%;justify-content:center;padding:5px 20px}}']});let r=g;return r})();var fn=(()=>{let g=class g{constructor(n,t){this.http=n,this.mapboxService=t,this.GOOGLE_MAPS_API_KEY="YOUR_GOOGLE_MAPS_API_KEY",this.GOOGLE_MAPS_API_URL="https://maps.googleapis.com/maps/api/directions/json"}calcularRuta(n,t){return!n||t.length===0?en({distancia:"Ubicaci\xF3n requerida",tiempo:"Ubicaci\xF3n requerida",paradas:t.length,tieneUbicacion:!!n,distanciaKm:0,tiempoMinutos:0}):(console.log("\u{1F5FA}\uFE0F RouteCalculationService: Usando MapboxNavigationService para c\xE1lculo consistente"),new Sn(e=>{this.convertirAvisosAMapboxCoordinates(n,t).then(i=>{i.length>=2?(console.log("\u2705 RouteCalculationService: Calculando con MapboxNavigationService:",i.length,"waypoints"),this.mapboxService.createRoute(i,!0).then(s=>{console.log("\u2705 RouteCalculationService: Ruta calculada con MapboxNavigationService:",{distancia:`${(s.totalDistance/1e3).toFixed(1)} km`,tiempo:`${Math.round(s.totalDuration/60)} min`});let p={distancia:this.formatearDistancia(s.totalDistance),tiempo:this.formatearTiempo(s.totalDuration),paradas:t.length,tieneUbicacion:!0,distanciaKm:s.totalDistance/1e3,tiempoMinutos:s.totalDuration/60};e.next(p),e.complete()}).catch(s=>{console.error("\u274C RouteCalculationService: Error con MapboxNavigationService:",s),console.log("\u26A0\uFE0F RouteCalculationService: Usando estimaci\xF3n como fallback"),e.next(this.estimacionMejorada(n,t)),e.complete()})):(console.log("\u26A0\uFE0F RouteCalculationService: No se pudieron convertir avisos a coordenadas"),e.next(this.estimacionMejorada(n,t)),e.complete())}).catch(i=>{console.error("\u274C RouteCalculationService: Error al convertir coordenadas:",i),e.next(this.estimacionMejorada(n,t)),e.complete()})}))}procesarRespuestaGoogleMaps(n,t){if(n.status!=="OK"||!n.routes||n.routes.length===0)return this.estimacionRuta(t);let e=n.routes[0],i=e.legs.reduce((p,m)=>p+m.distance.value,0),s=e.legs.reduce((p,m)=>p+m.duration.value,0);return{distancia:this.formatearDistancia(i),tiempo:this.formatearTiempo(s),paradas:t,tieneUbicacion:!0,distanciaKm:i/1e3,tiempoMinutos:s/60}}formatearDistancia(n){if(n<1e3)return`${n} m`;{let t=n/1e3;return t<10?`${t.toFixed(1)} km`:`${Math.round(t)} km`}}formatearTiempo(n){let t=n/60;if(t<60)return`${Math.round(t)} min`;{let e=Math.floor(t/60),i=Math.round(t%60);return i>0?`${e}h ${i}min`:`${e}h`}}estimacionRuta(n){let t,e;return n===1?(t=15,e=25):n<=3?(t=25,e=45):n<=5?(t=40,e=75):(t=60,e=105),{distancia:`~${t} km`,tiempo:this.formatearTiempo(e*60),paradas:n,tieneUbicacion:!0,distanciaKm:t,tiempoMinutos:e}}convertirAvisosAMapboxCoordinates(n,t){return w(this,null,function*(){let e=[{latitude:n.latitude,longitude:n.longitude,address:"Ubicaci\xF3n actual"}];console.log("\u{1F4CD} RouteCalculationService: Convirtiendo avisos a MapboxCoordinates");for(let i of t){let s=i.direccion_cliente_aviso;if(s){console.log("\u{1F50D} RouteCalculationService: Procesando direcci\xF3n:",s);let p=yield this.obtenerCoordenadasExactas(s);if(p)console.log("\u2705 RouteCalculationService: Coordenadas exactas obtenidas:",p),e.push({latitude:p.lat,longitude:p.lng,address:s});else{let m=this.obtenerCoordenadasPorDireccion(s);m?(console.log("\u26A0\uFE0F RouteCalculationService: Usando coordenadas aproximadas:",m),e.push({latitude:m.lat,longitude:m.lng,address:s})):console.log("\u274C RouteCalculationService: No se pudieron obtener coordenadas para:",s)}}}if(console.log("\u{1F4CD} RouteCalculationService: MapboxCoordinates generados:",e.length),e.length>2){console.log("\u{1F680} RouteCalculationService: Optimizando orden de waypoints...");let i=yield this.optimizarOrdenWaypoints(e);return console.log("\u2705 RouteCalculationService: Waypoints optimizados:",i.length),i}return e})}extraerCoordenadasDeAvisos(n,t){let e=[{latitude:n.latitude,longitude:n.longitude,address:"Ubicaci\xF3n actual"}];console.log("\u{1F4CD} RouteCalculationService: Extrayendo coordenadas de",t.length,"avisos");for(let i of t){let s=i.direccion_cliente_aviso;if(s){console.log("\u{1F50D} RouteCalculationService: Procesando direcci\xF3n:",s);let p=this.obtenerCoordenadasPorDireccion(s);p?(console.log("\u2705 RouteCalculationService: Coordenadas encontradas:",p),e.push({latitude:p.lat,longitude:p.lng,address:s})):console.log("\u26A0\uFE0F RouteCalculationService: No se pudieron obtener coordenadas para:",s)}}return console.log("\u{1F4CD} RouteCalculationService: Total waypoints generados:",e.length),e}optimizarOrdenWaypoints(n){return w(this,null,function*(){if(n.length<=2)return n;console.log("\u{1F9EE} RouteCalculationService: Iniciando optimizaci\xF3n con distancias reales para",n.length,"waypoints");let t=[],e=[...n.slice(1)],i=n[0];for(t.push(i),console.log("\u{1F4CD} RouteCalculationService: Punto de partida:",i.address);e.length>0;){let p=e[0],m=yield this.obtenerDistanciaReal(i,p);for(let u=1;u<e.length;u++){let M=yield this.obtenerDistanciaReal(i,e[u]);M<m&&(m=M,p=e[u])}t.push(p),e.splice(e.indexOf(p),1),i=p,console.log(`\u{1F4CD} RouteCalculationService: Siguiente parada: ${p.address} (${(m/1e3).toFixed(1)}km real)`)}let s=0;for(let p=0;p<t.length-1;p++)s+=yield this.obtenerDistanciaReal(t[p],t[p+1]);return console.log("\u2705 RouteCalculationService: Optimizaci\xF3n con distancias reales completada",{waypointsOriginales:n.length,waypointsOptimizados:t.length,distanciaTotalKm:(s/1e3).toFixed(2),orden:t.map(p=>p.address)}),t})}obtenerDistanciaReal(n,t){return w(this,null,function*(){try{let{MAPBOX_CONFIG:e}=yield import("./chunk-4OOJXT2Y.js");if(!e.accessToken||e.accessToken==="YOUR_MAPBOX_TOKEN")return console.log("\u26A0\uFE0F RouteCalculationService: Token no disponible, usando distancia Haversine"),this.calcularDistanciaHaversine(n.latitude,n.longitude,t.latitude,t.longitude)*1e3;let i=`https://api.mapbox.com/directions/v5/mapbox/driving/${n.longitude},${n.latitude};${t.longitude},${t.latitude}?access_token=${e.accessToken}&geometries=geojson&overview=false`,p=yield(yield fetch(i)).json();if(p.routes&&p.routes.length>0){let m=p.routes[0].distance;return console.log(`\u{1F6E3}\uFE0F RouteCalculationService: Distancia real ${n.address} \u2192 ${t.address}: ${(m/1e3).toFixed(1)}km`),m}else return console.log("\u26A0\uFE0F RouteCalculationService: No se pudo obtener distancia real, usando Haversine"),this.calcularDistanciaHaversine(n.latitude,n.longitude,t.latitude,t.longitude)*1e3}catch(e){return console.error("\u274C RouteCalculationService: Error obteniendo distancia real:",e),this.calcularDistanciaHaversine(n.latitude,n.longitude,t.latitude,t.longitude)*1e3}})}calcularDistanciaHaversine(n,t,e,i){let p=this.gradosARadianes(e-n),m=this.gradosARadianes(i-t),u=Math.sin(p/2)*Math.sin(p/2)+Math.cos(this.gradosARadianes(n))*Math.cos(this.gradosARadianes(e))*Math.sin(m/2)*Math.sin(m/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}gradosARadianes(n){return n*(Math.PI/180)}obtenerCoordenadasExactas(n){return w(this,null,function*(){try{console.log("\u{1F50D} RouteCalculationService: Intentando geocoding real para:",n);let{MAPBOX_CONFIG:t}=yield import("./chunk-4OOJXT2Y.js");if(!t.accessToken||t.accessToken==="YOUR_MAPBOX_TOKEN")return console.log("\u26A0\uFE0F RouteCalculationService: Token de Mapbox no configurado para geocoding"),null;let i=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(n)}.json?access_token=${t.accessToken}&country=ES&limit=1`;console.log("\u{1F310} RouteCalculationService: Solicitando geocoding:",i);let p=yield(yield fetch(i)).json();if(p.features&&p.features.length>0){let m=p.features[0],u=m.geometry.coordinates;return console.log("\u2705 RouteCalculationService: Geocoding exitoso:",{direccion:n,coordenadas:{lat:u[1],lng:u[0]},precision:m.properties.accuracy}),{lat:u[1],lng:u[0]}}else return console.log("\u26A0\uFE0F RouteCalculationService: No se encontraron resultados en geocoding para:",n),null}catch(t){return console.error("\u274C RouteCalculationService: Error en geocoding real:",t),null}})}obtenerCoordenadasPorDireccion(n){let t=n.toLowerCase(),e=this.intentarGeocodingReal(n);if(e)return e;let i={madrid:{lat:40.4168,lng:-3.7038},valencia:{lat:39.4699,lng:-.3763},barcelona:{lat:41.3851,lng:2.1734},sevilla:{lat:37.3891,lng:-5.9845},bilbao:{lat:43.2627,lng:-2.9253},zaragoza:{lat:41.6488,lng:-.8891},m\u00E1laga:{lat:36.7202,lng:-4.4203},murcia:{lat:37.9922,lng:-1.1307},palma:{lat:39.5696,lng:2.6502},"las palmas":{lat:28.1248,lng:-15.43},alicante:{lat:38.3452,lng:-.481},c\u00F3rdoba:{lat:37.8882,lng:-4.7794},valladolid:{lat:41.6523,lng:-4.7245},vigo:{lat:42.2406,lng:-8.7207},gij\u00F3n:{lat:43.5357,lng:-5.6615},granada:{lat:37.1773,lng:-3.5986},salamanca:{lat:40.9701,lng:-5.6635},burgos:{lat:42.3409,lng:-3.6997},albacete:{lat:38.9977,lng:-1.8541},le\u00F3n:{lat:42.5994,lng:-5.5667},c\u00E1diz:{lat:36.5298,lng:-6.2934},huelva:{lat:37.2578,lng:-6.9512},santander:{lat:43.4623,lng:-3.8099},castell\u00F3n:{lat:39.9864,lng:-.0513},tarragona:{lat:41.1189,lng:1.2445},pamplona:{lat:42.8178,lng:-1.6442},almer\u00EDa:{lat:36.8381,lng:-2.4597},lugo:{lat:43.0099,lng:-7.556},ourense:{lat:42.3356,lng:-7.8639},pontevedra:{lat:42.431,lng:-8.6444},palencia:{lat:42.0095,lng:-4.529},zamora:{lat:41.5035,lng:-5.7448},segovia:{lat:40.9429,lng:-4.1088},soria:{lat:41.7665,lng:-2.479},\u00E1vila:{lat:40.6566,lng:-4.6812},guadalajara:{lat:40.6292,lng:-3.1614},cuenca:{lat:40.0718,lng:-2.134},toledo:{lat:39.8628,lng:-4.0273},"ciudad real":{lat:38.9861,lng:-3.9272},ja\u00E9n:{lat:37.7796,lng:-3.7849},c\u00E1ceres:{lat:39.4753,lng:-6.3724},badajoz:{lat:38.8794,lng:-6.9707},m\u00E9rida:{lat:38.916,lng:-6.3376},teruel:{lat:40.3454,lng:-1.1065},huesca:{lat:42.1364,lng:-.4087},lleida:{lat:41.6148,lng:.6267},gerona:{lat:41.9794,lng:2.8214},logro\u00F1o:{lat:42.4627,lng:-2.4449}};for(let[p,m]of Object.entries(i))if(new RegExp(`\\b${p}\\b`,"i").test(t)||t.includes(p))return console.log("\u{1F3D9}\uFE0F RouteCalculationService: Ciudad encontrada:",p,"para direcci\xF3n:",n),m;let s=this.extraerCodigoPostal(n);if(s){console.log("\u{1F4EE} RouteCalculationService: C\xF3digo postal encontrado:",s,"para direcci\xF3n:",n);let p=this.obtenerCoordenadasPorCodigoPostal(s);if(p)return p}return null}extraerCodigoPostal(n){let t=n.match(/\b\d{5}\b/);return t?t[0]:null}obtenerCoordenadasPorCodigoPostal(n){let t=n.substring(0,2);return{"01":{lat:42.8467,lng:-2.6716},"02":{lat:38.9977,lng:-1.8541},"03":{lat:38.3452,lng:-.481},"04":{lat:36.8381,lng:-2.4597},"05":{lat:40.9701,lng:-5.6635},"06":{lat:38.8794,lng:-6.9707},"07":{lat:39.5696,lng:2.6502},"08":{lat:41.3851,lng:2.1734},"09":{lat:42.3409,lng:-3.6997},10:{lat:39.4753,lng:-6.3724},11:{lat:36.5298,lng:-6.2934},12:{lat:39.9864,lng:-.0513},13:{lat:38.9861,lng:-3.9272},14:{lat:37.8882,lng:-4.7794},15:{lat:43.3623,lng:-8.4115},16:{lat:40.0718,lng:-2.134},17:{lat:41.9794,lng:2.8214},18:{lat:37.1773,lng:-3.5986},19:{lat:40.6292,lng:-3.1614},20:{lat:43.2627,lng:-2.9253},21:{lat:37.2578,lng:-6.9512},22:{lat:42.1364,lng:-.4087},23:{lat:37.7796,lng:-3.7849},24:{lat:42.5994,lng:-5.5667},25:{lat:41.6148,lng:.6267},26:{lat:42.4627,lng:-2.4449},27:{lat:43.0099,lng:-7.556},28:{lat:40.4168,lng:-3.7038},29:{lat:36.7202,lng:-4.4203},30:{lat:37.9922,lng:-1.1307},31:{lat:42.8178,lng:-1.6442},32:{lat:42.3356,lng:-7.8639},33:{lat:43.3614,lng:-5.8593},34:{lat:42.0095,lng:-4.529},35:{lat:28.4698,lng:-16.2549},36:{lat:42.431,lng:-8.6444},37:{lat:40.9701,lng:-5.6635},38:{lat:28.1248,lng:-15.43},39:{lat:43.4623,lng:-3.8099},40:{lat:40.9429,lng:-4.1088},41:{lat:37.3891,lng:-5.9845},42:{lat:41.7665,lng:-2.479},43:{lat:41.1189,lng:1.2445},44:{lat:40.3454,lng:-1.1065},45:{lat:39.8628,lng:-4.0273},46:{lat:39.4699,lng:-.3763},47:{lat:41.6523,lng:-4.7245},48:{lat:43.2627,lng:-2.9253},49:{lat:41.5035,lng:-5.7448},50:{lat:41.6488,lng:-.8891}}[t]||null}estimacionMejorada(n,t){console.log("\u{1F527} RouteCalculationService: Usando estimaci\xF3n mejorada");let e=this.extraerCoordenadasDeAvisos(n,t);if(e.length>=2){let i=this.calcularDistanciaTotal(e),s=this.estimacionTiempoPorDistancia(i);return console.log("\u{1F4CA} RouteCalculationService: Estimaci\xF3n mejorada:",{distanciaKm:i,tiempoMinutos:s,waypoints:e.length}),{distancia:this.formatearDistancia(i*1e3),tiempo:this.formatearTiempo(s*60),paradas:t.length,tieneUbicacion:!0,distanciaKm:i,tiempoMinutos:s}}return console.log("\u26A0\uFE0F RouteCalculationService: Fallback a estimaci\xF3n b\xE1sica"),this.estimacionRuta(t.length)}calcularDistanciaTotal(n){if(n.length<2)return 0;let t=0;for(let e=0;e<n.length-1;e++)t+=this.calcularDistanciaHaversine(n[e].latitude,n[e].longitude,n[e+1].latitude,n[e+1].longitude);return Math.round(t*100)/100}estimacionTiempoPorDistancia(n){let t;n>100?t=85:n>30?t=65:t=50;let e=n/t*60;return Math.round(e*1.2)}intentarGeocodingReal(n){try{return console.log("\u{1F50D} RouteCalculationService: Geocoding real pendiente de implementaci\xF3n"),null}catch(t){return console.log("\u26A0\uFE0F RouteCalculationService: Error en geocoding real:",t),null}}obtenerUbicacionActual(){return new Promise(n=>{if(!navigator.geolocation){console.error("Geolocalizaci\xF3n no soportada"),n(null);return}navigator.geolocation.getCurrentPosition(t=>{n({latitude:t.coords.latitude,longitude:t.coords.longitude})},t=>{console.error("Error obteniendo ubicaci\xF3n:",t),n(null)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})}};g.\u0275fac=function(t){return new(t||g)(F(ln),F(X))},g.\u0275prov=T({token:g,factory:g.\u0275fac,providedIn:"root"});let r=g;return r})();function Ht(r,g){r&1&&(a(0,"div",16)(1,"div",17),C(2,"ion-spinner",18),a(3,"h3"),d(4,"Calculando ruta..."),c(),a(5,"p"),d(6,"Obteniendo la mejor ruta para tus destinos"),c()()())}function Gt(r,g){r&1&&(a(0,"span",36),d(1,"\u2713 Optimizada"),c())}function Wt(r,g){if(r&1&&(a(0,"div",37)(1,"div",38),d(2),c(),a(3,"div",39)(4,"div",40),d(5),c(),a(6,"div",41),d(7),c()()()),r&2){let o=g.$implicit,n=g.index;l(2),O(n+1),l(3),O(o.nombre_cliente_aviso||o.nombre||"Cliente"),l(2),O(o.direccion_cliente_aviso||o.direccion)}}function Yt(r,g){if(r&1&&(a(0,"div",32)(1,"h4"),d(2),f(3,Gt,2,0,"span",33),c(),a(4,"div",34),f(5,Wt,8,3,"div",35),c()()),r&2){let o=b(2);l(2),E(" ",o.waypointsOptimizados.length>0?"Ruta optimizada:":"Destinos seleccionados:"," "),l(),_("ngIf",o.waypointsOptimizados.length>0),l(2),_("ngForOf",o.waypointsOptimizados.length>0?o.waypointsOptimizados:o.avisosSeleccionados)}}function Kt(r,g){if(r&1&&(a(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23),C(5,"ion-icon",24),c(),a(6,"div",25)(7,"span",26),d(8,"Destinos"),c(),a(9,"span",27),d(10),c()()(),a(11,"div",22)(12,"div",23),C(13,"ion-icon",28),c(),a(14,"div",25)(15,"span",26),d(16,"Distancia"),c(),a(17,"span",27),d(18),c()()()(),a(19,"div",29)(20,"div",23),C(21,"ion-icon",30),c(),a(22,"div",25)(23,"span",26),d(24,"Tiempo estimado"),c(),a(25,"span",27),d(26),c()()()(),f(27,Yt,6,3,"div",31),c()),r&2){let o=b();l(10),H("",o.rutaInfo.paradas," parada",o.rutaInfo.paradas>1?"s":"",""),l(8),O(o.rutaInfo.distancia),l(8),O(o.rutaInfo.tiempo),l(),_("ngIf",o.avisosSeleccionados.length>0)}}var Nt=(()=>{let g=class g{constructor(n,t){this.modalController=n,this.routeCalculationService=t,this.avisosSeleccionados=[],this.calculandoRuta=!0,this.rutaInfo={distancia:"Calculando...",tiempo:"Calculando...",paradas:0,tieneUbicacion:!1,distanciaKm:0,tiempoMinutos:0},this.waypointsOptimizados=[],V({closeOutline:q,locationOutline:W,navigateOutline:Y,speedometerOutline:K,timeOutline:Q,logoGoogle:ut,logoApple:_t,playOutline:Cn})}ngOnInit(){this.calcularInformacionRuta()}calcularInformacionRuta(){return w(this,null,function*(){try{this.calculandoRuta=!0;let n=yield this.routeCalculationService.obtenerUbicacionActual();this.routeCalculationService.calcularRuta(n,this.avisosSeleccionados).subscribe({next:t=>{this.rutaInfo=t,this.obtenerWaypointsOptimizados(),this.calculandoRuta=!1},error:t=>{console.error("Error calculando informaci\xF3n de ruta:",t),this.rutaInfo={distancia:"Error al calcular",tiempo:"Error al calcular",paradas:this.avisosSeleccionados.length,tieneUbicacion:!!n,distanciaKm:0,tiempoMinutos:0},this.calculandoRuta=!1}})}catch(n){console.error("Error calculando informaci\xF3n de ruta:",n),this.rutaInfo={distancia:"Error al calcular",tiempo:"Error al calcular",paradas:this.avisosSeleccionados.length,tieneUbicacion:!1,distanciaKm:0,tiempoMinutos:0},this.calculandoRuta=!1}})}abrirGoogleMaps(){return w(this,null,function*(){try{console.log("\u{1F5FA}\uFE0F Abriendo Google Maps con",this.avisosSeleccionados.length,"avisos");let n=navigator.userAgent,t=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n),e=/iPad|iPhone|iPod/.test(n),i=/Android/.test(n);console.log("Google Maps Debug:",{userAgent:n,isMobile:t,isIOS:e,isAndroid:i,avisosCount:this.avisosSeleccionados.length}),console.log("Obteniendo ubicaci\xF3n actual...");let s=yield this.obtenerUbicacionActual();if(!s){if(console.log("\u274C No se pudo obtener la ubicaci\xF3n actual"),console.error("No se pudo obtener la ubicaci\xF3n actual"),!confirm(`\u{1F512} No se pudo obtener tu ubicaci\xF3n actual.

Esto puede ser porque:
\u2022 El permiso de ubicaci\xF3n est\xE1 denegado
\u2022 El GPS est\xE1 desactivado
\u2022 No hay se\xF1al GPS

\xBFQuieres continuar sin incluir tu ubicaci\xF3n como punto de partida?

Nota: La ruta ser\xE1 solo entre los destinos seleccionados.`)){console.log("\u274C Usuario cancel\xF3 la operaci\xF3n");return}console.log("\u{1F4CD} Continuando sin ubicaci\xF3n actual")}console.log(s?`\u2705 Ubicaci\xF3n obtenida: ${s.latitude}, ${s.longitude}`:"\u{1F4CD} Sin ubicaci\xF3n actual, usando solo destinos");let p=this.construirUrlGoogleMaps(s),m=this.construirUrlGoogleMapsWeb(s);if(console.log("Google Maps URLs:",{nativeUrl:p,webUrl:m,urlLength:p.length}),t){console.log("\u{1F4F1} Dispositivo m\xF3vil detectado");let u=!1;i||e?(console.log(`\u{1F680} Intentando abrir app nativa (${i?"Android":"iOS"})`),console.log(`URL nativa: ${p}`),console.log("\u{1F680} Intentando abrir Google Maps nativo..."),this.abrirAppNativa(p,m,"Google Maps")):(console.log("\u{1F310} Otro m\xF3vil detectado, usando navegador"),window.open(m,"_blank"))}else console.log("\u{1F5A5}\uFE0F Desktop detectado, abriendo en navegador"),window.open(m,"_blank");yield this.modalController.dismiss({opcion:"google"})}catch(n){let t=n instanceof Error?n.message:String(n);console.error("\u274C Error general:",t),console.error("Error al abrir Google Maps:",n)}})}abrirAppNativa(n,t,e){console.log("\u{1F4CD} Intentando abrir app nativa..."),console.log(`URL completa: ${n}`);try{console.log("\u{1F504} M\xE9todo 1: window.location..."),window.location.href=n,setTimeout(()=>{console.log("\u23F0 M\xE9todo 1 timeout, probando m\xE9todo 2..."),this.intentarMetodoAlternativo(n,t,e)},2e3)}catch(i){console.log(`\u274C Error en m\xE9todo 1: ${i}`),this.intentarMetodoAlternativo(n,t,e)}}intentarMetodoAlternativo(n,t,e){console.log("\u{1F504} M\xE9todo 2: Enlace directo...");try{let i=document.createElement("a");i.href=n,i.target="_blank",i.style.display="none",document.body.appendChild(i),i.click(),console.log("\u{1F4CD} Enlace clickeado"),setTimeout(()=>{console.log("\u23F0 M\xE9todo 2 timeout, probando m\xE9todo 3..."),document.body.removeChild(i),this.intentarMetodoIframe(n,t,e)},2e3)}catch(i){console.log(`\u274C Error en m\xE9todo 2: ${i}`),this.intentarMetodoIframe(n,t,e)}}intentarMetodoIframe(n,t,e){console.log("\u{1F504} M\xE9todo 3: Iframe...");try{let i=document.createElement("iframe");i.style.display="none",i.style.width="1px",i.style.height="1px",i.src=n,document.body.appendChild(i),console.log("\u{1F4CD} Iframe creado"),setTimeout(()=>{console.log("\u23F0 Todos los m\xE9todos fallaron, abriendo en navegador"),document.body.removeChild(i),window.open(t,"_blank")},2e3)}catch(i){console.log(`\u274C Error en m\xE9todo 3: ${i}`),console.log("\u{1F310} Abriendo en navegador como \xFAltimo recurso"),window.open(t,"_blank")}}abrirAppleMaps(){return w(this,null,function*(){try{console.log("\u{1F34E} Abriendo Apple Maps con",this.avisosSeleccionados.length,"avisos");let n=navigator.userAgent,t=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n),e=/iPad|iPhone|iPod/.test(n);console.log("Apple Maps Debug:",{userAgent:n,isMobile:t,isIOS:e,avisosCount:this.avisosSeleccionados.length}),console.log("Obteniendo ubicaci\xF3n actual...");let i=yield this.obtenerUbicacionActual();if(!i){if(console.log("\u274C No se pudo obtener la ubicaci\xF3n actual"),console.error("No se pudo obtener la ubicaci\xF3n actual"),!confirm(`\u{1F512} No se pudo obtener tu ubicaci\xF3n actual.

Esto puede ser porque:
\u2022 El permiso de ubicaci\xF3n est\xE1 denegado
\u2022 El GPS est\xE1 desactivado
\u2022 No hay se\xF1al GPS

\xBFQuieres continuar sin incluir tu ubicaci\xF3n como punto de partida?

Nota: La ruta ser\xE1 solo entre los destinos seleccionados.`)){console.log("\u274C Usuario cancel\xF3 la operaci\xF3n");return}console.log("\u{1F4CD} Continuando sin ubicaci\xF3n actual")}console.log(i?`\u2705 Ubicaci\xF3n obtenida: ${i.latitude}, ${i.longitude}`:"\u{1F4CD} Sin ubicaci\xF3n actual, usando solo destinos");let s=this.construirUrlAppleMaps(i),p=this.construirUrlAppleMapsWeb(i);console.log({nativeUrl:s,webUrl:p,urlLength:s.length}),t&&e?(console.log("\u{1F34E} iOS detectado, intentando abrir app nativa"),console.log(`URL nativa: ${s}`),console.log("\u{1F680} Intentando abrir Apple Maps nativo..."),this.abrirAppNativa(s,p,"Apple Maps")):(console.log(t?"\u{1F916} Android detectado, usando navegador":"\u{1F5A5}\uFE0F Desktop detectado, usando navegador"),window.open(p,"_blank")),yield this.modalController.dismiss({opcion:"apple"})}catch(n){let t=n instanceof Error?n.message:String(n);console.log(`\u274C Error general: ${t}`),console.error("Error al abrir Apple Maps:",n)}})}iniciarNavegacionApp(){return w(this,null,function*(){console.log("\u{1F680} Iniciando navegaci\xF3n en la app con",this.avisosSeleccionados.length,"avisos"),console.log("App Navegaci\xF3n",{avisosCount:this.avisosSeleccionados.length,avisos:this.avisosSeleccionados.map(t=>({id:t.id,direccion:t.direccion_cliente_aviso})),waypointsOptimizados:this.waypointsOptimizados.map(t=>t.direccion),waypointsOptimizadosLength:this.waypointsOptimizados.length});let n=this.waypointsOptimizados.length>0?this.waypointsOptimizados:this.avisosSeleccionados;console.log("\u{1F680} Enviando waypoints para navegaci\xF3n interna:",{usandoOptimizados:this.waypointsOptimizados.length>0,ordenEnviado:n.map(t=>t.direccion_cliente_aviso||t.direccion)}),yield this.modalController.dismiss({opcion:"app",waypointsOptimizados:n})})}cerrar(){return w(this,null,function*(){yield this.modalController.dismiss()})}obtenerWaypointsOptimizados(){return w(this,null,function*(){try{console.log("\u{1F504} Obteniendo waypoints optimizados para navegaci\xF3n externa...");let n=yield this.routeCalculationService.obtenerUbicacionActual();if(n){let t=yield this.routeCalculationService.convertirAvisosAMapboxCoordinates(n,this.avisosSeleccionados);this.waypointsOptimizados=t.slice(1).map((e,i)=>{let s=this.avisosSeleccionados.find(p=>p.direccion_cliente_aviso===e.address);return{direccion:e.address,direccion_cliente_aviso:e.address,nombre_cliente_aviso:(s==null?void 0:s.nombre_cliente_aviso)||"Cliente",nombre:(s==null?void 0:s.nombre_cliente_aviso)||"Cliente",latitud:e.latitude,longitud:e.longitude,id:s==null?void 0:s.id}}),console.log("\u2705 Waypoints optimizados obtenidos:",this.waypointsOptimizados.map(e=>e.direccion))}else this.waypointsOptimizados=this.avisosSeleccionados,console.log("\u26A0\uFE0F Sin ubicaci\xF3n, usando orden original")}catch(n){console.error("\u274C Error obteniendo waypoints optimizados:",n),this.waypointsOptimizados=this.avisosSeleccionados}})}obtenerUbicacionActual(){return w(this,null,function*(){return new Promise(n=>{if(!navigator.geolocation){console.error("Geolocalizaci\xF3n no soportada"),console.log("Ubicaci\xF3n","\u274C Geolocalizaci\xF3n no soportada en este navegador"),n(null);return}console.log("Ubicaci\xF3n","\u{1F30D} Solicitando permiso de ubicaci\xF3n..."),navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(t=>{if(console.log("Ubicaci\xF3n",`Estado de permiso: ${t.state}`),t.state==="denied"){console.log("Ubicaci\xF3n","\u274C Permiso de ubicaci\xF3n denegado. Ve a configuraci\xF3n del navegador para habilitarlo."),this.mostrarInstruccionesUbicacion(),n(null);return}t.state==="prompt"&&console.log("Ubicaci\xF3n","\u{1F4CD} Aparecer\xE1 una ventana del navegador pidiendo permiso de ubicaci\xF3n"),this.solicitarUbicacion(n)}).catch(()=>{console.log("Ubicaci\xF3n","\u{1F4CD} Solicitando ubicaci\xF3n directamente..."),this.solicitarUbicacion(n)}):(console.log("Ubicaci\xF3n","\u{1F4CD} Solicitando ubicaci\xF3n directamente..."),this.solicitarUbicacion(n))})})}solicitarUbicacion(n){console.log("Ubicaci\xF3n","\u{1F30D} Solicitando ubicaci\xF3n GPS..."),navigator.geolocation.getCurrentPosition(t=>{console.log("Ubicaci\xF3n",`\u2705 Ubicaci\xF3n obtenida: ${t.coords.latitude}, ${t.coords.longitude}`),n({latitude:t.coords.latitude,longitude:t.coords.longitude})},t=>{let e="",i=!1;switch(t.code){case t.PERMISSION_DENIED:e="Permiso de ubicaci\xF3n denegado por el usuario",i=!0;break;case t.POSITION_UNAVAILABLE:e="Ubicaci\xF3n no disponible (GPS desactivado o sin se\xF1al)";break;case t.TIMEOUT:e="Timeout al obtener ubicaci\xF3n (tard\xF3 m\xE1s de 15 segundos)";break;default:e=`Error desconocido: ${t.message}`;break}console.log("Ubicaci\xF3n",`\u274C Error: ${e}`),console.error("Error al obtener ubicaci\xF3n:",t),i&&this.mostrarInstruccionesUbicacion(),n(null)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})}verificarAppInstalada(n,t){return w(this,null,function*(){return new Promise(e=>{console.log(t,`\u{1F50D} Verificando si ${t} est\xE1 instalado...`);let i=n.includes("?")?n.split("?")[0]:n,s=document.createElement("a");s.href=i,s.target="_blank",s.style.display="none",document.body.appendChild(s);let p=!1,m=!1,u=setTimeout(()=>{p||(p=!0,console.log(t,`\u274C ${t} no est\xE1 instalado (timeout)`),document.body.removeChild(s),e(!1))},500),M=()=>{document.hidden&&!p&&(p=!0,m=!0,console.log(t,`\u2705 ${t} est\xE1 instalado (p\xE1gina oculta)`),clearTimeout(u),document.body.removeChild(s),document.removeEventListener("visibilitychange",M),window.removeEventListener("blur",y),e(!0))};document.addEventListener("visibilitychange",M);let y=()=>{p||(p=!0,m=!0,console.log(t,`\u2705 ${t} est\xE1 instalado (p\xE1gina perdi\xF3 foco)`),clearTimeout(u),document.body.removeChild(s),document.removeEventListener("visibilitychange",M),window.removeEventListener("blur",y),e(!0))};window.addEventListener("blur",y);try{s.click(),console.log(t,`\u{1F4CD} Enlace de prueba clickeado: ${i}`)}catch(h){p||(p=!0,console.log(t,`\u274C Error al hacer clic: ${h}`),clearTimeout(u),document.body.removeChild(s),e(!1))}})})}intentarAbrirAppAlternativo(n,t,e){console.log(e,"\u{1F504} M\xE9todo alternativo: Intentando con iframe...");try{let i=document.createElement("iframe");i.style.display="none",i.style.width="1px",i.style.height="1px",i.src=n,document.body.appendChild(i),console.log(e,"\u{1F4CD} Iframe creado, esperando respuesta..."),setTimeout(()=>{console.log(e,"\u23F0 M\xE9todo alternativo timeout: Abriendo en navegador"),document.body.removeChild(i),window.open(t,"_blank")},2e3);let s=()=>{document.hidden&&(console.log(e,"\u2705 App nativa abierta con m\xE9todo alternativo"),document.body.removeChild(i),document.removeEventListener("visibilitychange",s))};document.addEventListener("visibilitychange",s)}catch(i){let s=i instanceof Error?i.message:String(i);console.log(e,`\u274C Error en m\xE9todo alternativo: ${s}`),window.open(t,"_blank")}}mostrarInstruccionesUbicacion(){let n=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=/iPad|iPhone|iPod/.test(navigator.userAgent),e=/Android/.test(navigator.userAgent),i="";n?t?i=`
          \u{1F4F1} Para habilitar la ubicaci\xF3n en iOS:
          1. Ve a Configuraci\xF3n > Privacidad y Seguridad > Servicios de Ubicaci\xF3n
          2. Activa "Servicios de Ubicaci\xF3n"
          3. Busca tu navegador (Safari/Chrome) en la lista
          4. Selecciona "Permitir" o "Mientras uso la app"
          5. Recarga esta p\xE1gina e intenta de nuevo
        `:e?i=`
          \u{1F4F1} Para habilitar la ubicaci\xF3n en Android:
          1. Ve a Configuraci\xF3n > Ubicaci\xF3n
          2. Activa "Ubicaci\xF3n"
          3. En tu navegador, toca el \xEDcono de ubicaci\xF3n en la barra de direcciones
          4. Selecciona "Permitir" o "Permitir siempre"
          5. Recarga esta p\xE1gina e intenta de nuevo
        `:i=`
          \u{1F4F1} Para habilitar la ubicaci\xF3n en m\xF3vil:
          1. Ve a la configuraci\xF3n de tu navegador
          2. Busca "Ubicaci\xF3n" o "Permisos"
          3. Permite el acceso a la ubicaci\xF3n para este sitio
          4. Recarga la p\xE1gina e intenta de nuevo
        `:i=`
        \u{1F5A5}\uFE0F Para habilitar la ubicaci\xF3n en desktop:
        1. Busca el \xEDcono de ubicaci\xF3n en la barra de direcciones (\u{1F512} o \u{1F4CD})
        2. Haz clic en \xE9l y selecciona "Permitir"
        3. O ve a Configuraci\xF3n del navegador > Privacidad > Ubicaci\xF3n
        4. Permite el acceso para este sitio
        5. Recarga la p\xE1gina e intenta de nuevo
      `,console.log("Ubicaci\xF3n",i),alert(`\u{1F512} Permiso de Ubicaci\xF3n Requerido

${i}

Despu\xE9s de habilitar la ubicaci\xF3n, recarga la p\xE1gina e intenta de nuevo.`)}construirUrlGoogleMaps(n){let t=n?`${n.latitude},${n.longitude}`:null,i=(this.waypointsOptimizados.length>0?this.waypointsOptimizados:this.avisosSeleccionados).map(h=>{let k=h.direccion_cliente_aviso||h.direccion;return k?encodeURIComponent(k):null}).filter(h=>h!==null),s=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),p=/iPad|iPhone|iPod/.test(navigator.userAgent),m=/Android/.test(navigator.userAgent);if(s){if(m){if(i.length===1)return`comgooglemaps://?daddr=${i[0]}&directionsmode=driving`;{let h=i[i.length-1],k=i.slice(0,-1).join("|"),A="https://www.google.com/maps/dir/?api=1";return t&&(A+=`&origin=${t}`),A+=`&destination=${h}`,k&&(A+=`&waypoints=${k}`),A+="&travelmode=driving&dir_action=navigate",A}}else if(p){if(i.length===1)return`comgooglemaps://?daddr=${i[0]}&directionsmode=driving`;{let h=i[i.length-1],k=i.slice(0,-1).join("|"),A="https://www.google.com/maps/dir/?api=1";return t&&(A+=`&origin=${t}`),A+=`&destination=${h}`,k&&(A+=`&waypoints=${k}`),A+="&travelmode=driving&dir_action=navigate",A}}}if(i.length===1){let h="https://www.google.com/maps/dir/?api=1";return t&&(h+=`&origin=${t}`),h+=`&destination=${i[0]}&travelmode=driving&dir_action=navigate`,h}let u=i[i.length-1],M=i.slice(0,-1).join("|"),y="https://www.google.com/maps/dir/?api=1";return t&&(y+=`&origin=${t}`),y+=`&destination=${u}`,M&&(y+=`&waypoints=${M}`),y+="&travelmode=driving&dir_action=navigate",console.log("URL de Google Maps construida:",y),y}construirUrlAppleMaps(n){let t=n?`${n.latitude},${n.longitude}`:null,i=(this.waypointsOptimizados.length>0?this.waypointsOptimizados:this.avisosSeleccionados).map(y=>{let h=y.direccion_cliente_aviso||y.direccion;return h?encodeURIComponent(h):null}).filter(y=>y!==null),s=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),p=/iPad|iPhone|iPod/.test(navigator.userAgent);if(s&&p){if(i.length===1)return`maps://?daddr=${i[0]}&dirflg=d`;{let y=i[i.length-1],h=i.slice(0,-1),k="https://maps.apple.com/?";if(t&&(k+=`saddr=${t}&`),k+=`daddr=${y}`,h.length>0){let A=h.map(jt=>`via=${jt}`).join("&");k+=`&${A}`}return k+="&dirflg=d",k}}if(i.length===1){let y="https://maps.apple.com/?";return t&&(y+=`saddr=${t}&`),y+=`daddr=${i[0]}&dirflg=d`,y}let m=i[i.length-1],u=i.slice(0,-1),M="https://maps.apple.com/?";if(t&&(M+=`saddr=${t}&`),M+=`daddr=${m}`,u.length>0){let y=u.map(h=>`via=${h}`).join("&");M+=`&${y}`}return M+="&dirflg=d",console.log("URL de Apple Maps construida:",M),M}construirUrlGoogleMapsWeb(n){let t=n?`${n.latitude},${n.longitude}`:null,i=(this.waypointsOptimizados.length>0?this.waypointsOptimizados:this.avisosSeleccionados).map(u=>{let M=u.direccion_cliente_aviso||u.direccion;return M?encodeURIComponent(M):null}).filter(u=>u!==null);if(i.length===1){let u="https://www.google.com/maps/dir/?api=1";return t&&(u+=`&origin=${t}`),u+=`&destination=${i[0]}&travelmode=driving&dir_action=navigate`,u}let s=i[i.length-1],p=i.slice(0,-1).join("|"),m="https://www.google.com/maps/dir/?api=1";return t&&(m+=`&origin=${t}`),m+=`&destination=${s}`,p&&(m+=`&waypoints=${p}`),m+="&travelmode=driving&dir_action=navigate",m}construirUrlAppleMapsWeb(n){let t=n?`${n.latitude},${n.longitude}`:null,i=(this.waypointsOptimizados.length>0?this.waypointsOptimizados:this.avisosSeleccionados).map(u=>{let M=u.direccion_cliente_aviso||u.direccion;return M?encodeURIComponent(M):null}).filter(u=>u!==null);if(i.length===1){let u="https://maps.apple.com/?";return t&&(u+=`saddr=${t}&`),u+=`daddr=${i[0]}&dirflg=d`,u}let s=i[i.length-1],p=i.slice(0,-1),m="https://maps.apple.com/?";if(t&&(m+=`saddr=${t}&`),m+=`daddr=${s}`,p.length>0){let u=p.map(M=>`via=${M}`).join("&");m+=`&${u}`}return m+="&dirflg=d",m}};g.\u0275fac=function(t){return new(t||g)(z(G),z(fn))},g.\u0275cmp=R({type:g,selectors:[["app-modal-opciones-navegacion"]],inputs:{avisosSeleccionados:"avisosSeleccionados"},decls:34,vars:2,consts:[[1,"modal-container"],[1,"modal-header"],[1,"btn-cerrar",3,"click"],["name","close-outline"],[1,"modal-body"],["class","loading-container",4,"ngIf"],["class","ruta-info",4,"ngIf"],[1,"opciones-navegacion"],[1,"opcion-btn","google-maps",3,"click"],[1,"opcion-icon"],["name","logo-google"],[1,"opcion-content"],[1,"opcion-btn","apple-maps",3,"click"],["name","logo-apple"],[1,"opcion-btn","app-navegacion",3,"click"],["name","play-outline"],[1,"loading-container"],[1,"loading-content"],["name","crescent","color","primary"],[1,"ruta-info"],[1,"ruta-details"],[1,"detail-row",2,"width","100%","display","flex","gap","10px","align-items","center"],[1,"detail-item",2,"width","100%"],[1,"detail-icon"],["name","location-outline"],[1,"detail-content"],[1,"detail-label"],[1,"detail-value"],["name","speedometer-outline"],[1,"detail-item"],["name","time-outline"],["class","destinos-list",4,"ngIf"],[1,"destinos-list"],["class","optimized-badge",4,"ngIf"],[1,"destinos-container"],["class","destino-item",4,"ngFor","ngForOf"],[1,"optimized-badge"],[1,"destino-item"],[1,"destino-number"],[1,"destino-info"],[1,"destino-nombre"],[1,"destino-direccion"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"div",1)(2,"h2"),d(3,"Opciones de Navegaci\xF3n"),c(),a(4,"button",2),v("click",function(){return e.cerrar()}),C(5,"ion-icon",3),c()(),a(6,"div",4),f(7,Ht,7,0,"div",5)(8,Kt,28,5,"div",6),a(9,"div",7)(10,"button",8),v("click",function(){return e.abrirGoogleMaps()}),a(11,"div",9),C(12,"ion-icon",10),c(),a(13,"div",11)(14,"h3"),d(15,"Google Maps"),c(),a(16,"p"),d(17,"Abrir ruta en Google Maps"),c()()(),a(18,"button",12),v("click",function(){return e.abrirAppleMaps()}),a(19,"div",9),C(20,"ion-icon",13),c(),a(21,"div",11)(22,"h3"),d(23,"Apple Maps"),c(),a(24,"p"),d(25,"Abrir ruta en Apple Maps"),c()()(),a(26,"button",14),v("click",function(){return e.iniciarNavegacionApp()}),a(27,"div",9),C(28,"ion-icon",15),c(),a(29,"div",11)(30,"h3"),d(31,"Navegaci\xF3n en la App"),c(),a(32,"p"),d(33,"Iniciar modo conducci\xF3n en la aplicaci\xF3n"),c()()()()()()),t&2&&(l(7),_("ngIf",e.calculandoRuta),l(),_("ngIf",!e.calculandoRuta&&(e.rutaInfo.tieneUbicacion||e.rutaInfo.distancia!=="Calculando...")))},dependencies:[j,$,D,U,Yn],styles:['.modal-container[_ngcontent-%COMP%]{padding:28px;background:#fff;border-radius:20px;margin:0 auto;box-shadow:0 20px 40px #00000026;position:relative;overflow:hidden}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:28px;padding-bottom:20px;border-bottom:2px solid #F1F5F9;position:relative}.modal-header[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-2px;left:0;width:60px;height:2px;background:linear-gradient(135deg,#10b981,#059669);border-radius:1px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:700;color:#111827;background:linear-gradient(135deg,#111827,#374151);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:#f8fafc;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;border:1px solid #E2E8F0}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#6b7280}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1;transform:scale(1.05)}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#374151}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-body[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]{margin:0 0 28px;color:#64748b;font-size:15px;line-height:1.6;text-align:center;padding:16px 20px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:12px;border:1px solid #E2E8F0}.modal-body[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#10b981;font-weight:700;font-size:16px}.modal-body[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]{display:block;margin-top:8px;font-size:13px;color:#64748b;font-style:italic}.modal-body[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]   .route-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:4px;color:#ef4444}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{margin-bottom:28px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:16px;border:2px solid #E2E8F0;overflow:hidden;display:flex;align-items:center;justify-content:center;min-height:200px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:48px;height:48px;margin-bottom:20px;--color: #10B981}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:600;color:#374151}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#6b7280;line-height:1.4}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]{margin-bottom:28px;background:linear-gradient(135deg,#f0fdf4,#ecfdf5);border-radius:16px;border:2px solid #D1FAE5;overflow:hidden}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:15px;background:#059669;color:#fff}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]{padding:20px;display:grid;grid-template-columns:1fr;gap:16px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:#fff;border-radius:12px;border:1px solid #E5E7EB;transition:all .2s ease}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]:hover{border-color:#10b981;box-shadow:0 4px 12px #10b9811a}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#ecfdf5,#d1fae5);display:flex;align-items:center;justify-content:center;flex-shrink:0}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#10b981}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]{flex:1}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{display:block;font-size:13px;color:#6b7280;font-weight:500;margin-bottom:4px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{display:block;font-size:16px;color:#111827;font-weight:700}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]{padding:0 20px 20px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:700;color:#374151;display:flex;align-items:center;gap:8px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .optimized-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#fff;border-radius:10px;border:1px solid #E5E7EB}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-number[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,#10b981,#059669);color:#fff;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;flex-shrink:0}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-info[_ngcontent-%COMP%]{flex:1}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-info[_ngcontent-%COMP%]   .destino-nombre[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#111827;margin-bottom:2px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-info[_ngcontent-%COMP%]   .destino-direccion[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;line-height:1.4}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px;padding:20px;border:2px solid #F1F5F9;border-radius:16px;background:#fff;cursor:pointer;transition:all .3s ease;text-align:left;width:100%;position:relative;overflow:hidden}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);transition:left .5s ease}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]:hover{border-color:#cbd5e1;box-shadow:0 8px 25px #0000001a;transform:translateY(-2px)}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]:hover:before{left:100%}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 4px 15px #0000001a}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:14px;display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative;z-index:1}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-content[_ngcontent-%COMP%]{flex:1;position:relative;z-index:1}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 6px;font-size:17px;font-weight:700;color:#111827}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#64748b;line-height:1.5}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.google-maps[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f0fe,#d2e3fc);box-shadow:0 4px 12px #4285f433}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.google-maps[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#4285f4}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.google-maps[_ngcontent-%COMP%]:hover{border-color:#4285f4;background:linear-gradient(135deg,#f8faff,#f0f4ff);box-shadow:0 12px 30px #4285f426}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.apple-maps[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0f9ff,#e0f2fe);box-shadow:0 4px 12px #007aff33}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.apple-maps[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#007aff}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.apple-maps[_ngcontent-%COMP%]:hover{border-color:#007aff;background:linear-gradient(135deg,#f8faff,#f0f4ff);box-shadow:0 12px 30px #007aff26}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.app-navegacion[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ecfdf5,#d1fae5);box-shadow:0 4px 12px #10b98133}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.app-navegacion[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#10b981}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn.app-navegacion[_ngcontent-%COMP%]:hover{border-color:#10b981;background:linear-gradient(135deg,#f0fdf4,#ecfdf5);box-shadow:0 12px 30px #10b98126}@media (max-width: 480px){.modal-container[_ngcontent-%COMP%]{padding:15px;border-radius:16px;box-shadow:none}.modal-header[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]{width:32px;height:32px}.modal-header[_ngcontent-%COMP%]   .btn-cerrar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.modal-body[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]{padding:14px 16px;font-size:14px;margin-bottom:24px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{margin-bottom:24px;min-height:150px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{padding:30px 16px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin-bottom:16px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;margin-bottom:6px}.modal-body[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]{margin-bottom:24px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-header[_ngcontent-%COMP%]{padding:15px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px!important}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]{padding:16px;gap:12px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{padding:12px;gap:12px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{width:36px;height:36px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:12px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .ruta-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:15px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]{padding:0 16px 16px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:15px;margin-bottom:12px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .optimized-badge[_ngcontent-%COMP%]{padding:1px 6px;font-size:10px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]{gap:10px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]{padding:10px 12px;gap:10px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-number[_ngcontent-%COMP%]{width:24px;height:24px;font-size:12px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-info[_ngcontent-%COMP%]   .destino-nombre[_ngcontent-%COMP%]{font-size:13px}.modal-body[_ngcontent-%COMP%]   .ruta-info[_ngcontent-%COMP%]   .destinos-list[_ngcontent-%COMP%]   .destinos-container[_ngcontent-%COMP%]   .destino-item[_ngcontent-%COMP%]   .destino-info[_ngcontent-%COMP%]   .destino-direccion[_ngcontent-%COMP%]{font-size:12px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]{gap:14px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]{padding:16px;gap:14px;border-radius:14px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;margin-bottom:4px}.modal-body[_ngcontent-%COMP%]   .opciones-navegacion[_ngcontent-%COMP%]   .opcion-btn[_ngcontent-%COMP%]   .opcion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}']});let r=g;return r})();function Qt(r,g){if(r&1&&(a(0,"div",10)(1,"div",11)(2,"span",12),d(3),c(),a(4,"span",13),d(5),c()(),a(6,"div",14),d(7),c()()),r&2){let o,n,t,e=b(2);l(3),O(e.getManeuverIcon((o=e.getCurrentStep())==null?null:o.maneuver)),l(2),O((n=e.getCurrentStep())==null?null:n.instruction),l(2),O(e.formatDistance(((t=e.getCurrentStep())==null?null:t.distance)||0))}}function Xt(r,g){if(r&1){let o=S();a(0,"ion-button",15),v("click",function(){P(o);let t=b(2);return x(t.startNavigation())}),C(1,"ion-icon",16),c()}}function Zt(r,g){if(r&1){let o=S();a(0,"ion-button",17),v("click",function(){P(o);let t=b(2);return x(t.stopNavigation())}),C(1,"ion-icon",18),c()}}function Jt(r,g){if(r&1){let o=S();a(0,"ion-button",19),v("click",function(){P(o);let t=b(2);return x(t.nextStep())}),C(1,"ion-icon",20),c()}}function ne(r,g){if(r&1&&(a(0,"div",23)(1,"span",12),d(2),c(),a(3,"span",13),d(4),c(),a(5,"span",24),d(6),c()()),r&2){let o=g.$implicit,n=b(3);l(2),O(n.getManeuverIcon(o.maneuver)),l(2),O(o.instruction),l(2),O(n.formatDistance(o.distance))}}function te(r,g){if(r&1&&(a(0,"div",21),f(1,ne,7,3,"div",22),c()),r&2){let o=b(2);l(),_("ngForOf",o.getUpcomingSteps())}}function ee(r,g){if(r&1&&(a(0,"div",2)(1,"div",3),f(2,Qt,8,3,"div",4),a(3,"div",5),f(4,Xt,2,0,"ion-button",6)(5,Zt,2,0,"ion-button",7)(6,Jt,2,0,"ion-button",8),c()(),f(7,te,2,1,"div",9),c()),r&2){let o=b();l(2),_("ngIf",o.getCurrentStep()),l(2),_("ngIf",!o.isNavigating),l(),_("ngIf",o.isNavigating),l(),_("ngIf",o.isNavigating),l(),_("ngIf",o.getUpcomingSteps().length>0)}}function oe(r,g){if(r&1&&(a(0,"div",53)(1,"div",54)(2,"ion-text",55),d(3),c(),a(4,"ion-text",56),d(5),c()(),a(6,"div",57),C(7,"ion-icon",58),a(8,"ion-text",13),d(9),c()(),a(10,"div",59)(11,"ion-text",24),d(12),c(),a(13,"ion-text",60),d(14),c()()()),r&2){let o,n,t,e,i,s=b(2);l(3),H("Paso ",((s.navigationRoute==null?null:s.navigationRoute.currentStepIndex)||0)+1," de ",(s.navigationRoute==null?null:s.navigationRoute.steps.length)||0,""),l(),N("navigating",s.isNavigating),l(),E(" ",s.isNavigating?"Navegando...":"Listo para navegar"," "),l(2),Pn("color",s.getManeuverColor((o=s.getCurrentStep())==null?null:o.maneuver)),_("name",s.getManeuverIcon((n=s.getCurrentStep())==null?null:n.maneuver)),l(2),E(" ",(t=s.getCurrentStep())==null?null:t.instruction," "),l(3),E(" ",s.formatDistance(((e=s.getCurrentStep())==null?null:e.distance)||0)," "),l(2),E(" ",s.formatTime(((i=s.getCurrentStep())==null?null:i.duration)||0)," ")}}function ie(r,g){if(r&1){let o=S();a(0,"ion-button",61),v("click",function(){P(o);let t=b(2);return x(t.startNavigation())}),C(1,"ion-icon",62),d(2," Iniciar Navegaci\xF3n "),c()}}function ae(r,g){if(r&1){let o=S();a(0,"div",63)(1,"ion-button",64),v("click",function(){P(o);let t=b(2);return x(t.stopNavigation())}),C(2,"ion-icon",65),d(3," Detener "),c(),a(4,"ion-button",66),v("click",function(){P(o);let t=b(2);return x(t.nextStep())}),C(5,"ion-icon",67),d(6," Siguiente "),c()()}}function ce(r,g){if(r&1&&C(0,"ion-icon",75),r&2){let o=b().$implicit,n=b(3);Pn("color",n.getManeuverColor(o.maneuver)),_("name",n.getManeuverIcon(o.maneuver))}}function re(r,g){if(r&1&&(a(0,"div",23)(1,"div",55),d(2),c(),a(3,"div",71)(4,"ion-text",72),d(5),c(),a(6,"ion-text",73),d(7),c()(),f(8,ce,1,3,"ion-icon",74),c()),r&2){let o=g.$implicit,n=g.index,t=b(3);N("current",n===t.navigationRoute.currentStepIndex)("completed",n<t.navigationRoute.currentStepIndex),l(2),O(n+1),l(3),O(o.instruction),l(2),O(t.formatDistance(o.distance)),l(),_("ngIf",n===t.navigationRoute.currentStepIndex)}}function se(r,g){if(r&1&&(a(0,"div",68)(1,"ion-text",69),d(2,"Instrucciones de navegaci\xF3n:"),c(),f(3,re,9,8,"div",70),c()),r&2){let o=b(2);l(3),_("ngForOf",o.navigationRoute.steps)}}function le(r,g){if(r&1&&(a(0,"ion-card",25)(1,"ion-card-header")(2,"ion-card-title",26),C(3,"ion-icon",27),d(4," Navegaci\xF3n Profesional "),a(5,"span",28),d(6),c()()(),a(7,"ion-card-content")(8,"div",29)(9,"div",30)(10,"ion-text",31),d(11,"Progreso de la ruta"),c(),a(12,"ion-text",32),d(13),c()(),C(14,"ion-progress-bar",33),a(15,"div",34)(16,"ion-text",35),d(17),c(),a(18,"ion-text",36),d(19),c()()(),a(20,"div",37)(21,"div",38)(22,"div",39),C(23,"ion-icon",40),a(24,"div",41)(25,"ion-text",42),d(26,"Distancia total"),c(),a(27,"ion-text",43),d(28),c()()(),a(29,"div",39),C(30,"ion-icon",44),a(31,"div",41)(32,"ion-text",42),d(33,"Tiempo total"),c(),a(34,"ion-text",43),d(35),c()()(),a(36,"div",45),C(37,"ion-icon",46),a(38,"div",41)(39,"ion-text",42),d(40,"Distancia restante"),c(),a(41,"ion-text",43),d(42),c()()(),a(43,"div",45),C(44,"ion-icon",47),a(45,"div",41)(46,"ion-text",42),d(47,"Tiempo restante"),c(),a(48,"ion-text",43),d(49),c()()()()(),f(50,oe,15,11,"div",48),a(51,"div",49),f(52,ie,3,0,"ion-button",50)(53,ae,7,0,"div",51),c(),f(54,se,4,1,"div",52),c()()),r&2){let o=b();l(5),N("navigating",o.isNavigating),l(),E(" ",o.isNavigating?"\u{1F7E2} Navegando":"\u23F8\uFE0F Pausado"," "),l(7),E("",o.getNavigationProgress().toFixed(0),"%"),l(),_("value",o.getNavigationProgress()/100),l(3),E("",o.formatDistance(o.getRemainingDistance())," restantes"),l(2),E("",o.formatTime(o.getRemainingTime())," restantes"),l(9),O(o.formatDistance((o.navigationRoute==null?null:o.navigationRoute.totalDistance)||0)),l(7),O(o.formatTime((o.navigationRoute==null?null:o.navigationRoute.totalDuration)||0)),l(7),O(o.formatDistance(o.getRemainingDistance())),l(7),O(o.formatTime(o.getRemainingTime())),l(),_("ngIf",o.getCurrentStep()),l(2),_("ngIf",!o.isNavigating),l(),_("ngIf",o.isNavigating),l(),_("ngIf",o.navigationRoute)}}var Ft=(()=>{let g=class g{constructor(n){this.mapboxService=n,this.waypoints=[],this.navigationRoute=null,this.isNavigating=!1,this.isMobile=!1,this.destroy$=new L,V({play:un,stop:vn,arrowForward:mn,navigateOutline:Y,speedometerOutline:K,timeOutline:Q,locationOutline:W,hourglassOutline:mt,playOutline:Cn,stopOutline:xt,chevronForwardOutline:_n,closeOutline:q,pauseOutline:Mt,chevronBackOutline:bn,arrowUpOutline:it})}ngOnInit(){this.isMobile=window.innerWidth<=768,window.addEventListener("resize",()=>{this.isMobile=window.innerWidth<=768}),this.mapboxService.getCurrentNavigation().pipe(I(this.destroy$)).subscribe(n=>{this.navigationRoute=n,this.isNavigating=(n==null?void 0:n.isNavigating)||!1,console.log("\u{1F9ED} Panel de navegaci\xF3n actualizado:",{tieneRuta:!!n,navegando:this.isNavigating,pasoActual:(n==null?void 0:n.currentStepIndex)||0,totalPasos:(n==null?void 0:n.steps.length)||0,esMovil:this.isMobile})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}startNavigation(){if(this.waypoints.length<2){console.warn("Se necesitan al menos 2 waypoints para la navegaci\xF3n");return}this.mapboxService.startNavigation(this.waypoints)}stopNavigation(){this.mapboxService.stopNavigation()}nextStep(){this.mapboxService.nextStep()}getCurrentStep(){return this.mapboxService.getCurrentStep()}getNavigationProgress(){return this.mapboxService.getNavigationProgress()}getRemainingDistance(){return this.mapboxService.getRemainingDistance()}getRemainingTime(){return this.mapboxService.getRemainingTime()}formatDistance(n){return this.mapboxService.formatDistance(n)}formatTime(n){return this.mapboxService.formatTime(n)}getManeuverIcon(n){return this.mapboxService.getManeuverIcon(n)}getManeuverColor(n){if(!n)return"#4F46E5";switch(n.type){case"depart":return"#10B981";case"arrive":return"#DC2626";case"turn":return"#F59E0B";default:return"#4F46E5"}}getUpcomingSteps(){var t;if(!((t=this.navigationRoute)!=null&&t.steps))return[];let n=this.navigationRoute.currentStepIndex||0;return this.navigationRoute.steps.slice(n+1,n+4)}};g.\u0275fac=function(t){return new(t||g)(z(X))},g.\u0275cmp=R({type:g,selectors:[["app-mapbox-navigation-panel"]],inputs:{waypoints:"waypoints"},decls:2,vars:2,consts:[["class","mobile-navigation",4,"ngIf"],["class","mapbox-navigation-panel",4,"ngIf"],[1,"mobile-navigation"],[1,"mobile-header"],["class","current-instruction",4,"ngIf"],[1,"mobile-controls"],["color","success","size","small",3,"click",4,"ngIf"],["color","danger","size","small",3,"click",4,"ngIf"],["color","warning","size","small",3,"click",4,"ngIf"],["class","upcoming-steps",4,"ngIf"],[1,"current-instruction"],[1,"instruction-row"],[1,"maneuver-icon"],[1,"instruction-text"],[1,"instruction-distance"],["color","success","size","small",3,"click"],["name","play"],["color","danger","size","small",3,"click"],["name","stop"],["color","warning","size","small",3,"click"],["name","arrow-forward"],[1,"upcoming-steps"],["class","step-item",4,"ngFor","ngForOf"],[1,"step-item"],[1,"step-distance"],[1,"mapbox-navigation-panel"],[1,"navigation-title"],["name","navigate-outline"],[1,"route-status"],[1,"navigation-progress"],[1,"progress-header"],[1,"progress-label"],[1,"progress-percentage"],["color","primary",1,"progress-bar",3,"value"],[1,"progress-details"],[1,"progress-distance"],[1,"progress-time"],[1,"route-info"],[1,"route-stats"],[1,"stat","primary"],["name","speedometer-outline",1,"stat-icon"],[1,"stat-content"],[1,"stat-label"],[1,"stat-value"],["name","time-outline",1,"stat-icon"],[1,"stat","secondary"],["name","location-outline",1,"stat-icon"],["name","hourglass-outline",1,"stat-icon"],["class","current-step",4,"ngIf"],[1,"navigation-controls"],["color","primary","fill","solid","class","nav-btn-start",3,"click",4,"ngIf"],["class","nav-controls-active",4,"ngIf"],["class","steps-list",4,"ngIf"],[1,"current-step"],[1,"step-header"],[1,"step-number"],[1,"step-status"],[1,"step-instruction"],[1,"maneuver-icon",3,"name"],[1,"step-details"],[1,"step-duration"],["color","primary","fill","solid",1,"nav-btn-start",3,"click"],["name","play-outline","slot","start"],[1,"nav-controls-active"],["color","danger","fill","outline",1,"nav-btn-stop",3,"click"],["name","stop-outline","slot","start"],["color","warning","fill","outline",1,"nav-btn-next",3,"click"],["name","chevron-forward-outline","slot","start"],[1,"steps-list"],[1,"steps-title"],["class","step-item",3,"current","completed",4,"ngFor","ngForOf"],[1,"step-content"],[1,"step-instruction-text"],[1,"step-distance-text"],["class","current-step-icon",3,"name","color",4,"ngIf"],[1,"current-step-icon",3,"name"]],template:function(t,e){t&1&&f(0,ee,8,5,"div",0)(1,le,55,15,"ion-card",1),t&2&&(_("ngIf",e.isMobile&&e.navigationRoute),l(),_("ngIf",!e.isMobile&&e.navigationRoute))},dependencies:[j,$,D,Dn,jn,Un,Bn,$n,U,Kn,Hn],styles:[".mapbox-navigation-panel[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;width:420px;max-height:85vh;z-index:1000;box-shadow:0 8px 32px #0003;border-radius:16px;overflow:hidden;background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1)}@media (max-width: 768px){.mapbox-navigation-panel[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;width:100%;max-height:50vh;border-radius:0;font-size:14px;background:linear-gradient(135deg,#1a1a2e,#16213e);box-shadow:0 4px 6px #0000004d}}.navigation-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:1.2rem;font-weight:700;color:#fff}.navigation-title[_ngcontent-%COMP%]   .route-status[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;padding:4px 12px;background:#ffffff1a;border-radius:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.navigation-title[_ngcontent-%COMP%]   .route-status.navigating[_ngcontent-%COMP%]{background:#10b98133;color:#10b981;animation:_ngcontent-%COMP%_pulse 2s infinite}.navigation-progress[_ngcontent-%COMP%]{margin-bottom:20px;background:#ffffff0d;border-radius:12px;padding:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.navigation-progress[_ngcontent-%COMP%]   .progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.navigation-progress[_ngcontent-%COMP%]   .progress-header[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#ffffffe6}.navigation-progress[_ngcontent-%COMP%]   .progress-header[_ngcontent-%COMP%]   .progress-percentage[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#10b981}.navigation-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{margin-bottom:12px;--background: rgba(255, 255, 255, .1);--progress-background: linear-gradient(90deg, #10B981 0%, #059669 100%);height:8px;border-radius:4px}.navigation-progress[_ngcontent-%COMP%]   .progress-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.navigation-progress[_ngcontent-%COMP%]   .progress-details[_ngcontent-%COMP%]   .progress-distance[_ngcontent-%COMP%], .navigation-progress[_ngcontent-%COMP%]   .progress-details[_ngcontent-%COMP%]   .progress-time[_ngcontent-%COMP%]{font-size:.85rem;color:#ffffffb3;font-weight:500}.route-info[_ngcontent-%COMP%]{margin-bottom:20px}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#ffffff14;border-radius:12px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);transition:all .3s ease}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]:hover{background:#ffffff1f;transform:translateY(-2px)}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat.primary[_ngcontent-%COMP%]{background:#10b9811a;border-color:#10b98133}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat.secondary[_ngcontent-%COMP%]{background:#3b82f61a;border-color:#3b82f633}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#fffc;flex-shrink:0}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{flex:1;min-width:0}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{display:block;font-size:.8rem;color:#ffffffb3;margin-bottom:4px;font-weight:500}.route-info[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{display:block;font-size:1.1rem;font-weight:700;color:#fff;line-height:1.2}.current-step[_ngcontent-%COMP%]{background:#ffffff26;border-radius:8px;padding:16px;margin-bottom:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.current-step[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.current-step[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#ffffffe6}.current-step[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-status[_ngcontent-%COMP%]{font-size:.8rem;color:#ffffffb3}.current-step[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]   .step-status.navigating[_ngcontent-%COMP%]{color:#10b981;font-weight:600;animation:_ngcontent-%COMP%_pulse 2s infinite}.current-step[_ngcontent-%COMP%]   .step-instruction[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px}.current-step[_ngcontent-%COMP%]   .step-instruction[_ngcontent-%COMP%]   .maneuver-icon[_ngcontent-%COMP%]{font-size:1.5rem}.current-step[_ngcontent-%COMP%]   .step-instruction[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#fff}.current-step[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.current-step[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]   .step-distance[_ngcontent-%COMP%], .current-step[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]   .step-duration[_ngcontent-%COMP%]{font-size:.9rem;color:#fffc}.navigation-controls[_ngcontent-%COMP%]{margin-bottom:16px}.navigation-controls[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .2);--color: white;--border-radius: 8px;--box-shadow: 0 2px 8px rgba(0, 0, 0, .2);transition:all .2s ease}.navigation-controls[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{--background: rgba(255, 255, 255, .3);transform:translateY(-1px)}.navigation-controls[_ngcontent-%COMP%]   .nav-btn-start[_ngcontent-%COMP%]{width:100%}.navigation-controls[_ngcontent-%COMP%]   .nav-controls-active[_ngcontent-%COMP%]{display:flex;gap:8px}.navigation-controls[_ngcontent-%COMP%]   .nav-controls-active[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;font-size:.9rem}.steps-list[_ngcontent-%COMP%]   .steps-title[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:600;color:#fff;margin-bottom:12px}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px 0;border-bottom:1px solid rgba(255,255,255,.1)}.steps-list[_ngcontent-%COMP%]   .step-item.current[_ngcontent-%COMP%]{background:#fff3;border-radius:6px;padding:8px 12px;margin:0 -12px;animation:_ngcontent-%COMP%_pulse 2s infinite}.steps-list[_ngcontent-%COMP%]   .step-item.completed[_ngcontent-%COMP%]{opacity:.6}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;background:#ffffff4d;color:#fff;display:flex;align-items:center;justify-content:center;font-size:.8rem;font-weight:600;flex-shrink:0}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]{flex:1}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-instruction-text[_ngcontent-%COMP%]{display:block;font-size:.9rem;color:#fff;margin-bottom:2px}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-distance-text[_ngcontent-%COMP%]{font-size:.8rem;color:#ffffffb3}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .current-step-icon[_ngcontent-%COMP%]{font-size:1.2rem}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.7}to{opacity:1}}.mobile-navigation[_ngcontent-%COMP%]{background:#1a1a2e;color:#fff;padding:0;margin:0;border-radius:0;box-shadow:0 4px 6px #0000004d}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#1a1a2e;border-bottom:1px solid rgba(255,255,255,.1)}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]{flex:1}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:4px}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-row[_ngcontent-%COMP%]   .maneuver-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#4f46e5}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-row[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#fff;flex:1}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-distance[_ngcontent-%COMP%]{font-size:.9rem;color:#fffc;margin-left:27px}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .mobile-controls[_ngcontent-%COMP%]{display:flex;gap:8px}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .mobile-controls[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--border-radius: 20px;width:40px;height:40px}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;background:#1a1a2e}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid rgba(255,255,255,.05)}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .maneuver-icon[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff9;width:20px;text-align:center}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{flex:1;font-size:.9rem;color:#fffc;line-height:1.3}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-distance[_ngcontent-%COMP%]{font-size:.8rem;color:#fff9;white-space:nowrap}@media (max-width: 768px){.route-stats[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:8px}.current-step[_ngcontent-%COMP%]{padding:12px}.current-step[_ngcontent-%COMP%]   .step-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.current-step[_ngcontent-%COMP%]   .step-instruction[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.navigation-controls[_ngcontent-%COMP%]   .nav-controls-active[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.navigation-controls[_ngcontent-%COMP%]   .nav-controls-active[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%;font-size:.85rem;--padding-start: 12px;--padding-end: 12px}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]{padding:8px 0}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-instruction-text[_ngcontent-%COMP%]{font-size:.85rem;line-height:1.3}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-distance-text[_ngcontent-%COMP%]{font-size:.75rem}}@media (max-width: 480px){.mapbox-navigation-panel[_ngcontent-%COMP%]{top:5px;left:5px;right:5px;max-height:65vh;border-radius:8px;font-size:13px}.route-stats[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:6px}.route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{padding:8px}.route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem}.route-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1rem}.current-step[_ngcontent-%COMP%]{padding:10px;margin-bottom:12px}.current-step[_ngcontent-%COMP%]   .step-instruction[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.4}.current-step[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.current-step[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]   .step-distance[_ngcontent-%COMP%], .current-step[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]   .step-duration[_ngcontent-%COMP%]{font-size:.8rem}.steps-list[_ngcontent-%COMP%]   .steps-title[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:8px}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]{padding:6px 0}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{width:20px;height:20px;font-size:.7rem}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-instruction-text[_ngcontent-%COMP%]{font-size:.8rem}.steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-distance-text[_ngcontent-%COMP%]{font-size:.7rem}}"]});let r=g;return r})();var ge={passiveEvents:["touchstart","touchmove","wheel","mousewheel","DOMMouseScroll"],mapboxConfig:{antialias:!1,maxTileCacheSize:50,renderWorldCopies:!1,preserveDrawingBuffer:!1,cooperativeGestures:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0}},yn={maxConcurrentRequests:2,requestDelay:500,maxRetries:3,timeout:1e4};function Tt(){if(typeof window>"u")return;let r=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(g,o,n){return ge.passiveEvents.includes(g)&&(typeof n=="boolean"?n={capture:n,passive:!0}:typeof n=="object"?n=kn(En({},n),{passive:!0}):n={passive:!0}),r.call(this,g,o,n)}}var Vt=(()=>{let g=class g{constructor(n){this.http=n,this.baseUrl="https://api.maptiler.com/geocoding"}geocode(n){let t=`${this.baseUrl}/${encodeURIComponent(n)}.json?key=${Xn.maptilerApiKey}`;return this.http.get(t).pipe(J(e=>e&&e.features&&e.features.length>0?e.features[0].geometry.coordinates:null),nn(e=>(console.error("Error en geocodificaci\xF3n:",e),en(null))))}};g.\u0275fac=function(t){return new(t||g)(F(ln))},g.\u0275prov=T({token:g,factory:g.\u0275fac,providedIn:"root"});let r=g;return r})();var Rt=(()=>{let g=class g{optimizeImage(n,t=1920,e=1080,i=.8){return w(this,null,function*(){return new Promise((s,p)=>{let m=document.createElement("canvas"),u=m.getContext("2d"),M=new Image;M.onload=()=>{let{width:y,height:h}=this.calculateDimensions(M.width,M.height,t,e);m.width=y,m.height=h,u==null||u.drawImage(M,0,0,y,h),m.toBlob(k=>{if(k){let A=new File([k],n.name,{type:n.type,lastModified:Date.now()});s(A)}else p(new Error("Error al optimizar imagen"))},n.type,i)},M.onerror=()=>p(new Error("Error al cargar imagen")),M.src=URL.createObjectURL(n)})})}calculateDimensions(n,t,e,i){if(n<=e&&t<=i)return{width:n,height:t};let s=Math.min(e/n,i/t);return{width:Math.round(n*s),height:Math.round(t*s)}}optimizeMultipleImages(n){return w(this,null,function*(){let t=[];for(let e of n)try{let i=yield this.optimizeImage(e);t.push(i)}catch(i){console.warn("Error optimizando imagen:",i),t.push(e)}return t})}needsOptimization(n,t=2){return n.size>t*1024*1024}};g.\u0275fac=function(t){return new(t||g)},g.\u0275prov=T({token:g,factory:g.\u0275fac,providedIn:"root"});let r=g;return r})();var $t=(()=>{let g=class g{constructor(n,t,e){this.avisosService=n,this.clientesService=t,this.inventarioService=e,this.destroy$=new L,this.isPrefetching=!1,this.prefetchQueue=[]}prefetchCriticalData(){return w(this,null,function*(){if(this.isPrefetching){console.log("\u26A0\uFE0F Prefetch ya en progreso, saltando...");return}this.isPrefetching=!0;try{console.log("\u{1F680} Iniciando prefetch de datos cr\xEDticos..."),yield this.prefetchSequentially([()=>this.avisosService.getAvisosActivos(1,20).subscribe(),()=>this.clientesService.getClientes(1,10,void 0,"nombre_completo","asc",!0).subscribe(),()=>this.inventarioService.getInventario(1,10,void 0,"nombre","asc",!0).subscribe()]),console.log("\u2705 Prefetch de datos cr\xEDticos completado")}catch(n){console.warn("\u26A0\uFE0F Error en prefetch:",n)}finally{this.isPrefetching=!1}})}prefetchSequentially(n){return w(this,null,function*(){for(let t of n)yield new Promise(e=>{setTimeout(()=>{t(),e()},100)})})}prefetchBasedOnNavigation(n){this.prefetchQueue.push(()=>{switch(n){case"/avisos":this.prefetchAvisosData();break;case"/clientes":this.prefetchClientesData();break;case"/inventario":this.prefetchInventarioData();break}}),setTimeout(()=>{let t=this.prefetchQueue.shift();t&&t()},500)}prefetchAvisosData(){this.avisosService.getAvisosActivos(2,20).subscribe()}prefetchClientesData(){this.clientesService.getClientes(2,10).subscribe()}prefetchInventarioData(){this.inventarioService.getInventario(2,10).subscribe()}cleanupUnusedPrefetch(){this.prefetchQueue=[],console.log("\u{1F9F9} Limpieza de prefetch completada")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.cleanupUnusedPrefetch()}};g.\u0275fac=function(t){return new(t||g)(F(dn),F(Mn),F(Et))},g.\u0275prov=T({token:g,factory:g.\u0275fac,providedIn:"root"});let r=g;return r})();var Dt=(()=>{let g=class g{constructor(n){this.supabaseClientService=n}testSupabaseConnection(){console.log("\u{1F50D} Probando conexi\xF3n a Supabase...");let n=this.supabaseClientService.getClient();return Z(n.from("avisos").select("id").limit(1)).pipe(J(({data:t,error:e})=>e?(console.error("\u274C Error en conexi\xF3n Supabase:",e),{success:!1,message:`Error de conexi\xF3n: ${e.message}`,data:e}):(console.log("\u2705 Conexi\xF3n a Supabase exitosa"),{success:!0,message:"Conexi\xF3n exitosa",data:t})),nn(t=>(console.error("\u274C Error cr\xEDtico en conexi\xF3n:",t),Z(Promise.resolve({success:!1,message:`Error cr\xEDtico: ${t.message}`,data:t})))))}testAvisosQuery(){console.log("\u{1F50D} Probando consulta de avisos...");let n=this.supabaseClientService.getClient();return Z(n.from("avisos").select(`
          id,
          nombre_cliente_aviso,
          estado
        `).limit(5)).pipe(J(({data:t,error:e,count:i})=>e?(console.error("\u274C Error en consulta de avisos:",e),{success:!1,message:`Error en consulta: ${e.message}`,data:e}):(console.log("\u2705 Consulta de avisos exitosa:",t==null?void 0:t.length,"registros"),{success:!0,message:`Consulta exitosa: ${(t==null?void 0:t.length)||0} avisos encontrados`,data:{avisos:t,total:i}})),nn(t=>(console.error("\u274C Error cr\xEDtico en consulta:",t),Z(Promise.resolve({success:!1,message:`Error cr\xEDtico: ${t.message}`,data:t})))))}};g.\u0275fac=function(t){return new(t||g)(F(Zn))},g.\u0275prov=T({token:g,factory:g.\u0275fac,providedIn:"root"});let r=g;return r})();var Ce=(r,g,o,n,t,e,i,s,p)=>({pendiente:r,"en-curso":g,"pendiente-presupuesto":o,"listo-para-facturar":n,completado:t,cancelado:e,"no-visitado":i,"visitado-pendiente":s,seleccionado:p}),ve=(r,g,o,n,t,e,i)=>({yellow:r,red:g,green:o,"no-visitado":n,"visitado-pendiente":t,"pendiente-presupuesto":e,"listo-para-facturar":i}),Me=(r,g,o,n,t,e,i,s,p,m)=>({pendiente:r,"en-curso":g,"pendiente-presupuesto":o,"listo-para-facturar":n,completado:t,cancelado:e,"no-visitado":i,"visitado-pendiente":s,seleccionado:p,clickeable:m});function fe(r,g){r&1&&(a(0,"div",8)(1,"div",9),C(2,"ion-icon",10),a(3,"p"),d(4,"Cargando avisos..."),c()()())}function Pe(r,g){if(r&1){let o=S();a(0,"div",11)(1,"div",12),C(2,"ion-icon",13),a(3,"p"),d(4),c(),a(5,"button",14),v("click",function(){P(o);let t=b();return x(t.refrescarAvisos())}),C(6,"ion-icon",15),d(7," Reintentar "),c()()()}if(r&2){let o=b();l(4),O(o.error)}}function xe(r,g){r&1&&(a(0,"span",44),d(1," | Ruta activa - Usa los botones para navegaci\xF3n real "),c())}function Oe(r,g){if(r&1&&(a(0,"span",42),d(1),f(2,xe,2,0,"span",43),c()),r&2){let o=b(2);l(),E(" | Seleccionados: ",o.getNumeroAvisosSeleccionados()," "),l(),_("ngIf",o.getNumeroAvisosSeleccionados()>1)}}function he(r,g){if(r&1){let o=S();a(0,"div",45)(1,"button",46),v("click",function(){P(o);let t=b(2);return x(t.abrirModalOpcionesNavegacion())}),C(2,"ion-icon",47),a(3,"span"),d(4),c()()()}if(r&2){let o=b(2);l(4),E("Navegar (",o.getNumeroAvisosSeleccionados(),")")}}function we(r,g){if(r&1){let o=S();a(0,"button",48),v("click",function(){P(o);let t=b(2);return x(t.limpiarSeleccion())}),C(1,"ion-icon",49),d(2),c()}if(r&2){let o=b(2);l(2),E(" Limpiar (",o.getNumeroAvisosSeleccionados(),") ")}}function ye(r,g){if(r&1){let o=S();a(0,"button",50),v("click",function(){P(o);let t=b(2);return x(t.abrirModalOpcionesNavegacion())}),C(1,"ion-icon",47),d(2),c()}if(r&2){let o=b(2);l(2),E(" Navegar (",o.getNumeroAvisosSeleccionados(),") ")}}function Ee(r,g){r&1&&(a(0,"div",58),d(1,"Seleccionar"),c())}function ke(r,g){if(r&1){let o=S();a(0,"div",82)(1,"input",83),v("change",function(t){P(o);let e=b().$implicit,i=b(4);return x(i.toggleSeleccionAviso(e,t))})("click",function(t){return P(o),x(t.stopPropagation())}),c()()}if(r&2){let o=b().$implicit,n=b(4);l(),_("checked",n.estaSeleccionado(o))}}function Se(r,g){r&1&&C(0,"ion-icon",84)}function ze(r,g){r&1&&C(0,"ion-icon",85)}function Ae(r,g){if(r&1){let o=S();a(0,"div",62),f(1,ke,2,1,"div",63),a(2,"div",64),d(3),c(),a(4,"div",65)(5,"span",66),d(6),c()(),a(7,"div",67),d(8),c(),a(9,"div",68)(10,"div",69),d(11),c()(),a(12,"div",70),d(13),cn(14,"date"),c(),a(15,"div",71),f(16,Se,1,0,"ion-icon",72)(17,ze,1,0,"ion-icon",73),c(),a(18,"div",74)(19,"button",75),v("click",function(){let t=P(o).$implicit,e=b(4);return x(e.verDetalleAviso(t))}),C(20,"ion-icon",76),c(),a(21,"button",77),v("click",function(t){let e=P(o).$implicit,i=b(4);return x(i.abrirEnMapasNativos(e,t))}),C(22,"ion-icon",47),c(),a(23,"button",78),v("click",function(){let t=P(o).$implicit,e=b(4);return x(e.editarAviso(t))}),C(24,"ion-icon",79),c(),a(25,"button",80),v("click",function(){let t=P(o).$implicit,e=b(4);return x(e.eliminarAviso(t))}),C(26,"ion-icon",81),c()()()}if(r&2){let o=g.$implicit,n=g.index,t=b(4);_("ngClass",xn(14,Ce,[o.estado==="Pendiente",o.estado==="En curso",o.estado==="Pendiente de presupuesto",o.estado==="Listo para facturar",o.estado==="Completado",o.estado==="Cancelado",o.estado==="No visitado",o.estado==="Visitado pendiente",t.estaSeleccionado(o)])),l(),_("ngIf",t.modoSeleccion),l(2),O(o.numero_secuencial||(t.paginaActual-1)*t.porPagina+n+1),l(2),_("ngClass",Fn(24,ve,o.estado==="En curso",o.estado==="Pendiente",o.estado==="Completado",o.estado==="No visitado",o.estado==="Visitado pendiente",o.estado==="Pendiente de presupuesto",o.estado==="Listo para facturar")),l(),E(" ",o.estado," "),l(2),O(o.nombre_cliente_aviso),l(2),_("title",o.descripcion_problema),l(),E(" ",o.descripcion_problema," "),l(2),O(rn(14,11,o.fecha_creacion,"dd/MM/yyyy")),l(3),_("ngIf",o.urgencia==="Alta"||o.es_urgente),l(),_("ngIf",o.urgencia!=="Alta"&&!o.es_urgente)}}function Ie(r,g){if(r&1&&(a(0,"div",54)(1,"div",55)(2,"div",17)(3,"div",56),f(4,Ee,2,0,"div",57),a(5,"div",58),d(6,"N\xFAmero"),c(),a(7,"div",59),d(8,"Estado"),c(),a(9,"div",58),d(10,"Cliente"),c(),a(11,"div",58),d(12,"Detalle"),c(),a(13,"div",59),d(14,"Fecha"),c(),a(15,"div",59),d(16,"Urgente"),c(),a(17,"div",58),d(18,"Acciones"),c()()(),a(19,"div",60),f(20,Ae,27,32,"div",61),c()()()),r&2){let o=b(3);l(),N("modo-seleccion",o.modoSeleccion),l(3),_("ngIf",o.modoSeleccion),l(16),_("ngForOf",o.avisos)}}function Ne(r,g){if(r&1){let o=S();a(0,"div",86)(1,"div",87),C(2,"ion-icon",13),a(3,"h3"),d(4,"No hay avisos"),c(),a(5,"p"),d(6,"A\xFAn no se han creado avisos. Crea el primero para comenzar."),c(),a(7,"button",88),v("click",function(){P(o);let t=b(3);return x(t.abrirModalCrearAviso())}),C(8,"ion-icon",33),d(9," Crear aviso "),c()()()}}function Fe(r,g){if(r&1){let o=S();on(0),a(1,"button",99),v("click",function(){let t=P(o).$implicit,e=b(4);return x(e.cambiarPagina(t))}),d(2),c(),an()}if(r&2){let o=g.$implicit,n=b(4);l(),N("active",o===n.paginaActual),l(),E(" ",o," ")}}function Te(r,g){if(r&1){let o=S();a(0,"div",89)(1,"span",90),d(2),c(),a(3,"div",91)(4,"button",92),v("click",function(){P(o);let t=b(3);return x(t.primeraPagina())}),C(5,"ion-icon",93)(6,"ion-icon",93),c(),a(7,"button",94),v("click",function(){P(o);let t=b(3);return x(t.paginaAnterior())}),C(8,"ion-icon",93),c(),f(9,Fe,3,3,"ng-container",95),a(10,"button",96),v("click",function(){P(o);let t=b(3);return x(t.paginaSiguiente())}),C(11,"ion-icon",97),c(),a(12,"button",98),v("click",function(){P(o);let t=b(3);return x(t.ultimaPagina())}),C(13,"ion-icon",97)(14,"ion-icon",97),c()()()}if(r&2){let o=b(3);l(2),Nn(" Mostrando datos ",(o.paginaActual-1)*o.porPagina+1," a ",o.Math.min(o.paginaActual*o.porPagina,o.totalAvisos)," de ",o.totalAvisos," avisos "),l(2),_("disabled",!o.puedeAnterior()),l(3),_("disabled",!o.puedeAnterior()),l(2),_("ngForOf",o.obtenerRangoPaginas()),l(),_("disabled",!o.puedeSiguiente()),l(2),_("disabled",!o.puedeSiguiente())}}function Ve(r,g){if(r&1&&(on(0),f(1,Ie,21,4,"div",51)(2,Ne,10,0,"div",52)(3,Te,15,8,"div",53),an()),r&2){let o=b(2);l(),_("ngIf",o.avisos.length>0),l(),_("ngIf",o.avisos.length===0&&!o.loading&&!o.error),l(),_("ngIf",o.avisos.length>0&&o.totalAvisos>0)}}function Re(r,g){if(r&1){let o=S();a(0,"div",86)(1,"div",87),C(2,"ion-icon",13),a(3,"h3"),d(4,"No hay avisos"),c(),a(5,"p"),d(6,"A\xFAn no se han creado avisos. Crea el primero para comenzar."),c(),a(7,"button",88),v("click",function(){P(o);let t=b(3);return x(t.abrirModalCrearAviso())}),C(8,"ion-icon",33),d(9," Crear aviso "),c()()()}}function $e(r,g){r&1&&(a(0,"div",58),d(1,"Seleccionar"),c())}function De(r,g){if(r&1){let o=S();a(0,"div",82)(1,"input",83),v("change",function(t){P(o);let e=b().$implicit,i=b(4);return x(i.toggleSeleccionAviso(e,t))})("click",function(t){return P(o),x(t.stopPropagation())}),c()()}if(r&2){let o=b().$implicit,n=b(4);l(),_("checked",n.estaSeleccionado(o))}}function je(r,g){if(r&1){let o=S();a(0,"div",114),v("click",function(t){let e=P(o).$implicit,i=b(4);return x(i.manejarClicFilaMapa(e,t))}),f(1,De,2,1,"div",63),a(2,"div",64),d(3),c(),a(4,"div",67),d(5),c(),a(6,"div",68)(7,"div",69),d(8),c()(),a(9,"div",74)(10,"button",115),v("click",function(t){let e=P(o).$implicit,i=b(4);return x(i.centrarAvisoEnMapa(e,t))}),C(11,"ion-icon",116),c(),a(12,"button",77),v("click",function(t){let e=P(o).$implicit,i=b(4);return t.stopPropagation(),x(i.abrirEnMapasNativos(e,t))}),C(13,"ion-icon",47),c(),a(14,"button",75),v("click",function(t){let e=P(o).$implicit,i=b(4);return t.stopPropagation(),x(i.verDetalleAviso(e))}),C(15,"ion-icon",76),c(),a(16,"button",80),v("click",function(t){let e=P(o).$implicit,i=b(4);return t.stopPropagation(),x(i.eliminarAviso(e))}),C(17,"ion-icon",81),c()()()}if(r&2){let o=g.$implicit,n=g.index,t=b(4);_("ngClass",xn(7,Me,[o.estado==="Pendiente",o.estado==="En curso",o.estado==="Pendiente de presupuesto",o.estado==="Listo para facturar",o.estado==="Completado",o.estado==="Cancelado",o.estado==="No visitado",o.estado==="Visitado pendiente",t.estaSeleccionado(o),!t.modoSeleccion]))("title",t.modoSeleccion?"Haz clic para seleccionar/deseleccionar":"Haz clic para seleccionar y activar modo selecci\xF3n"),l(),_("ngIf",t.modoSeleccion),l(2),O(o.numero_secuencial||(t.paginaActual-1)*t.porPagina+n+1),l(2),O(o.nombre_cliente_aviso),l(2),_("title",o.descripcion_problema),l(),E(" ",o.descripcion_problema," ")}}function Ue(r,g){if(r&1&&(a(0,"div",125)(1,"div",126)(2,"span",127),d(3),c(),a(4,"span",128),d(5),c()(),a(6,"div",129),d(7),c()()),r&2){let o,n,t,e=b(5);l(3),O(e.getManeuverIcon((o=e.getCurrentStep())==null?null:o.maneuver)),l(2),O((n=e.getCurrentStep())==null?null:n.instruction),l(2),O(e.formatDistance(((t=e.getCurrentStep())==null?null:t.distance)||0))}}function Be(r,g){if(r&1){let o=S();a(0,"ion-button",130),v("click",function(){P(o);let t=b(5);return x(t.startNavigation())}),C(1,"ion-icon",131),c()}}function Le(r,g){if(r&1){let o=S();a(0,"ion-button",132),v("click",function(){P(o);let t=b(5);return x(t.stopNavigation())}),C(1,"ion-icon",133),c()}}function qe(r,g){if(r&1){let o=S();a(0,"ion-button",134),v("click",function(){P(o);let t=b(5);return x(t.nextStep())}),C(1,"ion-icon",135),c()}}function He(r,g){if(r&1&&(a(0,"div",138)(1,"span",127),d(2),c(),a(3,"span",128),d(4),c(),a(5,"span",139),d(6),c()()),r&2){let o=g.$implicit,n=b(6);l(2),O(n.getManeuverIcon(o.maneuver)),l(2),O(o.instruction),l(2),O(n.formatDistance(o.distance))}}function Ge(r,g){if(r&1&&(a(0,"div",136),f(1,He,7,3,"div",137),c()),r&2){let o=b(5);l(),_("ngForOf",o.getUpcomingSteps())}}function We(r,g){if(r&1&&(a(0,"div",117)(1,"div",118),f(2,Ue,8,3,"div",119),a(3,"div",120),f(4,Be,2,0,"ion-button",121)(5,Le,2,0,"ion-button",122)(6,qe,2,0,"ion-button",123),c()(),f(7,Ge,2,1,"div",124),c()),r&2){let o=b(4);l(2),_("ngIf",o.getCurrentStep()),l(2),_("ngIf",!o.isNavigating),l(),_("ngIf",o.isNavigating),l(),_("ngIf",o.isNavigating),l(),_("ngIf",o.getUpcomingSteps().length>0)}}function Ye(r,g){if(r&1&&(a(0,"div",140),C(1,"app-mapbox-navigation-panel",141),c()),r&2){let o=b(4);l(),_("waypoints",o.navigationWaypoints)}}function Ke(r,g){if(r&1){let o=S();a(0,"div",101)(1,"div",102)(2,"div",103)(3,"div",55)(4,"div",17)(5,"div",56),f(6,$e,2,0,"div",57),a(7,"div",58),d(8,"N\xFAmero"),c(),a(9,"div",58),d(10,"Cliente"),c(),a(11,"div",58),d(12,"Detalle"),c(),a(13,"div",58),d(14,"Acciones"),c()()(),a(15,"div",60),f(16,je,18,18,"div",104),c()()()(),a(17,"div",105)(18,"button",106),v("click",function(){P(o);let t=b(3);return x(t.toggleFullscreen())}),C(19,"ion-icon",107),c(),a(20,"button",108),v("click",function(){P(o);let t=b(3);return x(t.toggleView())}),C(21,"ion-icon",109),a(22,"span",110),d(23,"Volver a lista"),c()(),f(24,We,8,5,"div",111)(25,Ye,2,1,"div",112),C(26,"div",113),c()()}if(r&2){let o=b(3);l(3),N("modo-seleccion",o.modoSeleccion),l(3),_("ngIf",o.modoSeleccion),l(10),_("ngForOf",o.avisos),l(8),_("ngIf",o.showNavigationPanel&&o.isMobile),l(),_("ngIf",o.showNavigationPanel&&!o.isMobile)}}function Qe(r,g){if(r&1&&(on(0),f(1,Re,10,0,"div",52)(2,Ke,27,6,"div",100),an()),r&2){let o=b(2);l(),_("ngIf",o.avisos.length===0&&!o.loading&&!o.error),l(),_("ngIf",o.avisos.length>0)}}function Xe(r,g){r&1&&C(0,"ion-spinner",155)}function Ze(r,g){if(r&1){let o=S();a(0,"div",156)(1,"button",157),v("click",function(){P(o);let t=b(3);return x(t.abrirModalOpcionesNavegacion())}),C(2,"ion-icon",47),a(3,"span"),d(4,"Navegar ruta"),c()()()}}function Je(r,g){if(r&1&&(a(0,"div",142)(1,"div",143),C(2,"ion-icon",47),a(3,"span"),d(4,"Ruta de navegaci\xF3n"),c(),f(5,Xe,1,0,"ion-spinner",144),c(),a(6,"div",145)(7,"div",146)(8,"div",147),C(9,"ion-icon",148),c(),a(10,"div",149)(11,"span",150),d(12,"Destinos"),c(),a(13,"span",151),d(14),c()()(),a(15,"div",146)(16,"div",147),C(17,"ion-icon",152),c(),a(18,"div",149)(19,"span",150),d(20,"Distancia"),c(),a(21,"span",151),d(22),c()()(),a(23,"div",146)(24,"div",147),C(25,"ion-icon",153),c(),a(26,"div",149)(27,"span",150),d(28,"Tiempo"),c(),a(29,"span",151),d(30),c()()()(),f(31,Ze,5,0,"div",154),c()),r&2){let o=b(2);l(5),_("ngIf",o.calculandoUbicacion||(o.rutaCalculada==null?null:o.rutaCalculada.distancia)==="Calculando..."),l(9),H("",o.getNumeroAvisosSeleccionados()," parada",o.getNumeroAvisosSeleccionados()>1?"s":"",""),l(8),O((o.rutaCalculada==null?null:o.rutaCalculada.distancia)||"Selecciona avisos"),l(8),O((o.rutaCalculada==null?null:o.rutaCalculada.tiempo)||"Selecciona avisos"),l(),_("ngIf",o.getNumeroAvisosSeleccionados()>1)}}function no(r,g){if(r&1){let o=S();a(0,"section",16)(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",20),d(5),c(),a(6,"div",21),d(7),f(8,Oe,3,2,"span",22),c()(),a(9,"div",23)(10,"div",24),C(11,"input",25)(12,"ion-icon",26),c()(),a(13,"div",27)(14,"button",28),v("click",function(){P(o);let t=b();return x(t.toggleModoSeleccion())}),C(15,"ion-icon",29),c(),a(16,"button",30),v("click",function(){P(o);let t=b();return x(t.toggleView())}),C(17,"ion-icon",31),c(),a(18,"button",32),v("click",function(){P(o);let t=b();return x(t.abrirModalCrearAviso())}),C(19,"ion-icon",33),c()()(),f(20,he,5,1,"div",34),a(21,"div",35),C(22,"input",36),a(23,"select")(24,"option"),d(25,"Ordenar por: Recientes"),c()(),a(26,"div",37)(27,"button",28),v("click",function(){P(o);let t=b();return x(t.toggleModoSeleccion())}),C(28,"ion-icon",29),d(29),c(),f(30,we,3,1,"button",38)(31,ye,3,1,"button",39),a(32,"button",30),v("click",function(){P(o);let t=b();return x(t.toggleView())}),C(33,"ion-icon",31),d(34),c(),a(35,"button",32),v("click",function(){P(o);let t=b();return x(t.abrirModalCrearAviso())}),C(36,"ion-icon",33),d(37," A\xF1adir aviso "),c()()()(),f(38,Ve,4,3,"ng-container",40)(39,Qe,3,2,"ng-container",40)(40,Je,32,6,"div",41),c()}if(r&2){let o=b();l(5),O(o.isMapView?"Mapa de avisos":"Lista de avisos"),l(2),E(" Avisos: ",o.totalAvisos," "),l(),_("ngIf",o.getNumeroAvisosSeleccionados()>0),l(6),N("active",o.modoSeleccion),l(3),_("name",o.isMapView?"list-outline":"map-outline"),l(3),_("ngIf",o.getNumeroAvisosSeleccionados()>0),l(7),N("active",o.modoSeleccion),l(2),E(" ",o.modoSeleccion?"Salir selecci\xF3n":"Seleccionar avisos"," "),l(),_("ngIf",o.getNumeroAvisosSeleccionados()>0),l(),_("ngIf",o.getNumeroAvisosSeleccionados()>0),l(2),_("name",o.isMapView?"list-outline":"map-outline"),l(),E(" ",o.isMapView?"Lista de avisos":"Mapa de avisos"," "),l(4),_("ngIf",!o.isMapView),l(),_("ngIf",o.isMapView),l(),_("ngIf",o.getNumeroAvisosSeleccionados()>0)}}function to(r,g){if(r&1&&(a(0,"div",158)(1,"div",159),d(2," \u{1F9ED} PANEL DE NAVEGACI\xD3N ACTIVO "),c(),C(3,"app-mapbox-navigation-panel",141),c()),r&2){let o=b();l(3),_("waypoints",o.navigationWaypoints)}}function eo(r,g){r&1&&(a(0,"div",160)(1,"div",161),d(2," \u{1F5FA}\uFE0F MAPA DE NAVEGACI\xD3N "),c(),C(3,"div",162),c())}function oo(r,g){if(r&1&&(a(0,"div",163),d(1),C(2,"br"),d(3),C(4,"br"),d(5),c()),r&2){let o=b();l(),E(" DEBUG: Panel activo = ",o.showNavigationPanel,""),l(2),E(" Waypoints = ",o.navigationWaypoints.length,""),l(2),E(" Vista mapa = ",o.isMapView,`
`)}}var ii=(()=>{let g=class g{constructor(n,t,e,i,s,p,m,u,M,y,h,k,A){this.modalController=n,this.cdr=t,this.geocodingService=e,this.avisosService=i,this.clientesService=s,this.cacheService=p,this.imageOptimizationService=m,this.prefetchService=u,this.router=M,this.navigationService=y,this.debugService=h,this.mapboxService=k,this.routeCalculationService=A,this.displayedColumns=["numero","estado","nombre","detalle","fecha","urgente","direccion","acciones"],this.isMapView=!1,this.map=null,this.avisoMarkers=new Map,this.selectedAviso=null,this.avisos=[],this.loading=!0,this.error=null,this.totalAvisos=0,this.paginaActual=1,this.porPagina=20,this.busqueda="",this.ordenarPor="fecha_creacion",this.orden="desc",this.estadoFiltro="",this.avisosSeleccionados=new Set,this.modoSeleccion=!1,this.showNavigationPanel=!1,this.navigationWaypoints=[],this.isMobile=!1,this.isNavigating=!1,this.showFullscreenMap=!1,this.rutaCalculada=null,this.calculandoUbicacion=!1,this.destroy$=new L,this.busquedaSubject=new L,this.dataLoaded=!1,this.Math=Math,V({refreshOutline:ft,alertCircleOutline:pn,searchOutline:Pt,checkmarkCircleOutline:ct,addCircle:tt,navigateOutline:Y,closeCircleOutline:lt,alertCircle:ot,close:st,eyeOutline:pt,createOutline:gt,trashOutline:tn,chevronBackOutline:bn,chevronForwardOutline:_n,mapOutline:Ct,expandOutline:dt,listOutline:bt,play:un,stop:vn,arrowForward:mn,locationOutline:W,speedometerOutline:K,timeOutline:Q,chevronDownCircleOutline:rt,calendarOutline:at,optionsOutline:vt,add:nt,addCircleOutline:et}),Tt(),this.configurarBusqueda()}ngAfterViewInit(){this.isMobile=window.innerWidth<=768,window.addEventListener("resize",()=>{this.isMobile=window.innerWidth<=768}),this.mapboxService.getCurrentNavigation().pipe(I(this.destroy$)).subscribe(n=>{n&&(this.isNavigating=n.isNavigating,console.log("\u{1F9ED} Estado de navegaci\xF3n actualizado:",{navegando:this.isNavigating,pasoActual:n.currentStepIndex+1,totalPasos:n.steps.length}))}),this.probarConexionSupabase(),this.cargarAvisosSimple(),this.suscribirseAAvisos(),this.navigationService.getCurrentRoute().pipe(I(this.destroy$)).subscribe(n=>{n.includes("/avisos")&&!this.dataLoaded&&(console.log("\u{1F9ED} Ruta de avisos detectada, preparando carga..."),setTimeout(()=>{!this.dataLoaded&&!this.destroy$.closed&&this.cargarAvisosSimple()},200))}),this.prefetchService.prefetchCriticalData(),document.addEventListener("fullscreenchange",this.handleFullscreenChange.bind(this)),document.addEventListener("webkitfullscreenchange",this.handleFullscreenChange.bind(this)),document.addEventListener("mozfullscreenchange",this.handleFullscreenChange.bind(this)),document.addEventListener("MSFullscreenChange",this.handleFullscreenChange.bind(this)),window.addEventListener("resize",this.handleResize.bind(this))}probarConexionSupabase(){console.log("\u{1F50D} Iniciando pruebas de conexi\xF3n..."),this.avisosService.debugConnection().pipe(I(this.destroy$)).subscribe({next:n=>{n.success?(console.log("\u2705 Conexi\xF3n b\xE1sica exitosa"),this.cargarAvisos()):console.error("\u274C Error en conexi\xF3n b\xE1sica:",n.error)},error:n=>{console.error("\u274C Error al probar conexi\xF3n:",n)}})}cargarAvisos(){if(this.dataLoaded&&this.avisos.length>0){console.log("\u{1F4CA} Avisos ya cargados, saltando carga...");return}this.loading=!0,this.error=null,console.log("\u{1F504} Cargando avisos..."),this.avisosService.getAvisosActivos(this.paginaActual,this.porPagina,this.busqueda,this.ordenarPor,this.orden,this.estadoFiltro).pipe(I(this.destroy$)).subscribe({next:n=>{console.log("\u2705 Avisos cargados exitosamente:",n.avisos.length,"avisos"),this.avisos=n.avisos,this.totalAvisos=n.total,this.loading=!1,this.dataLoaded=!0,this.isMapView&&this.map&&this.plotAvisosOnMap(),this.cdr.detectChanges()},error:n=>{console.error("\u274C Error al cargar avisos:",n),console.error("\u274C Detalles del error:",{message:n.message,code:n.code,details:n.details,hint:n.hint}),this.error="Error al cargar los avisos. Por favor, int\xE9ntalo de nuevo.",this.loading=!1,this.cdr.detectChanges()}})}cargarAvisosSimple(){console.log("\u{1F50D} Cargando avisos de forma simplificada..."),this.loading=!0,this.error=null,this.avisosService.debugConnection().pipe(I(this.destroy$)).subscribe({next:n=>{n.success?(console.log("\u2705 Conexi\xF3n exitosa, intentando cargar avisos completos..."),this.cargarAvisos()):(console.error("\u274C Conexi\xF3n fall\xF3:",n.error),this.error="Error de conexi\xF3n a la base de datos",this.loading=!1,this.cdr.detectChanges())},error:n=>{console.error("\u274C Error en conexi\xF3n:",n),this.error="Error de conexi\xF3n: "+(n.message||"Desconocido"),this.loading=!1,this.cdr.detectChanges()}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.mapboxService.destroyMap(),this.avisoMarkers.clear(),this.map=null,document.removeEventListener("fullscreenchange",this.handleFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.handleFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.handleFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.handleFullscreenChange.bind(this)),window.removeEventListener("resize",this.handleResize.bind(this)),this.cacheService.clearCache("avisos"),this.busquedaSubject.complete(),console.log("\u{1F9F9} Componente AvisosComponent destruido y recursos limpiados")}suscribirseAAvisos(){this.avisosService.avisos$.pipe(I(this.destroy$)).subscribe(n=>{this.avisos=n})}refrescarAvisos(){this.cargarAvisos()}handleRefresh(n){return w(this,null,function*(){try{console.log("\u{1F504} Iniciando refresh manual..."),console.log("\u{1F4F1} Usuario desliz\xF3 hacia abajo para actualizar");let t=this.loading;this.loading=!1,this.cacheService.clearCache("avisos"),console.log("\u{1F5D1}\uFE0F Cach\xE9 limpiado"),yield this.recargarAvisosSinCache(),console.log("\u{1F4CA} Avisos recargados"),this.isMapView&&this.map&&(this.plotAvisosOnMap(),console.log("\u{1F5FA}\uFE0F Marcadores del mapa actualizados")),this.loading=t,console.log("\u2705 Refresh completado exitosamente"),console.log("\u{1F4C8} Total de avisos actualizados:",this.totalAvisos),n.target.complete()}catch(t){console.error("\u274C Error durante el refresh:",t),this.error="Error al actualizar los avisos. Por favor, int\xE9ntalo de nuevo.",this.loading=!1,n.target.complete()}})}recargarAvisosSinCache(){return w(this,null,function*(){return new Promise((n,t)=>{this.loading=!0,this.error=null,this.dataLoaded=!1,this.cacheService.clearCache("avisos"),this.avisosService.getAvisosActivos(this.paginaActual,this.porPagina,this.busqueda,this.ordenarPor,this.orden,this.estadoFiltro).pipe(I(this.destroy$)).subscribe({next:e=>{this.avisos=e.avisos,this.totalAvisos=e.total,this.loading=!1,this.dataLoaded=!0,this.isMapView&&this.map&&this.plotAvisosOnMap(),n()},error:e=>{console.error("Error al cargar avisos:",e),this.error="Error al cargar los avisos. Por favor, int\xE9ntalo de nuevo.",this.loading=!1,t(e)}})})})}cambiarPagina(n){n>=1&&n<=this.obtenerTotalPaginas()&&(this.paginaActual=n,this.cargarAvisos())}obtenerTotalPaginas(){return Math.ceil(this.totalAvisos/this.porPagina)}obtenerRangoPaginas(){let n=this.obtenerTotalPaginas(),t=this.paginaActual,e=2,i=Math.max(1,t-e),s=Math.min(n,t+e);s-i<4&&(i===1?s=Math.min(n,i+4):i=Math.max(1,s-4));let p=[];for(let m=i;m<=s;m++)p.push(m);return p}puedeAnterior(){return this.paginaActual>1}puedeSiguiente(){return this.paginaActual<this.obtenerTotalPaginas()}paginaAnterior(){this.puedeAnterior()&&this.cambiarPagina(this.paginaActual-1)}paginaSiguiente(){this.puedeSiguiente()&&this.cambiarPagina(this.paginaActual+1)}primeraPagina(){this.cambiarPagina(1)}ultimaPagina(){this.cambiarPagina(this.obtenerTotalPaginas())}handleResize(){let n=document.querySelector(".btn-close-expanded");if(n&&window.innerWidth<=992){let t=this.getHeaderHeight();n.style.top=`${t+10}px`}}plotAvisosOnMap(){if(!this.map){console.log("Mapa no disponible para pintar marcadores");return}console.log("Pintando marcadores en el mapa..."),this.avisoMarkers.forEach(M=>M.remove()),this.avisoMarkers.clear();let n=this.getAvisosParaMapa();if(!n||n.length===0){console.log("No hay avisos para mostrar en el mapa");return}let t=new Map,e=0,i=n.length,s=yn.maxConcurrentRequests,p=0,m=[],u=()=>{if(p>=s||m.length===0)return;let{aviso:M,fullAddress:y}=m.shift();p++,this.geocodingService.geocode(y).subscribe({next:h=>{h&&this.map&&(t.set(y,h),this.addMarkerToMap(M,h),console.log(`Marcador a\xF1adido para aviso ${M.id}`)),e++,p--,u()},error:h=>{console.error(`Error al geocodificar direcci\xF3n para aviso ${M.id}:`,h),e++,p--,u()}})};n.forEach((M,y)=>{if(!M.direccion_cliente_aviso){console.log(`Aviso ${M.id} no tiene direcci\xF3n`),e++;return}let h=`${M.direccion_cliente_aviso}, Espa\xF1a`;if(t.has(h)){let k=t.get(h);this.addMarkerToMap(M,k),e++;return}setTimeout(()=>{m.push({aviso:M,fullAddress:h}),u()},y*yn.requestDelay)}),this.avisosSeleccionados.size>1?setTimeout(()=>{this.crearLineasDeRuta()},n.length*200+1e3):this.showNavigationPanel=!1}addMarkerToMap(n,t){if(!this.map)return;let e=this.estaSeleccionado(n),i=e?"#10B981":"#4F46E5",s=e?"large":"medium",p=this.mapboxService.addMarker({latitude:t[1],longitude:t[0],address:n.direccion_cliente_aviso},{label:`${n.nombre_cliente_aviso} - ${n.descripcion_problema}`,color:i,size:s});p.getElement().addEventListener("click",()=>{this.centrarAvisoEnMapa(n)}),this.avisoMarkers.set(n.id,p)}manejarClicFilaMapa(n,t){t&&t.target&&t.target.tagName==="INPUT"||(t&&(t.preventDefault(),t.stopPropagation()),this.modoSeleccion?this.toggleSeleccionAviso(n,t):(this.modoSeleccion=!0,this.toggleSeleccionAviso(n,t)))}centrarAvisoEnMapa(n,t){t&&(t.preventDefault(),t.stopPropagation()),this.selectedAviso=n.id;let e=this.avisoMarkers.get(n.id);if(e&&this.map){let i=e.getLngLat();this.map.flyTo({center:[i.lng,i.lat],zoom:15,duration:1e3}),setTimeout(()=>{e.togglePopup()},500)}}abrirEnMapasNativos(n,t){if(t&&(t.preventDefault(),t.stopPropagation()),!n.direccion_cliente_aviso){console.warn("El aviso no tiene direcci\xF3n");return}let e=this.avisoMarkers.get(n.id),i;if(e){let s=e.getLngLat();i={latitude:s.lat,longitude:s.lng,address:n.direccion_cliente_aviso}}else i={latitude:0,longitude:0,address:n.direccion_cliente_aviso};this.mapboxService.openGoogleMaps(i,{label:n.nombre_cliente_aviso})}abrirEnGoogleMaps(n,t){this.abrirEnMapasNativos(n,t)}abrirEnAppleMaps(n,t){if(t&&(t.preventDefault(),t.stopPropagation()),!n.direccion_cliente_aviso){console.warn("El aviso no tiene direcci\xF3n");return}let e=this.avisoMarkers.get(n.id),i;if(e){let s=e.getLngLat();i={latitude:s.lat,longitude:s.lng,address:n.direccion_cliente_aviso}}else i={latitude:0,longitude:0,address:n.direccion_cliente_aviso};this.mapboxService.openAppleMaps(i,{label:n.nombre_cliente_aviso})}initMap(){this.isMapView&&!this.map&&setTimeout(()=>{document.getElementById("map")&&!this.map?(console.log("Inicializando mapa con Mapbox..."),this.map=this.mapboxService.initializeMap("map",{center:[-3.70379,40.416775],zoom:12}),console.log("Mapa Mapbox cargado correctamente"),this.plotAvisosOnMap()):this.isMapView&&!this.map&&(console.log("Contenedor del mapa no disponible, reintentando..."),setTimeout(()=>{this.initMap()},200))},100)}toggleView(){this.isMapView=!this.isMapView,this.isMapView?setTimeout(()=>{this.initMap()},100):this.map&&(this.mapboxService.destroyMap(),this.avisoMarkers.clear(),this.map=null),this.cdr.detectChanges()}abrirModalCrearAviso(n){return w(this,null,function*(){let t=yield this.modalController.create({component:hn,cssClass:"modal-crear-aviso",componentProps:n?{clienteData:n}:{}});yield t.present();let{data:e,role:i}=yield t.onWillDismiss();if(i==="crear-cliente"){let s=yield this.modalController.create({component:yt,cssClass:"modal-crear-cliente",showBackdrop:!0,backdropDismiss:!0});yield s.present();let{data:p,role:m}=yield s.onWillDismiss();m==="confirm"&&p?(this.loading=!0,this.error=null,this.clientesService.crearCliente(p).subscribe({next:u=>{console.log("\u2705 Cliente creado exitosamente:",u),this.loading=!1,this.abrirModalCrearAviso(u)},error:u=>{console.error("\u274C Error al crear cliente:",u),this.loading=!1,this.error="Error al crear el cliente: "+(u.message||"Error desconocido"),this.abrirModalCrearAviso(n)}})):this.abrirModalCrearAviso(n)}else if(e){console.log("Datos del formulario:",e),this.loading=!0,this.error=null;let s={cliente_id:e.cliente||(n==null?void 0:n.id)||"cliente-temp-id",nombre_cliente_aviso:e.nombreContacto||(n==null?void 0:n.nombreContacto)||"Cliente",direccion_cliente_aviso:e.direccionLocal||(n==null?void 0:n.direccionLocal)||"",telefono_cliente_aviso:e.telefono||(n==null?void 0:n.telefono)||"",nombre_contacto:e.nombreContacto||(n==null?void 0:n.nombreContacto)||"",tipo:e.tipo||"correctivo",descripcion_problema:e.descripcion||"",es_urgente:e.esUrgente||!1,urgencia:e.esUrgente?"Alta":"Normal"};this.avisosService.crearAviso(s).pipe(I(this.destroy$)).subscribe({next:p=>{console.log("Aviso creado exitosamente:",p),e.imagenes&&e.imagenes.length>0?new Promise(u=>{let M=0,y=e.imagenes.length;e.imagenes.forEach(h=>{this.avisosService.subirFoto(p.id,h).pipe(I(this.destroy$)).subscribe({next:k=>{console.log("Foto subida:",k),M++,M===y&&u()},error:k=>{console.error("Error al subir foto:",k),M++,M===y&&u()}})})}).then(()=>{this.loading=!1,this.recargarAvisosSinCache()}):(this.loading=!1,this.recargarAvisosSinCache())},error:p=>{console.error("Error al crear aviso:",p),this.error="Error al crear el aviso. Por favor, int\xE9ntalo de nuevo.",this.loading=!1}})}})}toggleFullscreen(){return w(this,null,function*(){let n=document.querySelector(".map-display-container");if(!n){console.warn("Contenedor del mapa no encontrado");return}try{!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?yield document.exitFullscreen():document.webkitExitFullscreen?yield document.webkitExitFullscreen():document.mozCancelFullScreen?yield document.mozCancelFullScreen():document.msExitFullscreen&&(yield document.msExitFullscreen()):n.requestFullscreen?yield n.requestFullscreen():n.webkitRequestFullscreen?yield n.webkitRequestFullscreen():n.mozRequestFullScreen?yield n.mozRequestFullScreen():n.msRequestFullscreen?yield n.msRequestFullscreen():(console.warn("Pantalla completa no soportada en este navegador"),this.expandMap())}catch(t){console.error("Error al cambiar pantalla completa:",t),this.expandMap()}})}expandMap(){let n=document.querySelector(".map-display-container"),t=document.querySelector(".map-list-container");if(n&&t){t.style.display="none",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.zIndex="9999";let e=document.createElement("button");if(e.innerHTML='<ion-icon name="close"></ion-icon>',e.className="btn-close-expanded",e.onclick=()=>this.closeExpandedMap(),window.innerWidth<=992){let i=this.getHeaderHeight();e.style.top=`${i+10}px`,e.style.right="16px"}n.appendChild(e),this.map&&setTimeout(()=>this.map.resize(),100)}}getHeaderHeight(){let n=document.querySelector("ion-header")||document.querySelector(".header")||document.querySelector("[data-header]")||document.querySelector("header")||document.querySelector(".topbar")||document.querySelector(".main-layout-header");return n?n.getBoundingClientRect().height:window.innerWidth<=480?60:window.innerWidth<=768?70:80}closeExpandedMap(){let n=document.querySelector(".map-display-container"),t=document.querySelector(".map-list-container");if(n&&t){t.style.display="flex",n.style.position="",n.style.top="",n.style.left="",n.style.width="",n.style.height="",n.style.zIndex="";let e=n.querySelector(".btn-close-expanded");e&&e.remove(),this.map&&setTimeout(()=>this.map.resize(),100)}}handleFullscreenChange(){!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)||this.closeExpandedMap()}configurarBusqueda(){this.busquedaSubject.pipe(I(this.destroy$),zn(500),An()).subscribe(n=>{this.busqueda=n,this.paginaActual=1,this.cargarAvisos()})}toggleModoSeleccion(){this.modoSeleccion=!this.modoSeleccion,this.modoSeleccion||this.avisosSeleccionados.clear(),this.actualizarMapaConSeleccion()}toggleSeleccionAviso(n,t){t&&t.target&&t.target.tagName!=="INPUT"&&(t.preventDefault(),t.stopPropagation());let e=n.id;this.avisosSeleccionados.has(e)?this.avisosSeleccionados.delete(e):this.avisosSeleccionados.add(e),this.actualizarMapaConSeleccion()}estaSeleccionado(n){return this.avisosSeleccionados.has(n.id)}getNumeroAvisosSeleccionados(){return this.avisosSeleccionados.size}limpiarSeleccion(){this.avisosSeleccionados.clear(),this.actualizarMapaConSeleccion(),this.ocultarPanelNavegacion()}mostrarPanelNavegacion(){this.showNavigationPanel=!0}ocultarPanelNavegacion(){this.showNavigationPanel=!1,this.mapboxService.stopNavigation()}toggleNavigationPanel(){this.showNavigationPanel=!this.showNavigationPanel,console.log("Panel de navegaci\xF3n:",this.showNavigationPanel?"Mostrado":"Oculto"),console.log("Waypoints:",this.navigationWaypoints)}getAvisosParaMapa(){return this.avisosSeleccionados.size===0?this.avisos:this.avisos.filter(n=>this.avisosSeleccionados.has(n.id))}actualizarMapaConSeleccion(){this.isMapView&&this.map&&this.plotAvisosOnMap(),this.avisosSeleccionados.size>0?this.calcularRutaSeleccionada():this.rutaCalculada=null,this.cdr.detectChanges()}calcularRutaSeleccionada(){return w(this,null,function*(){if(this.avisosSeleccionados.size===0){this.rutaCalculada=null;return}let n=this.avisos.filter(t=>this.avisosSeleccionados.has(t.id));this.rutaCalculada={distancia:"Cargando...",tiempo:"Calculando...",paradas:n.length,tieneUbicacion:!1},this.calculandoUbicacion=!0,this.cdr.detectChanges();try{let t=yield this.routeCalculationService.obtenerUbicacionActual();this.calculandoUbicacion=!1,this.rutaCalculada={distancia:"Calculando ruta...",tiempo:"Calculando ruta...",paradas:n.length,tieneUbicacion:!!t},this.cdr.detectChanges(),this.routeCalculationService.calcularRuta(t,n).subscribe({next:e=>{this.rutaCalculada=e,this.cdr.detectChanges()},error:e=>{console.error("Error calculando ruta:",e),this.rutaCalculada={distancia:"Error al calcular",tiempo:"Error al calcular",paradas:n.length,tieneUbicacion:!!t},this.cdr.detectChanges()}})}catch(t){console.error("Error obteniendo ubicaci\xF3n:",t),this.calculandoUbicacion=!1,this.rutaCalculada={distancia:"Permitir ubicaci\xF3n",tiempo:"Permitir ubicaci\xF3n",paradas:n.length,tieneUbicacion:!1},this.cdr.detectChanges()}})}crearLineasDeRuta(){if(!this.map||this.avisosSeleccionados.size<2)return;console.log("\u{1F6E3}\uFE0F Creando ruta real con Mapbox para",this.avisosSeleccionados.size,"avisos seleccionados");let n=[];if(this.avisosSeleccionados.forEach(t=>{let e=this.avisoMarkers.get(t);if(e){let i=e.getLngLat(),s=this.avisos.find(p=>p.id===t);n.push({latitude:i.lat,longitude:i.lng,address:s==null?void 0:s.direccion_cliente_aviso})}}),n.length<2){console.log("\u26A0\uFE0F No hay suficientes coordenadas para crear la ruta");return}this.navigationWaypoints=n,this.mapboxService.createRoute(n).then(t=>{console.log("\u2705 Ruta real creada con Mapbox:",{distancia:this.mapboxService.formatDistance(t.totalDistance),duracion:this.mapboxService.formatTime(t.totalDuration),pasos:t.steps.length})}).catch(t=>{console.error("\u274C Error al crear ruta con Mapbox:",t),this.error="Error al crear la ruta. Verifica tu conexi\xF3n a internet."})}onBuscar(n){this.busquedaSubject.next(n)}verDetalleAviso(n){n.id&&this.router.navigate(["/ver-aviso",n.id])}editarAviso(n){return w(this,null,function*(){if(!(n!=null&&n.id)){console.error("No se puede editar el aviso: ID no v\xE1lido");return}try{console.log("Abriendo modal de edici\xF3n para aviso:",n.id);let t=yield this.modalController.create({component:hn,cssClass:"modal-crear-aviso",componentProps:{modoEdicion:!0,avisoExistente:n}});yield t.present();let{data:e,role:i}=yield t.onWillDismiss();if(i==="confirm"&&e)try{console.log("Datos del formulario de edici\xF3n:",e);let s={tipo:e.tipo,nombre_cliente_aviso:e.nombreContacto,direccion_cliente_aviso:e.direccionLocal,telefono_cliente_aviso:e.telefono,nombre_contacto:e.nombreContacto,descripcion_problema:e.descripcion,es_urgente:e.esUrgente,urgencia:e.esUrgente?"Alta":"Normal"},p=e.id||n.id;this.loading=!0,this.avisosService.actualizarAviso(p,s).pipe(I(this.destroy$)).subscribe({next:m=>{console.log("Aviso actualizado exitosamente:",m),this.loading=!1,console.log("\u2705 Aviso actualizado exitosamente"),this.recargarAvisosSinCache()},error:m=>{console.error("Error al actualizar aviso:",m),this.loading=!1,this.error=m.message||"Error al actualizar el aviso. Por favor, int\xE9ntalo de nuevo."}})}catch(s){console.error("Error al procesar la edici\xF3n:",s),this.error="Error al procesar la edici\xF3n. Por favor, int\xE9ntalo de nuevo."}}catch(t){console.error("Error al abrir el modal de edici\xF3n:",t),this.error="Error al abrir el modal de edici\xF3n. Por favor, int\xE9ntalo de nuevo."}})}eliminarAviso(n){return w(this,null,function*(){this.loading=!0,this.error=null,this.avisosService.verificarDependenciasAviso(n.id).pipe(I(this.destroy$)).subscribe({next:t=>w(this,null,function*(){if(this.loading=!1,!t.puedeEliminar){let p=t.dependencias.join(", ");this.error=`No se puede eliminar el aviso porque tiene los siguientes elementos asociados: ${p}. Debes eliminar primero estos elementos o contactar al administrador.`;return}let e=yield this.modalController.create({component:zt,cssClass:"modal-confirmar-eliminacion",showBackdrop:!0,backdropDismiss:!0,componentProps:{aviso:n,dependencias:t.dependencias}});yield e.present();let{data:i,role:s}=yield e.onWillDismiss();s==="confirm"&&(i!=null&&i.confirmado)&&(this.loading=!0,this.error=null,this.avisosService.eliminarAviso(n.id).pipe(I(this.destroy$)).subscribe({next:()=>{console.log("Aviso eliminado exitosamente"),this.loading=!1,this.recargarAvisosSinCache()},error:p=>{console.error("Error al eliminar aviso:",p),p.code==="23503"?p.message.includes("presupuestos")?this.error="No se puede eliminar el aviso porque tiene presupuestos asociados. Elimina primero los presupuestos.":p.message.includes("facturas")?this.error="No se puede eliminar el aviso porque tiene facturas asociadas. Elimina primero las facturas.":p.message.includes("albaranes")?this.error="No se puede eliminar el aviso porque tiene albaranes asociados. Elimina primero los albaranes.":this.error="No se puede eliminar el aviso porque tiene datos relacionados. Contacta al administrador.":this.error="Error al eliminar el aviso. Por favor, int\xE9ntalo de nuevo.",this.loading=!1}}))}),error:t=>{console.error("Error al verificar dependencias:",t),this.error="Error al verificar las dependencias del aviso. Por favor, int\xE9ntalo de nuevo.",this.loading=!1}})})}getCurrentStep(){return this.mapboxService.getCurrentStep()}getUpcomingSteps(){let n=this.mapboxService.getCurrentNavigationValue();if(!(n!=null&&n.steps))return[];let t=n.currentStepIndex||0;return n.steps.slice(t+1,t+4)}getManeuverIcon(n){return this.mapboxService.getManeuverIcon(n)}formatDistance(n){return this.mapboxService.formatDistance(n)}startNavigation(){if(this.navigationWaypoints.length<2){console.warn("Se necesitan al menos 2 waypoints para la navegaci\xF3n");return}console.log("\u{1F680} Iniciando navegaci\xF3n desde componente avisos..."),this.mapboxService.startNavigation(this.navigationWaypoints)}stopNavigation(){console.log("\u{1F6D1} Deteniendo navegaci\xF3n desde componente avisos..."),this.mapboxService.stopNavigation()}nextStep(){console.log("\u27A1\uFE0F Siguiente paso desde componente avisos..."),this.mapboxService.nextStep()}abrirModalOpcionesNavegacion(){return w(this,null,function*(){if(this.avisosSeleccionados.size<1){console.warn("Se necesita al menos 1 aviso seleccionado para la navegaci\xF3n");return}let n=this.avisos.filter(i=>this.avisosSeleccionados.has(i.id));console.log("\u{1F680} Abriendo modal de navegaci\xF3n profesional para",n.length,"avisos");let t=yield this.modalController.create({component:Nt,cssClass:"modal-opciones-navegacion",componentProps:{avisosSeleccionados:n}});yield t.present();let{data:e}=yield t.onWillDismiss();if(e!=null&&e.opcion)switch(console.log("\u{1F3AF} Opci\xF3n de navegaci\xF3n seleccionada:",e.opcion),e.opcion){case"google":this.abrirRutaEnGoogleMaps();break;case"apple":this.abrirRutaEnAppleMaps();break;case"app":e.waypointsOptimizados?this.abrirModalMapaNavegacionConWaypointsOptimizados(e.waypointsOptimizados):this.abrirModalMapaNavegacion();break}})}abrirModalMapaNavegacionConWaypointsOptimizados(n){return w(this,null,function*(){if(this.avisosSeleccionados.size<1){console.warn("Se necesita al menos 1 aviso seleccionado");return}console.log("\u{1F5FA}\uFE0F Abriendo modal de mapa de navegaci\xF3n con waypoints optimizados...");try{let t=yield this.obtenerUbicacionActual();if(!t){console.error("\u274C No se pudo obtener la ubicaci\xF3n actual del usuario"),this.error="No se pudo obtener tu ubicaci\xF3n actual. Verifica que tengas habilitado el GPS.";return}console.log("\u{1F4CD} Ubicaci\xF3n actual obtenida:",t),console.log("\u2705 Usando waypoints optimizados:",n.map(p=>p.direccion_cliente_aviso||p.direccion)),console.log("\u{1F50D} Waypoints optimizados recibidos:",{cantidad:n.length,datos:n.map(p=>({direccion:p.direccion_cliente_aviso||p.direccion,id:p.id}))});let e=[{latitude:t.latitude,longitude:t.longitude,address:"Tu ubicaci\xF3n actual"}];for(let p of n){let m=p.direccion_cliente_aviso||p.direccion;if(m)try{let u=yield this.routeCalculationService.obtenerCoordenadasExactas(m);u?(e.push({latitude:u.lat,longitude:u.lng,address:m}),console.log(`\u2705 Waypoint optimizado geocodificado con Mapbox: ${m} -> ${u.lat}, ${u.lng}`)):console.warn(`\u26A0\uFE0F No se pudo geocodificar waypoint optimizado con Mapbox: ${m}`)}catch(u){console.error(`\u274C Error geocodificando waypoint optimizado con Mapbox ${m}:`,u)}}if(e.length<2){console.error("\u274C No se pudieron geocodificar suficientes direcciones"),this.error="No se pudieron geocodificar las direcciones de los avisos seleccionados. Verifica que las direcciones sean v\xE1lidas.";return}let{ModalMapaNavegacionComponent:i}=yield import("./chunk-3W6PNB64.js");yield(yield this.modalController.create({component:i,cssClass:"modal-mapa-navegacion-fullscreen",componentProps:{waypoints:e}})).present(),console.log("\u2705 Modal de mapa con waypoints optimizados presentado")}catch(t){console.error("\u274C Error al abrir modal de mapa con waypoints optimizados:",t),this.error="Error al abrir la navegaci\xF3n. Int\xE9ntalo de nuevo."}})}abrirModalMapaNavegacion(){return w(this,null,function*(){if(this.avisosSeleccionados.size<1){console.warn("Se necesita al menos 1 aviso seleccionado");return}console.log("\u{1F5FA}\uFE0F Abriendo modal de mapa de navegaci\xF3n...");try{let n=yield this.obtenerUbicacionActual();if(!n){console.error("\u274C No se pudo obtener la ubicaci\xF3n actual del usuario"),this.error="No se pudo obtener tu ubicaci\xF3n actual. Verifica que tengas habilitado el GPS.";return}console.log("\u{1F4CD} Ubicaci\xF3n actual obtenida:",n);let t=[{latitude:n.latitude,longitude:n.longitude,address:"Tu ubicaci\xF3n actual"}];for(let s of this.avisosSeleccionados){let p=this.avisos.find(m=>m.id===s);if(p&&p.direccion_cliente_aviso){let m=this.avisoMarkers.get(s);if(m){let u=m.getLngLat();t.push({latitude:u.lat,longitude:u.lng,address:p.direccion_cliente_aviso})}else try{let u=yield this.routeCalculationService.obtenerCoordenadasExactas(p.direccion_cliente_aviso);if(u)t.push({latitude:u.lat,longitude:u.lng,address:p.direccion_cliente_aviso}),console.log(`\u2705 Direcci\xF3n geocodificada con Mapbox para aviso ${s}:`,u);else{console.warn(`\u26A0\uFE0F No se pudo geocodificar la direcci\xF3n del aviso ${s} con Mapbox: ${p.direccion_cliente_aviso}`);continue}}catch(u){console.error(`\u274C Error al geocodificar aviso ${s} con Mapbox:`,u);continue}}}if(console.log("\u{1F3AF} Waypoints para navegaci\xF3n:",t.length,"puntos"),t.length<2){console.error("\u274C No se encontraron destinos v\xE1lidos para la navegaci\xF3n"),this.error="No se pudieron geocodificar las direcciones de los avisos seleccionados. Verifica que las direcciones sean v\xE1lidas.";return}let{ModalMapaNavegacionComponent:e}=yield import("./chunk-3W6PNB64.js");yield(yield this.modalController.create({component:e,cssClass:"modal-mapa-navegacion-fullscreen",componentProps:{waypoints:t}})).present(),console.log("\u2705 Modal de mapa presentado")}catch(n){console.error("\u274C Error al abrir modal de mapa:",n),this.error="Error al preparar la navegaci\xF3n. Verifica tu conexi\xF3n a internet y el GPS."}})}cerrarModalMapaNavegacion(){console.log("\u274C Cerrando modal de mapa de navegaci\xF3n..."),this.showFullscreenMap=!1,this.mapboxService.stopNavigation()}iniciarNavegacionProfesional(){return w(this,null,function*(){if(this.avisosSeleccionados.size<1){console.warn("Se necesita al menos 1 aviso seleccionado");return}console.log("\u{1F680} Iniciando navegaci\xF3n profesional...");try{let n=yield this.obtenerUbicacionActual();if(!n){console.error("\u274C No se pudo obtener la ubicaci\xF3n actual del usuario"),this.error="No se pudo obtener tu ubicaci\xF3n actual. Verifica que tengas habilitado el GPS.";return}console.log("\u{1F4CD} Ubicaci\xF3n actual obtenida:",n);let t=[{latitude:n.latitude,longitude:n.longitude,address:"Tu ubicaci\xF3n actual"}];for(let i of this.avisosSeleccionados){let s=this.avisos.find(p=>p.id===i);if(s&&s.direccion_cliente_aviso){let p=this.avisoMarkers.get(i);if(p){let m=p.getLngLat();t.push({latitude:m.lat,longitude:m.lng,address:s.direccion_cliente_aviso})}else try{let m=yield this.routeCalculationService.obtenerCoordenadasExactas(s.direccion_cliente_aviso);if(m)t.push({latitude:m.lat,longitude:m.lng,address:s.direccion_cliente_aviso}),console.log(`\u2705 Direcci\xF3n geocodificada con Mapbox para aviso ${i}:`,m);else{console.warn(`\u26A0\uFE0F No se pudo geocodificar la direcci\xF3n del aviso ${i} con Mapbox: ${s.direccion_cliente_aviso}`);continue}}catch(m){console.error(`\u274C Error al geocodificar aviso ${i} con Mapbox:`,m);continue}}}if(console.log("\u{1F3AF} Waypoints para navegaci\xF3n:",t.length,"puntos"),console.log("\u{1F4CD} Punto de partida:",t[0]),console.log("\u{1F3AF} Destinos:",t.slice(1)),t.length<2){console.error("\u274C No se encontraron destinos v\xE1lidos para la navegaci\xF3n"),this.error="No se pudieron geocodificar las direcciones de los avisos seleccionados. Verifica que las direcciones sean v\xE1lidas.";return}let e=yield this.mapboxService.createRoute(t);console.log("\u2705 Ruta profesional creada:",e),this.showNavigationPanel=!0,this.navigationWaypoints=t,console.log("\u{1F3AF} Panel de navegaci\xF3n activado:",this.showNavigationPanel),console.log("\u{1F3AF} Waypoints para panel:",this.navigationWaypoints),this.cdr.detectChanges(),this.isMapView||(console.log("\u{1F5FA}\uFE0F Inicializando mapa para navegaci\xF3n..."),setTimeout(()=>{document.getElementById("map")?(this.map=this.mapboxService.initializeMap("map",{center:[n.longitude,n.latitude],zoom:15}),setTimeout(()=>{this.plotAvisosOnMap()},500)):console.error("\u274C Contenedor del mapa no encontrado despu\xE9s del delay")},100)),this.mapboxService.startNavigation(t).subscribe(i=>{i&&console.log("\u{1F9ED} Navegaci\xF3n profesional activa:",{pasoActual:i.currentStepIndex+1,totalPasos:i.steps.length,navegando:i.isNavigating,progreso:`${i.progress.toFixed(1)}%`})})}catch(n){console.error("\u274C Error al iniciar navegaci\xF3n profesional:",n),this.error="Error al crear la ruta de navegaci\xF3n. Verifica tu conexi\xF3n a internet y el GPS."}})}obtenerUbicacionActual(){return w(this,null,function*(){return new Promise(n=>{if(!navigator.geolocation){console.error("\u274C Geolocalizaci\xF3n no soportada"),n(null);return}console.log("\u{1F4CD} Obteniendo ubicaci\xF3n actual del usuario...");let t={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e4};navigator.geolocation.getCurrentPosition(e=>{let i={latitude:e.coords.latitude,longitude:e.coords.longitude};console.log("\u2705 Ubicaci\xF3n actual obtenida:",i),n(i)},e=>{console.error("\u274C Error al obtener ubicaci\xF3n:",e),n(null)},t)})})}abrirRutaEnGoogleMaps(){if(this.avisosSeleccionados.size<1){console.warn("Se necesita al menos 1 aviso seleccionado");return}let n=this.avisos.filter(t=>this.avisosSeleccionados.has(t.id));console.log("Abriendo ruta en Google Maps para",n.length,"avisos")}abrirRutaEnAppleMaps(){if(this.avisosSeleccionados.size<1){console.warn("Se necesita al menos 1 aviso seleccionado");return}let n=this.avisos.filter(t=>this.avisosSeleccionados.has(t.id));console.log("Abriendo ruta en Apple Maps para",n.length,"avisos")}};g.\u0275fac=function(t){return new(t||g)(z(G),z(Tn),z(Vt),z(dn),z(Mn),z(Jn),z(Rt),z($t),z(Rn),z(kt),z(Dt),z(X),z(fn))},g.\u0275cmp=R({type:g,selectors:[["app-avisos"]],decls:9,vars:6,consts:[["slot","fixed",3,"ionRefresh"],["pullingIcon","chevron-down-circle-outline","pullingText","Desliza hacia abajo para actualizar","refreshingSpinner","circles","refreshingText","Actualizando avisos..."],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","dashboard-table",4,"ngIf"],["class","global-navigation-panel",4,"ngIf"],["class","navigation-map-container",4,"ngIf"],["style","position: fixed; top: 10px; left: 10px; background: red; color: white; padding: 10px; z-index: 10000; border-radius: 5px;",4,"ngIf"],[1,"loading-state"],[1,"loading-spinner"],["name","refresh-outline",1,"spinning"],[1,"error-state"],[1,"error-message"],["name","alert-circle-outline"],[1,"btn-retry",3,"click"],["name","refresh-outline"],[1,"dashboard-table"],[1,"table-header"],[1,"table-header-container"],[1,"table-header-left","desktop-only"],[1,"table-title"],[1,"table-meta"],["class","seleccionados-info",4,"ngIf"],[1,"mobile-search-nav"],[1,"mobile-search"],["type","text","placeholder","Buscar aviso..."],["name","search-outline"],[1,"mobile-buttons"],["title","Modo selecci\xF3n",1,"btn-seleccion",3,"click"],["name","checkmark-circle-outline"],[1,"btn-map",3,"click"],[3,"name"],[1,"btn-add",3,"click"],["name","add-circle"],["class","mobile-navigation-button",4,"ngIf"],[1,"table-search","desktop-only"],["type","text","placeholder","Buscar..."],[1,"header-actions"],["class","btn-limpiar","title","Limpiar selecci\xF3n",3,"click",4,"ngIf"],["class","btn-navegacion-desktop","title","Opciones de navegaci\xF3n",3,"click",4,"ngIf"],[4,"ngIf"],["class","route-info-panel",4,"ngIf"],[1,"seleccionados-info"],["class","ruta-info",4,"ngIf"],[1,"ruta-info"],[1,"mobile-navigation-button"],[1,"btn-navegacion-mobile",3,"click"],["name","navigate-outline"],["title","Limpiar selecci\xF3n",1,"btn-limpiar",3,"click"],["name","close-circle-outline"],["title","Opciones de navegaci\xF3n",1,"btn-navegacion-desktop",3,"click"],["class","compact-avisos-table",4,"ngIf"],["class","no-data-container",4,"ngIf"],["class","table-pagination",4,"ngIf"],[1,"compact-avisos-table"],[1,"avisos-table"],[1,"header-row"],["class","header-cell",4,"ngIf"],[1,"header-cell"],[1,"header-cell","desktop-only"],[1,"table-body"],["class","aviso-row","style","justify-content: start;",3,"ngClass",4,"ngFor","ngForOf"],[1,"aviso-row",2,"justify-content","start",3,"ngClass"],["class","aviso-cell seleccion-cell",4,"ngIf"],[1,"aviso-cell","numero-aviso"],[1,"aviso-cell","estado-aviso","desktop-only",2,"justify-content","start"],[1,"badge",3,"ngClass"],[1,"aviso-cell","nombre-cliente"],[1,"aviso-cell","detalle-servicio"],[1,"detalle-texto",3,"title"],[1,"aviso-cell","fecha-aviso","desktop-only"],[1,"aviso-cell","urgente-aviso","desktop-only"],["name","alert-circle","class","urgente-icon","title","Aviso urgente",4,"ngIf"],["name","close","class","no-urgente-icon","title","No urgente",4,"ngIf"],[1,"aviso-cell","acciones"],["title","Ver detalles",1,"btn-ver",3,"click"],["name","eye-outline"],["title","Abrir en mapas nativos",1,"btn-navegar",3,"click"],["title","Editar aviso",1,"btn-editar",3,"click"],["name","create-outline"],["title","Eliminar aviso",1,"btn-eliminar",3,"click"],["name","trash-outline"],[1,"aviso-cell","seleccion-cell"],["type","checkbox",1,"checkbox-seleccion",3,"change","click","checked"],["name","alert-circle","title","Aviso urgente",1,"urgente-icon"],["name","close","title","No urgente",1,"no-urgente-icon"],[1,"no-data-container"],[1,"no-data-message"],[1,"btn-create",3,"click"],[1,"table-pagination"],[1,"pagination-info"],[1,"pagination"],["title","Primera p\xE1gina",1,"pagination-btn",3,"click","disabled"],["name","chevron-back-outline"],["title","P\xE1gina anterior",1,"pagination-btn",3,"click","disabled"],[4,"ngFor","ngForOf"],["title","P\xE1gina siguiente",1,"pagination-btn",3,"click","disabled"],["name","chevron-forward-outline"],["title","\xDAltima p\xE1gina",1,"pagination-btn",3,"click","disabled"],[1,"pagination-btn",3,"click"],["class","map-view-container",4,"ngIf"],[1,"map-view-container"],[1,"map-list-container"],[1,"map-avisos-table"],["class","aviso-row",3,"ngClass","title","click",4,"ngFor","ngForOf"],[1,"map-display-container"],["title","Pantalla completa",1,"btn-fullscreen",3,"click"],["name","expand-outline"],["title","Volver a lista",1,"btn-back-to-list",3,"click"],["name","list-outline"],[1,"desktop-only"],["class","mobile-navigation",4,"ngIf"],["class","desktop-navigation",4,"ngIf"],["id","map"],[1,"aviso-row",3,"click","ngClass","title"],["title","Ir al punto en el mapa",1,"btn-mapa",3,"click"],["name","map-outline"],[1,"mobile-navigation"],[1,"mobile-header"],["class","current-instruction",4,"ngIf"],[1,"mobile-controls"],["color","success","size","small",3,"click",4,"ngIf"],["color","danger","size","small",3,"click",4,"ngIf"],["color","warning","size","small",3,"click",4,"ngIf"],["class","upcoming-steps",4,"ngIf"],[1,"current-instruction"],[1,"instruction-row"],[1,"maneuver-icon"],[1,"instruction-text"],[1,"instruction-distance"],["color","success","size","small",3,"click"],["name","play"],["color","danger","size","small",3,"click"],["name","stop"],["color","warning","size","small",3,"click"],["name","arrow-forward"],[1,"upcoming-steps"],["class","step-item",4,"ngFor","ngForOf"],[1,"step-item"],[1,"step-distance"],[1,"desktop-navigation"],[1,"navigation-panel",3,"waypoints"],[1,"route-info-panel"],[1,"route-info-header"],["name","crescent","color","primary",4,"ngIf"],[1,"route-stats"],[1,"route-stat"],[1,"stat-icon"],["name","location-outline"],[1,"stat-content"],[1,"stat-label"],[1,"stat-value"],["name","speedometer-outline"],["name","time-outline"],["class","route-actions",4,"ngIf"],["name","crescent","color","primary"],[1,"route-actions"],[1,"btn-navegar-ruta",3,"click"],[1,"global-navigation-panel"],[2,"padding","10px","background","#4F46E5","color","white","text-align","center","font-weight","bold"],[1,"navigation-map-container"],[2,"padding","5px","background","#10B981","color","white","text-align","center","font-size","12px","font-weight","bold"],["id","map",1,"navigation-map"],[2,"position","fixed","top","10px","left","10px","background","red","color","white","padding","10px","z-index","10000","border-radius","5px"]],template:function(t,e){t&1&&(a(0,"ion-content")(1,"ion-refresher",0),v("ionRefresh",function(s){return e.handleRefresh(s)}),C(2,"ion-refresher-content",1),c(),f(3,fe,5,0,"div",2)(4,Pe,8,1,"div",3)(5,no,41,17,"section",4),c(),f(6,to,4,1,"div",5)(7,eo,4,0,"div",6)(8,oo,6,3,"div",7)),t&2&&(l(3),_("ngIf",e.loading),l(),_("ngIf",e.error&&!e.loading),l(),_("ngIf",!e.loading&&!e.error),l(),_("ngIf",e.showNavigationPanel),l(),_("ngIf",e.showNavigationPanel&&!e.isMapView),l(),_("ngIf",e.showNavigationPanel))},dependencies:[Wn,j,Vn,$,D,sn,gn,U,Gn,ht,wt,Ot,Ft],styles:[`@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: #FFF}.global-navigation-panel[_ngcontent-%COMP%]{position:fixed!important;top:20px!important;right:20px!important;z-index:9999!important;width:420px!important;max-height:85vh!important;background:#fff!important;border-radius:12px!important;box-shadow:0 8px 32px #0000004d!important;border:2px solid #4F46E5!important}@media (max-width: 768px){.global-navigation-panel[_ngcontent-%COMP%]{position:fixed!important;top:0!important;left:0!important;right:0!important;width:100%!important;max-height:50vh!important;border-radius:0!important;border:none!important;border-bottom:2px solid #4F46E5!important}}.navigation-map-container[_ngcontent-%COMP%]{position:fixed!important;bottom:20px!important;right:20px!important;width:300px!important;height:200px!important;z-index:9998!important;border-radius:12px!important;overflow:hidden!important;box-shadow:0 8px 32px #0000004d!important;border:2px solid #4F46E5!important;background:#fff!important}.navigation-map-container[_ngcontent-%COMP%]   .navigation-map[_ngcontent-%COMP%]{width:100%!important;height:100%!important}@media (max-width: 768px){.navigation-map-container[_ngcontent-%COMP%]{position:fixed!important;bottom:0!important;left:0!important;right:0!important;width:100%!important;height:150px!important;border-radius:0!important;border:none!important;border-top:2px solid #4F46E5!important}}.modal-mapa-navegacion-fullscreen[_ngcontent-%COMP%]{--width: 100vw;--height: 100vh;--max-width: 100vw;--max-height: 100vh;--border-radius: 0;--backdrop-opacity: .8}@media (max-width: 768px){app-mapbox-navigation-panel[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:1000;width:100%}}.mobile-navigation[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;background:#1a1a2e;color:#fff;padding:0;margin:0;border-radius:0;box-shadow:0 4px 6px #0000004d;z-index:1000}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#1a1a2e;border-bottom:1px solid rgba(255,255,255,.1)}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]{flex:1}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:4px}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-row[_ngcontent-%COMP%]   .maneuver-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#4f46e5}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-row[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#fff;flex:1}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .current-instruction[_ngcontent-%COMP%]   .instruction-distance[_ngcontent-%COMP%]{font-size:.9rem;color:#fffc;margin-left:27px}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .mobile-controls[_ngcontent-%COMP%]{display:flex;gap:8px}.mobile-navigation[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .mobile-controls[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--border-radius: 20px;width:40px;height:40px}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;background:#1a1a2e}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid rgba(255,255,255,.05)}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .maneuver-icon[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff9;width:20px;text-align:center}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]{flex:1;font-size:.9rem;color:#fffc;line-height:1.3}.mobile-navigation[_ngcontent-%COMP%]   .upcoming-steps[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-distance[_ngcontent-%COMP%]{font-size:.8rem;color:#fff9;white-space:nowrap}ion-refresher[_ngcontent-%COMP%]{--color: #4F46E5;--background: rgba(255, 255, 255, .95);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}ion-refresher[_ngcontent-%COMP%]   ion-refresher-content[_ngcontent-%COMP%]{--color: #4F46E5;--text-color: #64748b;--pulling-icon-color: #4F46E5;--refreshing-spinner-color: #4F46E5}@media (max-width: 768px){ion-refresher[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .98)}ion-refresher[_ngcontent-%COMP%]   ion-refresher-content[_ngcontent-%COMP%]{--pulling-text-font-size: 14px;--refreshing-text-font-size: 14px}}@media (max-width: 480px){ion-refresher[_ngcontent-%COMP%]   ion-refresher-content[_ngcontent-%COMP%]{--pulling-text-font-size: 12px;--refreshing-text-font-size: 12px}}ion-content.refresher-active[_ngcontent-%COMP%]{--overflow: hidden}.dashboard-table[_ngcontent-%COMP%]{background:#fff;padding:25px}.table-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px;flex-wrap:wrap;gap:16px}.table-title[_ngcontent-%COMP%]{font-size:18px;color:#26262a;font-weight:500}.table-meta[_ngcontent-%COMP%]{color:#4f46e5;font-size:14px}.table-search[_ngcontent-%COMP%]{display:flex;gap:20px}.table-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:8px;padding:7px 14px;font-size:1rem;border:none;background:#f9fbff;color:#26262a}.table-search[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:8px;padding:7px 14px;font-size:1rem;background:#f9fbff;border:none;color:#26262a}.mobile-search-nav[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:12px}.mobile-search[_ngcontent-%COMP%]{position:relative;width:100%}.mobile-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:9px 40px 9px 10px;border-radius:12px;border:1px solid #e2e8f0;font-size:16px;background:#fff;box-shadow:0 1px 3px #0000001a}.mobile-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.mobile-search[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;right:16px;top:50%;transform:translateY(-50%);font-size:20px;color:#64748b}.mobile-navigation-button[_ngcontent-%COMP%]{display:none;width:100%;padding:0 15px}.mobile-navigation-button[_ngcontent-%COMP%]   .btn-navegacion-mobile[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;background:#059669;color:#fff;border:none;border-radius:10px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.mobile-navigation-button[_ngcontent-%COMP%]   .btn-navegacion-mobile[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.mobile-navigation-button[_ngcontent-%COMP%]   .btn-navegacion-mobile[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #10b9814d}.mobile-navigation-button[_ngcontent-%COMP%]   .btn-navegacion-mobile[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 1px 4px #10b98133}.mobile-route-info[_ngcontent-%COMP%]{display:none;margin:8px 16px;padding:12px 16px;background:linear-gradient(135deg,#ecfdf5,#d1fae5);border:1px solid #10B981;border-radius:12px}.mobile-route-info[_ngcontent-%COMP%]   .route-info-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.mobile-route-info[_ngcontent-%COMP%]   .route-info-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#10b981}.mobile-route-info[_ngcontent-%COMP%]   .route-info-content[_ngcontent-%COMP%]   .route-text[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#059669}.mobile-route-info[_ngcontent-%COMP%]   .route-info-content[_ngcontent-%COMP%]   .route-hint[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;margin-left:auto}.mobile-actions[_ngcontent-%COMP%]{display:none;justify-content:space-between;align-items:center;margin-bottom:16px;gap:12px}.mobile-actions[_ngcontent-%COMP%]   .mobile-filter[_ngcontent-%COMP%]{flex:1;padding:8px 40px 8px 16px;border-radius:12px;border:1px solid #E2E8F0;background:#f8fafc;font-size:14px;color:#475569;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23475569' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;background-size:16px;height:40px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:8px;border:none}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.custom-mat-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 8px;margin-bottom:12px}.custom-mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#64748b;font-size:14px;font-weight:400;text-align:left;padding:8px 16px;background:transparent}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#fff}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0 16px;color:#26262a;font-size:14px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:8px;border-bottom-left-radius:8px}.custom-mat-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:8px;border-bottom-right-radius:8px}.mobile-cards[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:12px;margin-bottom:16px}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #e2e8f0;overflow:hidden}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #f1f5f9}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-number[_ngcontent-%COMP%]{font-weight:500;color:#64748b}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px;color:#334155;font-size:14px}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-row.detail[_ngcontent-%COMP%]{color:#64748b;margin:8px 0}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#64748b}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .urgente-icon[_ngcontent-%COMP%]{color:#d92d20;margin-left:auto}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0f172a;font-weight:500}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{padding:12px 16px;border-top:1px solid #f1f5f9}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:8px;padding:8px;border:none;border-radius:10px;background:#f8fafc;color:#4f46e5;font-weight:500;font-size:14px;transition:all .2s ease}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9}.mobile-cards[_ngcontent-%COMP%]   .aviso-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500;display:inline-flex;align-items:center;gap:4px}.badge.yellow[_ngcontent-%COMP%]{background:var(--estado-en-curso-bg);color:var(--estado-en-curso-color)}.badge.red[_ngcontent-%COMP%]{background:var(--estado-pendiente-bg);color:var(--estado-pendiente-color)}.badge.green[_ngcontent-%COMP%]{background:var(--estado-completado-bg);color:var(--estado-completado-color)}.badge.no-visitado[_ngcontent-%COMP%]{background:var(--estado-no-visitado-bg);color:var(--estado-no-visitado-color)}.badge.visitado-pendiente[_ngcontent-%COMP%]{background:var(--estado-visitado-pendiente-bg);color:var(--estado-visitado-pendiente-color)}.badge.pendiente-presupuesto[_ngcontent-%COMP%]{background:var(--estado-pendiente-presupuesto-bg);color:var(--estado-pendiente-presupuesto-color)}.badge.listo-para-facturar[_ngcontent-%COMP%]{background:var(--estado-listo-para-facturar-bg);color:var(--estado-listo-para-facturar-color)}.view-icon[_ngcontent-%COMP%]{color:#64748b;font-size:20px;cursor:pointer}.table-header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;flex-shrink:0}.table-pagination[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;padding:16px 0;border-top:1px solid #e2e8f0}.table-pagination[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{color:#64748b;font-size:14px}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]{min-width:36px;height:36px;border:1px solid #d1d5db;background:#fff;color:#374151;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;font-size:14px;font-weight:500}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f3f4f6;border-color:#9ca3af}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.95)}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn.active[_ngcontent-%COMP%]{background:#4f46e5;color:#fff;border-color:#4f46e5}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn.active[_ngcontent-%COMP%]:hover{background:#4338ca}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background:#f9fafb;color:#9ca3af}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.table-pagination[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]{min-width:32px;height:32px;font-size:12px}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .pagination-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:#fafbff;position:fixed;top:0;left:0;right:0;bottom:0;z-index:1000}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:40px;background:#fff;border-radius:16px;box-shadow:0 2px 8px #e0e7ef33;border:1px solid #E2E8F0}.loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#4f46e5;margin-bottom:16px}.loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:16px;margin:0}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:#fafbff;position:fixed;top:0;left:0;right:0;bottom:0;z-index:1000}.error-message[_ngcontent-%COMP%]{text-align:center;padding:40px;background:#fff;border-radius:16px;box-shadow:0 2px 8px #e0e7ef33;border:1px solid #E2E8F0;max-width:400px}.error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#d92d20;margin-bottom:16px}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:14px;margin:0 0 24px;line-height:1.5}.btn-retry[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;background:#4f46e5;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.btn-retry[_ngcontent-%COMP%]:hover{background:#4338ca}.btn-retry[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.btn-map[_ngcontent-%COMP%], .btn-add[_ngcontent-%COMP%], .btn-seleccion[_ngcontent-%COMP%], .btn-limpiar[_ngcontent-%COMP%], .btn-ruta-google[_ngcontent-%COMP%], .btn-ruta-apple[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border-radius:10px;font-size:14px;font-weight:500;transition:all .2s ease;white-space:nowrap;cursor:pointer;border:none;min-height:42px}.btn-map[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .btn-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .btn-seleccion[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .btn-limpiar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .btn-ruta-google[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .btn-ruta-apple[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.btn-map[_ngcontent-%COMP%]:active, .btn-add[_ngcontent-%COMP%]:active, .btn-seleccion[_ngcontent-%COMP%]:active, .btn-limpiar[_ngcontent-%COMP%]:active, .btn-ruta-google[_ngcontent-%COMP%]:active, .btn-ruta-apple[_ngcontent-%COMP%]:active{transform:scale(.98)}.btn-map[_ngcontent-%COMP%]{background-color:#f8fafc;color:#475569;border:1px solid #E2E8F0}.btn-map[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;border-color:#cbd5e1}.btn-add[_ngcontent-%COMP%]{background-color:#4f46e5;color:#fff;box-shadow:0 1px 2px #4f46e51a}.btn-add[_ngcontent-%COMP%]:hover{background-color:#4338ca;box-shadow:0 2px 4px #4f46e533}.btn-seleccion[_ngcontent-%COMP%]{background-color:#f8fafc;color:#475569;border:1px solid #E2E8F0}.btn-seleccion[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;border-color:#cbd5e1}.btn-seleccion.active[_ngcontent-%COMP%]{background-color:#10b981;color:#fff;border-color:#10b981}.btn-seleccion.active[_ngcontent-%COMP%]:hover{background-color:#059669}.btn-limpiar[_ngcontent-%COMP%]{background-color:#fef2f2;color:#dc2626;border:1px solid #FECACA}.btn-limpiar[_ngcontent-%COMP%]:hover{background-color:#fee2e2;border-color:#fca5a5}.btn-ruta-google[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff;border:1px solid #4285F4}.btn-ruta-google[_ngcontent-%COMP%]:hover{background-color:#3367d6;border-color:#3367d6}.btn-ruta-apple[_ngcontent-%COMP%]{background-color:#007aff;color:#fff;border:1px solid #007AFF}.btn-ruta-apple[_ngcontent-%COMP%]:hover{background-color:#0056cc;border-color:#0056cc}.btn-navegacion-desktop[_ngcontent-%COMP%]{background:#059669;color:#fff;border:1px solid #059669;padding:12px 16px;border-radius:10px;font-size:14px;font-weight:600;box-shadow:0 2px 4px #10b98133}.btn-navegacion-desktop[_ngcontent-%COMP%]:hover{background:#047857;border-color:#047857;box-shadow:0 4px 8px #10b9814d;transform:translateY(-1px)}.btn-navegacion-desktop[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 4px #10b98133}.mobile-buttons[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.mobile-buttons[_ngcontent-%COMP%]{display:flex!important;justify-content:center;gap:12px;padding-left:10px}.mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;border:none;display:flex;align-items:center;justify-content:center;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.95)}.mobile-buttons[_ngcontent-%COMP%]   .btn-seleccion[_ngcontent-%COMP%]{background:#f8fafc;color:#475569;border:1px solid #E2E8F0}.mobile-buttons[_ngcontent-%COMP%]   .btn-seleccion.active[_ngcontent-%COMP%]{background:#10b981;color:#fff;border-color:#10b981;box-shadow:0 4px 8px #10b9814d}.mobile-buttons[_ngcontent-%COMP%]   .btn-seleccion[_ngcontent-%COMP%]:hover:not(.active){background:#f1f5f9;border-color:#cbd5e1}.mobile-buttons[_ngcontent-%COMP%]   .btn-map[_ngcontent-%COMP%]{background:#f8fafc;color:#475569;border:1px solid #E2E8F0}.mobile-buttons[_ngcontent-%COMP%]   .btn-map[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1}.mobile-buttons[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#6366f1);color:#fff;box-shadow:0 4px 8px #4f46e54d}.mobile-buttons[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4338ca,#4f46e5);box-shadow:0 6px 12px #4f46e566}}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]{display:flex;gap:12px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:48px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:12px;border:none;transition:all .2s ease}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-map[_ngcontent-%COMP%], .mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]{color:#475569;border:1px solid #E2E8F0;padding:10px;background:#fff}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-map[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#6366f1);color:#fff;box-shadow:0 4px 6px -1px #4f46e51a,0 2px 4px -1px #4f46e50f}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]:hover, .mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]:active{background:linear-gradient(135deg,#4338ca,#4f46e5);box-shadow:0 4px 6px -1px #4f46e533}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.95)}.mobile-actions[_ngcontent-%COMP%]   .mobile-filter[_ngcontent-%COMP%]{flex:1;padding:8px 40px 8px 16px;border-radius:12px;border:1px solid #E2E8F0;background:#f8fafc;font-size:14px;color:#475569;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23475569' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;background-size:16px;height:40px}.mobile-actions[_ngcontent-%COMP%]   .mobile-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:#cbd5e1;background-color:#fff}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0px 2rem;color:#fff}.header-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;color:#26262a}.header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.mobile-actions.mobile-only[_ngcontent-%COMP%]{display:none;align-items:center;gap:12px;margin-bottom:0}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:8px;border:none;transition:all .2s ease}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-map[_ngcontent-%COMP%]{background:#f8fafc;color:#475569;border:1px solid #E2E8F0}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-map[_ngcontent-%COMP%]:hover, .mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-map[_ngcontent-%COMP%]:active{background:#f1f5f9;border-color:#cbd5e1}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#6366f1);color:#fff;box-shadow:0 4px 6px -1px #4f46e51a,0 2px 4px -1px #4f46e50f}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]:hover, .mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button.btn-add[_ngcontent-%COMP%]:active{background:linear-gradient(135deg,#4338ca,#4f46e5);box-shadow:0 4px 6px -1px #4f46e533}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.mobile-actions.mobile-only[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 768px){.dashboard-table[_ngcontent-%COMP%]{height:100%;margin:0;padding:0;border-radius:0;box-shadow:none}.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-search-nav[_ngcontent-%COMP%]{display:flex}.mobile-navigation-button[_ngcontent-%COMP%]{display:block}.mobile-route-info[_ngcontent-%COMP%]{display:flex;margin:8px 16px;padding:12px 16px;background:linear-gradient(135deg,#ecfdf5,#d1fae5);border:1px solid #10B981;border-radius:12px}.table-header[_ngcontent-%COMP%]{margin-bottom:12px;align-items:center;gap:12px;display:flex;flex-direction:row-reverse}.table-header-left[_ngcontent-%COMP%]{flex:1}.table-header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 16px}.table-pagination[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{width:100%;text-align:center;margin-bottom:8px}.table-pagination[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{width:100%;justify-content:center}.map-legend[_ngcontent-%COMP%]{border-radius:0!important}.compact-avisos-table[_ngcontent-%COMP%]{border-radius:0;border-left:none;border-right:none;max-height:none}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:11px;padding:8px 4px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:8px 4px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-size:13px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-size:12px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{font-size:11px;line-height:1.3}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.dashboard-table[_ngcontent-%COMP%]{height:100%;padding:0}.mobile-actions[_ngcontent-%COMP%]{gap:12px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]{display:flex;width:30%;justify-content:stretch}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:40px}.mobile-actions[_ngcontent-%COMP%]   .mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.mobile-buttons[_ngcontent-%COMP%]{gap:6px;flex-wrap:nowrap}.mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:36px;height:36px}.mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.mobile-buttons[_ngcontent-%COMP%]   .btn-ruta-google-mobile[_ngcontent-%COMP%], .mobile-buttons[_ngcontent-%COMP%]   .btn-ruta-apple-mobile[_ngcontent-%COMP%], .mobile-buttons[_ngcontent-%COMP%]   .btn-navigation-panel[_ngcontent-%COMP%]{min-width:36px;height:36px}.mobile-buttons[_ngcontent-%COMP%]   .btn-ruta-google-mobile[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .mobile-buttons[_ngcontent-%COMP%]   .btn-ruta-apple-mobile[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .mobile-buttons[_ngcontent-%COMP%]   .btn-navigation-panel[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.mobile-buttons[_ngcontent-%COMP%]   .btn-navigation-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;border-radius:8px;box-shadow:0 2px 8px #10b9814d}.mobile-buttons[_ngcontent-%COMP%]   .btn-navigation-panel[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #10b98166}.mobile-buttons[_ngcontent-%COMP%]   .btn-debug-nav[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;border:none;border-radius:8px;box-shadow:0 2px 8px #f59e0b4d}.mobile-buttons[_ngcontent-%COMP%]   .btn-debug-nav[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #f59e0b66}}.map-display-container[_ngcontent-%COMP%]{height:40vh;margin-bottom:0}.map-avisos-list[_ngcontent-%COMP%]{max-height:none;overflow-y:visible}.aviso-map-card[_ngcontent-%COMP%]{padding:20px 14px;font-size:16px;border-radius:14px;margin-bottom:8px}.aviso-map-card[_ngcontent-%COMP%]   .aviso-map-card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.aviso-map-card[_ngcontent-%COMP%]   .aviso-map-card-body[_ngcontent-%COMP%]{font-size:15px}.btn-filter[_ngcontent-%COMP%], .btn-map[_ngcontent-%COMP%], .btn-add[_ngcontent-%COMP%]{min-height:44px;font-size:16px;padding:10px 16px}.compact-avisos-table[_ngcontent-%COMP%]{border-radius:0!important;border-left:none!important;border-right:none!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{grid-template-columns:50px 1fr minmax(0,1.5fr) 70px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:10px;padding:6px 2px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:6px 2px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-size:12px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-size:11px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{font-size:10px;line-height:1.2}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:22px;height:22px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.map-view-container[_ngcontent-%COMP%]{display:flex;gap:24px;margin-top:16px;overflow:hidden;position:relative}.map-list-container[_ngcontent-%COMP%]{width:500px;flex-shrink:0;display:flex;flex-direction:column;gap:16px}.map-list-container[_ngcontent-%COMP%]   .map-list-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#111827;margin:0 0 4px}.map-list-container[_ngcontent-%COMP%]   .map-list-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#4f46e5;margin:0}.map-list-container[_ngcontent-%COMP%]   .map-list-filters[_ngcontent-%COMP%]{display:flex;gap:12px}.map-list-container[_ngcontent-%COMP%]   .map-list-filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border-radius:8px;border:1px solid #D1D5DB;color:#6b7280;background-color:#fff;font-size:14px}.map-list-container[_ngcontent-%COMP%]   .map-list-filters[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]{padding:8px;border-radius:8px;border:1px solid #D1D5DB;background-color:#fff;display:flex;align-items:center;justify-content:center}.map-list-container[_ngcontent-%COMP%]   .map-list-filters[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#4b5563}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto;border-radius:8px;border:1px solid #E5E7EB;background:#fff}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:80px 1fr minmax(0,1.5fr) 80px;font-size:12px}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table.modo-seleccion[_ngcontent-%COMP%]{grid-template-columns:40px 70px 1fr minmax(0,1.2fr) 70px}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:contents}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{padding:12px 8px;background:#f9fafb;border-bottom:1px solid #E5E7EB;font-weight:500;color:#374151;font-size:12px;text-transform:uppercase;letter-spacing:.5px;display:flex;align-items:center}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]:first-child{justify-content:start;padding-left:12px}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]{display:contents}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]{display:contents;cursor:pointer;transition:all .2s ease;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#f9fafb}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]:active{transform:scale(.98)}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.clickeable[_ngcontent-%COMP%]{cursor:pointer}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.clickeable[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#eff6ff;border-left:3px solid #3B82F6}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.no-visitado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #EF4444!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.no-visitado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef2f2!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.no-visitado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fee2e2!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.visitado-pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #F59E0B!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.visitado-pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fffbeb!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.visitado-pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef3c7!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente-presupuesto[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #3B82F6!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente-presupuesto[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#eff6ff!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente-presupuesto[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#dbeafe!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.listo-para-facturar[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #059669!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.listo-para-facturar[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.listo-para-facturar[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.en-curso[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #F59E0B!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.en-curso[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fffbeb!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.en-curso[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef3c7!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #EF4444!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef2f2!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fee2e2!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.completado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #10B981!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.completado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.completado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.cancelado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #6B7280!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.cancelado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#f9fafb!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.cancelado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#f3f4f6!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #10B981!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.en-curso[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente-presupuesto[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.listo-para-facturar[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.completado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.no-visitado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.visitado-pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.cancelado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.en-curso[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente-presupuesto[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.listo-para-facturar[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.completado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.no-visitado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.visitado-pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.cancelado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:12px 8px;border-bottom:1px solid #F3F4F6;display:flex;align-items:center}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-weight:600;color:#111827;font-size:13px;justify-content:start;padding-left:12px;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:13px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#6b7280;font-size:12px;line-height:1.4}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]{justify-content:center;gap:4px}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;background:transparent;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#6b7280}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-mapa[_ngcontent-%COMP%]:hover{background-color:#4f46e5}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-mapa[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-mapa[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#4338ca}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:hover{background-color:#10b981}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#059669}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-navegar[_ngcontent-%COMP%]:hover{background-color:#3b82f6}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-navegar[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.map-list-container[_ngcontent-%COMP%]   .map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-navegar[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#2563eb}.route-info-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px;background:linear-gradient(135deg,#f0fdf4,#ecfdf5);border-radius:12px;border:2px solid #D1FAE5;box-shadow:0 4px 12px #10b9811a;margin-top:16px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:600;color:#059669;font-size:14px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:16px;height:16px;--color: #10B981;margin-left:auto}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:8px;padding:8px;background:#ffffffb3;border-radius:8px;border:1px solid rgba(16,185,129,.2)}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;background:#10b981;border-radius:50%}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;color:#fff}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:10px;color:#6b7280;font-weight:500;text-transform:uppercase;letter-spacing:.5px;line-height:1}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:12px;color:#059669;font-weight:600;line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]{margin-top:4px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 8px #10b9814d}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #10b98166}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #10b9814d}.map-display-container[_ngcontent-%COMP%]{flex-grow:1;border-radius:12px;overflow:hidden;background-color:#f3f4f6;position:relative;transition:box-shadow .3s ease}.map-display-container[_ngcontent-%COMP%]   .btn-fullscreen[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;z-index:10;background:#fff;border:none;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0000001a;cursor:pointer;transition:background .2s;font-size:22px;color:#4f46e5}.map-display-container[_ngcontent-%COMP%]   .btn-fullscreen[_ngcontent-%COMP%]:hover{background:#f3f4f6}.map-display-container[_ngcontent-%COMP%]   .btn-fullscreen[_ngcontent-%COMP%]:active{transform:scale(.95)}.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]{position:absolute;top:16px;left:16px;z-index:10;background:#fff;border:none;border-radius:8px;padding:8px 12px;display:flex;align-items:center;justify-content:center;gap:6px;box-shadow:0 2px 8px #0000001a;cursor:pointer;transition:all .2s;font-size:14px;font-weight:500;color:#4f46e5}.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]:hover{background:#f3f4f6;transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 992px){.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]{padding:8px;border-radius:50%;width:44px;height:44px}.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.map-display-container[_ngcontent-%COMP%]   .btn-back-to-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;z-index:10000;background:#fff;border:none;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #00000026;cursor:pointer;transition:all .2s;font-size:22px;color:#ef4444}.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]:hover{background:#fee2e2;transform:scale(1.05)}.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]:active{transform:scale(.95)}.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}@media (max-width: 992px){.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]{width:48px;height:48px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid rgba(239,68,68,.2);box-shadow:0 4px 12px #0003}.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.map-display-container[_ngcontent-%COMP%]   .btn-close-expanded[_ngcontent-%COMP%]:hover{background:#fee2e2f2;transform:scale(1.1)}}.map-display-container[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{height:100%;width:100%}@media (max-width: 992px){.map-view-container[_ngcontent-%COMP%]{flex-direction:column;overflow:visible;gap:0px!important}.map-list-container[_ngcontent-%COMP%]{width:100%;gap:0px!important}.map-avisos-table[_ngcontent-%COMP%]{max-height:35vh;overflow-y:auto;-webkit-overflow-scrolling:touch;border-radius:0!important}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{grid-template-columns:70px 1fr minmax(0,1.5fr) 80px}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-size:12px;padding-left:8px}.map-display-container[_ngcontent-%COMP%]{height:50vh;margin-bottom:0!important;border-radius:0!important}}.map-display-container[_ngcontent-%COMP%]{height:50vh;margin-bottom:20px}.map-legend[_ngcontent-%COMP%]{flex-wrap:wrap;gap:12px}.map-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{font-size:11px}@media (min-width: 769px){.map-view-container[_ngcontent-%COMP%]{height:calc(100vh - 200px)}.map-display-container[_ngcontent-%COMP%]{height:100%!important;margin-bottom:0!important}}.avisos-table[_ngcontent-%COMP%]{font-size:12px;grid-template-columns:80px 1.2fr minmax(0,1fr) 100px}.avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:11px;padding:8px 4px}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]{touch-action:manipulation;-webkit-tap-highlight-color:transparent}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:8px 4px}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-size:13px}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:11px;line-height:1.3;display:block}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px}.avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.mobile-only[_ngcontent-%COMP%]{display:flex!important}}@media (max-width: 768px){.map-view-container[_ngcontent-%COMP%]   .map-display-container[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:0}.mobile-buttons[_ngcontent-%COMP%]   .btn-navigation-panel[_ngcontent-%COMP%], .mobile-buttons[_ngcontent-%COMP%]   .btn-debug-nav[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background:#4f46e5e6;color:#fff;border:none;box-shadow:0 2px 8px #0003;transition:all .2s ease}.mobile-buttons[_ngcontent-%COMP%]   .btn-navigation-panel[_ngcontent-%COMP%]:active, .mobile-buttons[_ngcontent-%COMP%]   .btn-debug-nav[_ngcontent-%COMP%]:active{transform:scale(.95);background:#4f46e5}.route-info-panel[_ngcontent-%COMP%]{position:fixed;bottom:10px;left:10px;right:10px;background:#f0fdf4f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;padding:12px;box-shadow:0 4px 12px #10b98133;z-index:500;border:2px solid rgba(209,250,229,.8);gap:0px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]{font-size:13px;margin-bottom:8px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]{padding:6px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:20px;height:20px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:9px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:11px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]{margin-top:8px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.mobile-buttons[_ngcontent-%COMP%]{gap:8px}.mobile-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:42px;height:auto;padding:0!important;font-size:.8rem}.route-info-panel[_ngcontent-%COMP%]{bottom:5px;left:5px;right:5px;padding:10px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]{font-size:12px;margin-bottom:6px}.route-info-panel[_ngcontent-%COMP%]   .route-info-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]{padding:5px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:18px;height:18px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:10px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:8px}.route-info-panel[_ngcontent-%COMP%]   .route-stats[_ngcontent-%COMP%]   .route-stat[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:10px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]{padding:10px;font-size:15px}.route-info-panel[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-navegar-ruta[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}}.no-data-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px;background:#fff;border-radius:16px;border:1px solid #E2E8F0}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]{text-align:center;padding:40px;max-width:400px}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;color:#acacac;margin-bottom:16px}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#26262a;font-size:20px;margin:0 0 8px}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:14px;margin:0 0 24px;line-height:1.5}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;background:#4f46e5;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff;margin:0}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background:#4338ca;transform:translateY(-1px)}.no-data-container[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:active{transform:translateY(0)}.compact-avisos-table[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto;border-radius:8px;border:1px solid #E5E7EB;background:#fff;margin-bottom:16px;max-width:100%;overflow-x:auto}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:60px 1fr minmax(0,1.5fr) 80px;font-size:12px;min-width:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:contents}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{padding:12px 8px;background:#f9fafb;border-bottom:1px solid #E5E7EB;font-weight:500;color:#374151;font-size:12px;text-transform:uppercase;letter-spacing:.5px;display:flex;align-items:center;min-width:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]{display:contents}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]{display:contents;cursor:pointer;transition:all .2s ease;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#f9fafb}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]:active{transform:scale(.98)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.no-visitado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #EF4444!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.no-visitado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef2f2!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.no-visitado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fee2e2!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.visitado-pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #F59E0B!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.visitado-pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fffbeb!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.visitado-pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef3c7!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente-presupuesto[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #3B82F6!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente-presupuesto[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#eff6ff!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente-presupuesto[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#dbeafe!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.listo-para-facturar[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #059669!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.listo-para-facturar[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.listo-para-facturar[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.en-curso[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #F59E0B!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.en-curso[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fffbeb!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.en-curso[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef3c7!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #EF4444!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#fef2f2!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#fee2e2!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.completado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #10B981!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.completado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.completado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]:first-child{border-left:4px solid #10B981!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.en-curso[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente-presupuesto[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.listo-para-facturar[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.completado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.no-visitado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.visitado-pendiente[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.cancelado[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{background-color:#ecfdf5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.en-curso[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.pendiente-presupuesto[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.listo-para-facturar[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.completado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.no-visitado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.visitado-pendiente[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row.seleccionado.cancelado[_ngcontent-%COMP%]:hover   .aviso-cell[_ngcontent-%COMP%]{background-color:#d1fae5!important}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:12px 8px;border-bottom:1px solid #F3F4F6;display:flex;align-items:center;min-width:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-weight:600;color:#111827;font-size:14px;justify-content:start;flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]{justify-content:start;font-size:11px;flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:2px 6px;border-radius:8px;font-size:10px;font-weight:500;white-space:nowrap;max-width:120px;overflow:hidden;text-overflow:ellipsis}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.yellow[_ngcontent-%COMP%]{background:var(--estado-en-curso-bg);color:var(--estado-en-curso-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.red[_ngcontent-%COMP%]{background:var(--estado-pendiente-bg);color:var(--estado-pendiente-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.green[_ngcontent-%COMP%]{background:var(--estado-completado-bg);color:var(--estado-completado-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.no-visitado[_ngcontent-%COMP%]{background:var(--estado-no-visitado-bg);color:var(--estado-no-visitado-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.visitado-pendiente[_ngcontent-%COMP%]{background:var(--estado-visitado-pendiente-bg);color:var(--estado-visitado-pendiente-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.pendiente-presupuesto[_ngcontent-%COMP%]{background:var(--estado-pendiente-presupuesto-bg);color:var(--estado-pendiente-presupuesto-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]   .badge.listo-para-facturar[_ngcontent-%COMP%]{background:var(--estado-listo-para-facturar-bg);color:var(--estado-listo-para-facturar-color)}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:13px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:0;flex:1}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]{min-width:0;flex:1}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#6b7280;font-size:12px;line-height:1.4;max-width:100%}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.fecha-aviso[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;justify-content:start;flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.urgente-aviso[_ngcontent-%COMP%]{justify-content:start;flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.urgente-aviso[_ngcontent-%COMP%]   .urgente-icon[_ngcontent-%COMP%]{color:#d92d20;font-size:18px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.urgente-aviso[_ngcontent-%COMP%]   .no-urgente-icon[_ngcontent-%COMP%]{color:#64748b;font-size:18px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]{justify-content:start;gap:4px;flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;background:transparent;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#6b7280}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:hover{background-color:#10b981}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-ver[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#059669}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-navegar[_ngcontent-%COMP%]:hover{background-color:#3b82f6}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-navegar[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-navegar[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#2563eb}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-editar[_ngcontent-%COMP%]:hover{background-color:#f59e0b}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-editar[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-editar[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#d97706}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-eliminar[_ngcontent-%COMP%]:hover{background-color:#ef4444}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-eliminar[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#fff}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button.btn-eliminar[_ngcontent-%COMP%]:active{transform:scale(.9);background-color:#dc2626}@media (min-width: 769px){.compact-avisos-table[_ngcontent-%COMP%]{max-width:100%;overflow-x:auto;border-radius:0;border-left:none;border-right:none}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{grid-template-columns:80px 140px minmax(150px,1fr) minmax(200px,2fr) 120px 100px 120px;font-size:13px;min-width:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:12px;padding:12px 8px;min-width:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:12px 8px;min-width:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-size:14px;flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.estado-aviso[_ngcontent-%COMP%]{flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-size:13px;min-width:0;flex:1}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]{min-width:0;flex:1}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{font-size:12px;max-width:100%}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.fecha-aviso[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.urgente-aviso[_ngcontent-%COMP%], .compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]{flex-shrink:0}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 768px){.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{font-size:11px;padding:8px 4px}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell[_ngcontent-%COMP%]{padding:8px 4px}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.numero-aviso[_ngcontent-%COMP%]{font-size:13px}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.nombre-cliente[_ngcontent-%COMP%]{font-size:12px}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.detalle-servicio[_ngcontent-%COMP%]   .detalle-texto[_ngcontent-%COMP%]{font-size:11px;line-height:1.3}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px}.map-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .aviso-row[_ngcontent-%COMP%]   .aviso-cell.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}}.modal-confirmar-eliminacion[_ngcontent-%COMP%]{--width: 90%;--max-width: 600px;--height: auto;--max-height: 90vh;--border-radius: 16px;--backdrop-opacity: .5}.modal-opciones-navegacion[_ngcontent-%COMP%]{--width: 90%!important;--max-width: 400px!important;--height: auto;--max-height: 70vh!important;--border-radius: 20px!important;--backdrop-opacity: .7!important;--box-shadow: 0 20px 40px rgba(0, 0, 0, .3)!important}.seleccionados-info[_ngcontent-%COMP%]{color:#10b981;font-weight:500}.ruta-info[_ngcontent-%COMP%]{color:#059669;font-weight:600;background:#10b9811a;padding:2px 6px;border-radius:4px;font-size:12px}.checkbox-seleccion[_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#10B981;cursor:pointer;border:2px solid #D1D5DB;border-radius:4px;background-color:#fff;transition:all .2s ease}.checkbox-seleccion[_ngcontent-%COMP%]:checked{background-color:#10b981;border-color:#10b981;color:#fff}.checkbox-seleccion[_ngcontent-%COMP%]:hover{border-color:#10b981}.checkbox-seleccion[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #10b9811a}.seleccion-cell[_ngcontent-%COMP%]{justify-content:center;flex-shrink:0;min-width:40px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{grid-template-columns:60px 1fr minmax(0,1.5fr) 80px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table.modo-seleccion[_ngcontent-%COMP%]{grid-template-columns:40px 50px 1fr minmax(0,1.2fr) 70px}@media (min-width: 769px){.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table[_ngcontent-%COMP%]{grid-template-columns:80px 140px minmax(150px,1fr) minmax(200px,2fr) 120px 100px 120px}.compact-avisos-table[_ngcontent-%COMP%]   .avisos-table.modo-seleccion[_ngcontent-%COMP%]{grid-template-columns:40px 70px 120px minmax(120px,1fr) minmax(150px,1.5fr) 100px 80px 100px}}.route-info-popup[_ngcontent-%COMP%]{padding:16px;min-width:250px}.route-info-popup[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#111827;font-size:16px;font-weight:600}.route-info-popup[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:#374151;font-size:14px}.route-info-popup[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#111827}.route-info-popup[_ngcontent-%COMP%]   p.route-note[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-style:italic;margin-top:8px}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]{margin-top:16px;display:flex;gap:8px;flex-wrap:wrap}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-route-action[_ngcontent-%COMP%]{flex:1;min-width:100px;padding:8px 12px;border:none;border-radius:6px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-route-action.google[_ngcontent-%COMP%]{background:#4285f4;color:#fff}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-route-action.google[_ngcontent-%COMP%]:hover{background:#3367d6}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-route-action.apple[_ngcontent-%COMP%]{background:#007aff;color:#fff}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-route-action.apple[_ngcontent-%COMP%]:hover{background:#0056cc}.route-info-popup[_ngcontent-%COMP%]   .route-actions[_ngcontent-%COMP%]   .btn-route-action[_ngcontent-%COMP%]:active{transform:scale(.95)}.leaflet-container[_ngcontent-%COMP%]{height:100%;width:100%;font-family:inherit}.leaflet-popup-content-wrapper[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 4px 12px #00000026;border:1px solid #E5E7EB}.leaflet-popup-close-button[_ngcontent-%COMP%]{color:#6b7280;font-size:18px}.leaflet-popup-close-button[_ngcontent-%COMP%]:hover{color:#374151}.custom-marker[_ngcontent-%COMP%]{background:transparent!important;border:none!important}.custom-marker[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-weight:700;text-shadow:0 1px 2px rgba(0,0,0,.5)}.leaflet-routing-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000026;border:1px solid #E5E7EB}.leaflet-routing-alt[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto}.leaflet-routing-geocoders[_ngcontent-%COMP%]{margin:8px}.leaflet-routing-geocoder[_ngcontent-%COMP%]{margin-bottom:8px}.leaflet-routing-geocoder[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #D1D5DB;border-radius:6px;font-size:14px}.leaflet-routing-geocoder-results[_ngcontent-%COMP%]{background:#fff;border:1px solid #D1D5DB;border-radius:6px;box-shadow:0 2px 4px #0000001a;max-height:150px;overflow-y:auto}.leaflet-routing-geocoder-result[_ngcontent-%COMP%]{padding:8px 12px;cursor:pointer;border-bottom:1px solid #F3F4F6}.leaflet-routing-geocoder-result[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.leaflet-routing-geocoder-result[_ngcontent-%COMP%]:last-child{border-bottom:none}`]});let r=g;return r})();export{ii as AvisosComponent};
