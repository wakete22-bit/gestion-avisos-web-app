import{a as je}from"./chunk-SSUFQVT3.js";import{a as Pe}from"./chunk-52VVF7TW.js";import{a as ve}from"./chunk-JNUN2KTT.js";import"./chunk-3NJZR3TT.js";import{a as Re}from"./chunk-HQWX4VYX.js";import"./chunk-N4FKO75N.js";import{$ as ke,C as we,D as ze,Ea as Ae,Ga as De,Ha as Ve,K as Fe,Sa as Ne,a as Me,aa as Te,c as he,d as Oe,f as be,h as ye,l as Ee,w as Ie,x as Se}from"./chunk-CPCGS7XX.js";import"./chunk-7FW4253V.js";import{a as xe}from"./chunk-ZLE3SS2Y.js";import{h as _e,w as fe}from"./chunk-7RXHQH5K.js";import{b as Ce}from"./chunk-ZFUZ5UD4.js";import{$a as Q,Ac as ge,Ca as c,Da as h,Ea as F,Fa as W,Ha as j,Ia as R,Ja as q,L as f,M as C,Ra as k,Ta as Y,Ua as T,X as s,Y as z,Za as J,_ as $,_a as K,c as H,ca as P,cb as X,cc as ne,eb as Z,ec as M,fb as ee,fc as ie,gc as re,ha as p,ja as G,kc as ae,la as a,lc as se,ma as i,mc as ce,na as g,ob as te,pc as le,qc as de,ra as E,rb as oe,sa as v,ta as u,u as U,vc as pe,yc as me,z as D,zc as ue}from"./chunk-QQQKELKR.js";import"./chunk-FMBN6UXO.js";import"./chunk-QUJFQN2Y.js";import"./chunk-T4LV2MRW.js";import"./chunk-QZ7DKK3O.js";import"./chunk-7NXYYB6M.js";import"./chunk-G2E2NLL6.js";import"./chunk-HZSDEEV2.js";import"./chunk-AO65UGJX.js";import"./chunk-MYMWTHTI.js";import"./chunk-YNWT2DLU.js";import"./chunk-ULLEADC5.js";import"./chunk-2ELISCRH.js";import"./chunk-BV4CTHEE.js";import"./chunk-XPQFWPU3.js";import"./chunk-6SS6CZRK.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-CGQGPWKF.js";import"./chunk-CKP3SGE2.js";import"./chunk-FAIKFHLE.js";import"./chunk-NBD2MYJO.js";import"./chunk-3SBX7V6R.js";import"./chunk-SQKDQBOS.js";import"./chunk-SWRJZAEI.js";import"./chunk-JCSW2JUV.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-36KMLI7A.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-CRC5ZNR6.js";function qe(n,d){n&1&&(a(0,"div",8)(1,"div",9),g(2,"ion-icon",10),a(3,"p"),c(4,"Cargando presupuesto..."),i()()())}function Le(n,d){n&1&&(a(0,"div",26),g(1,"ion-icon",10),a(2,"span"),c(3,"Cargando avisos..."),i()())}function Be(n,d){if(n&1&&(a(0,"div",27),g(1,"ion-icon",28),a(2,"span"),c(3),i()()),n&2){let o=u(3);s(3),h(o.errorAvisos)}}function He(n,d){if(n&1){let o=E();a(0,"div",31),v("click",function(){let t=f(o).$implicit,r=u(4);return C(r.seleccionarAviso(t))}),a(1,"div",32)(2,"div",33)(3,"span",34),c(4),i(),a(5,"span",35),c(6),i()(),a(7,"span",36),c(8),i(),a(9,"div",37)(10,"span",38),c(11),k(12,"date"),i(),a(13,"span",39),c(14),i()()()()}if(n&2){let o=d.$implicit;s(4),F("#",o.id==null?null:o.id.substring(0,8),""),s(),p("ngClass","estado-"+(o.estado==null?null:o.estado.toLowerCase())),s(),F(" ",o.estado," "),s(2),h(o.nombre_cliente_aviso),s(3),h(Y(12,6,o.fecha_creacion,"dd/MM/yyyy")),s(3),h(o.descripcion_problema)}}function Ue(n,d){if(n&1&&(a(0,"div",29),P(1,He,15,9,"div",30),i()),n&2){let o=u(3);s(),p("ngForOf",o.avisosFiltrados)}}function $e(n,d){n&1&&(a(0,"div",40),g(1,"ion-icon",28),a(2,"p"),c(3,"No se encontraron avisos"),i()())}function Ge(n,d){if(n&1){let o=E();a(0,"div",15)(1,"div",16)(2,"h4"),c(3,"Seleccionar Aviso para el Presupuesto"),i(),a(4,"button",17),v("click",function(){f(o);let t=u(2);return C(t.cerrarSelectorAvisos())}),g(5,"ion-icon",18),i()(),a(6,"div",19)(7,"input",20),q("ngModelChange",function(t){f(o);let r=u(2);return R(r.busquedaAviso,t)||(r.busquedaAviso=t),C(t)}),v("input",function(t){f(o);let r=u(2);return C(r.filtrarAvisos(t))}),i(),g(8,"ion-icon",21),i(),P(9,Le,4,0,"div",22)(10,Be,4,1,"div",23)(11,Ue,2,1,"div",24)(12,$e,4,0,"div",25),i()}if(n&2){let o=u(2);s(7),j("ngModel",o.busquedaAviso),s(2),p("ngIf",o.loadingAvisos),s(),p("ngIf",o.errorAvisos),s(),p("ngIf",!o.loadingAvisos&&!o.errorAvisos),s(),p("ngIf",!o.loadingAvisos&&!o.errorAvisos&&o.avisosFiltrados.length===0)}}function We(n,d){if(n&1){let o=E();a(0,"div",11)(1,"h3"),c(2,"Seleccionar Aviso"),i(),a(3,"p"),c(4,"Para crear un presupuesto, primero debes seleccionar un aviso:"),i(),a(5,"button",12),v("click",function(){f(o);let t=u();return C(t.abrirSelectorAvisos())}),g(6,"ion-icon",13),c(7," Seleccionar Aviso "),i(),P(8,Ge,13,5,"div",14),i()}if(n&2){let o=u();s(8),p("ngIf",o.mostrarSelectorAvisos)}}function Ye(n,d){if(n&1){let o=E();a(0,"div",32)(1,"div",41)(2,"h2"),c(3),i(),a(4,"button",42),v("click",function(){f(o);let t=u();return C(t.abrirSelectorAvisos())}),g(5,"ion-icon",43),c(6," Cambiar Aviso "),i()(),a(7,"p")(8,"strong"),c(9,"Cliente:"),i(),c(10),i(),a(11,"p")(12,"strong"),c(13,"Descripci\xF3n:"),i(),c(14),i()()}if(n&2){let o=u();s(3),F("Aviso: #",o.aviso.id==null?null:o.aviso.id.substring(0,8),""),s(7),F(" ",o.aviso.nombre_cliente_aviso,""),s(4),F(" ",o.aviso.descripcion_problema,"")}}function Je(n,d){n&1&&(a(0,"span"),c(1,"Las horas estimadas son requeridas"),i())}function Ke(n,d){n&1&&(a(0,"span"),c(1,"Las horas deben ser mayor o igual a 0"),i())}function Qe(n,d){n&1&&(a(0,"span"),c(1,"Las horas no pueden exceder 1000"),i())}function Xe(n,d){if(n&1&&(a(0,"div",76),P(1,Je,2,0,"span",77)(2,Ke,2,0,"span",77)(3,Qe,2,0,"span",77),i()),n&2){let o,e,t,r=u(2);s(),p("ngIf",(o=r.presupuestoForm.get("horas_estimadas"))==null||o.errors==null?null:o.errors.required),s(),p("ngIf",(e=r.presupuestoForm.get("horas_estimadas"))==null||e.errors==null?null:e.errors.min),s(),p("ngIf",(t=r.presupuestoForm.get("horas_estimadas"))==null||t.errors==null?null:t.errors.max)}}function Ze(n,d){n&1&&(a(0,"span"),c(1,"Las horas deben ser mayor o igual a 0"),i())}function et(n,d){n&1&&(a(0,"span"),c(1,"Las horas no pueden exceder 1000"),i())}function tt(n,d){if(n&1&&(a(0,"div",76),P(1,Ze,2,0,"span",77)(2,et,2,0,"span",77),i()),n&2){let o,e,t=u(2);s(),p("ngIf",(o=t.presupuestoForm.get("horas_desplazamiento"))==null||o.errors==null?null:o.errors.min),s(),p("ngIf",(e=t.presupuestoForm.get("horas_desplazamiento"))==null||e.errors==null?null:e.errors.max)}}function ot(n,d){n&1&&(a(0,"span"),c(1,"El precio debe ser mayor o igual a 0"),i())}function nt(n,d){n&1&&(a(0,"span"),c(1,"El precio no puede exceder 1000"),i())}function it(n,d){if(n&1&&(a(0,"div",76),P(1,ot,2,0,"span",77)(2,nt,2,0,"span",77),i()),n&2){let o,e,t=u(2);s(),p("ngIf",(o=t.presupuestoForm.get("precio_hora_desplazamiento"))==null||o.errors==null?null:o.errors.min),s(),p("ngIf",(e=t.presupuestoForm.get("precio_hora_desplazamiento"))==null||e.errors==null?null:e.errors.max)}}function rt(n,d){n&1&&(a(0,"span"),c(1,"El total estimado es requerido"),i())}function at(n,d){n&1&&(a(0,"span"),c(1,"El total debe ser mayor o igual a 0"),i())}function st(n,d){n&1&&(a(0,"span"),c(1,"El total no puede exceder 1,000,000"),i())}function ct(n,d){if(n&1&&(a(0,"div",76),P(1,rt,2,0,"span",77)(2,at,2,0,"span",77)(3,st,2,0,"span",77),i()),n&2){let o,e,t,r=u(2);s(),p("ngIf",(o=r.presupuestoForm.get("total_estimado"))==null||o.errors==null?null:o.errors.required),s(),p("ngIf",(e=r.presupuestoForm.get("total_estimado"))==null||e.errors==null?null:e.errors.min),s(),p("ngIf",(t=r.presupuestoForm.get("total_estimado"))==null||t.errors==null?null:t.errors.max)}}function lt(n,d){if(n&1){let o=E();a(0,"button",78),v("click",function(){f(o);let t=u(2);return C(t.limpiarMaterialesInvalidos())}),g(1,"ion-icon",43),c(2," Limpiar "),i()}}function dt(n,d){n&1&&(a(0,"div",85),g(1,"ion-icon",10),a(2,"span"),c(3,"Cargando productos..."),i()())}function pt(n,d){if(n&1&&(a(0,"div",86),g(1,"ion-icon",28),a(2,"span"),c(3),i()()),n&2){let o=u(3);s(3),h(o.errorProductos)}}function mt(n,d){if(n&1){let o=E();a(0,"div",89),v("click",function(){let t=f(o).$implicit,r=u(4);return C(r.agregarMaterialDelInventario(t))}),a(1,"div",90)(2,"div",91)(3,"span",92),c(4),i()(),a(5,"span",93),c(6),i(),a(7,"div",94)(8,"span",95),c(9),i(),a(10,"span",96),c(11),i()()(),a(12,"span",97),c(13),k(14,"currency"),i(),g(15,"ion-icon",98),i()}if(n&2){let o=d.$implicit;s(4),h(o.codigo),s(2),h(o.nombre),s(3),W("Stock: ",o.cantidad_disponible," ",o.unidad,""),s(2),h(o.descripcion),s(2),h(T(14,6,o.precio_neto,"EUR","symbol","1.2-2"))}}function ut(n,d){if(n&1&&(a(0,"div",87),P(1,mt,16,11,"div",88),i()),n&2){let o=u(3);s(),p("ngForOf",o.productosFiltrados)}}function gt(n,d){n&1&&(a(0,"div",99),g(1,"ion-icon",100),a(2,"p"),c(3,"No se encontraron productos"),i()())}function _t(n,d){if(n&1){let o=E();a(0,"div",79)(1,"div",16)(2,"h4"),c(3,"Seleccionar Materiales del Inventario"),i(),a(4,"button",17),v("click",function(){f(o);let t=u(2);return C(t.cerrarSelectorMateriales())}),g(5,"ion-icon",18),i()(),a(6,"div",19)(7,"input",80),q("ngModelChange",function(t){f(o);let r=u(2);return R(r.busquedaProducto,t)||(r.busquedaProducto=t),C(t)}),v("input",function(t){f(o);let r=u(2);return C(r.filtrarProductos(t))}),i(),g(8,"ion-icon",21),i(),P(9,dt,4,0,"div",81)(10,pt,4,1,"div",82)(11,ut,2,1,"div",83)(12,gt,4,0,"div",84),i()}if(n&2){let o=u(2);s(7),j("ngModel",o.busquedaProducto),s(2),p("ngIf",o.loadingProductos),s(),p("ngIf",o.errorProductos),s(),p("ngIf",!o.loadingProductos&&!o.errorProductos),s(),p("ngIf",!o.loadingProductos&&!o.errorProductos&&o.productosFiltrados.length===0)}}function ft(n,d){if(n&1){let o=E();a(0,"div",101)(1,"div",102)(2,"h4"),c(3,"Agregar Material"),i(),a(4,"button",17),v("click",function(){f(o);let t=u(2);return C(t.cerrarFormularioManual())}),g(5,"ion-icon",18),i()(),a(6,"div",103)(7,"div",104),g(8,"input",105),i(),a(9,"div",106),g(10,"input",107),i(),a(11,"div",108),g(12,"input",109),i(),a(13,"button",110),v("click",function(){f(o);let t=u(2);return C(t.agregarMaterialDesdeFormulario())}),g(14,"ion-icon",111),i()()()}if(n&2){let o=u(2);s(6),p("formGroup",o.materialManualForm)}}function Ct(n,d){if(n&1){let o=E();a(0,"div",115)(1,"span",116),c(2),i(),a(3,"input",117),v("change",function(t){let r=f(o).index,l=u(3);return C(l.actualizarCantidadMaterial(r,t))}),i(),a(4,"input",118),v("input",function(t){let r=f(o).index,l=u(3);return C(l.actualizarPrecioMaterial(r,t))}),i(),a(5,"button",119),v("click",function(){let t=f(o).index,r=u(3);return C(r.eliminarMaterial(t))}),g(6,"ion-icon",120),i()()}if(n&2){let o=d.$implicit,e=u(3);s(2),h(e.getNombreProducto(o.material_id)),s(),p("value",o.cantidad_estimada)("min",1),s(),p("value",o.precio_neto_al_momento)("min",0)}}function vt(n,d){if(n&1&&(a(0,"div",112),P(1,Ct,7,5,"div",113),a(2,"div",114)(3,"strong"),c(4),k(5,"currency"),i()()()),n&2){let o=u(2);s(),p("ngForOf",o.materiales),s(3),F("Costo total de materiales: ",T(5,2,o.calcularCostoTotalMateriales(),"EUR","symbol","1.2-2"),"")}}function Pt(n,d){n&1&&(a(0,"div",121)(1,"p"),c(2,"No se han agregado materiales al presupuesto"),i()())}function xt(n,d){if(n&1){let o=E();a(0,"button",122),v("click",function(){f(o);let t=u(2);return C(t.aprobarPresupuesto())}),g(1,"ion-icon",123),c(2," Aprobar Presupuesto "),i()}if(n&2){let o=u(2);p("disabled",o.loading)}}function Mt(n,d){n&1&&(a(0,"div",124),g(1,"ion-icon",123),c(2," Presupuesto Aprobado "),i())}function ht(n,d){n&1&&(a(0,"div",125),g(1,"ion-icon",126),c(2," Presupuesto Rechazado "),i())}function Ot(n,d){n&1&&(a(0,"div",127),g(1,"ion-icon",128),c(2," Presupuesto Cancelado "),i())}function bt(n,d){n&1&&(a(0,"div",129)(1,"p",130),c(2,"Por favor, complete todos los campos requeridos correctamente"),i()())}function yt(n,d){n&1&&(a(0,"div",129)(1,"p",130),c(2,"No se ha seleccionado un aviso"),i()())}function Et(n,d){if(n&1){let o=E();a(0,"form",44),v("ngSubmit",function(){f(o);let t=u();return C(t.guardarPresupuesto())}),a(1,"div",45)(2,"h3"),c(3,"Mano de Obra y Desplazamientos"),i(),a(4,"div",46)(5,"label"),c(6,"Horas de trabajo t\xE9cnico"),i(),a(7,"input",47),v("input",function(){f(o);let t=u();return C(t.calcularTotal())}),i(),P(8,Xe,4,3,"div",48),a(9,"small",49),c(10,"Tiempo de trabajo t\xE9cnico especializado"),i()(),a(11,"div",50)(12,"div",46)(13,"label"),c(14,"Horas de desplazamiento"),i(),a(15,"input",51),v("input",function(){f(o);let t=u();return C(t.calcularTotal())}),i(),P(16,tt,3,2,"div",48),a(17,"small",49),c(18,"Tiempo de traslado y log\xEDstica"),i()(),a(19,"div",46)(20,"label"),c(21,"Precio/hora desplazamiento (\u20AC)"),i(),a(22,"input",52),v("input",function(){f(o);let t=u();return C(t.calcularTotal())}),i(),P(23,it,3,2,"div",48),a(24,"small",49),c(25,"Precio por hora para desplazamientos"),i()()(),a(26,"div",53)(27,"div",54)(28,"span"),c(29,"Trabajo t\xE9cnico:"),i(),a(30,"span"),c(31),k(32,"currency"),i()(),a(33,"div",54)(34,"span"),c(35,"Desplazamientos:"),i(),a(36,"span"),c(37),k(38,"currency"),i()(),a(39,"div",55)(40,"span"),c(41,"Subtotal mano de obra:"),i(),a(42,"span"),c(43),k(44,"currency"),i()()(),a(45,"div",46)(46,"label"),c(47,"Total estimado (\u20AC)"),i(),g(48,"input",56),P(49,ct,4,3,"div",48),i()(),a(50,"div",45)(51,"div",57)(52,"h3"),c(53,"Materiales y Repuestos"),i(),a(54,"div",58)(55,"button",59),v("click",function(){f(o);let t=u();return C(t.abrirSelectorMateriales())}),g(56,"ion-icon",13),c(57," Seleccionar del Inventario "),i(),a(58,"button",60),v("click",function(){f(o);let t=u();return C(t.mostrarFormularioManual())}),g(59,"ion-icon",61),c(60," Agregar Manualmente "),i(),P(61,lt,3,0,"button",62),i()(),P(62,_t,13,5,"div",63)(63,ft,15,1,"div",64)(64,vt,6,7,"div",65)(65,Pt,3,0,"div",66),i(),a(66,"div",67)(67,"button",68),v("click",function(){f(o);let t=u();return C(t.volver())}),g(68,"ion-icon",3),c(69," Volver a Presupuestos "),i(),a(70,"button",69),g(71,"ion-icon",70),c(72),i(),P(73,xt,3,1,"button",71)(74,Mt,3,0,"div",72)(75,ht,3,0,"div",73)(76,Ot,3,0,"div",74),i(),P(77,bt,3,0,"div",75)(78,yt,3,0,"div",75),i()}if(n&2){let o,e,t,r,l,_,x,b,m=u();p("formGroup",m.presupuestoForm),s(8),p("ngIf",((o=m.presupuestoForm.get("horas_estimadas"))==null?null:o.invalid)&&((o=m.presupuestoForm.get("horas_estimadas"))==null?null:o.touched)),s(8),p("ngIf",((e=m.presupuestoForm.get("horas_desplazamiento"))==null?null:e.invalid)&&((e=m.presupuestoForm.get("horas_desplazamiento"))==null?null:e.touched)),s(7),p("ngIf",((t=m.presupuestoForm.get("precio_hora_desplazamiento"))==null?null:t.invalid)&&((t=m.presupuestoForm.get("precio_hora_desplazamiento"))==null?null:t.touched)),s(8),h(T(32,23,m.getCostoTrabajoTecnico(),"EUR","symbol","1.2-2")),s(6),h(T(38,28,m.getCostoDesplazamientos(),"EUR","symbol","1.2-2")),s(6),h(T(44,33,m.getSubtotalManoObra(),"EUR","symbol","1.2-2")),s(6),p("ngIf",((r=m.presupuestoForm.get("total_estimado"))==null?null:r.invalid)&&((r=m.presupuestoForm.get("total_estimado"))==null?null:r.touched)),s(12),p("ngIf",m.materiales.length>0),s(),p("ngIf",m.mostrarSelectorMateriales),s(),p("ngIf",m.mostrarFormularioMaterial),s(),p("ngIf",m.materiales.length>0),s(),p("ngIf",m.materiales.length===0),s(5),G("btn-disabled",!m.presupuestoForm.valid||m.loading||!m.avisoId),p("disabled",!m.presupuestoForm.valid||m.loading||!m.avisoId),s(2),F(" ",m.loading?"Guardando...":m.modoEdicion?"Actualizar Presupuesto":"Guardar Presupuesto"," "),s(),p("ngIf",m.modoEdicion&&((l=m.presupuestoForm.get("estado"))==null?null:l.value)==="Pendiente"),s(),p("ngIf",m.modoEdicion&&((_=m.presupuestoForm.get("estado"))==null?null:_.value)==="Aprobado"),s(),p("ngIf",m.modoEdicion&&((x=m.presupuestoForm.get("estado"))==null?null:x.value)==="Rechazado"),s(),p("ngIf",m.modoEdicion&&((b=m.presupuestoForm.get("estado"))==null?null:b.value)==="Cancelado"),s(),p("ngIf",!m.presupuestoForm.valid&&m.presupuestoForm.touched),s(),p("ngIf",!m.avisoId)}}var Ht=(()=>{let d=class d{constructor(e,t,r,l,_,x,b,m,y){this.fb=e,this.router=t,this.route=r,this.presupuestosService=l,this.avisosService=_,this.inventarioService=x,this.supabaseClientService=b,this.configuracionService=m,this.unifiedReconnectionService=y,this.avisoId=null,this.presupuestoId=null,this.aviso=null,this.presupuesto=null,this.loading=!1,this.materiales=[],this.modoEdicion=!1,this.productosInventario=[],this.productosFiltrados=[],this.loadingProductos=!1,this.errorProductos=null,this.busquedaProducto="",this.mostrarSelectorMateriales=!1,this.mostrarFormularioMaterial=!1,this.avisos=[],this.avisosFiltrados=[],this.loadingAvisos=!1,this.errorAvisos=null,this.busquedaAviso="",this.mostrarSelectorAvisos=!1,this.albaranesAviso=[],this.destroy$=new H,Me({arrowBackOutline:ye,refreshOutline:Ae,listOutline:Te,close:we,searchOutline:Ve,alertCircleOutline:be,addCircleOutline:Oe,cubeOutline:Fe,checkmarkOutline:Se,trashOutline:Ne,saveOutline:De,checkmarkCircleOutline:Ie,closeCircleOutline:ze,banOutline:Ee,informationCircleOutline:ke,addCircle:he}),this.presupuestoForm=this.fb.group({horas_estimadas:[0,[M.required,M.min(0),M.max(1e3)]],horas_desplazamiento:[0,[M.min(0),M.max(1e3)]],precio_hora_desplazamiento:[0,[M.min(0),M.max(1e3)]],total_estimado:[0,[M.required,M.min(0),M.max(1e6)]],estado:["Pendiente",M.required]}),this.materialManualForm=this.fb.group({denominacion:["",M.required],cantidad:[1,[M.required,M.min(1)]],precio:[0,[M.required,M.min(0)]]}),this.formStatusSubscription=this.presupuestoForm.statusChanges.subscribe(w=>{console.log("Estado del formulario:",w),console.log("Formulario v\xE1lido:",this.presupuestoForm.valid),console.log("Errores:",this.presupuestoForm.errors)})}getSupabaseClient(){return console.log("\u{1F4BC} CrearPresupuestoComponent: Obteniendo cliente Supabase actualizado..."),this.supabaseClientService.getClient()}ngOnInit(){console.log("ngOnInit - Iniciando componente crear presupuesto"),this.unifiedReconnectionService.appResumed.pipe(D(this.destroy$),U()).subscribe(e=>{e&&(console.log("\u{1F504} CrearPresupuestoComponent: App reanudada, recargando datos..."),this.cargarProductosInventario(),this.modoEdicion||this.cargarAvisos())}),this.unifiedReconnectionService.connectionState.pipe(D(this.destroy$)).subscribe(e=>{console.log("\u{1F504} CrearPresupuestoComponent: Estado de conexi\xF3n:",e),e==="connected"&&this.errorProductos&&this.cargarProductosInventario()}),this.cargarProductosInventario(),this.cargarAviso(),this.modoEdicion?console.log("ngOnInit - Modo edici\xF3n: no se cargan avisos para selector"):(console.log("ngOnInit - Cargando lista de avisos para selector..."),this.cargarAvisos())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.formStatusSubscription&&this.formStatusSubscription.unsubscribe()}cargarAviso(){this.route.queryParams.subscribe(e=>{this.avisoId=e.avisoId,this.presupuestoId=e.id,this.modoEdicion=e.edit==="true",console.log("Par\xE1metros de ruta:",{avisoId:this.avisoId,presupuestoId:this.presupuestoId,modoEdicion:this.modoEdicion}),this.avisoId?(console.log("\u{1F504} Cargando aviso espec\xEDfico con FETCH DIRECTO:",this.avisoId),this.avisosService.getResumenCompletoAvisoDirect(this.avisoId).subscribe({next:t=>{this.aviso=t,console.log("\u2705 Aviso espec\xEDfico cargado con FETCH DIRECTO:",t)},error:t=>{console.error("\u274C Error al cargar aviso espec\xEDfico con FETCH DIRECTO:",t)}})):this.modoEdicion?console.log("Modo edici\xF3n sin avisoId: se espera que se cargue desde el presupuesto"):console.log("No hay avisoId en la URL y no es edici\xF3n, se mostrar\xE1 el selector de avisos"),this.presupuestoId&&this.modoEdicion&&this.cargarPresupuestoParaEditar()})}verificarPreciosInventario(){console.log("Verificando precios del inventario..."),this.productosInventario.forEach((e,t)=>{console.log(`Producto ${t+1}:`,{id:e.id,nombre:e.nombre,precio_neto:e.precio_neto,tipo_precio:typeof e.precio_neto,es_valido:!isNaN(e.precio_neto)&&isFinite(e.precio_neto)})})}cargarProductosInventario(){this.loadingProductos=!0,this.errorProductos=null,this.inventarioService.getInventario(1,50,"","nombre","asc",!1).pipe(D(this.destroy$)).subscribe({next:e=>{this.productosInventario=e.inventario,this.productosFiltrados=[...this.productosInventario],this.loadingProductos=!1,console.log("Productos del inventario cargados:",this.productosInventario.length),this.verificarPreciosInventario(),this.modoEdicion&&this.presupuesto&&this.presupuesto.materiales_estimados&&(console.log("Reprocesando materiales despu\xE9s de cargar inventario"),this.procesarMateriales(this.presupuesto.materiales_estimados))},error:e=>{console.error("Error al cargar productos del inventario:",e),this.errorProductos="Error al cargar productos del inventario",this.loadingProductos=!1}})}filtrarProductos(e){var r;let t=((r=e==null?void 0:e.target)==null?void 0:r.value)||e||"";this.busquedaProducto=t,t.trim()?this.productosFiltrados=this.productosInventario.filter(l=>{var _;return l.nombre.toLowerCase().includes(t.toLowerCase())||l.codigo.toLowerCase().includes(t.toLowerCase())||(((_=l.descripcion)==null?void 0:_.toLowerCase())||"").includes(t.toLowerCase())}):this.productosFiltrados=[...this.productosInventario]}abrirSelectorMateriales(){this.mostrarSelectorMateriales=!0,this.productosFiltrados=[...this.productosInventario],this.busquedaProducto=""}cerrarSelectorMateriales(){this.mostrarSelectorMateriales=!1}agregarMaterialDelInventario(e){console.log("Agregando material del inventario:",e),console.log("Precio del producto:",e.precio_neto);let t=this.materiales.find(r=>r.material_id===e.id);if(t)t.cantidad_estimada=(t.cantidad_estimada||0)+1,console.log("Material existente actualizado:",t);else{let r={material_id:e.id,cantidad_estimada:1,precio_neto_al_momento:e.precio_neto,producto:e};this.materiales.push(r),console.log("Nuevo material agregado:",r)}this.calcularTotal(!0),this.limpiarMaterialesInvalidos(),this.cerrarSelectorMateriales()}getNombreProducto(e){let t=this.productosInventario.find(l=>l.id===e);if(t)return t.nombre;let r=this.materiales.find(l=>l.material_id===e);return r&&r.producto&&r.producto.nombre||"Producto no encontrado"}getPrecioProducto(e){let t=this.productosInventario.find(l=>l.id===e);if(t)return t.precio_neto;let r=this.materiales.find(l=>l.material_id===e);return r&&r.producto&&r.producto.precio_neto||0}cargarPresupuestoParaEditar(){this.presupuestoId&&(this.loading=!0,this.presupuestosService.getPresupuestoDirect(this.presupuestoId).subscribe({next:e=>{console.log("\u2705 Presupuesto cargado para editar con FETCH DIRECTO:",e),this.presupuesto=e,e.aviso_id&&(this.avisoId=e.aviso_id,console.log("AvisoId establecido:",this.avisoId),this.avisosService.getResumenCompletoAvisoDirect(this.avisoId).subscribe({next:t=>{this.aviso=t,console.log("\u2705 Aviso cargado desde presupuesto con FETCH DIRECTO:",t)},error:t=>{console.error("\u274C Error al cargar aviso desde presupuesto con FETCH DIRECTO:",t)}})),this.presupuestoForm.patchValue({horas_estimadas:e.horas_estimadas,horas_desplazamiento:e.horas_desplazamiento||0,precio_hora_desplazamiento:e.precio_hora_desplazamiento||this.configuracionService.getPrecioHoraManoObraSync(),total_estimado:e.total_estimado,estado:e.estado||"Pendiente"}),e.materiales_estimados&&e.materiales_estimados.length>0?(console.log("Materiales encontrados:",e.materiales_estimados),this.productosInventario.length>0?this.procesarMateriales(e.materiales_estimados):setTimeout(()=>{this.procesarMateriales(e.materiales_estimados)},500)):(console.log("No se encontraron materiales en el presupuesto"),this.materiales=[]),setTimeout(()=>{this.calcularTotal(!0),this.limpiarMaterialesInvalidos()},100),this.loading=!1},error:e=>{console.error("\u274C Error al cargar presupuesto para editar con FETCH DIRECTO:",e),this.loading=!1,alert("Error al cargar el presupuesto: "+(e.message||"Error desconocido"))}}))}procesarMateriales(e){console.log("Procesando materiales:",e),this.materiales=e.map(t=>{console.log("Procesando material:",t),console.log("Precio del material:",t.precio_neto_al_momento),console.log("Material completo:",t);let r={material_id:t.material_id,cantidad_estimada:t.cantidad_estimada||1,precio_neto_al_momento:t.precio_neto_al_momento||0,producto:t.producto||t.material};return console.log("Material procesado:",r),r}),console.log("Materiales procesados:",this.materiales)}mostrarFormularioManual(){this.mostrarFormularioMaterial=!0,this.materialManualForm.reset({denominacion:"",cantidad:1,precio:0})}cerrarFormularioManual(){this.mostrarFormularioMaterial=!1,this.materialManualForm.reset({denominacion:"",cantidad:1,precio:0})}agregarMaterialDesdeFormulario(){var r,l,_;if(console.log("\u{1F50D} Debug - materialManualForm value:",this.materialManualForm.value),console.log("\u{1F50D} Debug - materialManualForm valid:",this.materialManualForm.valid),this.materialManualForm.invalid){if(this.materialManualForm.markAllAsTouched(),(r=this.materialManualForm.get("denominacion"))!=null&&r.invalid){alert("Por favor, introduce la denominaci\xF3n del material");return}if((l=this.materialManualForm.get("cantidad"))!=null&&l.invalid){alert("La cantidad debe ser mayor a 0");return}if((_=this.materialManualForm.get("precio"))!=null&&_.invalid){alert("El precio debe ser mayor o igual a 0");return}return}let e=this.materialManualForm.value,t={material_id:this.generarUUID(),cantidad_estimada:e.cantidad,precio_neto_al_momento:e.precio||0,producto:{id:this.generarUUID(),nombre:e.denominacion.trim(),precio_neto:e.precio||0,unidad:"unidad"}};console.log("\u{1F50D} agregarMaterialDesdeFormulario - Material manual creado:",t),this.materiales.push(t),this.calcularTotal(!0),this.limpiarMaterialesInvalidos(),this.cerrarFormularioManual()}eliminarMaterial(e){var t;console.log("Eliminando material en \xEDndice:",e),console.log("Material a eliminar:",this.materiales[e]),this.materiales.splice(e,1),console.log("Materiales despu\xE9s de eliminar:",this.materiales),this.calcularTotal(!0),this.presupuestoForm.updateValueAndValidity(),console.log("Total estimado despu\xE9s de eliminar material:",(t=this.presupuestoForm.get("total_estimado"))==null?void 0:t.value),this.verificarEstadoMateriales()}actualizarCantidadMaterial(e,t){var l;let r=((l=t==null?void 0:t.target)==null?void 0:l.value)||t||"1";console.log("Actualizando cantidad del material:",e,"Nueva cantidad:",r),this.materiales[e]&&(this.materiales[e].cantidad_estimada=parseInt(r)||1,console.log("Material actualizado:",this.materiales[e]),this.calcularTotal(!0),this.verificarEstadoMateriales())}actualizarPrecioMaterial(e,t){var l;let r=((l=t==null?void 0:t.target)==null?void 0:l.value)||t||"0";console.log("Actualizando precio del material:",e,"Nuevo precio:",r),this.materiales[e]&&(this.materiales[e].precio_neto_al_momento=parseFloat(r)||0,console.log("Material actualizado:",this.materiales[e]),this.calcularTotal(!0),this.verificarEstadoMateriales())}verificarEstadoMateriales(){var y,w,I,O;console.log("=== Verificaci\xF3n de Estado de Materiales ==="),console.log("Cantidad de materiales:",this.materiales.length),console.log("Materiales:",this.materiales),console.log("Total estimado en formulario:",(y=this.presupuestoForm.get("total_estimado"))==null?void 0:y.value),console.log("Costo total calculado:",this.calcularCostoTotalMateriales());let e=((w=this.presupuestoForm.get("horas_estimadas"))==null?void 0:w.value)||0,t=((I=this.presupuestoForm.get("horas_desplazamiento"))==null?void 0:I.value)||0,r=this.configuracionService.getPrecioHoraManoObraSync(),l=((O=this.presupuestoForm.get("precio_hora_desplazamiento"))==null?void 0:O.value)||r,_=e*r,x=t*l,b=this.materiales.reduce((S,V)=>{let A=V.cantidad_estimada||0,N=V.precio_neto_al_momento||0;return S+A*N},0),m=_+x+b;console.log("Total calculado (mano obra + materiales):",m),console.log("==========================================")}calcularCostoTotalMateriales(){return this.materiales.reduce((e,t)=>e+t.cantidad_estimada*t.precio_neto_al_momento,0)}calcularTotal(e=!1){var w,I,O,S;console.log("Calculando total..."),console.log("Materiales actuales:",this.materiales);let t=((w=this.presupuestoForm.get("horas_estimadas"))==null?void 0:w.value)||0,r=((I=this.presupuestoForm.get("horas_desplazamiento"))==null?void 0:I.value)||0,l=this.configuracionService.getPrecioHoraManoObraSync(),_=((O=this.presupuestoForm.get("precio_hora_desplazamiento"))==null?void 0:O.value)||l,x=t*l,b=r*_,m=this.materiales.reduce((V,A)=>{let N=A.cantidad_estimada||0,L=A.precio_neto_al_momento||0,B=N*L;return console.log(`Material: ${A.material_id}, Cantidad: ${N}, Precio: ${L}, Subtotal: ${B}`),V+B},0),y=x+b+m;console.log("Calculando total:",{horasEstimadas:t,horasDesplazamiento:r,precioPorHora:l,costoManoObra:x,costoDesplazamientos:b,costoMateriales:m,totalEstimado:y}),isNaN(y)||!isFinite(y)?(console.error("Error: Total calculado no es un n\xFAmero v\xE1lido"),this.presupuestoForm.patchValue({total_estimado:0})):this.presupuestoForm.patchValue({total_estimado:y}),this.presupuestoForm.updateValueAndValidity(),console.log("Formulario despu\xE9s de calcular total:",{v\u00E1lido:this.presupuestoForm.valid,errores:this.presupuestoForm.errors,total_estimado:(S=this.presupuestoForm.get("total_estimado"))==null?void 0:S.value}),e||this.verificarEstadoMateriales()}verificarMaterialesAntesDeGuardar(){console.log("=== Verificaci\xF3n de Materiales Antes de Guardar ==="),console.log("Cantidad de materiales:",this.materiales.length),console.log("Materiales:",this.materiales),console.log("Materiales v\xE1lidos:",this.materiales.filter(e=>e.material_id&&e.cantidad_estimada>0)),console.log("Materiales con precio v\xE1lido:",this.materiales.filter(e=>e.precio_neto_al_momento>0)),console.log("==================================================")}verificarFormulario(){var r,l,_,x;if(console.log("Verificando formulario..."),console.log("AvisoId actual:",this.avisoId),console.log("Modo edici\xF3n:",this.modoEdicion),console.log("PresupuestoId:",this.presupuestoId),!this.avisoId)return console.error("No hay avisoId"),!1;if(!this.presupuestoForm.valid)return console.error("Formulario inv\xE1lido"),console.log("Errores del formulario:",this.presupuestoForm.errors),console.log("Errores de horas_estimadas:",(r=this.presupuestoForm.get("horas_estimadas"))==null?void 0:r.errors),console.log("Errores de total_estimado:",(l=this.presupuestoForm.get("total_estimado"))==null?void 0:l.errors),!1;let e=(_=this.presupuestoForm.get("horas_estimadas"))==null?void 0:_.value,t=(x=this.presupuestoForm.get("total_estimado"))==null?void 0:x.value;return e<0||t<0?(console.error("Valores negativos no permitidos"),!1):(console.log("Formulario verificado correctamente"),!0)}guardarPresupuesto(){var e,t,r,l,_,x,b,m,y,w;if(console.log("Iniciando guardarPresupuesto..."),console.log("Formulario v\xE1lido:",this.presupuestoForm.valid),console.log("Aviso ID:",this.avisoId),console.log("Valores del formulario:",this.presupuestoForm.value),console.log("Materiales:",this.materiales),!this.verificarFormulario()){alert("Por favor, complete todos los campos requeridos correctamente");return}if(this.loading=!0,console.log("Iniciando operaci\xF3n de guardado..."),this.verificarMaterialesAntesDeGuardar(),this.limpiarMaterialesInvalidos(),this.modoEdicion&&this.presupuestoId){console.log("Modo edici\xF3n - actualizando presupuesto:",this.presupuestoId);let I={horas_estimadas:(e=this.presupuestoForm.get("horas_estimadas"))==null?void 0:e.value,horas_desplazamiento:(t=this.presupuestoForm.get("horas_desplazamiento"))==null?void 0:t.value,precio_hora_desplazamiento:(r=this.presupuestoForm.get("precio_hora_desplazamiento"))==null?void 0:r.value,total_estimado:(l=this.presupuestoForm.get("total_estimado"))==null?void 0:l.value,estado:(_=this.presupuestoForm.get("estado"))==null?void 0:_.value,materiales:this.materiales};console.log("Datos para actualizar:",I),console.log("Materiales a actualizar:",this.materiales),console.log("Cantidad de materiales:",this.materiales.length),console.log("Materiales detallados:",JSON.stringify(this.materiales,null,2)),this.presupuestosService.actualizarPresupuestoDirect(this.presupuestoId,I).subscribe({next:O=>{console.log("\u2705 Presupuesto actualizado exitosamente con FETCH DIRECTO:",O),this.loading=!1,alert("\u2705 Presupuesto actualizado correctamente")},error:O=>{console.error("\u274C Error al actualizar presupuesto con FETCH DIRECTO:",O),this.loading=!1,alert("Error al actualizar el presupuesto: "+(O.message||"Error desconocido"))}})}else{if(console.log("Modo creaci\xF3n - creando nuevo presupuesto"),!this.albaranesAviso||this.albaranesAviso.length===0){alert("Error: No se ha creado un albar\xE1n. Intente seleccionar el aviso nuevamente."),this.loading=!1;return}let I=this.albaranesAviso[0].id;console.log("Usando albar\xE1n ID:",I);let O={aviso_id:this.avisoId||"",albaran_id:I,horas_estimadas:(x=this.presupuestoForm.get("horas_estimadas"))==null?void 0:x.value,horas_desplazamiento:(b=this.presupuestoForm.get("horas_desplazamiento"))==null?void 0:b.value,precio_hora_desplazamiento:(m=this.presupuestoForm.get("precio_hora_desplazamiento"))==null?void 0:m.value,total_estimado:(y=this.presupuestoForm.get("total_estimado"))==null?void 0:y.value,estado:(w=this.presupuestoForm.get("estado"))==null?void 0:w.value,materiales:this.materiales};console.log("Datos para crear:",O),this.presupuestosService.crearPresupuesto(O).subscribe({next:S=>{console.log("Presupuesto creado exitosamente:",S),this.loading=!1,alert("\u2705 Presupuesto creado correctamente"),this.modoEdicion=!0,this.presupuestoId=S.id,this.presupuesto=S},error:S=>{console.error("Error al crear presupuesto:",S),this.loading=!1,alert("Error al crear el presupuesto: "+(S.message||"Error desconocido"))}})}}volver(){this.router.navigate(["/presupuestos"])}volverAlAviso(){this.avisoId?(console.log("\u{1F504} Volviendo al aviso:",this.avisoId),this.router.navigate(["/avisos",this.avisoId])):(console.warn("No hay avisoId para volver"),this.volver())}aprobarPresupuesto(){if(!this.modoEdicion||!this.presupuestoId){alert("Primero debes guardar el presupuesto antes de aprobarlo");return}confirm(`\xBFEst\xE1s seguro de que quieres aprobar este presupuesto?

Al aprobarlo:
\u2022 El presupuesto se marcar\xE1 como "Aprobado"
\u2022 El aviso cambiar\xE1 a "Listo para facturar"
\u2022 El albar\xE1n asociado cambiar\xE1 a "Finalizado"
\u2022 Esta acci\xF3n no se puede deshacer`)&&(this.loading=!0,this.presupuestosService.aprobarPresupuesto(this.presupuestoId).subscribe({next:t=>{console.log("Presupuesto aprobado exitosamente:",t),this.loading=!1,this.presupuesto.estado="Aprobado",this.presupuestoForm.patchValue({estado:"Aprobado"}),this.aviso&&(this.aviso.estado="Listo para facturar"),alert("Presupuesto aprobado correctamente. El aviso est\xE1 listo para facturar.")},error:t=>{console.error("Error al aprobar presupuesto:",t),this.loading=!1,alert("Error al aprobar el presupuesto: "+(t.message||"Error desconocido"))}}))}actualizarAlbaranAsociado(e){console.log("Actualizando albar\xE1n asociado:",e),this.getSupabaseClient().from("albaranes").update({estado_cierre:"Finalizado",fecha_actualizacion:new Date().toISOString()}).eq("id",e).select().single().then(({data:t,error:r})=>{r?(console.error("Error al actualizar albar\xE1n:",r),alert("\u26A0\uFE0F Presupuesto aprobado, pero hubo un error al actualizar el albar\xE1n. Contacta al administrador.")):console.log("Albar\xE1n actualizado exitosamente:",t),this.finalizarAprobacion()})}finalizarAprobacion(){this.loading=!1,this.presupuestoForm.patchValue({estado:"Aprobado"}),alert("\u2705 Presupuesto aprobado exitosamente. El albar\xE1n ha sido marcado como finalizado.")}cargarAvisos(){console.log("\u{1F504} Iniciando carga de avisos..."),this.loadingAvisos=!0,this.errorAvisos=null,this.avisosService.getAvisos(1,1e3,"","fecha_creacion","desc","Pendiente").pipe(D(this.destroy$)).subscribe({next:e=>{this.avisos=e.avisos||[],this.avisosFiltrados=[...this.avisos],this.loadingAvisos=!1,console.log("\u2705 Avisos cargados exitosamente:",this.avisos.length),console.log("\u{1F4CB} Primeros 3 avisos:",this.avisos.slice(0,3)),this.avisos.length===0?console.log("\u26A0\uFE0F No se encontraron avisos"):console.log("\u{1F3AF} Selector de avisos listo para mostrar")},error:e=>{console.error("\u274C Error al cargar avisos:",e),this.errorAvisos="Error al cargar avisos: "+(e.message||"Error desconocido"),this.loadingAvisos=!1}})}filtrarAvisos(e){var r;let t=((r=e==null?void 0:e.target)==null?void 0:r.value)||e||"";this.busquedaAviso=t,t.trim()?this.avisosFiltrados=this.avisos.filter(l=>{var _,x;return((_=l.nombre_cliente_aviso)==null?void 0:_.toLowerCase().includes(t.toLowerCase()))||((x=l.descripcion_problema)==null?void 0:x.toLowerCase().includes(t.toLowerCase()))}):this.avisosFiltrados=[...this.avisos]}abrirSelectorAvisos(){if(this.modoEdicion){console.log("No se puede abrir selector de avisos en modo edici\xF3n");return}this.mostrarSelectorAvisos=!0,this.avisosFiltrados=[...this.avisos],this.busquedaAviso=""}cerrarSelectorAvisos(){this.mostrarSelectorAvisos=!1}seleccionarAviso(e){if(this.modoEdicion){console.log("No se puede cambiar el aviso en modo edici\xF3n");return}this.avisoId=e.id,this.aviso=e,this.cerrarSelectorAvisos(),this.materiales=[],this.calcularTotal(!0),console.log("Aviso seleccionado:",e),this.cargarAlbaranesAviso(e.id)}cargarAlbaranesAviso(e){console.log("Cargando albaranes para aviso:",e),this.crearAlbaranParaPresupuesto(e)}crearAlbaranParaPresupuesto(e){if(this.modoEdicion){console.log("No se puede crear albar\xE1n en modo edici\xF3n");return}let t={aviso_id:e,fecha_trabajo:new Date().toISOString().split("T")[0],hora_entrada:"09:00:00",hora_salida:"17:00:00",descripcion_trabajo_realizado:"Presupuesto pendiente - trabajo por realizar",estado_cierre:"Presupuesto pendiente",presupuesto_necesario:0};console.log("Creando albar\xE1n con datos:",t),this.getSupabaseClient().from("albaranes").insert([t]).select().single().then(({data:r,error:l})=>{l?(console.error("Error al crear albar\xE1n:",l),alert("Error al crear albar\xE1n: "+l.message)):(console.log("Albar\xE1n creado exitosamente:",r),this.albaranesAviso=[r])})}generarUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}debugEstado(){var e,t;console.log("=== DEBUG ESTADO COMPONENTE ==="),console.log("avisoId:",this.avisoId),console.log("aviso:",this.aviso),console.log("loading:",this.loading),console.log("loadingAvisos:",this.loadingAvisos),console.log("errorAvisos:",this.errorAvisos),console.log("avisos.length:",(e=this.avisos)==null?void 0:e.length),console.log("avisosFiltrados.length:",(t=this.avisosFiltrados)==null?void 0:t.length),console.log("mostrarSelectorAvisos:",this.mostrarSelectorAvisos),console.log("modoEdicion:",this.modoEdicion),console.log("presupuestoId:",this.presupuestoId),console.log("================================")}getCostoTrabajoTecnico(){var r;let e=((r=this.presupuestoForm.get("horas_estimadas"))==null?void 0:r.value)||0,t=this.configuracionService.getPrecioHoraManoObraSync();return e*t}getCostoDesplazamientos(){var l,_;let e=((l=this.presupuestoForm.get("horas_desplazamiento"))==null?void 0:l.value)||0,t=this.configuracionService.getPrecioHoraManoObraSync(),r=((_=this.presupuestoForm.get("precio_hora_desplazamiento"))==null?void 0:_.value)||t;return e*r}getSubtotalManoObra(){return this.getCostoTrabajoTecnico()+this.getCostoDesplazamientos()}limpiarMaterialesInvalidos(){console.log("Limpiando materiales inv\xE1lidos..."),console.log("Materiales antes de limpiar:",this.materiales);let e=["desplazamiento","desplazamientos","traslado","traslados","mano de obra","trabajo t\xE9cnico","horas","desplazamiento y traslados"];this.materiales=this.materiales.filter(t=>t.material_id&&t.cantidad_estimada>0&&t.precio_neto_al_momento>=0),this.materiales=this.materiales.filter(t=>{let r=this.getNombreProducto(t.material_id).toLowerCase(),l=e.some(_=>r.includes(_.toLowerCase()));return l&&console.log(`\u{1F9F9} Eliminando material inv\xE1lido: ${r}`),!l}),console.log("Materiales despu\xE9s de limpiar:",this.materiales),this.calcularTotal(!0)}};d.\u0275fac=function(t){return new(t||d)(z(me),z(oe),z(te),z(je),z(Pe),z(Re),z(Ce),z(ve),z(xe))},d.\u0275cmp=$({type:d,selectors:[["app-crear-presupuesto"]],decls:12,vars:5,consts:[[1,"presupuesto-container"],[1,"page-header"],[1,"btn-back",3,"click"],["name","arrow-back-outline"],["class","loading-state",4,"ngIf"],["class","aviso-selector-section",4,"ngIf"],["class","aviso-info",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"loading-state"],[1,"loading-spinner"],["name","refresh-outline",1,"spinning"],[1,"aviso-selector-section"],["type","button",1,"btn-select-aviso",3,"click"],["name","list-outline"],["class","aviso-selector",4,"ngIf"],[1,"aviso-selector"],[1,"selector-header"],["type","button",1,"btn-close",3,"click"],["name","close"],[1,"search-container"],["type","text","placeholder","Buscar avisos por cliente o descripci\xF3n...",1,"search-input",3,"ngModelChange","input","ngModel"],["name","search-outline"],["class","loading-avisos",4,"ngIf"],["class","error-avisos",4,"ngIf"],["class","avisos-list",4,"ngIf"],["class","no-avisos",4,"ngIf"],[1,"loading-avisos"],[1,"error-avisos"],["name","alert-circle-outline"],[1,"avisos-list"],["class","aviso-item",3,"click",4,"ngFor","ngForOf"],[1,"aviso-item",3,"click"],[1,"aviso-info"],[1,"aviso-header"],[1,"aviso-id"],[1,"aviso-estado",3,"ngClass"],[1,"aviso-cliente"],[1,"aviso-details"],[1,"aviso-fecha"],[1,"aviso-descripcion"],[1,"no-avisos"],[1,"aviso-header-info"],["type","button",1,"btn-change-aviso",3,"click"],["name","refresh-outline"],[3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-group"],["type","number","formControlName","horas_estimadas","min","0","step","0.5","placeholder","0.0",3,"input"],["class","error-message",4,"ngIf"],[1,"help-text"],[1,"form-row"],["type","number","formControlName","horas_desplazamiento","min","0","step","0.5","placeholder","0.0",3,"input"],["type","number","formControlName","precio_hora_desplazamiento","min","0","step","0.01","placeholder","0.00",3,"input"],[1,"summary-box"],[1,"summary-item"],[1,"summary-item","total"],["type","number","formControlName","total_estimado","min","0","step","0.01","placeholder","0.00"],[1,"section-header"],[1,"header-actions"],["type","button",1,"btn-select-inventory",3,"click"],["type","button",1,"btn-add",3,"click"],["name","add-circle-outline"],["type","button","class","btn-clean","title","Limpiar materiales inv\xE1lidos",3,"click",4,"ngIf"],["class","inventory-selector",4,"ngIf"],["class","formulario-material-manual",4,"ngIf"],["class","materiales-list",4,"ngIf"],["class","no-materiales",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],["name","save-outline"],["type","button","class","btn-success",3,"disabled","click",4,"ngIf"],["class","presupuesto-completado",4,"ngIf"],["class","presupuesto-rechazado",4,"ngIf"],["class","presupuesto-cancelado",4,"ngIf"],["class","form-status",4,"ngIf"],[1,"error-message"],[4,"ngIf"],["type","button","title","Limpiar materiales inv\xE1lidos",1,"btn-clean",3,"click"],[1,"inventory-selector"],["type","text","placeholder","Buscar productos...",1,"search-input",3,"ngModelChange","input","ngModel"],["class","loading-products",4,"ngIf"],["class","error-products",4,"ngIf"],["class","products-list",4,"ngIf"],["class","no-products",4,"ngIf"],[1,"loading-products"],[1,"error-products"],[1,"products-list"],["class","product-item",3,"click",4,"ngFor","ngForOf"],[1,"product-item",3,"click"],[1,"product-info"],[1,"product-header"],[1,"product-code"],[1,"product-name"],[1,"product-details"],[1,"product-stock"],[1,"product-description"],[1,"product-price"],["name","add-circle-outline",1,"add-icon"],[1,"no-products"],["name","cube-outline"],[1,"formulario-material-manual"],[1,"formulario-header"],[1,"formulario-campos",3,"formGroup"],[1,"campo-input"],["type","text","formControlName","denominacion","placeholder","Denominaci\xF3n del material",1,"input-denominacion"],[1,"campo-cantidad"],["type","number","formControlName","cantidad","placeholder","Cantidad","min","1",1,"input-cantidad"],[1,"campo-precio"],["type","number","formControlName","precio","placeholder","Precio \u20AC","min","0","step","0.01",1,"input-precio"],["type","button",1,"btn-agregar",3,"click"],["name","checkmark-outline"],[1,"materiales-list"],["class","material-item-compacto",4,"ngFor","ngForOf"],[1,"costo-total"],[1,"material-item-compacto"],[1,"material-denominacion"],["type","number",1,"cantidad-input-compacto",3,"change","value","min"],["type","number","step","0.01",1,"precio-input-compacto",3,"input","value","min"],["type","button",1,"btn-remove-compacto",3,"click"],["name","trash-outline"],[1,"no-materiales"],["type","button",1,"btn-success",3,"click","disabled"],["name","checkmark-circle-outline"],[1,"presupuesto-completado"],[1,"presupuesto-rechazado"],["name","close-circle-outline"],[1,"presupuesto-cancelado"],["name","ban-outline"],[1,"form-status"],[1,"status-error"]],template:function(t,r){t&1&&(a(0,"ion-content")(1,"div",0)(2,"div",1)(3,"button",2),v("click",function(){return r.volver()}),g(4,"ion-icon",3),c(5," Volver "),i(),a(6,"h1"),c(7),i()(),P(8,qe,5,0,"div",4)(9,We,9,1,"div",5)(10,Ye,15,3,"div",6)(11,Et,79,38,"form",7),i()()),t&2&&(s(7),h(r.modoEdicion?"Editar Presupuesto":"Crear Presupuesto"),s(),p("ngIf",r.loading&&r.modoEdicion),s(),p("ngIf",!r.aviso&&!r.loading&&!r.modoEdicion),s(),p("ngIf",r.aviso&&!r.loading),s(),p("ngIf",r.aviso))},dependencies:[ee,J,K,Q,Z,X,ge,se,ne,ce,ie,re,pe,le,de,ue,ae,_e,fe],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: #fff}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{text-align:center;color:#64748b}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;color:#cbd5e0}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   ion-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:0}.presupuesto-container[_ngcontent-%COMP%]{margin:0 auto;padding:20px;background-color:#fff}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1a202c;margin:0}.btn-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#f7fafc;border:1px solid #e2e8f0;border-radius:8px;color:#4a5568;text-decoration:none;cursor:pointer;transition:all .2s}.btn-back[_ngcontent-%COMP%]:hover{background:#edf2f7;border-color:#cbd5e0}.btn-back[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.aviso-info[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:20px;margin-bottom:15px}.aviso-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#2d3748;margin:0 0 12px}.aviso-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#4a5568}.aviso-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2d3748}.form-section[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:24px;margin-bottom:20px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#2d3748;margin:0 0 20px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:between;align-items:center;margin-bottom:20px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;flex:1}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#4a5568;margin-bottom:6px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #e2e8f0;border-radius:6px;font-size:14px;color:#2d3748;background:#fff;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{color:#a0aec0}.form-group[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#e53e3e;box-shadow:0 0 0 3px #e53e3e1a}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:pointer}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:8px}.form-group[_ngcontent-%COMP%]   select[formControlName=estado][_ngcontent-%COMP%]{font-weight:500}.form-group[_ngcontent-%COMP%]   select[formControlName=estado][_ngcontent-%COMP%]   option[value=Pendiente][_ngcontent-%COMP%]{color:#f59e0b}.form-group[_ngcontent-%COMP%]   select[formControlName=estado][_ngcontent-%COMP%]   option[value=Aprobado][_ngcontent-%COMP%]{color:#10b981}.form-group[_ngcontent-%COMP%]   select[formControlName=estado][_ngcontent-%COMP%]   option[value=Rechazado][_ngcontent-%COMP%]{color:#ef4444}.form-group[_ngcontent-%COMP%]   select[formControlName=estado][_ngcontent-%COMP%]   option[value=Cancelado][_ngcontent-%COMP%]{color:#6b7280}.form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;color:#e53e3e}.form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.btn-add[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#4f46e5;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:background .2s}.btn-add[_ngcontent-%COMP%]:hover{background:#4338ca}.btn-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.materiales-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.material-item[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start;padding:16px;background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px}.material-fields[_ngcontent-%COMP%]{display:flex;gap:12px;flex:1}.material-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:1px solid #e2e8f0;border-radius:6px;font-size:13px}.material-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5}.btn-remove[_ngcontent-%COMP%]{padding:8px;background:#fed7d7;color:#e53e3e;border:none;border-radius:6px;cursor:pointer;transition:background .2s}.btn-remove[_ngcontent-%COMP%]:hover{background:#feb2b2}.btn-remove[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.no-materiales[_ngcontent-%COMP%]{text-align:center;color:#a0aec0;font-style:italic;padding:20px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:24px}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:8px}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#4a5568;border:1px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7fafc;border-color:#cbd5e0}.btn-primary[_ngcontent-%COMP%]{background:#4f46e5;color:#fff;border:1px solid #4f46e5}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#4338ca;border-color:#4338ca}.btn-primary[_ngcontent-%COMP%]:disabled{background:#a0aec0;border-color:#a0aec0;cursor:not-allowed;opacity:.6}.btn-primary.btn-disabled[_ngcontent-%COMP%]{background:#a0aec0;border-color:#a0aec0;cursor:not-allowed;opacity:.6}.btn-primary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.btn-success[_ngcontent-%COMP%]{background:#10b981;color:#fff;border:1px solid #10B981;padding:12px 24px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:8px}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:#059669;border-color:#059669}.btn-success[_ngcontent-%COMP%]:disabled{background:#a0aec0;border-color:#a0aec0;cursor:not-allowed;opacity:.6}.btn-success[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.presupuesto-completado[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 24px;background:#ecfdf5;color:#065f46;border:1px solid #D1FAE5;border-radius:8px;font-size:14px;font-weight:500}.presupuesto-completado[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#10b981}.presupuesto-rechazado[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 24px;background:#fef2f2;color:#991b1b;border:1px solid #FECACA;border-radius:8px;font-size:14px;font-weight:500}.presupuesto-rechazado[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#ef4444}.presupuesto-cancelado[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 24px;background:#f3f4f6;color:#374151;border:1px solid #D1D5DB;border-radius:8px;font-size:14px;font-weight:500}.presupuesto-cancelado[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#6b7280}.form-status[_ngcontent-%COMP%]{margin-top:12px;padding:12px;border-radius:6px}.form-status[_ngcontent-%COMP%]   .status-error[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#e53e3e;background:#fed7d7;padding:8px 12px;border-radius:4px;border-left:4px solid #e53e3e}.inventory-selector[_ngcontent-%COMP%]{background:#fff;padding:0;margin-bottom:15px;max-height:400px;overflow:hidden;display:flex;flex-direction:column}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:16px;font-weight:600}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;font-size:20px;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s}.inventory-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative;margin-bottom:5px}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 16px;border:1px solid #D1D5DB;border-radius:8px;font-size:14px;background:#f9fafb}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 3px #3b82f61a}.inventory-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:18px}.inventory-selector[_ngcontent-%COMP%]   .loading-products[_ngcontent-%COMP%], .inventory-selector[_ngcontent-%COMP%]   .error-products[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:40px 20px;color:#6b7280;font-size:14px}.inventory-selector[_ngcontent-%COMP%]   .loading-products[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .inventory-selector[_ngcontent-%COMP%]   .error-products[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px}.inventory-selector[_ngcontent-%COMP%]   .loading-products.spinning[_ngcontent-%COMP%], .inventory-selector[_ngcontent-%COMP%]   .error-products.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.inventory-selector[_ngcontent-%COMP%]   .error-products[_ngcontent-%COMP%]{color:#dc2626}.inventory-selector[_ngcontent-%COMP%]   .error-products[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#dc2626}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;border:1px solid #E5E7EB;border-radius:8px;background:#f9fafb}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid #E5E7EB;cursor:pointer;transition:all .2s}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:hover{background:#f3f4f6}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-weight:600;color:#059669;font-size:13px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{flex:1}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-code[_ngcontent-%COMP%]{font-size:11px;color:#6b7280;background:#e5e7eb;padding:2px 6px;border-radius:4px;font-weight:500}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-weight:600;color:#059669;font-size:13px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;font-size:13px;margin-bottom:4px;display:block}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-stock[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{color:#3b82f6;font-size:20px;margin-left:12px}.inventory-selector[_ngcontent-%COMP%]   .no-products[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.inventory-selector[_ngcontent-%COMP%]   .no-products[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#d1d5db;margin-bottom:12px}.inventory-selector[_ngcontent-%COMP%]   .no-products[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.header-actions[_ngcontent-%COMP%]   .btn-select-inventory[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:8px 16px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:6px;transition:all .2s}.header-actions[_ngcontent-%COMP%]   .btn-select-inventory[_ngcontent-%COMP%]:hover{background:#2563eb}.header-actions[_ngcontent-%COMP%]   .btn-select-inventory[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.materiales-list[_ngcontent-%COMP%]{margin-top:20px}.materiales-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#1f2937;font-size:16px;font-weight:600}.materiales-list[_ngcontent-%COMP%]   .costo-total[_ngcontent-%COMP%]{margin-bottom:16px;padding:12px 16px;background:#f0f9ff;border:1px solid #BAE6FD;border-radius:8px;text-align:center}.materiales-list[_ngcontent-%COMP%]   .costo-total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0369a1;font-size:16px}.materiales-list[_ngcontent-%COMP%]   .material-item-compacto[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px 12px;background:#f0f9ff;border:1px solid #BAE6FD;border-radius:6px;margin-bottom:6px;width:100%}.materiales-list[_ngcontent-%COMP%]   .material-item-compacto[_ngcontent-%COMP%]   .material-denominacion[_ngcontent-%COMP%]{flex:1;font-weight:500;color:#0369a1;font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.materiales-list[_ngcontent-%COMP%]   .material-item-compacto[_ngcontent-%COMP%]   .cantidad-input-compacto[_ngcontent-%COMP%]{width:50px;padding:4px 6px;border:1px solid #D1D5DB;border-radius:4px;font-size:12px;text-align:center;background-color:#fafafb;color:#111827}.materiales-list[_ngcontent-%COMP%]   .material-item-compacto[_ngcontent-%COMP%]   .precio-input-compacto[_ngcontent-%COMP%]{width:70px;padding:4px 6px;border:1px solid #D1D5DB;border-radius:4px;font-size:12px;text-align:center;background-color:#fafafb;color:#111827}.materiales-list[_ngcontent-%COMP%]   .material-item-compacto[_ngcontent-%COMP%]   .btn-remove-compacto[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626;border:none;padding:4px;border-radius:4px;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;width:28px;height:28px}.materiales-list[_ngcontent-%COMP%]   .material-item-compacto[_ngcontent-%COMP%]   .btn-remove-compacto[_ngcontent-%COMP%]:hover{background:#fecaca}.materiales-list[_ngcontent-%COMP%]   .material-item-compacto[_ngcontent-%COMP%]   .btn-remove-compacto[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.formulario-material-manual[_ngcontent-%COMP%]{background:#fff;border:1px solid #E2E8F0;border-radius:8px;padding:16px;margin-bottom:16px;box-shadow:0 1px 3px #0000001a}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:14px;font-weight:600}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;font-size:16px;cursor:pointer;padding:2px;border-radius:4px;transition:all .2s}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-input[_ngcontent-%COMP%]{flex:1}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-input[_ngcontent-%COMP%]   .input-denominacion[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #D1D5DB;border-radius:6px;font-size:14px;background-color:#fafafb;color:#111827;transition:border-color .2s}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-input[_ngcontent-%COMP%]   .input-denominacion[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-input[_ngcontent-%COMP%]   .input-denominacion[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-cantidad[_ngcontent-%COMP%]   .input-cantidad[_ngcontent-%COMP%]{width:60px;padding:8px 6px;border:1px solid #D1D5DB;border-radius:6px;font-size:14px;text-align:center;background-color:#fafafb;color:#111827;transition:border-color .2s}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-cantidad[_ngcontent-%COMP%]   .input-cantidad[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-cantidad[_ngcontent-%COMP%]   .input-cantidad[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-precio[_ngcontent-%COMP%]   .input-precio[_ngcontent-%COMP%]{width:70px;padding:8px 6px;border:1px solid #D1D5DB;border-radius:6px;font-size:14px;text-align:center;background-color:#fafafb;color:#111827;transition:border-color .2s}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-precio[_ngcontent-%COMP%]   .input-precio[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-precio[_ngcontent-%COMP%]   .input-precio[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .btn-agregar[_ngcontent-%COMP%]{background:#10b981;color:#fff;border:none;padding:8px;border-radius:6px;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;width:36px;height:36px}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .btn-agregar[_ngcontent-%COMP%]:hover{background:#059669}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .btn-agregar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.aviso-selector-section[_ngcontent-%COMP%]{padding:0;margin-bottom:24px}.aviso-selector-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1f2937;font-size:16px;font-weight:600;margin:0 0 8px}.aviso-selector-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin:0 0 20px;font-size:14px}.aviso-selector-section[_ngcontent-%COMP%]   .btn-select-aviso[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;background:#3b82f6;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.aviso-selector-section[_ngcontent-%COMP%]   .btn-select-aviso[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px)}.aviso-selector-section[_ngcontent-%COMP%]   .btn-select-aviso[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.aviso-selector[_ngcontent-%COMP%]{margin-top:20px}.aviso-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.aviso-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:16px;font-weight:600}.aviso-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;font-size:20px;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s}.aviso-selector[_ngcontent-%COMP%]   .selector-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.aviso-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.aviso-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 16px;border:1px solid #D1D5DB;border-radius:8px;font-size:14px;background:#f9fafb}.aviso-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 3px #3b82f61a}.aviso-selector[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:18px}.aviso-selector[_ngcontent-%COMP%]   .loading-avisos[_ngcontent-%COMP%], .aviso-selector[_ngcontent-%COMP%]   .error-avisos[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:40px 20px;color:#6b7280;font-size:14px}.aviso-selector[_ngcontent-%COMP%]   .loading-avisos[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .aviso-selector[_ngcontent-%COMP%]   .error-avisos[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px}.aviso-selector[_ngcontent-%COMP%]   .loading-avisos.spinning[_ngcontent-%COMP%], .aviso-selector[_ngcontent-%COMP%]   .error-avisos.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.aviso-selector[_ngcontent-%COMP%]   .error-avisos[_ngcontent-%COMP%]{color:#dc2626}.aviso-selector[_ngcontent-%COMP%]   .error-avisos[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#dc2626}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]{overflow-y:auto;border-radius:8px;padding:0;margin:0}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;cursor:pointer;transition:all .2s}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]:hover{background:#f3f4f6}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]{flex:1}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .aviso-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .aviso-header[_ngcontent-%COMP%]   .aviso-id[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;background:#e5e7eb;padding:2px 6px;border-radius:4px;font-weight:500}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .aviso-header[_ngcontent-%COMP%]   .aviso-estado[_ngcontent-%COMP%]{font-size:11px;padding:2px 8px;border-radius:12px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .aviso-header[_ngcontent-%COMP%]   .aviso-estado.estado-pendiente[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .aviso-header[_ngcontent-%COMP%]   .aviso-estado.estado-en-curso[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .aviso-header[_ngcontent-%COMP%]   .aviso-estado.estado-completado[_ngcontent-%COMP%]{background:#d1fae5;color:#059669}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .aviso-cliente[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;font-size:14px;margin-bottom:4px;display:block}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .aviso-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .aviso-details[_ngcontent-%COMP%]   .aviso-fecha[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]   .aviso-info[_ngcontent-%COMP%]   .aviso-details[_ngcontent-%COMP%]   .aviso-descripcion[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:300px}.aviso-selector[_ngcontent-%COMP%]   .avisos-list[_ngcontent-%COMP%]   .aviso-item[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%]{color:#3b82f6;font-size:20px;margin-left:12px}.aviso-selector[_ngcontent-%COMP%]   .no-avisos[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.aviso-selector[_ngcontent-%COMP%]   .no-avisos[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#d1d5db;margin-bottom:12px}.aviso-selector[_ngcontent-%COMP%]   .no-avisos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.aviso-header-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.aviso-header-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:16px!important;font-weight:600;color:#1f2937}.aviso-header-info[_ngcontent-%COMP%]   .btn-change-aviso[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:6px 12px;background:#f3f4f6;color:#6b7280;border:1px solid #D1D5DB;border-radius:6px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s}.aviso-header-info[_ngcontent-%COMP%]   .btn-change-aviso[_ngcontent-%COMP%]:hover{background:#e5e7eb;color:#374151}.aviso-header-info[_ngcontent-%COMP%]   .btn-change-aviso[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.presupuesto-container[_ngcontent-%COMP%]{padding:16px}.page-header[_ngcontent-%COMP%]{margin-bottom:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px!important}.form-section[_ngcontent-%COMP%]{padding:16px}.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.material-fields[_ngcontent-%COMP%]{flex-direction:column}.material-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.inventory-selector[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]{max-height:250px}.materiales-list[_ngcontent-%COMP%]   .material-item[_ngcontent-%COMP%]   .material-fields[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.header-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px;width:100%}.header-actions[_ngcontent-%COMP%]   .btn-select-inventory[_ngcontent-%COMP%], .header-actions[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{width:100%;justify-content:center}.formulario-material-manual[_ngcontent-%COMP%]{padding:12px;margin-bottom:12px}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]{flex-direction:row;gap:8px}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-input[_ngcontent-%COMP%]{width:100%}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-input[_ngcontent-%COMP%]   .input-denominacion[_ngcontent-%COMP%]{font-size:16px;padding:10px 12px}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-cantidad[_ngcontent-%COMP%]{align-self:flex-start}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-cantidad[_ngcontent-%COMP%]   .input-cantidad[_ngcontent-%COMP%]{width:40px;font-size:16px;padding:10px 6px}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-precio[_ngcontent-%COMP%]{align-self:flex-start}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .campo-precio[_ngcontent-%COMP%]   .input-precio[_ngcontent-%COMP%]{width:40px;font-size:16px;padding:10px 6px}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .btn-agregar[_ngcontent-%COMP%]{align-self:flex-end;width:40px;height:43px}.formulario-material-manual[_ngcontent-%COMP%]   .formulario-campos[_ngcontent-%COMP%]   .btn-agregar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.materiales-list[_ngcontent-%COMP%]   .material-item-compacto[_ngcontent-%COMP%]{padding:6px 8px;gap:8px}.materiales-list[_ngcontent-%COMP%]   .material-item-compacto[_ngcontent-%COMP%]   .material-denominacion[_ngcontent-%COMP%]{font-size:13px}.materiales-list[_ngcontent-%COMP%]   .material-item-compacto[_ngcontent-%COMP%]   .cantidad-input-compacto[_ngcontent-%COMP%]{width:45px;font-size:12px}.materiales-list[_ngcontent-%COMP%]   .material-item-compacto[_ngcontent-%COMP%]   .precio-input-compacto[_ngcontent-%COMP%]{width:60px;font-size:12px}.materiales-list[_ngcontent-%COMP%]   .material-item-compacto[_ngcontent-%COMP%]   .btn-remove-compacto[_ngcontent-%COMP%]{width:24px;height:24px}.materiales-list[_ngcontent-%COMP%]   .material-item-compacto[_ngcontent-%COMP%]   .btn-remove-compacto[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:10px}}.help-text[_ngcontent-%COMP%]{font-size:12px;color:#64748b;margin-top:4px;font-style:italic}.summary-box[_ngcontent-%COMP%]{background-color:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:16px;margin:16px 0}.summary-box[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #e2e8f0}.summary-box[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.summary-box[_ngcontent-%COMP%]   .summary-item.total[_ngcontent-%COMP%]{font-weight:600;color:#4f46e5;font-size:16px;padding-top:12px;margin-top:8px;border-top:2px solid #4f46e5}.summary-box[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{color:#64748b;font-size:14px}.summary-box[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{color:#111827;font-weight:500;font-size:14px}.total[_ngcontent-%COMP%]   .summary-box[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-weight:600;font-size:16px}.btn-clean[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;border:none;padding:8px 12px;border-radius:6px;font-size:12px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:4px;transition:all .2s ease}.btn-clean[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d97706,#b45309);transform:translateY(-1px)}.btn-clean[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;margin-bottom:0}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}}']});let n=d;return n})();export{Ht as CrearPresupuestoComponent};
