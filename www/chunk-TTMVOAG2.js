import{b as o}from"./chunk-3FN3ZALU.js";import{D as _,G as n,k as E}from"./chunk-7PIWZYGA.js";var s=function(r){return r.ADMINISTRADOR="Administrador",r.TECNICO="T\xE9cnico",r.USUARIO="Usuario",r}(s||{}),e=function(r){return r.VER_PERFIL_PROPIO="ver_perfil_propio",r.EDITAR_PERFIL_PROPIO="editar_perfil_propio",r.VER_AVISOS="ver_avisos",r.CREAR_AVISOS="crear_avisos",r.EDITAR_AVISOS="editar_avisos",r.ELIMINAR_AVISOS="eliminar_avisos",r.ASIGNAR_AVISOS="asignar_avisos",r.VER_CLIENTES="ver_clientes",r.CREAR_CLIENTES="crear_clientes",r.EDITAR_CLIENTES="editar_clientes",r.ELIMINAR_CLIENTES="eliminar_clientes",r.VER_INVENTARIO="ver_inventario",r.GESTIONAR_INVENTARIO="gestionar_inventario",r.VER_FACTURAS="ver_facturas",r.CREAR_FACTURAS="crear_facturas",r.EDITAR_FACTURAS="editar_facturas",r.VER_PRESUPUESTOS="ver_presupuestos",r.CREAR_PRESUPUESTOS="crear_presupuestos",r.EDITAR_PRESUPUESTOS="editar_presupuestos",r.VER_REPORTES="ver_reportes",r.GENERAR_REPORTES="generar_reportes",r.GESTIONAR_USUARIOS="gestionar_usuarios",r.GESTIONAR_ROLES="gestionar_roles",r.CONFIGURACION_SISTEMA="configuracion_sistema",r}(e||{});var u=(()=>{let i=class i{constructor(R){this.authService=R,this.ROLES_PERMISOS={[s.ADMINISTRADOR]:[...Object.values(e)],[s.TECNICO]:[e.VER_PERFIL_PROPIO,e.EDITAR_PERFIL_PROPIO,e.VER_AVISOS,e.EDITAR_AVISOS,e.VER_CLIENTES,e.VER_INVENTARIO,e.VER_FACTURAS,e.CREAR_FACTURAS,e.VER_PRESUPUESTOS,e.CREAR_PRESUPUESTOS,e.VER_REPORTES],[s.USUARIO]:[e.VER_PERFIL_PROPIO,e.EDITAR_PERFIL_PROPIO,e.VER_AVISOS,e.VER_FACTURAS,e.VER_PRESUPUESTOS]}}getPermisosUsuario(){return this.authService.currentUser$.pipe(E(R=>!R||!R.rol?[]:this.ROLES_PERMISOS[R.rol.nombre_rol]||[]))}tienePermiso(R){return this.getPermisosUsuario().pipe(E(t=>t.includes(R)))}tieneAlgunPermiso(R){return this.getPermisosUsuario().pipe(E(t=>R.some(S=>t.includes(S))))}tieneTodosPermisos(R){return this.getPermisosUsuario().pipe(E(t=>R.every(S=>t.includes(S))))}esAdministrador(){return this.authService.currentUser$.pipe(E(R=>{var t;return((t=R==null?void 0:R.rol)==null?void 0:t.nombre_rol)===s.ADMINISTRADOR}))}esTecnico(){return this.authService.currentUser$.pipe(E(R=>{var t;return((t=R==null?void 0:R.rol)==null?void 0:t.nombre_rol)===s.TECNICO}))}esUsuario(){return this.authService.currentUser$.pipe(E(R=>{var t;return((t=R==null?void 0:R.rol)==null?void 0:t.nombre_rol)===s.USUARIO}))}getRolActual(){return this.authService.currentUser$.pipe(E(R=>{var t;return((t=R==null?void 0:R.rol)==null?void 0:t.nombre_rol)||null}))}getRolesDisponibles(){return Object.values(s)}getPermisosRol(R){return this.ROLES_PERMISOS[R]||[]}getDescripcionRol(R){return{[s.ADMINISTRADOR]:"Acceso completo al sistema. Puede gestionar usuarios, configuraciones y todos los m\xF3dulos.",[s.TECNICO]:"Puede gestionar avisos, crear facturas y presupuestos. Acceso limitado a configuraciones.",[s.USUARIO]:"Acceso b\xE1sico. Solo puede ver informaci\xF3n relacionada con sus avisos y perfil."}[R]}rolPuedeRealizarAccion(R,t){let S=this.ROLES_PERMISOS[R]||[];return({ver_avisos:[e.VER_AVISOS],crear_avisos:[e.CREAR_AVISOS],editar_avisos:[e.EDITAR_AVISOS],eliminar_avisos:[e.ELIMINAR_AVISOS],asignar_avisos:[e.ASIGNAR_AVISOS],ver_clientes:[e.VER_CLIENTES],crear_clientes:[e.CREAR_CLIENTES],editar_clientes:[e.EDITAR_CLIENTES],eliminar_clientes:[e.ELIMINAR_CLIENTES],ver_inventario:[e.VER_INVENTARIO],gestionar_inventario:[e.GESTIONAR_INVENTARIO],ver_facturas:[e.VER_FACTURAS],crear_facturas:[e.CREAR_FACTURAS],editar_facturas:[e.EDITAR_FACTURAS],ver_presupuestos:[e.VER_PRESUPUESTOS],crear_presupuestos:[e.CREAR_PRESUPUESTOS],editar_presupuestos:[e.EDITAR_PRESUPUESTOS],ver_reportes:[e.VER_REPORTES],generar_reportes:[e.GENERAR_REPORTES],gestionar_usuarios:[e.GESTIONAR_USUARIOS],gestionar_roles:[e.GESTIONAR_ROLES],configuracion_sistema:[e.CONFIGURACION_SISTEMA]}[t]||[]).every(A=>S.includes(A))}};i.\u0275fac=function(t){return new(t||i)(n(o))},i.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();export{s as a,u as b};
