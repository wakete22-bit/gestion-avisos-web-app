import{a as x,b as Y}from"./chunk-TTMVOAG2.js";import{Aa as D,B as T,Da as U,E as Q,H as E,K as z,V as R,a as C,ba as X,fa as N,ha as j,la as V,na as F,t as A,y as L,z as I}from"./chunk-QJI27CM7.js";import{a as Z}from"./chunk-MEFQCYPS.js";import{b as K}from"./chunk-3FN3ZALU.js";import"./chunk-C5TWFCUT.js";import{e as J,s as S}from"./chunk-NUVS2SW6.js";import{Aa as p,K as g,L as b,P as B,V as y,W as f,X as _,Z as M,Za as v,ba as k,cb as P,ga as m,ia as O,ka as o,la as i,ma as r,mb as W,ob as G,pb as $,qa as h,qb as q,ra as a,sa as u}from"./chunk-7PIWZYGA.js";import"./chunk-3SUPCH3T.js";import"./chunk-QUJFQN2Y.js";import"./chunk-OGR5ZLHR.js";import"./chunk-CUT3BV6K.js";import"./chunk-73IMGLZG.js";import"./chunk-G2E2NLL6.js";import"./chunk-ILJSYHS4.js";import"./chunk-OAP23YNX.js";import"./chunk-YYM7CL2V.js";import"./chunk-5LR2YXX6.js";import"./chunk-WDU4QEMV.js";import"./chunk-CKP3SGE2.js";import"./chunk-ULLEADC5.js";import"./chunk-2ELISCRH.js";import"./chunk-BV4CTHEE.js";import"./chunk-JILLMCFB.js";import"./chunk-WWN5RJW3.js";import"./chunk-H3LYBNOM.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-NBD2MYJO.js";import"./chunk-3SBX7V6R.js";import"./chunk-SQKDQBOS.js";import"./chunk-SWRJZAEI.js";import"./chunk-JCSW2JUV.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-36KMLI7A.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{k as H}from"./chunk-CRC5ZNR6.js";function te(s,c){if(s&1){let l=h();o(0,"a",29),a("click",function(){g(l);let t=u();return b(t.onNavClick())}),r(1,"ion-icon",30),p(2,"T\xE9cnicos"),i()}}C({"grid-outline":R,"notifications-outline":j,"time-outline":U,"cube-outline":E,"document-text-outline":z,"cash-outline":A,"people-outline":V,"settings-outline":D,"person-circle-outline":F,"chevron-forward-outline":I,"chevron-down-outline":L,"close-outline":T});var ee=(()=>{let c=class c{constructor(n,t,e){this.authService=n,this.rolesService=t,this.router=e,this.isOpen=!1,this.closeSidebar=new B,this.currentUser=null,this.rolActual=null,this.TipoRol=x,this.isAdmin=!1,C({closeOutline:T,gridOutline:R,notificationsOutline:j,timeOutline:U,cubeOutline:E,documentTextOutline:z,cashOutline:A,peopleOutline:V,constructOutline:Q,settingsOutline:D,personCircleOutline:F,logOutOutline:X,chevronForwardOutline:I,chevronDownOutline:L})}ngOnInit(){this.authService.currentUser$.subscribe(n=>{this.currentUser=n}),this.rolesService.getRolActual().subscribe(n=>{this.rolActual=n}),this.rolesService.esAdministrador().subscribe(n=>{this.isAdmin=n,console.log("\u{1F527} SidebarComponent: Rol actual:",this.rolActual)})}onCloseSidebar(){this.closeSidebar.emit()}onNavClick(){window.innerWidth<=768&&this.onCloseSidebar()}onLogout(){return H(this,null,function*(){yield this.authService.logout(),this.router.navigate(["/auth/login"]),this.onCloseSidebar()})}getRolDisplayName(){return this.rolActual?{[x.ADMINISTRADOR]:"Administrador",[x.TECNICO]:"T\xE9cnico",[x.USUARIO]:"Usuario"}[this.rolActual]:"Usuario"}};c.\u0275fac=function(t){return new(t||c)(_(K),_(Y),_(G))},c.\u0275cmp=M({type:c,selectors:[["app-sidebar"]],inputs:{isOpen:"isOpen"},outputs:{closeSidebar:"closeSidebar"},decls:39,vars:3,consts:[[1,"sidebar"],[1,"sidebar-close-btn",3,"click"],["name","close-outline"],[1,"sidebar-header"],["src","assets/icon/LogoGestionAvisosLargo.png","alt","Logo",1,"logo",2,"width","180px"],[1,"sidebar-menu"],["routerLink","/home","routerLinkActive","active",3,"click"],["name","grid-outline",1,"icon"],["routerLink","/avisos","routerLinkActive","active",3,"click"],["name","notifications-outline",1,"icon"],["routerLink","/historial","routerLinkActive","active",3,"click"],["name","time-outline",1,"icon"],["routerLink","/inventario","routerLinkActive","active",3,"click"],["name","cube-outline",1,"icon"],["routerLink","/facturas","routerLinkActive","active",3,"click"],["name","document-text-outline",1,"icon"],["routerLink","/presupuestos","routerLinkActive","active",3,"click"],["name","cash-outline",1,"icon"],["routerLink","/clientes","routerLinkActive","active",3,"click"],["name","people-outline",1,"icon"],["routerLink","/tecnicos","routerLinkActive","active",3,"click",4,"ngIf"],[1,"sidebar-footer"],["routerLink","/ajustes","routerLinkActive","active",3,"click"],["name","settings-outline",1,"icon"],["routerLink","/cuenta","routerLinkActive","active",3,"click"],["name","person-circle-outline",1,"icon"],[1,"logout-link",3,"click"],["name","log-out-outline",1,"icon"],[1,"sidebar-spacer"],["routerLink","/tecnicos","routerLinkActive","active",3,"click"],["name","construct-outline",1,"icon"]],template:function(t,e){t&1&&(o(0,"aside",0)(1,"div",1),a("click",function(){return e.onCloseSidebar()}),r(2,"ion-icon",2),i(),o(3,"div",3),r(4,"img",4),i(),o(5,"nav",5)(6,"a",6),a("click",function(){return e.onNavClick()}),r(7,"ion-icon",7),p(8,"Inicio"),i(),o(9,"a",8),a("click",function(){return e.onNavClick()}),r(10,"ion-icon",9),p(11,"Avisos"),i(),o(12,"a",10),a("click",function(){return e.onNavClick()}),r(13,"ion-icon",11),p(14,"Historial"),i(),o(15,"a",12),a("click",function(){return e.onNavClick()}),r(16,"ion-icon",13),p(17,"Inventario"),i(),o(18,"a",14),a("click",function(){return e.onNavClick()}),r(19,"ion-icon",15),p(20,"Facturas"),i(),o(21,"a",16),a("click",function(){return e.onNavClick()}),r(22,"ion-icon",17),p(23,"Presupuestos"),i(),o(24,"a",18),a("click",function(){return e.onNavClick()}),r(25,"ion-icon",19),p(26,"Clientes"),i(),k(27,te,3,0,"a",20),i(),o(28,"div",21)(29,"a",22),a("click",function(){return e.onNavClick()}),r(30,"ion-icon",23),p(31,"Ajustes"),i(),o(32,"a",24),a("click",function(){return e.onNavClick()}),r(33,"ion-icon",25),p(34,"Mi cuenta"),i(),o(35,"a",26),a("click",function(){return e.onLogout()}),r(36,"ion-icon",27),p(37,"Cerrar Sesi\xF3n"),i()(),r(38,"div",28),i()),t&2&&(O("open",e.isOpen),f(27),m("ngIf",e.rolActual===e.TipoRol.ADMINISTRADOR))},dependencies:[S,$,q,P,v],styles:[".sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:#fff;background-color:#fff;border-right:1px solid #E2E8F0;padding:24px 0 0;box-sizing:border-box;z-index:1001;position:relative;transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-close-btn[_ngcontent-%COMP%]{display:none;position:absolute;top:16px;right:16px;width:32px;height:32px;border-radius:50%;background:#f1f5f9;border:none;cursor:pointer;align-items:center;justify-content:center;z-index:1002;transition:background-color .2s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-close-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#64748b}.sidebar[_ngcontent-%COMP%]   .sidebar-close-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:0 32px 32px;font-weight:700;font-size:1.1rem}.sidebar-menu[_ngcontent-%COMP%], .sidebar-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:0 24px}.sidebar-menu[_ngcontent-%COMP%]{flex:0 0 auto}.sidebar-footer[_ngcontent-%COMP%]{margin-top:24px;padding-top:16px;flex:0 0 auto;padding-bottom:var(--safe-margin-bottom)}.sidebar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:8px;color:#64748b;text-decoration:none;font-size:1rem;transition:background .2s,color .2s}a.active[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{background:#eef2ff;color:#4f46e5;font-weight:500}a.active[_ngcontent-%COMP%]{background:#eef2ff;color:#4f46e5;font-weight:600}.logout-link[_ngcontent-%COMP%]{cursor:pointer;color:#e74c3c!important}.logout-link[_ngcontent-%COMP%]:hover{background:#fdf2f2!important;color:#c53030!important}.icon[_ngcontent-%COMP%]{font-size:1.2em}.sidebar-user[_ngcontent-%COMP%]{display:flex;gap:8px;padding:16px 24px;flex-direction:row;align-items:center;justify-content:space-between;border-top:1px solid #f0f0f0}.icon-user[_ngcontent-%COMP%]{font-size:1.2em;display:flex;align-items:center;color:#888}.topbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.topbar-right[_ngcontent-%COMP%]   .user-info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.topbar-right[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]{color:#888;font-size:14px}.topbar-right[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-weight:500;margin-right:8px;color:#222;font-size:14px}.topbar-right[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{font-size:12px;color:#666;font-weight:400}.topbar-right[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;background:#ffe7a0;border-radius:50%;display:inline-block;background-image:url(https://randomuser.me/api/portraits/men/1.jpg);background-size:cover;background-position:center}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:0;bottom:0;transform:translate(-100%);width:280px;max-width:85vw;background:#fff!important;box-shadow:2px 0 10px #0000001a;z-index:1000}.sidebar[_ngcontent-%COMP%]   .sidebar-close-btn[_ngcontent-%COMP%]{display:flex}.sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{padding:16px 24px 24px}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:140px!important}.sidebar[_ngcontent-%COMP%]   .sidebar-menu[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{padding:0 16px}.sidebar[_ngcontent-%COMP%]   .sidebar-user[_ngcontent-%COMP%]{padding:16px;background:#fff}}@media (max-width: 480px){.sidebar[_ngcontent-%COMP%]{width:100vw;max-width:100vw}}"]});let s=c;return s})();function oe(s,c){if(s&1){let l=h();o(0,"ion-header",4)(1,"ion-toolbar")(2,"div",5)(3,"button",6),a("click",function(){g(l);let t=u();return b(t.toggleSidebar())}),r(4,"ion-icon",7),i(),o(5,"div",8),r(6,"img",9),i(),o(7,"div",10),r(8,"span",11),i()()()()}}function re(s,c){if(s&1){let l=h();o(0,"div",12),a("click",function(){g(l);let t=u();return b(t.onOverlayClick())}),i()}}function ae(s,c){if(s&1){let l=h();o(0,"app-sidebar",13),a("closeSidebar",function(){g(l);let t=u();return b(t.closeSidebar())}),i()}if(s&2){let l=u();O("open",l.isMobile?l.isSidebarOpen:!0),m("isOpen",l.isMobile?l.isSidebarOpen:!0)}}C({"menu-outline":N});var Le=(()=>{let c=class c{constructor(n){this.safeAreaService=n,this.isSidebarOpen=!1,this.isMobile=!1,this.isIOS=!1,this.isAndroid=!1,this.isStandalone=!1,C({menuOutline:N}),this.checkScreenSize()}ngOnInit(){this.initializePlatformInfo()}initializePlatformInfo(){let n=this.safeAreaService.getPlatformInfo();this.isIOS=n.isIOS,this.isAndroid=n.isAndroid,this.isStandalone=n.isStandalone}onResize(){this.checkScreenSize()}onOrientationChange(){setTimeout(()=>{this.safeAreaService.recalculateSafeAreas()},100)}checkScreenSize(){let n=this.isMobile;this.isMobile=window.innerWidth<=768,n===!1&&this.isMobile===!0&&(this.isSidebarOpen=!1),n===!0&&this.isMobile===!1&&(this.isSidebarOpen=!0)}toggleSidebar(){this.isMobile&&(this.isSidebarOpen=!this.isSidebarOpen)}closeSidebar(){this.isMobile&&(this.isSidebarOpen=!1)}onOverlayClick(){this.isMobile&&this.isSidebarOpen&&this.closeSidebar()}};c.\u0275fac=function(t){return new(t||c)(_(Z))},c.\u0275cmp=M({type:c,selectors:[["app-main-layout"]],hostBindings:function(t,e){t&1&&a("resize",function(w){return e.onResize(w)},!1,y)("orientationchange",function(w){return e.onOrientationChange(w)},!1,y)},decls:5,vars:11,consts:[["class","mobile-header",4,"ngIf"],["class","sidebar-overlay",3,"click",4,"ngIf"],["class","sidebar",3,"open","isOpen","closeSidebar",4,"ngIf"],[1,"main-content"],[1,"mobile-header"],[1,"mobile-toolbar-content"],[1,"hamburger-btn",3,"click"],["name","menu-outline"],[1,"mobile-title"],["src","assets/icon/LogoGestionAvisosLargo.png","alt","Logo",1,"mobile-logo"],["routerLink","/cuenta",1,"mobile-profile"],[1,"avatar"],[1,"sidebar-overlay",3,"click"],[1,"sidebar",3,"closeSidebar","isOpen"]],template:function(t,e){t&1&&(k(0,oe,9,0,"ion-header",0)(1,re,1,0,"div",1)(2,ae,1,3,"app-sidebar",2),o(3,"ion-content",3),r(4,"router-outlet"),i()),t&2&&(m("ngIf",e.isMobile),f(),m("ngIf",e.isMobile&&e.isSidebarOpen),f(),m("ngIf",!e.isMobile||e.isMobile&&e.isSidebarOpen),f(),O("mobile",e.isMobile)("ios",e.isIOS)("android",e.isAndroid)("standalone",e.isStandalone))},dependencies:[P,v,W,ee,S,J],styles:['@charset "UTF-8";.mobile-header[_ngcontent-%COMP%]{display:none;background:#fff;border-bottom:1px solid #e2e8f0;box-shadow:0 1px 3px #0000001a}.mobile-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #fff;--border-color: #e2e8f0;--padding-top: 0;--padding-bottom: 0;--min-height: 60px;--height: 60px}.mobile-header[_ngcontent-%COMP%]   .mobile-toolbar-content[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:100%;padding:0 16px}.mobile-header[_ngcontent-%COMP%]   .hamburger-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border:none;background:transparent;border-radius:8px;cursor:pointer;margin-right:12px;transition:background-color .2s ease}.mobile-header[_ngcontent-%COMP%]   .hamburger-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#64748b}.mobile-header[_ngcontent-%COMP%]   .hamburger-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9}.mobile-header[_ngcontent-%COMP%]   .mobile-title[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center}.mobile-header[_ngcontent-%COMP%]   .mobile-title[_ngcontent-%COMP%]   .mobile-logo[_ngcontent-%COMP%]{height:32px;width:auto}.mobile-header[_ngcontent-%COMP%]   .mobile-profile[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-left:12px;cursor:pointer;padding:4px;border-radius:50%;transition:background-color .2s ease}.mobile-header[_ngcontent-%COMP%]   .mobile-profile[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.mobile-header[_ngcontent-%COMP%]   .mobile-profile[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;background:#ffe7a0;border-radius:50%;display:inline-block;background-image:url(https://randomuser.me/api/portraits/men/1.jpg);background-size:cover;background-position:center;border:2px solid #fff;box-shadow:0 2px 4px #0000001a}.sidebar-overlay[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;z-index:999;animation:_ngcontent-%COMP%_fadeIn .3s ease}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:250px;height:100vh;overflow-y:auto;overflow-x:hidden;background-color:#fafbff;transition:transform .3s ease;z-index:1000}@media (min-width: 769px){.sidebar[_ngcontent-%COMP%]{transform:translate(0);box-shadow:2px 0 8px #0000001a}}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{transform:translate(-100%)}.sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}}.main-content[_ngcontent-%COMP%]{--background: #FAFBFF;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0}@media (min-width: 769px){.main-content[_ngcontent-%COMP%]{--padding-start: 250px}}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{--padding-start: 0}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media (max-width: 768px){.mobile-header[_ngcontent-%COMP%]{display:block}.mobile-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--min-height: 50px;--height: 50px}.sidebar[_ngcontent-%COMP%]{width:100vw;max-width:100vw}.sidebar-overlay[_ngcontent-%COMP%]{display:block}}@media all and (display-mode: standalone){.mobile-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--min-height: 55px;--height: 55px}}@supports (-webkit-touch-callout: none){@media all and (display-mode: standalone){.mobile-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--min-height: 55px;--height: 55px}}}']});let s=c;return s})();export{Le as MainLayoutComponent};
