import{a as T}from"./chunk-57CCKAHA.js";import{d as L,e as R,f as z,j as N}from"./chunk-CENH7PAC.js";import"./chunk-EZQHEP6E.js";import{$ as g,$b as E,Sb as y,Ta as v,U as r,Ub as d,V as _,Vb as P,Wb as O,X as C,Ya as M,cc as I,dc as S,ea as l,fb as w,ha as o,ia as i,ja as p,lc as k,nc as F,oa as x,pa as f,xa as s,za as u}from"./chunk-YCXETNVK.js";import"./chunk-WSRQKSRN.js";import"./chunk-QUJFQN2Y.js";import"./chunk-K4IZC2RK.js";import"./chunk-XEKAQYZJ.js";import"./chunk-3PHZVRGI.js";import"./chunk-67GB35HJ.js";import"./chunk-2ELISCRH.js";import"./chunk-MSFXF37Z.js";import"./chunk-55RMRGVQ.js";import"./chunk-G2E2NLL6.js";import"./chunk-CFQAPMCR.js";import"./chunk-CW65YK7W.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-VAE5WQLH.js";import"./chunk-CKP3SGE2.js";import"./chunk-I2N4S4X5.js";import"./chunk-CALWKLRW.js";import"./chunk-IQN6SQ4S.js";import"./chunk-SGF4SMHT.js";import"./chunk-QXK7JUJJ.js";import"./chunk-JCSW2JUV.js";import"./chunk-FXFZIWDD.js";import"./chunk-2MILALDA.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{k as h}from"./chunk-CRC5ZNR6.js";function D(n,c){if(n&1&&(o(0,"div",24),s(1),i()),n&2){let m=f();r(),u(" ",m.getErrorMessage("nombre_completo")," ")}}function V(n,c){if(n&1&&(o(0,"div",24),s(1),i()),n&2){let m=f();r(),u(" ",m.getErrorMessage("email")," ")}}function j(n,c){if(n&1&&(o(0,"div",24),s(1),i()),n&2){let m=f();r(),u(" ",m.getErrorMessage("telefono")," ")}}function q(n,c){if(n&1&&(o(0,"div",24),s(1),i()),n&2){let m=f();r(),u(" ",m.getErrorMessage("password")," ")}}function G(n,c){if(n&1&&(o(0,"div",24),s(1),i()),n&2){let m=f();r(),u(" ",m.getErrorMessage("confirmPassword")," ")}}function Y(n,c){if(n&1&&(o(0,"div",25),s(1),i()),n&2){let m=f();r(),u(" ",m.errorMessage," ")}}function A(n,c){n&1&&p(0,"ion-spinner",26)}function B(n,c){n&1&&(o(0,"span"),s(1,"Crear Cuenta"),i())}var ee=(()=>{let c=class c{constructor(a,t,e){this.formBuilder=a,this.authService=t,this.router=e,this.isLoading=!1,this.errorMessage="",this.showPassword=!1,this.showConfirmPassword=!1}ngOnInit(){this.initForm()}initForm(){this.registerForm=this.formBuilder.group({nombre_completo:["",[d.required,d.minLength(2)]],email:["",[d.required,d.email]],telefono:["",[d.pattern(/^[0-9+\-\s()]+$/)]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",[d.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(a){let t=a.get("password"),e=a.get("confirmPassword");return t&&e&&t.value!==e.value?(e.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(e&&e.setErrors(null),null)}onSubmit(){return h(this,null,function*(){if(this.registerForm.valid){this.isLoading=!0,this.errorMessage="";let a=this.registerForm.value,t={nombre_completo:a.nombre_completo,email:a.email,password:a.password,telefono:a.telefono||void 0};try{let e=yield this.authService.register(t);console.log("Registro exitoso:",e),this.router.navigate(["/home"])}catch(e){console.error("Error en registro:",e),this.errorMessage=e.message||"Error al registrar usuario. Int\xE9ntalo de nuevo."}finally{this.isLoading=!1}}else this.markFormGroupTouched()})}markFormGroupTouched(){Object.keys(this.registerForm.controls).forEach(a=>{let t=this.registerForm.get(a);t==null||t.markAsTouched()})}getErrorMessage(a){let t=this.registerForm.get(a);if(t!=null&&t.errors&&t.touched){if(t.errors.required)return`${this.getFieldDisplayName(a)} es requerido`;if(t.errors.email)return"El email no es v\xE1lido";if(t.errors.minlength){let e=t.errors.minlength.requiredLength;return`${this.getFieldDisplayName(a)} debe tener al menos ${e} caracteres`}if(t.errors.pattern)return"El formato del tel\xE9fono no es v\xE1lido";if(t.errors.passwordMismatch)return"Las contrase\xF1as no coinciden"}return""}getFieldDisplayName(a){return{nombre_completo:"El nombre completo",email:"El email",telefono:"El tel\xE9fono",password:"La contrase\xF1a",confirmPassword:"La confirmaci\xF3n de contrase\xF1a"}[a]||a}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}goToLogin(){this.router.navigate(["/auth/login"])}};c.\u0275fac=function(t){return new(t||c)(_(k),_(T),_(w))},c.\u0275cmp=C({type:c,selectors:[["app-register"]],decls:51,vars:14,consts:[[1,"register-container"],[1,"register-card"],[1,"logo-container"],["src","assets/icon/LogoGestionAvisos.png","alt","Logo",1,"logo"],[1,"app-title"],[1,"register-form",3,"ngSubmit","formGroup"],[1,"form-title"],[1,"form-group"],["type","text","formControlName","nombre_completo","placeholder","Tu nombre completo","autocomplete","name",1,"form-control"],["class","error-message",4,"ngIf"],["type","email","formControlName","email","placeholder","tu@email.com","autocomplete","email",1,"form-control"],["type","tel","formControlName","telefono","placeholder","+34 600 000 000","autocomplete","tel",1,"form-control"],[1,"input-with-button"],["formControlName","password","placeholder","M\xEDnimo 6 caracteres","autocomplete","new-password",1,"form-control",3,"type"],["type","button",1,"visibility-button",3,"click"],[3,"name"],["formControlName","confirmPassword","placeholder","Repite tu contrase\xF1a","autocomplete","new-password",1,"form-control",3,"type"],["class","error-message global-error",4,"ngIf"],["type","submit",1,"register-button",3,"disabled"],[1,"button-content"],["name","crescent",4,"ngIf"],[4,"ngIf"],[1,"login-link"],[1,"link",3,"click"],[1,"error-message"],[1,"error-message","global-error"],["name","crescent"]],template:function(t,e){t&1&&(o(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2),p(4,"img",3),o(5,"h1",4),s(6,"Gesti\xF3n de Avisos"),i()(),o(7,"form",5),x("ngSubmit",function(){return e.onSubmit()}),o(8,"h2",6),s(9,"Crear Cuenta"),i(),o(10,"div",7)(11,"label"),s(12,"Nombre Completo"),i(),p(13,"input",8),i(),g(14,D,2,1,"div",9),o(15,"div",7)(16,"label"),s(17,"Email"),i(),p(18,"input",10),i(),g(19,V,2,1,"div",9),o(20,"div",7)(21,"label"),s(22,"Tel\xE9fono (Opcional)"),i(),p(23,"input",11),i(),g(24,j,2,1,"div",9),o(25,"div",7)(26,"label"),s(27,"Contrase\xF1a"),i(),o(28,"div",12),p(29,"input",13),o(30,"button",14),x("click",function(){return e.togglePasswordVisibility()}),p(31,"ion-icon",15),i()()(),g(32,q,2,1,"div",9),o(33,"div",7)(34,"label"),s(35,"Confirmar Contrase\xF1a"),i(),o(36,"div",12),p(37,"input",16),o(38,"button",14),x("click",function(){return e.toggleConfirmPasswordVisibility()}),p(39,"ion-icon",15),i()()(),g(40,G,2,1,"div",9)(41,Y,2,1,"div",17),o(42,"button",18)(43,"div",19),g(44,A,1,0,"ion-spinner",20)(45,B,2,0,"span",21),i()(),o(46,"div",22)(47,"p"),s(48,"\xBFYa tienes cuenta? "),o(49,"a",23),x("click",function(){return e.goToLogin()}),s(50,"Inicia sesi\xF3n aqu\xED"),i()()()()()()()),t&2&&(r(7),l("formGroup",e.registerForm),r(7),l("ngIf",e.getErrorMessage("nombre_completo")),r(5),l("ngIf",e.getErrorMessage("email")),r(5),l("ngIf",e.getErrorMessage("telefono")),r(5),l("type",e.showPassword?"text":"password"),r(2),l("name",e.showPassword?"eye-off":"eye"),r(),l("ngIf",e.getErrorMessage("password")),r(5),l("type",e.showConfirmPassword?"text":"password"),r(2),l("name",e.showConfirmPassword?"eye-off":"eye"),r(),l("ngIf",e.getErrorMessage("confirmPassword")),r(),l("ngIf",e.errorMessage),r(),l("disabled",e.isLoading||!e.registerForm.valid),r(2),l("ngIf",e.isLoading),r(),l("ngIf",!e.isLoading))},dependencies:[M,v,N,L,R,z,F,E,y,P,O,I,S],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:#fafbff;padding:20px;font-family:Inter,sans-serif}.register-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 20px #00000014;padding:40px;width:100%;max-width:450px;animation:_ngcontent-%COMP%_slideUp .4s ease-out;border:1px solid #F1F5F9}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.logo-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.logo[_ngcontent-%COMP%]{width:100px;height:auto;margin-bottom:16px}.app-title[_ngcontent-%COMP%]{color:#26262a;font-size:24px;font-weight:600;margin:0;font-family:Poppins,sans-serif}.form-title[_ngcontent-%COMP%]{text-align:center;color:#26262a;font-size:18px;font-weight:500;margin-bottom:32px;font-family:Inter,sans-serif}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;font-weight:500;color:#26262a;font-family:Inter,sans-serif}.form-control[_ngcontent-%COMP%]{position:relative;width:100%;padding:12px 16px;background-color:#fafbff;border:1px solid #E2E8F0;border-radius:12px;font-size:16px;color:#26262a;transition:all .2s ease;font-family:Inter,sans-serif;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;background:#fff;box-shadow:0 0 0 3px #4f46e51a}.form-control[_ngcontent-%COMP%]::placeholder{color:#acacac}.form-control[_ngcontent-%COMP%]:hover{border-color:#4f46e5;background:#fff}.input-with-button[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-with-button[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-right:48px}.input-with-button[_ngcontent-%COMP%]   .visibility-button[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:none;border:none;padding:8px;cursor:pointer;color:#64748b;border-radius:6px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.input-with-button[_ngcontent-%COMP%]   .visibility-button[_ngcontent-%COMP%]:hover{color:#4f46e5;background:#4f46e51a}.input-with-button[_ngcontent-%COMP%]   .visibility-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:13px;margin-top:6px;margin-left:4px;animation:_ngcontent-%COMP%_fadeIn .3s ease-in;font-family:Inter,sans-serif}.global-error[_ngcontent-%COMP%]{background:#fdf2f2;border:1px solid #fecaca;border-radius:8px;padding:12px 16px;margin:8px 0;text-align:center;font-size:14px;font-family:Inter,sans-serif}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.register-button[_ngcontent-%COMP%]{width:100%;background:#4f46e5;border:none;border-radius:12px;padding:16px;font-weight:600;font-size:16px;margin-top:8px;transition:all .2s ease;font-family:Inter,sans-serif;box-shadow:0 2px 8px #4f46e533;cursor:pointer;color:#fff;display:flex;align-items:center;justify-content:center}.register-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#4338ca;transform:translateY(-1px);box-shadow:0 4px 12px #4f46e54d}.register-button[_ngcontent-%COMP%]:disabled{background:#acacac;transform:none;box-shadow:none;cursor:not-allowed;opacity:.6}.register-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}.login-link[_ngcontent-%COMP%]{text-align:center;margin-top:24px}.login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0;font-size:14px;font-family:Inter,sans-serif}.link[_ngcontent-%COMP%]{color:#4f46e5;text-decoration:none;font-weight:600;cursor:pointer;transition:color .2s ease;font-family:Inter,sans-serif}.link[_ngcontent-%COMP%]:hover{color:#4338ca;text-decoration:underline}@media (max-width: 480px){.register-container[_ngcontent-%COMP%]{padding:16px}.register-card[_ngcontent-%COMP%]{padding:32px 24px;margin:0;border-radius:12px}.app-title[_ngcontent-%COMP%]{font-size:22px}.form-title[_ngcontent-%COMP%]{font-size:16px}.register-form[_ngcontent-%COMP%]{gap:14px}.form-control[_ngcontent-%COMP%]{padding:10px 14px;font-size:16px}.input-with-button[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-right:44px}.input-with-button[_ngcontent-%COMP%]   .visibility-button[_ngcontent-%COMP%]{padding:6px}.input-with-button[_ngcontent-%COMP%]   .visibility-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.register-button[_ngcontent-%COMP%]{padding:14px;font-size:16px}}"]});let n=c;return n})();export{ee as RegisterComponent};
