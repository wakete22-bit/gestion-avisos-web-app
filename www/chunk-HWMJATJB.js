import{a as x,b as Q}from"./chunk-HDL5OHDU.js";import{Aa as V,B as A,Da as D,E as J,H as I,K as T,V as E,a as h,ba as K,fa as z,ha as R,la as N,na as j,t as w,y as S,z as L}from"./chunk-QJI27CM7.js";import{b as q}from"./chunk-VU5QK7V2.js";import{s as y}from"./chunk-IFFBEWRT.js";import{Aa as s,K as b,L as _,P as F,V as H,W as m,X as M,Z as v,Za as P,ba as C,cb as k,ga as g,ia as O,ka as n,la as t,ma as o,mb as B,ob as W,pb as G,qa as f,qb as $,ra as r,sa as u}from"./chunk-EYPZOMIL.js";import"./chunk-ULLEADC5.js";import"./chunk-2ELISCRH.js";import"./chunk-BV4CTHEE.js";import"./chunk-NBD2MYJO.js";import"./chunk-3SBX7V6R.js";import"./chunk-SQKDQBOS.js";import"./chunk-SWRJZAEI.js";import"./chunk-JCSW2JUV.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-36KMLI7A.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{k as U}from"./chunk-CRC5ZNR6.js";function ne(l,a){if(l&1){let d=f();n(0,"a",29),r("click",function(){b(d);let i=u();return _(i.onNavClick())}),o(1,"ion-icon",30),s(2,"T\xE9cnicos"),t()}}h({"grid-outline":E,"notifications-outline":R,"time-outline":D,"cube-outline":I,"document-text-outline":T,"cash-outline":w,"people-outline":N,"settings-outline":V,"person-circle-outline":j,"chevron-forward-outline":L,"chevron-down-outline":S,"close-outline":A});var X=(()=>{let a=class a{constructor(c,i,e){this.authService=c,this.rolesService=i,this.router=e,this.isOpen=!1,this.closeSidebar=new F,this.currentUser=null,this.rolActual=null,this.TipoRol=x,this.isAdmin=!1,h({closeOutline:A,gridOutline:E,notificationsOutline:R,timeOutline:D,cubeOutline:I,documentTextOutline:T,cashOutline:w,peopleOutline:N,constructOutline:J,settingsOutline:V,personCircleOutline:j,logOutOutline:K,chevronForwardOutline:L,chevronDownOutline:S})}ngOnInit(){this.authService.currentUser$.subscribe(c=>{this.currentUser=c}),this.rolesService.getRolActual().subscribe(c=>{this.rolActual=c}),this.rolesService.esAdministrador().subscribe(c=>{this.isAdmin=c,console.log("\u{1F527} SidebarComponent: Rol actual:",this.rolActual)})}onCloseSidebar(){this.closeSidebar.emit()}onNavClick(){window.innerWidth<=768&&this.onCloseSidebar()}onLogout(){return U(this,null,function*(){yield this.authService.logout(),this.router.navigate(["/auth/login"]),this.onCloseSidebar()})}getRolDisplayName(){return this.rolActual?{[x.ADMINISTRADOR]:"Administrador",[x.TECNICO]:"T\xE9cnico",[x.USUARIO]:"Usuario"}[this.rolActual]:"Usuario"}};a.\u0275fac=function(i){return new(i||a)(M(q),M(Q),M(W))},a.\u0275cmp=v({type:a,selectors:[["app-sidebar"]],inputs:{isOpen:"isOpen"},outputs:{closeSidebar:"closeSidebar"},decls:39,vars:3,consts:[[1,"sidebar"],[1,"sidebar-close-btn",3,"click"],["name","close-outline"],[1,"sidebar-header"],["src","assets/icon/LogoGestionAvisosLargo.png","alt","Logo",1,"logo",2,"width","180px"],[1,"sidebar-menu"],["routerLink","/home","routerLinkActive","active",3,"click"],["name","grid-outline",1,"icon"],["routerLink","/avisos","routerLinkActive","active",3,"click"],["name","notifications-outline",1,"icon"],["routerLink","/historial","routerLinkActive","active",3,"click"],["name","time-outline",1,"icon"],["routerLink","/inventario","routerLinkActive","active",3,"click"],["name","cube-outline",1,"icon"],["routerLink","/facturas","routerLinkActive","active",3,"click"],["name","document-text-outline",1,"icon"],["routerLink","/presupuestos","routerLinkActive","active",3,"click"],["name","cash-outline",1,"icon"],["routerLink","/clientes","routerLinkActive","active",3,"click"],["name","people-outline",1,"icon"],["routerLink","/tecnicos","routerLinkActive","active",3,"click",4,"ngIf"],[1,"sidebar-footer"],["routerLink","/ajustes","routerLinkActive","active",3,"click"],["name","settings-outline",1,"icon"],["routerLink","/cuenta","routerLinkActive","active",3,"click"],["name","person-circle-outline",1,"icon"],[1,"logout-link",3,"click"],["name","log-out-outline",1,"icon"],[1,"sidebar-spacer"],["routerLink","/tecnicos","routerLinkActive","active",3,"click"],["name","construct-outline",1,"icon"]],template:function(i,e){i&1&&(n(0,"aside",0)(1,"div",1),r("click",function(){return e.onCloseSidebar()}),o(2,"ion-icon",2),t(),n(3,"div",3),o(4,"img",4),t(),n(5,"nav",5)(6,"a",6),r("click",function(){return e.onNavClick()}),o(7,"ion-icon",7),s(8,"Inicio"),t(),n(9,"a",8),r("click",function(){return e.onNavClick()}),o(10,"ion-icon",9),s(11,"Avisos"),t(),n(12,"a",10),r("click",function(){return e.onNavClick()}),o(13,"ion-icon",11),s(14,"Historial"),t(),n(15,"a",12),r("click",function(){return e.onNavClick()}),o(16,"ion-icon",13),s(17,"Inventario"),t(),n(18,"a",14),r("click",function(){return e.onNavClick()}),o(19,"ion-icon",15),s(20,"Facturas"),t(),n(21,"a",16),r("click",function(){return e.onNavClick()}),o(22,"ion-icon",17),s(23,"Presupuestos"),t(),n(24,"a",18),r("click",function(){return e.onNavClick()}),o(25,"ion-icon",19),s(26,"Clientes"),t(),C(27,ne,3,0,"a",20),t(),n(28,"div",21)(29,"a",22),r("click",function(){return e.onNavClick()}),o(30,"ion-icon",23),s(31,"Ajustes"),t(),n(32,"a",24),r("click",function(){return e.onNavClick()}),o(33,"ion-icon",25),s(34,"Mi cuenta"),t(),n(35,"a",26),r("click",function(){return e.onLogout()}),o(36,"ion-icon",27),s(37,"Cerrar Sesi\xF3n"),t()(),o(38,"div",28),t()),i&2&&(O("open",e.isOpen),m(27),g("ngIf",e.rolActual===e.TipoRol.ADMINISTRADOR))},dependencies:[y,G,$,k,P],styles:[".sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:#fff;background-color:#fff;border-right:1px solid #E2E8F0;padding:24px 0 0;box-sizing:border-box;z-index:1001;position:relative;transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-close-btn[_ngcontent-%COMP%]{display:none;position:absolute;top:16px;right:16px;width:32px;height:32px;border-radius:50%;background:#f1f5f9;border:none;cursor:pointer;align-items:center;justify-content:center;z-index:1002;transition:background-color .2s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-close-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#64748b}.sidebar[_ngcontent-%COMP%]   .sidebar-close-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:0 32px 32px;font-weight:700;font-size:1.1rem}.sidebar-menu[_ngcontent-%COMP%], .sidebar-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:0 24px}.sidebar-menu[_ngcontent-%COMP%]{flex:0 0 auto}.sidebar-footer[_ngcontent-%COMP%]{margin-top:24px;padding-top:16px;flex:0 0 auto;padding-bottom:var(--safe-margin-bottom)}.sidebar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:8px;color:#64748b;text-decoration:none;font-size:1rem;transition:background .2s,color .2s}a.active[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{background:#eef2ff;color:#4f46e5;font-weight:500}a.active[_ngcontent-%COMP%]{background:#eef2ff;color:#4f46e5;font-weight:600}.logout-link[_ngcontent-%COMP%]{cursor:pointer;color:#e74c3c!important}.logout-link[_ngcontent-%COMP%]:hover{background:#fdf2f2!important;color:#c53030!important}.icon[_ngcontent-%COMP%]{font-size:1.2em}.sidebar-user[_ngcontent-%COMP%]{display:flex;gap:8px;padding:16px 24px;flex-direction:row;align-items:center;justify-content:space-between;border-top:1px solid #f0f0f0}.icon-user[_ngcontent-%COMP%]{font-size:1.2em;display:flex;align-items:center;color:#888}.topbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.topbar-right[_ngcontent-%COMP%]   .user-info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.topbar-right[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]{color:#888;font-size:14px}.topbar-right[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-weight:500;margin-right:8px;color:#222;font-size:14px}.topbar-right[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{font-size:12px;color:#666;font-weight:400}.topbar-right[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;background:#ffe7a0;border-radius:50%;display:inline-block;background-image:url(https://randomuser.me/api/portraits/men/1.jpg);background-size:cover;background-position:center}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:0;bottom:0;transform:translate(-100%);width:280px;max-width:85vw;background:#fff!important;box-shadow:2px 0 10px #0000001a;z-index:1000}.sidebar[_ngcontent-%COMP%]   .sidebar-close-btn[_ngcontent-%COMP%]{display:flex}.sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{padding:16px 24px 24px}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:140px!important}.sidebar[_ngcontent-%COMP%]   .sidebar-menu[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{padding:0 16px}.sidebar[_ngcontent-%COMP%]   .sidebar-user[_ngcontent-%COMP%]{padding:16px;background:#fff}}@media (max-width: 480px){.sidebar[_ngcontent-%COMP%]{width:100vw;max-width:100vw}}"]});let l=a;return l})();function te(l,a){if(l&1){let d=f();n(0,"header",6)(1,"button",7),r("click",function(){b(d);let i=u();return _(i.toggleSidebar())}),o(2,"ion-icon",8),t(),n(3,"div",9),o(4,"img",10),t(),n(5,"div",11),o(6,"span",12),t()()}}function ie(l,a){if(l&1){let d=f();n(0,"div",13),r("click",function(){b(d);let i=u();return _(i.onOverlayClick())}),t()}}function oe(l,a){if(l&1){let d=f();n(0,"app-sidebar",14),r("closeSidebar",function(){b(d);let i=u();return _(i.closeSidebar())}),t()}if(l&2){let d=u();O("open",d.isSidebarOpen),g("isOpen",d.isSidebarOpen)}}h({"menu-outline":z});var ye=(()=>{let a=class a{constructor(){this.isSidebarOpen=!1,this.isMobile=!1,h({menuOutline:z}),this.checkScreenSize()}ngOnInit(){}onResize(){this.checkScreenSize()}checkScreenSize(){this.isMobile=window.innerWidth<=768,this.isMobile||(this.isSidebarOpen=!1)}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}closeSidebar(){this.isSidebarOpen=!1}onOverlayClick(){this.isMobile&&this.isSidebarOpen&&this.closeSidebar()}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=v({type:a,selectors:[["app-main-layout"]],hostBindings:function(i,e){i&1&&r("resize",function(Y){return e.onResize(Y)},!1,H)},decls:7,vars:5,consts:[[1,"main-layout"],["class","mobile-header",4,"ngIf"],["class","sidebar-overlay",3,"click",4,"ngIf"],[1,"content-wrapper"],["class","sidebar",3,"open","isOpen","closeSidebar",4,"ngIf"],[1,"main-content"],[1,"mobile-header"],[1,"hamburger-btn",3,"click"],["name","menu-outline"],[1,"mobile-title"],["src","assets/icon/LogoGestionAvisosLargo.png","alt","Logo",1,"mobile-logo"],["routerLink","/cuenta",1,"mobile-profile"],[1,"avatar"],[1,"sidebar-overlay",3,"click"],[1,"sidebar",3,"closeSidebar","isOpen"]],template:function(i,e){i&1&&(n(0,"div",0),C(1,te,7,0,"header",1)(2,ie,1,0,"div",2),n(3,"div",3),C(4,oe,1,3,"app-sidebar",4),n(5,"main",5),o(6,"router-outlet"),t()()()),i&2&&(m(),g("ngIf",e.isMobile),m(),g("ngIf",e.isMobile&&e.isSidebarOpen),m(2),g("ngIf",!e.isMobile||e.isMobile&&e.isSidebarOpen),m(),O("mobile",e.isMobile))},dependencies:[k,P,B,X,y],styles:['@charset "UTF-8";.main-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;width:100%;overflow:hidden;position:relative;background-color:#fafbff}.main-layout[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]{display:none;align-items:center;padding:12px 16px;background:#fff;border-bottom:1px solid #e2e8f0;z-index:999;box-shadow:0 1px 3px #0000001a;height:60px;position:fixed;top:0;left:0;right:0;padding-top:var(--safe-margin-top)}.main-layout[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .hamburger-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border:none;background:transparent;border-radius:8px;cursor:pointer;margin-right:12px;transition:background-color .2s ease}.main-layout[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .hamburger-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#64748b}.main-layout[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .hamburger-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9}.main-layout[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .mobile-title[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center}.main-layout[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .mobile-title[_ngcontent-%COMP%]   .mobile-logo[_ngcontent-%COMP%]{height:32px;width:auto}.main-layout[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .mobile-profile[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-left:12px;cursor:pointer;padding:4px;border-radius:50%;transition:background-color .2s ease}.main-layout[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .mobile-profile[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.main-layout[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]   .mobile-profile[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;background:#ffe7a0;border-radius:50%;display:inline-block;background-image:url(https://randomuser.me/api/portraits/men/1.jpg);background-size:cover;background-position:center;border:2px solid #fff;box-shadow:0 2px 4px #0000001a}.main-layout[_ngcontent-%COMP%]   .sidebar-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;z-index:999;animation:_ngcontent-%COMP%_fadeIn .3s ease}.main-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden;position:relative;height:100vh;padding-top:0}.main-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{width:250px;height:100%;overflow-y:auto;overflow-x:hidden;background-color:#fafbff;transition:transform .3s ease;z-index:1000;flex-shrink:0}.main-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;background-color:#fafbff;width:100%;height:100%;position:relative}.main-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .main-content.mobile[_ngcontent-%COMP%]{margin-top:60px;padding:0;padding-bottom:var(--safe-area-bottom);min-height:calc(100vh - 60px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media (max-width: 768px){.main-layout[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]{display:flex;height:50px!important}.main-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{padding-top:0}.main-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{padding:16px;width:100%;margin-left:0;min-height:100%}.main-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .main-content.mobile[_ngcontent-%COMP%]{margin-top:calc(50px + var(--safe-area-top, 0px))!important;padding:0 0 80px;padding-bottom:calc(80px + var(--safe-area-bottom));min-height:calc(100vh - 50px - var(--safe-area-top, 0px))}}@media (max-width: 480px){.main-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{width:100vw;max-width:100vw}}@media all and (display-mode: standalone){.main-layout[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]{top:0;padding-top:12px;height:55px}.main-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{padding-top:0}.main-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .main-content.mobile[_ngcontent-%COMP%]{margin-top:50px!important;padding-bottom:calc(16px + var(--safe-area-bottom));min-height:calc(100vh - 50px)}}@supports (-webkit-touch-callout: none){@media all and (display-mode: standalone){.main-layout[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]{top:0;padding-top:12px;height:55px}.main-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .main-content.mobile[_ngcontent-%COMP%]{margin-top:50px!important;padding-bottom:calc(16px + var(--safe-area-bottom, 0px));min-height:calc(100vh - 50px)}}}@supports not (padding-top: env(safe-area-inset-top)){.main-layout[_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]{padding-top:39px;height:100px}.main-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .main-content.mobile[_ngcontent-%COMP%]{margin-top:100px!important;padding-bottom:calc(20px + var(--safe-area-bottom));min-height:calc(100vh - 100px)}}']});let l=a;return l})();export{ye as MainLayoutComponent};
