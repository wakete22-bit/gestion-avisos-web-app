// ============================================================================
// MODAL SAFE AREAS - Zonas seguras para modales en Ionic
// ============================================================================
// Este archivo maneja las zonas seguras específicamente para modales
// SOLUCIONADO: Eliminados todos los márgenes innecesarios

// ============================================================================
// CONFIGURACIÓN BASE PARA MODALES
// ============================================================================

// Configuración global para todos los modales - SOLO en móvil
@media (max-width: 768px) {
  ion-modal {
    // Configuración de altura - solo lo necesario en móvil
    --height: 100vh;
    --max-height: 100vh;
    --min-height: 100vh;
    
    // Configurar el contenido del modal - SIN padding innecesario
    ion-content {
      --offset-top: 0;
      --offset-bottom: 0;
      --padding-top: 0;
      --padding-bottom: 0;
    }
    
    // Header del modal - SIN padding adicional
    ion-header {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-top: 0;
        --padding-bottom: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
    
    // Footer del modal - SIN padding adicional
    ion-footer {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-top: 0;
        --padding-bottom: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
  }
}

// ============================================================================
// CONFIGURACIÓN ESPECÍFICA PARA iOS
// ============================================================================

// Configuración específica para iOS (notch, Dynamic Island) - SOLO en móvil
@media (max-width: 768px) {
  .ios {
    ion-modal {
      // En iOS, usar altura completa
      --height: 100vh;
      --max-height: 100vh;
      --min-height: 100vh;
      
      ion-header {
        // En iOS, SIN padding - ion-header maneja las zonas seguras automáticamente
        padding: 0;
        margin: 0;
        
        ion-toolbar {
          --padding-top: 0;
          --padding-bottom: 0;
          --min-height: 56px;
          --height: 56px;
          margin: 0;
          padding: 0;
        }
      }
      
      ion-footer {
        // En iOS, SIN padding - ion-footer maneja las zonas seguras automáticamente
        padding: 0;
        margin: 0;
        
        ion-toolbar {
          --padding-top: 0;
          --padding-bottom: 0;
          --min-height: 56px;
          --height: 56px;
          margin: 0;
          padding: 0;
        }
      }
      
      ion-content {
        // Configurar offsets a 0 para iOS
        --offset-top: 0;
        --offset-bottom: 0;
        --padding-top: 0;
        --padding-bottom: 0;
      }
    }
  }
}

// ============================================================================
// CONFIGURACIÓN ESPECÍFICA PARA ANDROID
// ============================================================================

// Configuración específica para Android - SOLO en móvil
@media (max-width: 768px) {
  .android {
    ion-modal {
      ion-header {
        // En Android, SIN padding - ion-header lo maneja automáticamente
        padding: 0;
        margin: 0;
        
        ion-toolbar {
          --padding-top: 0;
          --min-height: 56px;
          --height: 56px;
          margin: 0;
          padding: 0;
        }
      }
      
      ion-footer {
        // En Android, SIN padding - ion-footer lo maneja automáticamente
        padding: 0;
        margin: 0;
        
        ion-toolbar {
          --padding-bottom: 0;
          --min-height: 56px;
          --height: 56px;
          margin: 0;
          padding: 0;
        }
      }
    }
  }
}

// ============================================================================
// MODALES ESPECÍFICOS - TODOS SIN PADDING ADICIONAL
// ============================================================================

// Modal para crear aviso - SOLO en móvil
@media (max-width: 768px) {
  ion-modal.modal-crear-aviso {
    ion-header {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-top: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
    
    ion-footer {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-bottom: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
  }
}

// Modal para crear cliente - SOLO en móvil
@media (max-width: 768px) {
  ion-modal.modal-crear-cliente {
    ion-header {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-top: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
    
    ion-footer {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-bottom: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
  }
}

// Modal para ver albarán - SOLO en móvil
@media (max-width: 768px) {
  ion-modal.modal-ver-albaran {
    ion-header {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-top: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
    
    ion-footer {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-bottom: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
  }
}

// Modal para hacer albarán
ion-modal.modal-hacer-albaran {
  --width: 95%;
  --height: 90%;
  --max-width: 1400px;
  --max-height: 90vh;
  --border-radius: 16px;
  --background: #ffffff;
  --box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

  // Ajustes para diferentes tamaños de pantalla
  @media (min-width: 1200px) {
    --width: 90%;
    --height: 85%;
    --max-width: 1600px;
    --max-height: 85vh;
  }

  @media (min-width: 1600px) {
    --width: 85%;
    --height: 80%;
    --max-width: 1800px;
    --max-height: 80vh;
  }

  // Asegurar que el contenido del modal sea visible
  ion-content {
    --background: transparent;
    --color: #1f2937;
  }

  // Asegurar que el modal se muestre correctamente en dispositivos móviles
  @media (max-width: 768px) {
    --width: 100%;
    --height: 100%;
    --max-width: 100vw;
    --max-height: 100vh;
    --border-radius: 0;
  }
}

// Modal para crear factura - SOLO en móvil
@media (max-width: 768px) {
  ion-modal.modal-crear-factura {
    ion-header {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-top: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
    
    ion-footer {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-bottom: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
  }
}

// Modal para hacer albarán - Estilos específicos para el nuevo HTML personalizado
ion-modal.modal-hacer-albaran {
  --background: #ffffff;
  
  // Asegurar que el contenido sea visible
  ion-content {
    --background: transparent;
    --color: #1f2937;
  }
  
  // Estilos específicos para el HTML personalizado
  .hacer-albaran-modal {
    .modal-container {
      height: 100%;
      max-height: 90vh;
      background: #fff;
      border-radius: 16px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    .modal-header {
      background: #fff;
      border-bottom: 1px solid #e5e7eb;
      flex-shrink: 0;
    }

    .modal-body {
      background: #fff;
      flex: 1;
    }

    .modal-footer {
      background: #fff;
      border-top: 1px solid #e5e7eb;
      flex-shrink: 0;
    }
  }
}

// Modal para crear presupuesto - SOLO en móvil
@media (max-width: 768px) {
  ion-modal.modal-crear-presupuesto {
    ion-header {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-top: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
    
    ion-footer {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-bottom: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
  }
}

// Modal para crear técnico - SOLO en móvil
@media (max-width: 768px) {
  ion-modal.modal-crear-tecnico {
    ion-header {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-top: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
    
    ion-footer {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-bottom: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
  }
}

// Modal para crear producto - SOLO en móvil
@media (max-width: 768px) {
  ion-modal.modal-crear-producto {
    ion-header {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-top: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
    
    ion-footer {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-bottom: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
  }
}

// ============================================================================
// MODALES FULLSCREEN
// ============================================================================

// Modal fullscreen para móviles
ion-modal.modal-fullscreen {
  --width: 100vw;
  --height: 100vh;
  --max-width: 100vw;
  --max-height: 100vh;
  --min-width: 100vw;
  --min-height: 100vh;
  --border-radius: 0;
  --box-shadow: none;
  
  ion-header {
    padding: 0;
    margin: 0;
    
    ion-toolbar {
      --padding-top: 0;
      --min-height: 56px;
      --height: 56px;
      margin: 0;
      padding: 0;
    }
  }
  
  ion-footer {
    padding: 0;
    margin: 0;
    
    ion-toolbar {
      --padding-bottom: 0;
      --min-height: 56px;
      --height: 56px;
      margin: 0;
      padding: 0;
    }
  }
}

// ============================================================================
// MODALES LATERALES
// ============================================================================

// Modal lateral para escritorio - SOLO en móvil
@media (max-width: 768px) {
  ion-modal.side-modal {
    --width: 420px;
    --height: 100vh;
    --border-radius: 0;
    --box-shadow: -4px 0 24px rgba(0,0,0,0.08);
    align-items: flex-end;
    justify-content: flex-end;
    
    ion-header {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-top: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
    
    ion-footer {
      padding: 0;
      margin: 0;
      
      ion-toolbar {
        --padding-bottom: 0;
        --min-height: 56px;
        --height: 56px;
        margin: 0;
        padding: 0;
      }
    }
  }
}

// ============================================================================
// CONFIGURACIÓN PARA PWA STANDALONE
// ============================================================================

@media all and (display-mode: standalone) {
  @media (max-width: 768px) {
    ion-modal {
      --height: 100vh;
      --max-height: 100vh;
      --min-height: 100vh;
      
      ion-header {
        padding: 0;
        margin: 0;
      }
      
      ion-footer {
        padding: 0;
        margin: 0;
      }
    }
  }
}

// ============================================================================
// FALLBACKS PARA NAVEGADORES ANTIGUOS
// ============================================================================

@supports not (padding-top: env(safe-area-inset-top)) {
  @media (max-width: 768px) {
    ion-modal {
      --height: 100vh;
      --max-height: 100vh;
      --min-height: 100vh;
      
      ion-header {
        // Solo en navegadores antiguos, añadir padding mínimo
        padding-top: 20px;
      }
      
      ion-footer {
        // Solo en navegadores antiguos, añadir padding mínimo
        padding-bottom: 20px;
      }
    }
  }
}

// ============================================================================
// UTILIDADES PARA MODALES
// ============================================================================

// Clase para modales con zonas seguras - SOLO en móvil
@media (max-width: 768px) {
  .modal-safe {
    ion-header {
      padding: 0;
      margin: 0;
    }
    
    ion-footer {
      padding: 0;
      margin: 0;
    }
    
    ion-content {
      --offset-top: 0;
      --offset-bottom: 0;
    }
  }

  // Clase para modales con header seguro
  .modal-header-safe {
    ion-header {
      padding: 0;
      margin: 0;
    }
    
    ion-content {
      --offset-top: 0;
    }
  }

  // Clase para modales con footer seguro
  .modal-footer-safe {
    ion-footer {
      padding: 0;
      margin: 0;
    }
    
    ion-content {
      --offset-bottom: 0;
    }
  }
}

// ============================================================================
// RESPONSIVE PARA MODALES
// ============================================================================

@media (max-width: 768px) {
  ion-modal {
    --width: 100vw !important;
    --height: 100vh !important;
    --max-width: 100vw !important;
    --max-height: 100vh !important;
    --min-width: 100vw !important;
    --min-height: 100vh !important;
    --border-radius: 0 !important;
    --box-shadow: none !important;
  }
  
  ion-modal.side-modal {
    --width: 100vw !important;
    --height: 100vh !important;
  }
}

@media (max-width: 480px) {
  ion-modal {
    ion-header {
      padding: 0;
      margin: 0;
    }
    
    ion-footer {
      padding: 0;
      margin: 0;
    }
  }
}
