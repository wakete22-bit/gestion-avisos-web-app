// ============================================================================
// SAFE AREAS UTILITIES
// ============================================================================
// Utilidades para manejar zonas seguras en dispositivos móviles
// Compatible con Android (navigation bar) e iOS (notch, home indicator)

// Variables CSS para zonas seguras
:root {
  // Valores por defecto para navegadores que no soportan env()
  --safe-area-top: 0px;
  --safe-area-bottom: 0px;
  --safe-area-left: 0px;
  --safe-area-right: 0px;
  
  // Valores dinámicos usando env() cuando esté disponible
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);
  
  // Márgenes adicionales para mejor UX
  --safe-margin-top: calc(var(--safe-area-top) + 12px);
  --safe-margin-bottom: calc(var(--safe-area-bottom) + 16px);
  --safe-margin-left: calc(var(--safe-area-left) + 16px);
  --safe-margin-right: calc(var(--safe-area-right) + 16px);
}

// ============================================================================
// CLASES UTILITARIAS PARA ZONAS SEGURAS
// ============================================================================

// Contenido principal con zona segura superior
.content-safe-top {
  padding-top: var(--safe-area-top);
}

// Contenido principal con zona segura inferior
.content-safe-bottom {
  padding-bottom: var(--safe-area-bottom);
}

// Contenido con zonas seguras superior e inferior
.content-safe-vertical {
  padding-top: var(--safe-area-top);
  padding-bottom: var(--safe-area-bottom);
}

// Contenido con todas las zonas seguras
.content-safe-all {
  padding-top: var(--safe-area-top);
  padding-bottom: var(--safe-area-bottom);
  padding-left: var(--safe-area-left);
  padding-right: var(--safe-area-right);
}

// ============================================================================
// FOOTERS Y CONTENEDORES DE BOTONES
// ============================================================================

// Footer con zona segura inferior
.footer-safe {
  padding-bottom: var(--safe-margin-bottom);
}

// Footer con zona segura inferior y márgenes laterales
.footer-safe-horizontal {
  padding-bottom: var(--safe-margin-bottom);
  padding-left: var(--safe-margin-left);
  padding-right: var(--safe-margin-right);
}

// Contenedor de botones con zona segura inferior
.button-container-safe {
  padding-bottom: var(--safe-margin-bottom);
}

// Contenedor de botones flotantes (FAB) con zona segura
.fab-container-safe {
  bottom: var(--safe-margin-bottom);
  right: var(--safe-margin-right);
}

// ============================================================================
// HEADERS Y NAVEGACIÓN
// ============================================================================

// Header con zona segura superior
.header-safe {
  padding-top: var(--safe-margin-top);
}

// Header con zona segura superior y márgenes laterales
.header-safe-horizontal {
  padding-top: var(--safe-margin-top);
  padding-left: var(--safe-margin-left);
  padding-right: var(--safe-margin-right);
}

// Barra de navegación inferior con zona segura
.bottom-nav-safe {
  padding-bottom: var(--safe-area-bottom);
}

// ============================================================================
// MODALES Y OVERLAYS
// ============================================================================

// Modal con zonas seguras
.modal-safe {
  padding-top: var(--safe-area-top);
  padding-bottom: var(--safe-area-bottom);
  padding-left: var(--safe-area-left);
  padding-right: var(--safe-area-right);
}

// Overlay con zonas seguras
.overlay-safe {
  padding-top: var(--safe-area-top);
  padding-bottom: var(--safe-area-bottom);
}

// ============================================================================
// UTILIDADES ESPECÍFICAS PARA PLATAFORMAS
// ============================================================================

// Utilidades específicas para iOS
.ios {
  .content-safe-top {
    padding-top: calc(var(--safe-area-top) + 8px);
  }
  
  .footer-safe {
    padding-bottom: calc(var(--safe-area-bottom) + 20px);
  }
}

// Utilidades específicas para Android
.android {
  .content-safe-top {
    padding-top: calc(var(--safe-area-top) + 4px);
  }
  
  .footer-safe {
    padding-bottom: calc(var(--safe-area-bottom) + 16px);
  }
}

// ============================================================================
// FALLBACKS PARA NAVEGADORES ANTIGUOS
// ============================================================================

// Fallback para navegadores que no soportan env()
@supports not (padding-top: env(safe-area-inset-top)) {
  :root {
    --safe-area-top: 20px;
    --safe-area-bottom: 20px;
    --safe-area-left: 0px;
    --safe-area-right: 0px;
  }
  
  // Ajustes específicos para dispositivos móviles conocidos
  @media screen and (max-width: 768px) {
    :root {
      --safe-area-top: 24px;
      --safe-area-bottom: 24px;
    }
  }
  
  // Ajustes para dispositivos muy pequeños
  @media screen and (max-width: 480px) {
    :root {
      --safe-area-top: 28px;
      --safe-area-bottom: 28px;
    }
  }
}

// ============================================================================
// UTILIDADES RESPONSIVAS
// ============================================================================

// Ajustes para diferentes tamaños de pantalla
@media screen and (min-width: 768px) {
  // En pantallas grandes, reducir las zonas seguras
  :root {
    --safe-margin-top: calc(var(--safe-area-top) + 8px);
    --safe-margin-bottom: calc(var(--safe-area-bottom) + 12px);
  }
}

@media screen and (max-width: 480px) {
  // En pantallas muy pequeñas, aumentar las zonas seguras
  :root {
    --safe-margin-top: calc(var(--safe-area-top) + 16px);
    --safe-margin-bottom: calc(var(--safe-area-bottom) + 20px);
  }
}

// ============================================================================
// UTILIDADES PARA PWA STANDALONE
// ============================================================================

// Ajustes específicos para PWA en modo standalone
@media all and (display-mode: standalone) {
  :root {
    --safe-area-top: calc(env(safe-area-inset-top, 0px) + 8px);
    --safe-area-bottom: calc(env(safe-area-inset-bottom, 0px) + 12px);
  }
  
  .header-safe {
    padding-top: calc(var(--safe-area-top) + 8px);
  }
  
  .footer-safe {
    padding-bottom: calc(var(--safe-area-bottom) + 16px);
  }
}

// ============================================================================
// UTILIDADES PARA ORIENTACIÓN
// ============================================================================

// Ajustes para orientación landscape
@media screen and (orientation: landscape) {
  .content-safe-top {
    padding-top: calc(var(--safe-area-top) + 4px);
  }
  
  .footer-safe {
    padding-bottom: calc(var(--safe-area-bottom) + 12px);
  }
}

// ============================================================================
// UTILIDADES PARA DARK MODE
// ============================================================================

// Ajustes para modo oscuro
@media (prefers-color-scheme: dark) {
  .content-safe-top,
  .content-safe-bottom,
  .content-safe-vertical,
  .content-safe-all {
    // Mantener las mismas zonas seguras en modo oscuro
  }
}
